2025-11-28T17:39:47.9015707Z ##[group]Run pytest -m "not integration" --cov --cov-report=xml --cov-report=term
2025-11-28T17:39:47.9016273Z [36;1mpytest -m "not integration" --cov --cov-report=xml --cov-report=term[0m
2025-11-28T17:39:47.9049896Z shell: /usr/bin/bash -e {0}
2025-11-28T17:39:47.9050381Z env:
2025-11-28T17:39:47.9050629Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.12/x64
2025-11-28T17:39:47.9051038Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib/pkgconfig
2025-11-28T17:39:47.9051450Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2025-11-28T17:39:47.9051813Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2025-11-28T17:39:47.9052169Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2025-11-28T17:39:47.9052536Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib
2025-11-28T17:39:47.9053120Z   DATABASE_URL: ***localhost:5432/test_rae
2025-11-28T17:39:47.9053408Z   REDIS_URL: redis://localhost:6379/0
2025-11-28T17:39:47.9053668Z   QDRANT_URL: http://localhost:6333
2025-11-28T17:39:47.9053942Z   RAE_VECTOR_BACKEND: qdrant
2025-11-28T17:39:47.9054146Z ##[endgroup]
2025-11-28T17:40:01.3129742Z [1m============================= test session starts ==============================[0m
2025-11-28T17:40:01.3133344Z platform linux -- Python 3.12.12, pytest-9.0.1, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.12.12/x64/bin/python
2025-11-28T17:40:01.3134299Z cachedir: .pytest_cache
2025-11-28T17:40:01.3134843Z rootdir: /home/runner/work/RAE-agentic-memory/RAE-agentic-memory
2025-11-28T17:40:01.3135458Z configfile: pytest.ini
2025-11-28T17:40:01.3136254Z testpaths: apps/memory_api/tests, integrations/context-watcher/tests, tests, test_enterprise_features.py
2025-11-28T17:40:01.3137273Z plugins: anyio-4.11.0, cov-7.0.0, asyncio-1.3.0, mock-3.15.1
2025-11-28T17:40:01.3138279Z asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
2025-11-28T17:40:02.9849925Z [1mcollecting ... [0mcollected 276 items / 11 deselected / 7 skipped / 265 selected
2025-11-28T17:40:02.9974076Z 
2025-11-28T17:40:02.9975264Z apps/memory_api/tests/test_analytics.py::test_get_tenant_stats_cached [32mPASSED[0m[33m [  0%][0m
2025-11-28T17:40:03.0044956Z apps/memory_api/tests/test_analytics.py::test_get_tenant_stats_uncached [32mPASSED[0m[33m [  0%][0m
2025-11-28T17:40:03.0085420Z apps/memory_api/tests/test_analytics.py::test_get_memory_stats [32mPASSED[0m[33m    [  1%][0m
2025-11-28T17:40:03.0125459Z apps/memory_api/tests/test_analytics.py::test_get_query_stats [32mPASSED[0m[33m     [  1%][0m
2025-11-28T17:40:03.0169860Z apps/memory_api/tests/test_analytics.py::test_get_graph_stats [32mPASSED[0m[33m     [  1%][0m
2025-11-28T17:40:03.0211630Z apps/memory_api/tests/test_analytics.py::test_get_reflection_stats [32mPASSED[0m[33m [  2%][0m
2025-11-28T17:40:03.0261691Z apps/memory_api/tests/test_analytics.py::test_get_api_usage_stats [32mPASSED[0m[33m [  2%][0m
2025-11-28T17:40:03.0321611Z apps/memory_api/tests/test_analytics.py::test_get_performance_stats [32mPASSED[0m[33m [  3%][0m
2025-11-28T17:40:03.0370351Z apps/memory_api/tests/test_analytics.py::test_get_cost_stats [32mPASSED[0m[33m      [  3%][0m
2025-11-28T17:40:03.0410723Z apps/memory_api/tests/test_analytics.py::test_calculate_graph_density [32mPASSED[0m[33m [  3%][0m
2025-11-28T17:40:03.0458150Z apps/memory_api/tests/test_analytics.py::test_cache_operations [32mPASSED[0m[33m    [  4%][0m
2025-11-28T17:40:03.0505034Z apps/memory_api/tests/test_analytics.py::test_generate_report [32mPASSED[0m[33m     [  4%][0m
2025-11-28T17:40:03.0561480Z apps/memory_api/tests/test_analytics.py::test_get_real_time_metrics [32mPASSED[0m[33m [  4%][0m
2025-11-28T17:40:03.0612903Z apps/memory_api/tests/test_analytics.py::test_get_usage_alerts [32mPASSED[0m[33m    [  5%][0m
2025-11-28T17:40:03.0666655Z apps/memory_api/tests/test_analytics.py::test_mock_db_methods [32mPASSED[0m[33m     [  5%][0m
2025-11-28T17:40:03.0682725Z apps/memory_api/tests/test_api_client.py::test_classify_network_error [32mPASSED[0m[33m [  6%][0m
2025-11-28T17:40:03.0702436Z apps/memory_api/tests/test_api_client.py::test_classify_timeout_error [32mPASSED[0m[33m [  6%][0m
2025-11-28T17:40:03.0716278Z apps/memory_api/tests/test_api_client.py::test_classify_rate_limit [32mPASSED[0m[33m [  6%][0m
2025-11-28T17:40:03.0729685Z apps/memory_api/tests/test_api_client.py::test_classify_authentication_error [32mPASSED[0m[33m [  7%][0m
2025-11-28T17:40:03.0762604Z apps/memory_api/tests/test_api_client.py::test_circuit_breaker_closed_success [32mPASSED[0m[33m [  7%][0m
2025-11-28T17:40:03.0804291Z apps/memory_api/tests/test_api_client.py::test_circuit_breaker_opens_on_failures [32mPASSED[0m[33m [  7%][0m
2025-11-28T17:40:03.0851283Z apps/memory_api/tests/test_api_client.py::test_circuit_breaker_rejects_when_open [32mPASSED[0m[33m [  8%][0m
2025-11-28T17:40:03.0891874Z apps/memory_api/tests/test_api_client.py::test_circuit_breaker_half_open_recovery [32mPASSED[0m[33m [  8%][0m
2025-11-28T17:40:03.0913029Z apps/memory_api/tests/test_api_client.py::test_cache_set_and_get [32mPASSED[0m[33m  [  9%][0m
2025-11-28T17:40:03.0937703Z apps/memory_api/tests/test_api_client.py::test_cache_miss [32mPASSED[0m[33m         [  9%][0m
2025-11-28T17:40:04.2968027Z apps/memory_api/tests/test_api_client.py::test_cache_expiration [32mPASSED[0m[33m   [  9%][0m
2025-11-28T17:40:04.2987042Z apps/memory_api/tests/test_api_client.py::test_cache_invalidation [32mPASSED[0m[33m [ 10%][0m
2025-11-28T17:40:04.3006849Z apps/memory_api/tests/test_api_client.py::test_cache_clear [32mPASSED[0m[33m        [ 10%][0m
2025-11-28T17:40:04.6287012Z apps/memory_api/tests/test_api_client.py::test_retry_on_network_error [32mPASSED[0m[33m [ 10%][0m
2025-11-28T17:40:05.3590581Z apps/memory_api/tests/test_api_client.py::test_retry_exhausted [32mPASSED[0m[33m    [ 11%][0m
2025-11-28T17:40:05.3863126Z apps/memory_api/tests/test_api_client.py::test_no_retry_on_client_error [32mPASSED[0m[33m [ 11%][0m
2025-11-28T17:40:05.3882533Z apps/memory_api/tests/test_api_client.py::test_exponential_backoff [32mPASSED[0m[33m [ 12%][0m
2025-11-28T17:40:05.4140547Z apps/memory_api/tests/test_api_client.py::test_get_request [32mPASSED[0m[33m        [ 12%][0m
2025-11-28T17:40:05.4398541Z apps/memory_api/tests/test_api_client.py::test_post_request [32mPASSED[0m[33m       [ 12%][0m
2025-11-28T17:40:05.4640596Z apps/memory_api/tests/test_api_client.py::test_client_statistics [32mPASSED[0m[33m  [ 13%][0m
2025-11-28T17:40:05.4886740Z apps/memory_api/tests/test_api_client.py::test_reset_statistics [32mPASSED[0m[33m   [ 13%][0m
2025-11-28T17:40:05.4900535Z apps/memory_api/tests/test_api_e2e.py::TestMemoryAPISmoke::test_store_and_query_memory_e2e [33mSKIPPED[0m[33m [ 13%][0m
2025-11-28T17:40:05.4911513Z apps/memory_api/tests/test_api_e2e.py::TestMemoryAPISmoke::test_hybrid_search_e2e [33mSKIPPED[0m[33m [ 14%][0m
2025-11-28T17:40:05.4924324Z apps/memory_api/tests/test_api_e2e.py::TestHealthCheckSmoke::test_health_check [33mSKIPPED[0m[33m [ 14%][0m
2025-11-28T17:40:05.5757825Z apps/memory_api/tests/test_api_e2e.py::TestAPIErrorHandling::test_missing_tenant_header [32mPASSED[0m[33m [ 15%][0m
2025-11-28T17:40:05.5811580Z apps/memory_api/tests/test_api_e2e.py::TestAPIErrorHandling::test_invalid_json [32mPASSED[0m[33m [ 15%][0m
2025-11-28T17:40:06.4577276Z apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_success [32mPASSED[0m[33m [ 15%][0m
2025-11-28T17:40:07.5311568Z apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_with_mini_model [32mPASSED[0m[33m [ 16%][0m
2025-11-28T17:40:07.5335921Z apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_exception_handling [32mPASSED[0m[33m [ 16%][0m
2025-11-28T17:40:08.8865475Z apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_pool_cleanup [32mPASSED[0m[33m [ 16%][0m
2025-11-28T17:40:08.8914751Z apps/memory_api/tests/test_background_tasks.py::TestProcessGraphExtractionQueue::test_queue_processor_schedules_tasks [32mPASSED[0m[33m [ 17%][0m
2025-11-28T17:40:08.8945943Z apps/memory_api/tests/test_background_tasks.py::TestProcessGraphExtractionQueue::test_queue_processor_no_pending_memories [32mPASSED[0m[33m [ 17%][0m
2025-11-28T17:40:08.8982372Z apps/memory_api/tests/test_background_tasks.py::TestGenerateReflection::test_generate_reflection_calls_engine [32mPASSED[0m[33m [ 18%][0m
2025-11-28T17:40:08.9018695Z apps/memory_api/tests/test_background_tasks.py::TestMemoryDecay::test_apply_decay_updates_strength [32mPASSED[0m[33m [ 18%][0m
2025-11-28T17:40:08.9058015Z apps/memory_api/tests/test_background_tasks.py::TestPruneOldMemories::test_prune_respects_retention_days [32mPASSED[0m[33m [ 18%][0m
2025-11-28T17:40:08.9084146Z apps/memory_api/tests/test_background_tasks.py::TestPruneOldMemories::test_prune_disabled_when_retention_zero [32mPASSED[0m[33m [ 19%][0m
2025-11-28T17:40:08.9147301Z apps/memory_api/tests/test_dashboard_websocket.py::test_websocket_connect [32mPASSED[0m[33m [ 19%][0m
2025-11-28T17:40:08.9205802Z apps/memory_api/tests/test_dashboard_websocket.py::test_websocket_disconnect [32mPASSED[0m[33m [ 20%][0m
2025-11-28T17:40:08.9252160Z apps/memory_api/tests/test_dashboard_websocket.py::test_subscription_filtering [32mPASSED[0m[33m [ 20%][0m
2025-11-28T17:40:08.9296056Z apps/memory_api/tests/test_dashboard_websocket.py::test_broadcast_to_tenant [32mPASSED[0m[33m [ 20%][0m
2025-11-28T17:40:08.9353852Z apps/memory_api/tests/test_dashboard_websocket.py::test_broadcast_all [32mPASSED[0m[33m [ 21%][0m
2025-11-28T17:40:08.9388563Z apps/memory_api/tests/test_dashboard_websocket.py::test_collect_system_metrics [32mPASSED[0m[33m [ 21%][0m
2025-11-28T17:40:08.9419787Z apps/memory_api/tests/test_dashboard_websocket.py::test_metrics_changed_significantly [32mPASSED[0m[33m [ 21%][0m
2025-11-28T17:40:08.9454563Z apps/memory_api/tests/test_dashboard_websocket.py::test_check_system_health [32mPASSED[0m[33m [ 22%][0m
2025-11-28T17:40:08.9498286Z apps/memory_api/tests/test_dashboard_websocket.py::test_health_monitoring_failure [32mPASSED[0m[33m [ 22%][0m
2025-11-28T17:40:08.9572134Z apps/memory_api/tests/test_dashboard_websocket.py::test_broadcast_memory_created [32mPASSED[0m[33m [ 23%][0m
2025-11-28T17:40:08.9624251Z apps/memory_api/tests/test_dashboard_websocket.py::test_broadcast_quality_alert [32mPASSED[0m[33m [ 23%][0m
2025-11-28T17:40:08.9647167Z apps/memory_api/tests/test_evaluation_suite.py::test_mrr_calculation [32mPASSED[0m[33m [ 23%][0m
2025-11-28T17:40:08.9669305Z apps/memory_api/tests/test_evaluation_suite.py::test_ndcg_calculation [32mPASSED[0m[33m [ 24%][0m
2025-11-28T17:40:08.9691647Z apps/memory_api/tests/test_evaluation_suite.py::test_precision_recall [32mPASSED[0m[33m [ 24%][0m
2025-11-28T17:40:08.9730462Z apps/memory_api/tests/test_evaluation_suite.py::test_kolmogorov_smirnov_test [32mPASSED[0m[33m [ 24%][0m
2025-11-28T17:40:08.9760710Z apps/memory_api/tests/test_evaluation_suite.py::test_psi_calculation [32mPASSED[0m[33m [ 25%][0m
2025-11-28T17:40:08.9785161Z apps/memory_api/tests/test_evaluation_suite.py::test_drift_severity_classification [32mPASSED[0m[33m [ 25%][0m
2025-11-28T17:40:08.9864273Z apps/memory_api/tests/test_evaluation_suite.py::test_drift_detection_no_data [32mPASSED[0m[33m [ 26%][0m
2025-11-28T17:40:08.9886951Z apps/memory_api/tests/test_evaluation_suite.py::test_ab_test_traffic_validation [32mPASSED[0m[33m [ 26%][0m
2025-11-28T17:40:08.9921799Z apps/memory_api/tests/test_event_triggers.py::test_process_event [32mPASSED[0m[33m  [ 26%][0m
2025-11-28T17:40:08.9946397Z apps/memory_api/tests/test_event_triggers.py::test_evaluate_simple_condition [32mPASSED[0m[33m [ 27%][0m
2025-11-28T17:40:08.9970895Z apps/memory_api/tests/test_event_triggers.py::test_evaluate_condition_group_and [32mPASSED[0m[33m [ 27%][0m
2025-11-28T17:40:08.9995605Z apps/memory_api/tests/test_event_triggers.py::test_evaluate_condition_group_or [32mPASSED[0m[33m [ 27%][0m
2025-11-28T17:40:09.0020322Z apps/memory_api/tests/test_event_triggers.py::test_nested_condition_groups [32mPASSED[0m[33m [ 28%][0m
2025-11-28T17:40:09.0046887Z apps/memory_api/tests/test_event_triggers.py::test_condition_operators [32mPASSED[0m[33m [ 28%][0m
2025-11-28T17:40:09.0073324Z apps/memory_api/tests/test_event_triggers.py::test_rate_limiting [32mPASSED[0m[33m  [ 29%][0m
2025-11-28T17:40:09.0098790Z apps/memory_api/tests/test_event_triggers.py::test_cooldown_period [32mPASSED[0m[33m [ 29%][0m
2025-11-28T17:40:09.0135557Z apps/memory_api/tests/test_event_triggers.py::test_execute_action [32mPASSED[0m[33m [ 29%][0m
2025-11-28T17:40:09.0164578Z apps/memory_api/tests/test_event_triggers.py::test_workflow_execution [32mPASSED[0m[33m [ 30%][0m
2025-11-28T17:40:09.0184813Z apps/memory_api/tests/test_graph_algorithms.py::test_graph_node [32mPASSED[0m[33m   [ 30%][0m
2025-11-28T17:40:09.0204449Z apps/memory_api/tests/test_graph_algorithms.py::test_graph_edge [32mPASSED[0m[33m   [ 30%][0m
2025-11-28T17:40:09.0224583Z apps/memory_api/tests/test_graph_algorithms.py::test_knowledge_graph [32mPASSED[0m[33m [ 31%][0m
2025-11-28T17:40:09.0267286Z apps/memory_api/tests/test_graph_algorithms.py::test_service_load_tenant_graph [32mPASSED[0m[33m [ 31%][0m
2025-11-28T17:40:09.0311868Z apps/memory_api/tests/test_graph_algorithms.py::test_pagerank [32mPASSED[0m[33m     [ 32%][0m
2025-11-28T17:40:09.0356437Z apps/memory_api/tests/test_graph_algorithms.py::test_shortest_path [32mPASSED[0m[33m [ 32%][0m
2025-11-28T17:40:09.0399158Z apps/memory_api/tests/test_graph_algorithms.py::test_find_all_paths [32mPASSED[0m[33m [ 32%][0m
2025-11-28T17:40:09.0440781Z apps/memory_api/tests/test_graph_algorithms.py::test_find_related_entities [32mPASSED[0m[33m [ 33%][0m
2025-11-28T17:40:09.0479252Z apps/memory_api/tests/test_graph_algorithms.py::test_graph_summary [32mPASSED[0m[33m [ 33%][0m
2025-11-28T17:40:09.0546207Z apps/memory_api/tests/test_graph_algorithms.py::test_community_detection [32mPASSED[0m[33m [ 33%][0m
2025-11-28T17:40:09.0588057Z apps/memory_api/tests/test_graph_algorithms.py::test_calculate_centrality [32mPASSED[0m[33m [ 34%][0m
2025-11-28T17:40:09.0627798Z apps/memory_api/tests/test_graph_algorithms.py::test_graph_density [32mPASSED[0m[33m [ 34%][0m
2025-11-28T17:40:09.0668259Z apps/memory_api/tests/test_graph_algorithms.py::test_subgraph_extraction [32mPASSED[0m[33m [ 35%][0m
2025-11-28T17:40:09.8424961Z apps/memory_api/tests/test_openapi.py::test_openapi_schema [32mPASSED[0m[33m        [ 35%][0m
2025-11-28T17:40:09.8438514Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_tenant_tier_enum [32mPASSED[0m[33m [ 35%][0m
2025-11-28T17:40:09.8452203Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_tenant_config_defaults [32mPASSED[0m[33m [ 36%][0m
2025-11-28T17:40:09.8466544Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_tenant_creation [32mPASSED[0m[33m [ 36%][0m
2025-11-28T17:40:09.8480187Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_get_default_config_for_free_tier [32mPASSED[0m[33m [ 36%][0m
2025-11-28T17:40:09.8493147Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_get_default_config_for_pro_tier [32mPASSED[0m[33m [ 37%][0m
2025-11-28T17:40:09.8506099Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_get_default_config_for_enterprise_tier [32mPASSED[0m[33m [ 37%][0m
2025-11-28T17:40:09.8520110Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_has_quota_available_memories [32mPASSED[0m[33m [ 38%][0m
2025-11-28T17:40:09.8533696Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_has_quota_available_unlimited [32mPASSED[0m[33m [ 38%][0m
2025-11-28T17:40:09.8547039Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_increment_usage [32mPASSED[0m[33m [ 38%][0m
2025-11-28T17:40:09.8562523Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_is_feature_enabled [32mPASSED[0m[33m [ 39%][0m
2025-11-28T17:40:09.8575087Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_enum_values [32mPASSED[0m[33m [ 39%][0m
2025-11-28T17:40:09.8587866Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_levels [32mPASSED[0m[33m [ 40%][0m
2025-11-28T17:40:09.8600707Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_owner [32mPASSED[0m[33m [ 40%][0m
2025-11-28T17:40:09.8613398Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_admin [32mPASSED[0m[33m [ 40%][0m
2025-11-28T17:40:09.8626069Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_developer [32mPASSED[0m[33m [ 41%][0m
2025-11-28T17:40:09.8638746Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_analyst [32mPASSED[0m[33m [ 41%][0m
2025-11-28T17:40:09.8651633Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_viewer [32mPASSED[0m[33m [ 41%][0m
2025-11-28T17:40:09.8664162Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_permission_model [32mPASSED[0m[33m [ 42%][0m
2025-11-28T17:40:09.8677469Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_creation [32mPASSED[0m[33m [ 42%][0m
2025-11-28T17:40:09.8691735Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_expiration [32mPASSED[0m[33m [ 43%][0m
2025-11-28T17:40:09.8705548Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_project_access [32mPASSED[0m[33m [ 43%][0m
2025-11-28T17:40:09.8718814Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_can_perform [32mPASSED[0m[33m [ 43%][0m
2025-11-28T17:40:09.8732581Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_can_perform_with_project [32mPASSED[0m[33m [ 44%][0m
2025-11-28T17:40:09.8745451Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_hierarchy_comparison [32mPASSED[0m[33m [ 44%][0m
2025-11-28T17:40:09.8758758Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_can_assign_role [32mPASSED[0m[33m [ 44%][0m
2025-11-28T17:40:09.8774439Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_can_modify_user [32mPASSED[0m[33m [ 45%][0m
2025-11-28T17:40:09.8787477Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginMetadata::test_metadata_creation [32mPASSED[0m[33m [ 45%][0m
2025-11-28T17:40:09.8800589Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginMetadata::test_metadata_to_dict [32mPASSED[0m[33m [ 46%][0m
2025-11-28T17:40:09.8824418Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_plugin_initialization [32mPASSED[0m[33m [ 46%][0m
2025-11-28T17:40:09.8844922Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_plugin_shutdown [32mPASSED[0m[33m [ 46%][0m
2025-11-28T17:40:09.8865018Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_plugin_health_check [32mPASSED[0m[33m [ 47%][0m
2025-11-28T17:40:09.8884874Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_hook_execution [32mPASSED[0m[33m [ 47%][0m
2025-11-28T17:40:09.8905155Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_transform_hook [32mPASSED[0m[33m [ 47%][0m
2025-11-28T17:40:09.8918429Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_registry_creation [32mPASSED[0m[33m [ 48%][0m
2025-11-28T17:40:09.8935410Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_register_plugin [32mPASSED[0m[33m [ 48%][0m
2025-11-28T17:40:09.8953230Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_unregister_plugin [32mPASSED[0m[33m [ 49%][0m
2025-11-28T17:40:09.8968586Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_list_plugins [32mPASSED[0m[33m [ 49%][0m
2025-11-28T17:40:09.8984664Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_get_plugins_for_hook [32mPASSED[0m[33m [ 49%][0m
2025-11-28T17:40:09.9014221Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_initialize_all [32mPASSED[0m[33m [ 50%][0m
2025-11-28T17:40:09.9039227Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_shutdown_all [32mPASSED[0m[33m [ 50%][0m
2025-11-28T17:40:09.9063892Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_execute_hook [32mPASSED[0m[33m [ 50%][0m
2025-11-28T17:40:09.9087080Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_execute_transform_hook [32mPASSED[0m[33m [ 51%][0m
2025-11-28T17:40:09.9109586Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_health_check_all [32mPASSED[0m[33m [ 51%][0m
2025-11-28T17:40:09.9122994Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_get_global_registry [32mPASSED[0m[33m [ 52%][0m
2025-11-28T17:40:09.9135707Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginHooks::test_hook_values [32mPASSED[0m[33m [ 52%][0m
2025-11-28T17:40:09.9148770Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginHooks::test_all_hooks_defined [32mPASSED[0m[33m [ 52%][0m
2025-11-28T17:40:09.9164934Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginDisabling::test_disabled_plugin_not_executed [32mPASSED[0m[33m [ 53%][0m
2025-11-28T17:40:09.9188756Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginDisabling::test_disabled_plugin_not_initialized [32mPASSED[0m[33m [ 53%][0m
2025-11-28T17:40:09.9215368Z apps/memory_api/tests/test_phase2_plugins.py::TestMultiplePlugins::test_multiple_plugins_same_hook [32mPASSED[0m[33m [ 53%][0m
2025-11-28T17:40:09.9243286Z apps/memory_api/tests/test_phase2_plugins.py::TestMultiplePlugins::test_plugin_chaining [32mPASSED[0m[33m [ 54%][0m
2025-11-28T17:40:10.2794028Z apps/memory_api/tests/test_reflective_flags.py::TestReflectiveMemoryFlags::test_reflective_memory_disabled_no_reflections [31mFAILED[0m[31m [ 54%][0m
2025-11-28T17:40:10.2842487Z apps/memory_api/tests/test_reflective_flags.py::TestReflectiveMemoryFlags::test_reflective_memory_enabled_retrieves_reflections [32mPASSED[0m[31m [ 55%][0m
2025-11-28T17:40:10.2878698Z apps/memory_api/tests/test_reflective_flags.py::TestReflectiveMemoryMode::test_lite_mode_uses_lower_limits [32mPASSED[0m[31m [ 55%][0m
2025-11-28T17:40:10.2916203Z apps/memory_api/tests/test_reflective_flags.py::TestReflectiveMemoryMode::test_full_mode_uses_higher_limits [32mPASSED[0m[31m [ 55%][0m
2025-11-28T17:40:10.2945565Z apps/memory_api/tests/test_reflective_flags.py::TestDreamingEnabled::test_dreaming_disabled_no_dreaming [32mPASSED[0m[31m [ 56%][0m
2025-11-28T17:40:10.3760364Z apps/memory_api/tests/test_reflective_flags.py::TestDreamingEnabled::test_dreaming_enabled_runs_dreaming [31mFAILED[0m[31m [ 56%][0m
2025-11-28T17:40:10.3794246Z apps/memory_api/tests/test_reflective_flags.py::TestSummarizationEnabled::test_summarization_disabled_no_summary [32mPASSED[0m[31m [ 56%][0m
2025-11-28T17:40:10.3833929Z apps/memory_api/tests/test_reflective_flags.py::TestSummarizationEnabled::test_summarization_enabled_creates_summary [32mPASSED[0m[31m [ 57%][0m
2025-11-28T17:40:10.3876077Z apps/memory_api/tests/test_reflective_flags.py::TestMaintenanceScheduler::test_maintenance_with_all_flags_disabled [32mPASSED[0m[31m [ 57%][0m
2025-11-28T17:40:10.3934482Z apps/memory_api/tests/test_reflective_flags.py::TestMaintenanceScheduler::test_maintenance_with_all_flags_enabled [32mPASSED[0m[31m [ 58%][0m
2025-11-28T17:40:10.3976327Z apps/memory_api/tests/test_temporal_graph.py::test_create_snapshot [32mPASSED[0m[31m [ 58%][0m
2025-11-28T17:40:10.4015399Z apps/memory_api/tests/test_temporal_graph.py::test_get_snapshot_at_time [32mPASSED[0m[31m [ 58%][0m
2025-11-28T17:40:10.4052840Z apps/memory_api/tests/test_temporal_graph.py::test_get_latest_snapshot [32mPASSED[0m[31m [ 59%][0m
2025-11-28T17:40:10.4099461Z apps/memory_api/tests/test_temporal_graph.py::test_record_change [32mPASSED[0m[31m  [ 59%][0m
2025-11-28T17:40:10.4136476Z apps/memory_api/tests/test_temporal_graph.py::test_get_changes_filters [32mPASSED[0m[31m [ 60%][0m
2025-11-28T17:40:10.4171787Z apps/memory_api/tests/test_temporal_graph.py::test_get_entity_history [32mPASSED[0m[31m [ 60%][0m
2025-11-28T17:40:10.4210230Z apps/memory_api/tests/test_temporal_graph.py::test_reconstruct_graph_at_time [32mPASSED[0m[31m [ 60%][0m
2025-11-28T17:40:10.4246325Z apps/memory_api/tests/test_temporal_graph.py::test_apply_change_logic [32mPASSED[0m[31m [ 61%][0m
2025-11-28T17:40:10.4282632Z apps/memory_api/tests/test_temporal_graph.py::test_compare_graphs [32mPASSED[0m[31m [ 61%][0m
2025-11-28T17:40:10.4322026Z apps/memory_api/tests/test_temporal_graph.py::test_get_evolution_timeline [32mPASSED[0m[31m [ 61%][0m
2025-11-28T17:40:10.4363302Z apps/memory_api/tests/test_temporal_graph.py::test_get_growth_metrics [32mPASSED[0m[31m [ 62%][0m
2025-11-28T17:40:10.4400799Z apps/memory_api/tests/test_temporal_graph.py::test_find_emerging_patterns [32mPASSED[0m[31m [ 62%][0m
2025-11-28T17:40:10.4443595Z apps/memory_api/tests/test_temporal_graph.py::test_cleanup_old_snapshots [32mPASSED[0m[31m [ 63%][0m
2025-11-28T17:40:10.5607782Z tests/api/v1/test_agent.py::test_agent_execute_direct [31mFAILED[0m[31m             [ 63%][0m
2025-11-28T17:40:10.6716880Z tests/api/v1/test_agent.py::test_agent_execute_with_context [31mFAILED[0m[31m       [ 63%][0m
2025-11-28T17:40:10.7820545Z tests/api/v1/test_agent.py::test_agent_execute_with_empty_prompt [31mFAILED[0m[31m  [ 64%][0m
2025-11-28T17:40:10.8949238Z tests/api/v1/test_agent.py::test_agent_execute_with_llm_error [31mFAILED[0m[31m     [ 64%][0m
2025-11-28T17:40:10.9019477Z tests/api/v1/test_cache.py::test_rebuild_cache [32mPASSED[0m[31m                    [ 64%][0m
2025-11-28T17:40:10.9220627Z tests/api/v1/test_governance.py::test_governance_overview_success [31mFAILED[0m[31m [ 65%][0m
2025-11-28T17:40:10.9414910Z tests/api/v1/test_governance.py::test_governance_overview_with_custom_days [31mFAILED[0m[31m [ 65%][0m
2025-11-28T17:40:10.9618742Z tests/api/v1/test_governance.py::test_governance_overview_error [31mFAILED[0m[31m   [ 66%][0m
2025-11-28T17:40:10.9840653Z tests/api/v1/test_governance.py::test_tenant_governance_stats_success [31mFAILED[0m[31m [ 66%][0m
2025-11-28T17:40:11.0045690Z tests/api/v1/test_governance.py::test_tenant_governance_stats_no_data [31mFAILED[0m[31m [ 66%][0m
2025-11-28T17:40:11.0268739Z tests/api/v1/test_governance.py::test_tenant_governance_stats_with_custom_period [31mFAILED[0m[31m [ 67%][0m
2025-11-28T17:40:11.0471874Z tests/api/v1/test_governance.py::test_tenant_budget_status_success [31mFAILED[0m[31m [ 67%][0m
2025-11-28T17:40:11.0663284Z tests/api/v1/test_governance.py::test_tenant_budget_status_with_alerts [31mFAILED[0m[31m [ 67%][0m
2025-11-28T17:40:11.0864758Z tests/api/v1/test_governance.py::test_tenant_budget_status_zero_usage [31mFAILED[0m[31m [ 68%][0m
2025-11-28T17:40:11.1049419Z tests/api/v1/test_governance.py::test_tenant_budget_status_error [31mFAILED[0m[31m  [ 68%][0m
2025-11-28T17:40:11.1225922Z tests/api/v1/test_governance.py::test_governance_overview_invalid_days [31mFAILED[0m[31m [ 69%][0m
2025-11-28T17:40:11.1417043Z tests/api/v1/test_governance.py::test_tenant_governance_stats_invalid_days [31mFAILED[0m[31m [ 69%][0m
2025-11-28T17:40:11.1601073Z tests/api/v1/test_governance.py::test_governance_overview_empty_results [31mFAILED[0m[31m [ 69%][0m
2025-11-28T17:40:11.1795967Z tests/api/v1/test_memory.py::test_store_memory_success [31mFAILED[0m[31m            [ 70%][0m
2025-11-28T17:40:11.1992124Z tests/api/v1/test_memory.py::test_query_memory_success [31mFAILED[0m[31m            [ 70%][0m
2025-11-28T17:40:11.2167357Z tests/api/v1/test_memory.py::test_delete_memory_success [31mFAILED[0m[31m           [ 70%][0m
2025-11-28T17:40:11.2293491Z tests/api/v1/test_memory.py::test_rebuild_reflections_success [32mPASSED[0m[31m     [ 71%][0m
2025-11-28T17:40:11.4472044Z tests/api/v1/test_memory.py::test_reflection_stats_success [31mFAILED[0m[31m        [ 71%][0m
2025-11-28T17:40:11.4652542Z tests/api/v1/test_memory.py::test_store_memory_missing_tenant_header [31mFAILED[0m[31m [ 72%][0m
2025-11-28T17:40:11.4844780Z tests/api/v1/test_memory.py::test_query_memory_with_filters [31mFAILED[0m[31m       [ 72%][0m
2025-11-28T17:40:11.5034483Z tests/api/v1/test_memory.py::test_query_memory_with_graph_traversal [31mFAILED[0m[31m [ 72%][0m
2025-11-28T17:40:11.5214509Z tests/api/v1/test_memory.py::test_delete_memory_not_found [31mFAILED[0m[31m         [ 73%][0m
2025-11-28T17:40:11.5486456Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_success [31mFAILED[0m[31m    [ 73%][0m
2025-11-28T17:40:11.5686510Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_reranking [31mFAILED[0m[31m [ 73%][0m
2025-11-28T17:40:11.5892557Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_filters [31mFAILED[0m[31m [ 74%][0m
2025-11-28T17:40:11.6094650Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_manual_weights [31mFAILED[0m[31m [ 74%][0m
2025-11-28T17:40:11.6301210Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_graph_depth [31mFAILED[0m[31m [ 75%][0m
2025-11-28T17:40:11.6526954Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_conversation_history [31mFAILED[0m[31m [ 75%][0m
2025-11-28T17:40:11.6730790Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_empty_query [31mFAILED[0m[31m [ 75%][0m
2025-11-28T17:40:11.6836578Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_service_error [32mPASSED[0m[31m [ 76%][0m
2025-11-28T17:40:11.7049444Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_all_strategies_disabled [31mFAILED[0m[31m [ 76%][0m
2025-11-28T17:40:11.8813515Z tests/integration/test_graphrag.py::test_graph_extraction_basic [31mERROR[0m[31m    [ 76%][0m
2025-11-28T17:40:12.0580283Z tests/integration/test_graphrag.py::test_graph_storage [31mERROR[0m[31m             [ 77%][0m
2025-11-28T17:40:12.2343085Z tests/integration/test_graphrag.py::test_hybrid_search [31mERROR[0m[31m             [ 77%][0m
2025-11-28T17:40:12.4100817Z tests/integration/test_graphrag.py::test_graph_traversal_depth [31mERROR[0m[31m     [ 78%][0m
2025-11-28T17:40:12.5916183Z tests/integration/test_graphrag.py::test_hierarchical_reflection [31mERROR[0m[31m   [ 78%][0m
2025-11-28T17:40:12.5961315Z tests/integration/test_reflection_flow.py::test_generate_reflection_from_failure [31mERROR[0m[31m [ 78%][0m
2025-11-28T17:40:12.5997967Z tests/integration/test_reflection_flow.py::test_generate_reflection_from_success [31mERROR[0m[31m [ 79%][0m
2025-11-28T17:40:12.6034995Z tests/integration/test_reflection_flow.py::test_reflection_retrieval_in_context [31mERROR[0m[31m [ 79%][0m
2025-11-28T17:40:12.6072523Z tests/integration/test_reflection_flow.py::test_memory_scoring_v2 [32mPASSED[0m[31m [ 80%][0m
2025-11-28T17:40:12.6106212Z tests/integration/test_reflection_flow.py::test_inject_reflections_into_prompt [31mERROR[0m[31m [ 80%][0m
2025-11-28T17:40:12.6149175Z tests/integration/test_reflection_flow.py::test_end_to_end_reflection_flow [31mERROR[0m[31m [ 80%][0m
2025-11-28T17:40:21.4875682Z tests/llm/test_llm_provider_contract.py::test_basic_completion [31mFAILED[0m[31m    [ 81%][0m
2025-11-28T17:40:29.9413502Z tests/llm/test_llm_provider_contract.py::test_json_mode [31mFAILED[0m[31m           [ 81%][0m
2025-11-28T17:40:30.2123327Z tests/llm/test_llm_provider_contract.py::test_streaming [31mFAILED[0m[31m           [ 81%][0m
2025-11-28T17:40:38.7312234Z tests/llm/test_llm_provider_contract.py::test_token_usage [31mFAILED[0m[31m         [ 82%][0m
2025-11-28T17:40:47.1989026Z tests/llm/test_llm_provider_contract.py::test_temperature_control [31mFAILED[0m[31m [ 82%][0m
2025-11-28T17:40:55.7523853Z tests/llm/test_llm_provider_contract.py::test_max_tokens [31mFAILED[0m[31m          [ 83%][0m
2025-11-28T17:41:04.2710940Z tests/llm/test_llm_provider_contract.py::test_provider_contract_hello_world[openai-gpt-3.5-turbo] [31mFAILED[0m[31m [ 83%][0m
2025-11-28T17:41:04.2748349Z tests/llm/test_llm_provider_contract.py::test_provider_contract_hello_world[anthropic-claude-3-haiku-20240307] [33mSKIPPED[0m[31m [ 83%][0m
2025-11-28T17:41:04.2799848Z tests/llm/test_llm_provider_contract.py::test_provider_contract_hello_world[gemini-gemini-1.5-flash] [33mSKIPPED[0m[31m [ 84%][0m
2025-11-28T17:41:04.2844967Z tests/repositories/test_graph_repository.py::test_get_all_nodes [32mPASSED[0m[31m   [ 84%][0m
2025-11-28T17:41:04.2889495Z tests/repositories/test_graph_repository.py::test_get_all_edges [32mPASSED[0m[31m   [ 84%][0m
2025-11-28T17:41:04.2934058Z tests/repositories/test_graph_repository.py::test_update_node_label [32mPASSED[0m[31m [ 85%][0m
2025-11-28T17:41:04.3138660Z tests/repositories/test_graph_repository.py::test_merge_node_edges [31mFAILED[0m[31m [ 85%][0m
2025-11-28T17:41:04.3187105Z tests/repositories/test_graph_repository.py::test_delete_node_edges [32mPASSED[0m[31m [ 86%][0m
2025-11-28T17:41:04.3232901Z tests/repositories/test_graph_repository.py::test_delete_node [32mPASSED[0m[31m     [ 86%][0m
2025-11-28T17:41:04.3278710Z tests/repositories/test_graph_repository.py::test_delete_node_not_found [32mPASSED[0m[31m [ 86%][0m
2025-11-28T17:41:04.3338381Z tests/repositories/test_graph_repository.py::test_upsert_node_insert [32mPASSED[0m[31m [ 87%][0m
2025-11-28T17:41:04.3385031Z tests/repositories/test_graph_repository.py::test_upsert_node_update [32mPASSED[0m[31m [ 87%][0m
2025-11-28T17:41:04.3429018Z tests/repositories/test_graph_repository.py::test_create_node [32mPASSED[0m[31m     [ 87%][0m
2025-11-28T17:41:04.3473065Z tests/repositories/test_graph_repository.py::test_create_edge [32mPASSED[0m[31m     [ 88%][0m
2025-11-28T17:41:04.3516863Z tests/repositories/test_graph_repository.py::test_get_node_internal_id [32mPASSED[0m[31m [ 88%][0m
2025-11-28T17:41:04.3562417Z tests/repositories/test_graph_repository.py::test_get_node_internal_id_not_found [32mPASSED[0m[31m [ 89%][0m
2025-11-28T17:41:04.3777875Z tests/repositories/test_graph_repository.py::test_store_graph_triples [31mFAILED[0m[31m [ 89%][0m
2025-11-28T17:41:04.3864866Z tests/services/llm/test_providers.py::test_openai_generate [32mPASSED[0m[31m        [ 89%][0m
2025-11-28T17:41:04.3937872Z tests/services/test_budget_service.py::test_check_budget [31mFAILED[0m[31m          [ 90%][0m
2025-11-28T17:41:04.3997750Z tests/services/test_budget_service.py::test_check_budget_fail [31mFAILED[0m[31m     [ 90%][0m
2025-11-28T17:41:04.4049306Z tests/services/test_community_detection.py::test_load_graph_uses_repository [32mPASSED[0m[31m [ 90%][0m
2025-11-28T17:41:04.4093199Z tests/services/test_community_detection.py::test_load_graph_with_disconnected_edges [32mPASSED[0m[31m [ 91%][0m
2025-11-28T17:41:04.4133242Z tests/services/test_community_detection.py::test_store_super_node_uses_repository [32mPASSED[0m[31m [ 91%][0m
2025-11-28T17:41:04.4182145Z tests/services/test_community_detection.py::test_run_community_detection_insufficient_nodes [32mPASSED[0m[31m [ 92%][0m
2025-11-28T17:41:04.4221654Z tests/services/test_community_detection.py::test_generate_summary_llm_integration [32mPASSED[0m[31m [ 92%][0m
2025-11-28T17:41:04.4263141Z tests/services/test_community_detection.py::test_generate_summary_llm_failure [32mPASSED[0m[31m [ 92%][0m
2025-11-28T17:41:04.4309716Z tests/services/test_community_detection.py::test_process_community_workflow [32mPASSED[0m[31m [ 93%][0m
2025-11-28T17:41:04.4355643Z tests/services/test_community_detection.py::test_empty_graph_handling [32mPASSED[0m[31m [ 93%][0m
2025-11-28T17:41:04.4388384Z tests/services/test_context_cache.py::test_context_cache_flow [32mPASSED[0m[31m     [ 93%][0m
2025-11-28T17:41:04.4430882Z tests/services/test_entity_resolution.py::test_fetch_nodes_uses_repository [32mPASSED[0m[31m [ 94%][0m
2025-11-28T17:41:04.4482702Z tests/services/test_entity_resolution.py::test_merge_nodes_with_canonical_name [32mPASSED[0m[31m [ 94%][0m
2025-11-28T17:41:04.4541168Z tests/services/test_entity_resolution.py::test_merge_nodes_without_canonical_name [32mPASSED[0m[31m [ 95%][0m
2025-11-28T17:41:04.4583791Z tests/services/test_entity_resolution.py::test_merge_nodes_empty_list [32mPASSED[0m[31m [ 95%][0m
2025-11-28T17:41:04.4633242Z tests/services/test_entity_resolution.py::test_run_clustering_with_insufficient_nodes [32mPASSED[0m[31m [ 95%][0m
2025-11-28T17:41:04.4684371Z tests/services/test_entity_resolution.py::test_process_group_with_merge_approval [32mPASSED[0m[31m [ 96%][0m
2025-11-28T17:41:04.4735193Z tests/services/test_entity_resolution.py::test_process_group_with_merge_rejection [32mPASSED[0m[31m [ 96%][0m
2025-11-28T17:41:04.4876975Z tests/services/test_reflection_engine.py::test_reflection_flow [31mFAILED[0m[31m    [ 96%][0m
2025-11-28T17:41:04.5088358Z test_enterprise_features.py::test_decorator_import [32mPASSED[0m[31m                [ 97%][0m
2025-11-28T17:41:04.5576444Z test_enterprise_features.py::test_decorator_basic_usage [32mPASSED[0m[31m           [ 97%][0m
2025-11-28T17:41:04.5590541Z test_enterprise_features.py::test_reflection_engine_import [32mPASSED[0m[31m        [ 98%][0m
2025-11-28T17:41:04.5604543Z test_enterprise_features.py::test_hierarchical_reflection_methods [32mPASSED[0m[31m [ 98%][0m
2025-11-28T17:41:04.5618136Z test_enterprise_features.py::test_llm_structured_outputs [32mPASSED[0m[31m          [ 98%][0m
2025-11-28T17:41:04.5800906Z test_enterprise_features.py::test_pydantic_models [31mFAILED[0m[31m                 [ 99%][0m
2025-11-28T17:41:04.6264325Z test_enterprise_features.py::test_memory_client_async_methods [32mPASSED[0m[31m     [ 99%][0m
2025-11-28T17:41:13.4840443Z test_enterprise_features.py::test_api_endpoint_exists [32mPASSED[0m[31m             [100%][0m
2025-11-28T17:41:13.4841159Z 
2025-11-28T17:41:13.4841357Z ==================================== ERRORS ====================================
2025-11-28T17:41:13.4842167Z [31m[1m________________ ERROR at setup of test_graph_extraction_basic _________________[0m
2025-11-28T17:41:13.4843010Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:13.4843773Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:13.4844854Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:13.4845972Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:13.4847539Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:13.4848349Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:13.4849018Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:13.4849830Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:13.4850628Z                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4851311Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:13.4852038Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:13.4852764Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:13.4853510Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:13.4854275Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:13.4855185Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:13.4855916Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:13.4856666Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:13.4857135Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4857762Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:13.4858368Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:13.4858928Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:13.4859532Z [31m[1m_____________________ ERROR at setup of test_graph_storage _____________________[0m
2025-11-28T17:41:13.4860185Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:13.4860784Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:13.4861426Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:13.4862043Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:13.4862667Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:13.4863228Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:13.4863800Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:13.4864484Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:13.4864949Z                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4865589Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:13.4866224Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:13.4866852Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:13.4867491Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:13.4868710Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:13.4869935Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:13.4871237Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:13.4872688Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:13.4873556Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4874677Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:13.4875739Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:13.4876736Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:13.4877790Z [31m[1m_____________________ ERROR at setup of test_hybrid_search _____________________[0m
2025-11-28T17:41:13.4878590Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:13.4879338Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:13.4880645Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:13.4882015Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:13.4883129Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:13.4884098Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:13.4885079Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:13.4886259Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:13.4887074Z                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4888153Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:13.4889286Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:13.4890590Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:13.4891732Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:13.4892964Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:13.4894129Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:13.4895400Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:13.4896794Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:13.4897580Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4898605Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:13.4899655Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:13.4900523Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:13.4901147Z [31m[1m_________________ ERROR at setup of test_graph_traversal_depth _________________[0m
2025-11-28T17:41:13.4901601Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:13.4902021Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:13.4902859Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:13.4903468Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:13.4904079Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:13.4904653Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:13.4905224Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:13.4905911Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:13.4906360Z                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4906954Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:13.4907592Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:13.4908222Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:13.4908853Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:13.4909666Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:13.4910555Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:13.4911315Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:13.4912089Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:13.4912557Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4913283Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:13.4913897Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:13.4914550Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:13.4915307Z [31m[1m________________ ERROR at setup of test_hierarchical_reflection ________________[0m
2025-11-28T17:41:13.4915889Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:13.4916323Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:13.4917070Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:13.4917807Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:13.4918556Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:13.4919248Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:13.4919945Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:13.4920998Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:13.4921628Z                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4922228Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:13.4922862Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:13.4923495Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:13.4924305Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:13.4924972Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:13.4925580Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:13.4926234Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:13.4926974Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:13.4927426Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.4928023Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:13.4928600Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:13.4929143Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:13.4929759Z [31m[1m___________ ERROR at setup of test_generate_reflection_from_failure ____________[0m
2025-11-28T17:41:13.4930586Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 81
2025-11-28T17:41:13.4931202Z   @pytest.mark.asyncio
2025-11-28T17:41:13.4931437Z   async def test_generate_reflection_from_failure(
2025-11-28T17:41:13.4931757Z       reflection_engine, memory_repo, tenant_id, project_id
2025-11-28T17:41:13.4932031Z   ):
2025-11-28T17:41:13.4932185Z       """
2025-11-28T17:41:13.4932404Z       Test reflection generation from a failed task execution.
2025-11-28T17:41:13.4932624Z 
2025-11-28T17:41:13.4932697Z       Scenario:
2025-11-28T17:41:13.4932890Z       1. Task fails with SQL timeout error
2025-11-28T17:41:13.4933155Z       2. Reflection engine generates lesson learned
2025-11-28T17:41:13.4933472Z       3. Reflection is stored with proper importance/confidence
2025-11-28T17:41:13.4933757Z       """
2025-11-28T17:41:13.4933924Z       # 1. Create failure context
2025-11-28T17:41:13.4934137Z       events = [
2025-11-28T17:41:13.4934306Z           Event(
2025-11-28T17:41:13.4934479Z               event_id="evt_1",
2025-11-28T17:41:13.4934733Z               event_type=EventType.TOOL_CALL,
2025-11-28T17:41:13.4935012Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:13.4935332Z               content="Executing SQL query: SELECT * FROM large_table",
2025-11-28T17:41:13.4935654Z               metadata={"tool": "sql_executor"},
2025-11-28T17:41:13.4935904Z               tool_name="sql_executor",
2025-11-28T17:41:13.4936116Z           ),
2025-11-28T17:41:13.4936276Z           Event(
2025-11-28T17:41:13.4936449Z               event_id="evt_2",
2025-11-28T17:41:13.4936671Z               event_type=EventType.ERROR_EVENT,
2025-11-28T17:41:13.4936939Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:13.4937217Z               content="Query timeout after 30 seconds",
2025-11-28T17:41:13.4937481Z               metadata={"error_code": "TIMEOUT"},
2025-11-28T17:41:13.4938091Z               error={"type": "TimeoutError", "code": "QUERY_TIMEOUT"},
2025-11-28T17:41:13.4938517Z           ),
2025-11-28T17:41:13.4938772Z       ]
2025-11-28T17:41:13.4938931Z 
2025-11-28T17:41:13.4939055Z       error_info = ErrorInfo(
2025-11-28T17:41:13.4939408Z           error_code="QUERY_TIMEOUT",
2025-11-28T17:41:13.4939836Z           error_category=ErrorCategory.TIMEOUT_ERROR,
2025-11-28T17:41:13.4940548Z           error_message="SQL query timeout after 30 seconds",
2025-11-28T17:41:13.4941005Z           tool_name="sql_executor",
2025-11-28T17:41:13.4941502Z           context={"query": "SELECT * FROM large_table", "timeout_seconds": 30},
2025-11-28T17:41:13.4941840Z       )
2025-11-28T17:41:13.4941936Z 
2025-11-28T17:41:13.4942024Z       context = ReflectionContext(
2025-11-28T17:41:13.4942252Z           events=events,
2025-11-28T17:41:13.4942656Z           outcome=OutcomeType.FAILURE,
2025-11-28T17:41:13.4942900Z           error=error_info,
2025-11-28T17:41:13.4943142Z           task_description="Fetch data from large table",
2025-11-28T17:41:13.4943437Z           task_goal="Retrieve user analytics data",
2025-11-28T17:41:13.4943692Z           tenant_id=tenant_id,
2025-11-28T17:41:13.4943915Z           project_id=project_id,
2025-11-28T17:41:13.4944124Z       )
2025-11-28T17:41:13.4944209Z 
2025-11-28T17:41:13.4944290Z       # 2. Generate reflection
2025-11-28T17:41:13.4944573Z       result = await reflection_engine.generate_reflection(context)
2025-11-28T17:41:13.4944809Z 
2025-11-28T17:41:13.4944899Z       # 3. Assertions on reflection result
2025-11-28T17:41:13.4945144Z       assert result is not None
2025-11-28T17:41:13.4945469Z       assert len(result.reflection_text) > 0, "Reflection text should not be empty"
2025-11-28T17:41:13.4946008Z       assert result.importance > 0.3, "Failure reflection should have reasonable importance"
2025-11-28T17:41:13.4946462Z       assert result.confidence > 0.0, "Confidence should be non-zero"
2025-11-28T17:41:13.4946838Z       assert result.error_category == ErrorCategory.TIMEOUT_ERROR
2025-11-28T17:41:13.4947180Z       assert len(result.source_event_ids) == len(events)
2025-11-28T17:41:13.4947376Z 
2025-11-28T17:41:13.4947572Z       # Check for relevant tags
2025-11-28T17:41:13.4947778Z       assert any(
2025-11-28T17:41:13.4948009Z           tag.lower() in ["sql", "timeout", "performance", "query"]
2025-11-28T17:41:13.4948300Z           for tag in result.tags
2025-11-28T17:41:13.4948539Z       ), "Reflection should have relevant tags"
2025-11-28T17:41:13.4948714Z 
2025-11-28T17:41:13.4948788Z       # 4. Store reflection
2025-11-28T17:41:13.4949043Z       stored_ids = await reflection_engine.store_reflection(
2025-11-28T17:41:13.4949318Z           result=result,
2025-11-28T17:41:13.4949514Z           tenant_id=tenant_id,
2025-11-28T17:41:13.4949720Z           project_id=project_id,
2025-11-28T17:41:13.4949932Z       )
2025-11-28T17:41:13.4950261Z 
2025-11-28T17:41:13.4950425Z       assert "reflection_id" in stored_ids
2025-11-28T17:41:13.4950706Z       assert stored_ids["reflection_id"] is not None
2025-11-28T17:41:13.4950896Z 
2025-11-28T17:41:13.4950979Z       # 5. Verify stored in database
2025-11-28T17:41:13.4951279Z       reflections = await memory_repo.get_reflective_memories(
2025-11-28T17:41:13.4951586Z           tenant_id=tenant_id, project=project_id
2025-11-28T17:41:13.4951826Z       )
2025-11-28T17:41:13.4952079Z       assert len(reflections) >= 1, "Reflection should be stored in database"
2025-11-28T17:41:13.4952329Z 
2025-11-28T17:41:13.4952411Z       # Find our reflection
2025-11-28T17:41:13.4952614Z       our_reflection = next(
2025-11-28T17:41:13.4952909Z           (r for r in reflections if r["id"] == stored_ids["reflection_id"]), None
2025-11-28T17:41:13.4953217Z       )
2025-11-28T17:41:13.4953379Z       assert our_reflection is not None
2025-11-28T17:41:13.4953681Z       assert our_reflection["content"] == result.reflection_text
2025-11-28T17:41:13.4954029Z       assert our_reflection["importance"] == result.importance
2025-11-28T17:41:13.4954571Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 47
2025-11-28T17:41:13.4955039Z   @pytest.fixture
2025-11-28T17:41:13.4955268Z   async def reflection_engine(db_pool, memory_repo):
2025-11-28T17:41:13.4955547Z       """Reflection engine v2"""
2025-11-28T17:41:13.4955800Z       return ReflectionEngineV2(db_pool, memory_repo)
2025-11-28T17:41:13.4956309Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:13.4956779Z   @pytest.fixture
2025-11-28T17:41:13.4956973Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:13.4957218Z       """Database connection pool"""
2025-11-28T17:41:13.4957456Z       return postgresql_pool
2025-11-28T17:41:13.4957805Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:13.4961237Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:13.4963957Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:13.4964187Z 
2025-11-28T17:41:13.4964481Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:13.4965108Z [31m[1m___________ ERROR at setup of test_generate_reflection_from_success ____________[0m
2025-11-28T17:41:13.4966137Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 178
2025-11-28T17:41:13.4966914Z   @pytest.mark.asyncio
2025-11-28T17:41:13.4967161Z   async def test_generate_reflection_from_success(
2025-11-28T17:41:13.4967481Z       reflection_engine, memory_repo, tenant_id, project_id
2025-11-28T17:41:13.4967753Z   ):
2025-11-28T17:41:13.4967903Z       """
2025-11-28T17:41:13.4968134Z       Test reflection generation from a successful task execution.
2025-11-28T17:41:13.4968367Z 
2025-11-28T17:41:13.4968439Z       Scenario:
2025-11-28T17:41:13.4968631Z       1. Task succeeds with optimization
2025-11-28T17:41:13.4968904Z       2. Reflection engine generates positive pattern
2025-11-28T17:41:13.4969196Z       3. Reflection stored as reusable strategy
2025-11-28T17:41:13.4969434Z       """
2025-11-28T17:41:13.4969585Z       events = [
2025-11-28T17:41:13.4969753Z           Event(
2025-11-28T17:41:13.4969924Z               event_id="evt_1",
2025-11-28T17:41:13.4970308Z               event_type=EventType.TOOL_CALL,
2025-11-28T17:41:13.4970580Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:13.4970961Z               content="Executing optimized SQL query: SELECT id, name FROM users LIMIT 100",
2025-11-28T17:41:13.4971398Z               metadata={"tool": "sql_executor", "optimization": "added_limit"},
2025-11-28T17:41:13.4971729Z               tool_name="sql_executor",
2025-11-28T17:41:13.4971950Z           ),
2025-11-28T17:41:13.4972106Z           Event(
2025-11-28T17:41:13.4972272Z               event_id="evt_2",
2025-11-28T17:41:13.4972502Z               event_type=EventType.TOOL_RESPONSE,
2025-11-28T17:41:13.4972772Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:13.4973084Z               content="Query completed successfully in 0.5 seconds",
2025-11-28T17:41:13.4973384Z               metadata={"execution_time_ms": 500},
2025-11-28T17:41:13.4973617Z           ),
2025-11-28T17:41:13.4973772Z       ]
2025-11-28T17:41:13.4973856Z 
2025-11-28T17:41:13.4973943Z       context = ReflectionContext(
2025-11-28T17:41:13.4974178Z           events=events,
2025-11-28T17:41:13.4974389Z           outcome=OutcomeType.SUCCESS,
2025-11-28T17:41:13.4974663Z           task_description="Fetch user data efficiently",
2025-11-28T17:41:13.4974949Z           task_goal="Retrieve first 100 users",
2025-11-28T17:41:13.4975201Z           tenant_id=tenant_id,
2025-11-28T17:41:13.4975419Z           project_id=project_id,
2025-11-28T17:41:13.4975619Z       )
2025-11-28T17:41:13.4975710Z 
2025-11-28T17:41:13.4975786Z       # Generate reflection
2025-11-28T17:41:13.4976063Z       result = await reflection_engine.generate_reflection(context)
2025-11-28T17:41:13.4976425Z 
2025-11-28T17:41:13.4976503Z       assert result is not None
2025-11-28T17:41:13.4976734Z       assert len(result.reflection_text) > 0
2025-11-28T17:41:13.4977102Z       assert result.importance >= 0.0, "Success reflection should have some importance"
2025-11-28T17:41:13.4977383Z 
2025-11-28T17:41:13.4977485Z       # Success reflections might have strategy
2025-11-28T17:41:13.4977740Z       if result.strategy_text:
2025-11-28T17:41:13.4977973Z           assert len(result.strategy_text) > 0
2025-11-28T17:41:13.4978261Z           # Store should create both reflection and strategy
2025-11-28T17:41:13.4978578Z           stored_ids = await reflection_engine.store_reflection(
2025-11-28T17:41:13.4978927Z               result=result, tenant_id=tenant_id, project_id=project_id
2025-11-28T17:41:13.4979209Z           )
2025-11-28T17:41:13.4979381Z           assert "strategy_id" in stored_ids
2025-11-28T17:41:13.4979873Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 47
2025-11-28T17:41:13.4980598Z   @pytest.fixture
2025-11-28T17:41:13.4980825Z   async def reflection_engine(db_pool, memory_repo):
2025-11-28T17:41:13.4981098Z       """Reflection engine v2"""
2025-11-28T17:41:13.4981418Z       return ReflectionEngineV2(db_pool, memory_repo)
2025-11-28T17:41:13.4982315Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:13.4982992Z   @pytest.fixture
2025-11-28T17:41:13.4983201Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:13.4983454Z       """Database connection pool"""
2025-11-28T17:41:13.4983688Z       return postgresql_pool
2025-11-28T17:41:13.4983999Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:13.4987061Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:13.4989724Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:13.4990149Z 
2025-11-28T17:41:13.4990553Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:13.4991191Z [31m[1m____________ ERROR at setup of test_reflection_retrieval_in_context ____________[0m
2025-11-28T17:41:13.4991792Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 239
2025-11-28T17:41:13.4992273Z   @pytest.mark.asyncio
2025-11-28T17:41:13.4992503Z   async def test_reflection_retrieval_in_context(
2025-11-28T17:41:13.4992766Z       reflection_engine,
2025-11-28T17:41:13.4992958Z       context_builder,
2025-11-28T17:41:13.4993143Z       memory_repo,
2025-11-28T17:41:13.4993315Z       tenant_id,
2025-11-28T17:41:13.4993477Z       project_id,
2025-11-28T17:41:13.4993644Z   ):
2025-11-28T17:41:13.4993789Z       """
2025-11-28T17:41:13.4994024Z       Test that reflections are retrieved and injected into context.
2025-11-28T17:41:13.4994262Z 
2025-11-28T17:41:13.4994327Z       Scenario:
2025-11-28T17:41:13.4994525Z       1. Store a reflection about SQL timeouts
2025-11-28T17:41:13.4994782Z       2. Build context for a new SQL query task
2025-11-28T17:41:13.4995047Z       3. Verify reflection is included in context
2025-11-28T17:41:13.4995284Z       """
2025-11-28T17:41:13.4995634Z       # 1. Store a reflection manually
2025-11-28T17:41:13.4995891Z       reflection_content = (
2025-11-28T17:41:13.4996180Z           "SQL queries on large tables should always include LIMIT clause "
2025-11-28T17:41:13.4996554Z           "to prevent timeout errors. Default timeout is 30 seconds."
2025-11-28T17:41:13.4996830Z       )
2025-11-28T17:41:13.4996921Z 
2025-11-28T17:41:13.4997048Z       reflection_record = await memory_repo.insert_memory(
2025-11-28T17:41:13.4997329Z           tenant_id=tenant_id,
2025-11-28T17:41:13.4997707Z           content=reflection_content,
2025-11-28T17:41:13.4998096Z           source="test",
2025-11-28T17:41:13.4998419Z           importance=0.8,
2025-11-28T17:41:13.4998696Z           layer="rm",
2025-11-28T17:41:13.4998902Z           tags=["sql", "timeout", "best-practice"],
2025-11-28T17:41:13.4999179Z           timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:13.4999434Z           project=project_id,
2025-11-28T17:41:13.4999627Z       )
2025-11-28T17:41:13.4999725Z 
2025-11-28T17:41:13.4999814Z       # 2. Build context with query about SQL
2025-11-28T17:41:13.5000240Z       query = "I need to fetch all user data from the users table"
2025-11-28T17:41:13.5000451Z 
2025-11-28T17:41:13.5000581Z       working_memory = await context_builder.build_context(
2025-11-28T17:41:13.5001043Z           tenant_id=tenant_id,
2025-11-28T17:41:13.5001256Z           project_id=project_id,
2025-11-28T17:41:13.5001466Z           query=query,
2025-11-28T17:41:13.5001649Z           recent_messages=[],
2025-11-28T17:41:13.5001842Z       )
2025-11-28T17:41:13.5001925Z 
2025-11-28T17:41:13.5002018Z       # 3. Verify reflection is in context
2025-11-28T17:41:13.5002362Z       assert len(working_memory.reflections) >= 1, "Should retrieve reflections"
2025-11-28T17:41:13.5002639Z 
2025-11-28T17:41:13.5002756Z       # Check our reflection is included (by content or ID)
2025-11-28T17:41:13.5003029Z       reflection_found = any(
2025-11-28T17:41:13.5003282Z           refl.metadata.get("id") == reflection_record["id"]
2025-11-28T17:41:13.5003578Z           for refl in working_memory.reflections
2025-11-28T17:41:13.5003812Z       )
2025-11-28T17:41:13.5004063Z       assert reflection_found, "Our test reflection should be in context"
2025-11-28T17:41:13.5004311Z 
2025-11-28T17:41:13.5004430Z       # 4. Verify formatted context includes lessons learned
2025-11-28T17:41:13.5004946Z       assert "Lessons Learned" in working_memory.context_text or "lessons learned" in working_memory.context_text.lower(), \
2025-11-28T17:41:13.5005447Z           "Context should include lessons learned section"
2025-11-28T17:41:13.5005639Z 
2025-11-28T17:41:13.5005756Z       # 5. Verify reflection content is in formatted text
2025-11-28T17:41:13.5006042Z       # (It should be in the Lessons Learned section)
2025-11-28T17:41:13.5006292Z       assert any(
2025-11-28T17:41:13.5006486Z           reflection_content in refl.content
2025-11-28T17:41:13.5006739Z           for refl in working_memory.reflections
2025-11-28T17:41:13.5007014Z       ), "Reflection content should be accessible"
2025-11-28T17:41:13.5007524Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 47
2025-11-28T17:41:13.5007995Z   @pytest.fixture
2025-11-28T17:41:13.5008208Z   async def reflection_engine(db_pool, memory_repo):
2025-11-28T17:41:13.5008488Z       """Reflection engine v2"""
2025-11-28T17:41:13.5008742Z       return ReflectionEngineV2(db_pool, memory_repo)
2025-11-28T17:41:13.5009245Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:13.5009712Z   @pytest.fixture
2025-11-28T17:41:13.5009903Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:13.5010284Z       """Database connection pool"""
2025-11-28T17:41:13.5010517Z       return postgresql_pool
2025-11-28T17:41:13.5010822Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:13.5013874Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:13.5017513Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:13.5017744Z 
2025-11-28T17:41:13.5018044Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:13.5018685Z [31m[1m____________ ERROR at setup of test_inject_reflections_into_prompt _____________[0m
2025-11-28T17:41:13.5019548Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 353
2025-11-28T17:41:13.5020746Z   @pytest.mark.asyncio
2025-11-28T17:41:13.5020987Z   async def test_inject_reflections_into_prompt(
2025-11-28T17:41:13.5021291Z       context_builder, memory_repo, tenant_id, project_id
2025-11-28T17:41:13.5021557Z   ):
2025-11-28T17:41:13.5021705Z       """
2025-11-28T17:41:13.5021964Z       Test the helper method for injecting reflections into existing prompts.
2025-11-28T17:41:13.5022289Z       """
2025-11-28T17:41:13.5022456Z       # 1. Store a reflection
2025-11-28T17:41:13.5022677Z       await memory_repo.insert_memory(
2025-11-28T17:41:13.5022920Z           tenant_id=tenant_id,
2025-11-28T17:41:13.5023193Z           content="Always validate user input before processing",
2025-11-28T17:41:13.5023489Z           source="test",
2025-11-28T17:41:13.5023692Z           importance=0.9,
2025-11-28T17:41:13.5023885Z           layer="rm",
2025-11-28T17:41:13.5024081Z           tags=["security", "validation"],
2025-11-28T17:41:13.5024341Z           timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:13.5024601Z           project=project_id,
2025-11-28T17:41:13.5024799Z       )
2025-11-28T17:41:13.5024886Z 
2025-11-28T17:41:13.5024961Z       # 2. Inject into prompt
2025-11-28T17:41:13.5025198Z       base_prompt = "You are a helpful assistant."
2025-11-28T17:41:13.5025562Z       enhanced_prompt = await context_builder.inject_reflections_into_prompt(
2025-11-28T17:41:13.5025904Z           base_prompt=base_prompt,
2025-11-28T17:41:13.5026130Z           tenant_id=tenant_id,
2025-11-28T17:41:13.5026344Z           project_id=project_id,
2025-11-28T17:41:13.5026590Z           query="How should I handle user input?",
2025-11-28T17:41:13.5026822Z       )
2025-11-28T17:41:13.5026916Z 
2025-11-28T17:41:13.5026990Z       # 3. Verify injection
2025-11-28T17:41:13.5027300Z       assert len(enhanced_prompt) > len(base_prompt), "Prompt should be enhanced"
2025-11-28T17:41:13.5027799Z       assert "Lessons Learned" in enhanced_prompt or "lessons learned" in enhanced_prompt.lower(), \
2025-11-28T17:41:13.5028217Z           "Should include lessons learned section"
2025-11-28T17:41:13.5028632Z       assert "validate user input" in enhanced_prompt.lower(), "Should include reflection content"
2025-11-28T17:41:13.5029269Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 53
2025-11-28T17:41:13.5029737Z   @pytest.fixture
2025-11-28T17:41:13.5030276Z   async def context_builder(db_pool, memory_repo, reflection_engine):
2025-11-28T17:41:13.5030670Z       """Context builder"""
2025-11-28T17:41:13.5030878Z       config = ContextConfig(
2025-11-28T17:41:13.5031095Z           max_reflection_items=5,
2025-11-28T17:41:13.5031327Z           min_reflection_importance=0.5,
2025-11-28T17:41:13.5031727Z           enable_enhanced_scoring=True,
2025-11-28T17:41:13.5031980Z       )
2025-11-28T17:41:13.5032241Z       return ContextBuilder(db_pool, memory_repo, reflection_engine, config)
2025-11-28T17:41:13.5032826Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:13.5033302Z   @pytest.fixture
2025-11-28T17:41:13.5033502Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:13.5033750Z       """Database connection pool"""
2025-11-28T17:41:13.5033980Z       return postgresql_pool
2025-11-28T17:41:13.5034315Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:13.5037690Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:13.5040713Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:13.5040942Z 
2025-11-28T17:41:13.5041226Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:13.5041842Z [31m[1m______________ ERROR at setup of test_end_to_end_reflection_flow _______________[0m
2025-11-28T17:41:13.5042425Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 393
2025-11-28T17:41:13.5042913Z   @pytest.mark.asyncio
2025-11-28T17:41:13.5043134Z   async def test_end_to_end_reflection_flow(
2025-11-28T17:41:13.5043379Z       reflection_engine,
2025-11-28T17:41:13.5043575Z       context_builder,
2025-11-28T17:41:13.5043755Z       memory_repo,
2025-11-28T17:41:13.5043932Z       tenant_id,
2025-11-28T17:41:13.5044094Z       project_id,
2025-11-28T17:41:13.5044257Z   ):
2025-11-28T17:41:13.5044405Z       """
2025-11-28T17:41:13.5044570Z       Test complete end-to-end flow:
2025-11-28T17:41:13.5044802Z       1. Task fails with error
2025-11-28T17:41:13.5045024Z       2. Reflection generated and stored
2025-11-28T17:41:13.5045263Z       3. Next task retrieves reflection
2025-11-28T17:41:13.5045505Z       4. Reflection influences behavior
2025-11-28T17:41:13.5045747Z       """
2025-11-28T17:41:13.5045963Z       # === Phase 1: First execution fails ===
2025-11-28T17:41:13.5046147Z 
2025-11-28T17:41:13.5046225Z       # Simulate tool error
2025-11-28T17:41:13.5046442Z       events_fail = [
2025-11-28T17:41:13.5046621Z           Event(
2025-11-28T17:41:13.5046803Z               event_id="evt_1",
2025-11-28T17:41:13.5047039Z               event_type=EventType.TOOL_CALL,
2025-11-28T17:41:13.5047314Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:13.5047627Z               content="Calling API without authentication header",
2025-11-28T17:41:13.5047934Z               metadata={"tool": "http_client"},
2025-11-28T17:41:13.5048188Z               tool_name="http_client",
2025-11-28T17:41:13.5048403Z           ),
2025-11-28T17:41:13.5048565Z           Event(
2025-11-28T17:41:13.5048737Z               event_id="evt_2",
2025-11-28T17:41:13.5048958Z               event_type=EventType.ERROR_EVENT,
2025-11-28T17:41:13.5049226Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:13.5049488Z               content="401 Unauthorized",
2025-11-28T17:41:13.5049749Z               metadata={"error_code": "UNAUTHORIZED"},
2025-11-28T17:41:13.5050271Z               error={"type": "AuthError", "code": "401"},
2025-11-28T17:41:13.5050630Z           ),
2025-11-28T17:41:13.5050850Z       ]
2025-11-28T17:41:13.5051329Z 
2025-11-28T17:41:13.5051525Z       error = ErrorInfo(
2025-11-28T17:41:13.5052042Z           error_code="401",
2025-11-28T17:41:13.5065962Z           error_category=ErrorCategory.PERMISSION_ERROR,
2025-11-28T17:41:13.5066588Z           error_message="API call failed: 401 Unauthorized",
2025-11-28T17:41:13.5067045Z           tool_name="http_client",
2025-11-28T17:41:13.5067384Z       )
2025-11-28T17:41:13.5067533Z 
2025-11-28T17:41:13.5067680Z       context_fail = ReflectionContext(
2025-11-28T17:41:13.5068077Z           events=events_fail,
2025-11-28T17:41:13.5068323Z           outcome=OutcomeType.FAILURE,
2025-11-28T17:41:13.5068560Z           error=error,
2025-11-28T17:41:13.5068775Z           task_description="Call external API",
2025-11-28T17:41:13.5069042Z           task_goal="Fetch data from API",
2025-11-28T17:41:13.5069293Z           tenant_id=tenant_id,
2025-11-28T17:41:13.5069517Z           project_id=project_id,
2025-11-28T17:41:13.5069727Z       )
2025-11-28T17:41:13.5069815Z 
2025-11-28T17:41:13.5069909Z       # Generate and store reflection
2025-11-28T17:41:13.5070530Z       result = await reflection_engine.generate_reflection(context_fail)
2025-11-28T17:41:13.5071117Z       stored_ids = await reflection_engine.store_reflection(
2025-11-28T17:41:13.5071472Z           result=result, tenant_id=tenant_id, project_id=project_id
2025-11-28T17:41:13.5071753Z       )
2025-11-28T17:41:13.5071845Z 
2025-11-28T17:41:13.5071950Z       reflection_id = stored_ids["reflection_id"]
2025-11-28T17:41:13.5072218Z       assert reflection_id is not None
2025-11-28T17:41:13.5072387Z 
2025-11-28T17:41:13.5072507Z       # === Phase 2: Second execution retrieves lesson ===
2025-11-28T17:41:13.5072701Z 
2025-11-28T17:41:13.5072786Z       # Build context for similar task
2025-11-28T17:41:13.5073051Z       query = "I need to call the external API again"
2025-11-28T17:41:13.5073371Z       working_memory = await context_builder.build_context(
2025-11-28T17:41:13.5073700Z           tenant_id=tenant_id, project_id=project_id, query=query
2025-11-28T17:41:13.5073971Z       )
2025-11-28T17:41:13.5074062Z 
2025-11-28T17:41:13.5074146Z       # Verify reflection is available
2025-11-28T17:41:13.5074524Z       assert len(working_memory.reflections) >= 1, "Should retrieve previous reflection"
2025-11-28T17:41:13.5074817Z 
2025-11-28T17:41:13.5074903Z       # Check if our reflection is there
2025-11-28T17:41:13.5075141Z       our_refl = next(
2025-11-28T17:41:13.5075458Z           (r for r in working_memory.reflections if r.metadata.get("id") == reflection_id),
2025-11-28T17:41:13.5075805Z           None,
2025-11-28T17:41:13.5075971Z       )
2025-11-28T17:41:13.5076210Z       assert our_refl is not None, "Our reflection should be retrieved"
2025-11-28T17:41:13.5076443Z 
2025-11-28T17:41:13.5076559Z       # === Phase 3: Verify reflection is actionable ===
2025-11-28T17:41:13.5076755Z 
2025-11-28T17:41:13.5076899Z       # The reflection should mention authentication or auth header
2025-11-28T17:41:13.5077187Z       assert any(
2025-11-28T17:41:13.5077395Z           keyword in our_refl.content.lower()
2025-11-28T17:41:13.5077712Z           for keyword in ["auth", "unauthorized", "401", "header", "token"]
2025-11-28T17:41:13.5078063Z       ), "Reflection should mention authentication issue"
2025-11-28T17:41:13.5078261Z 
2025-11-28T17:41:13.5078378Z       # If strategy was generated, it should be actionable
2025-11-28T17:41:13.5078656Z       if result.strategy_text:
2025-11-28T17:41:13.5078968Z           assert len(result.strategy_text) > 10, "Strategy should be meaningful"
2025-11-28T17:41:13.5079548Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 47
2025-11-28T17:41:13.5080168Z   @pytest.fixture
2025-11-28T17:41:13.5080401Z   async def reflection_engine(db_pool, memory_repo):
2025-11-28T17:41:13.5080822Z       """Reflection engine v2"""
2025-11-28T17:41:13.5081089Z       return ReflectionEngineV2(db_pool, memory_repo)
2025-11-28T17:41:13.5081603Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:13.5082069Z   @pytest.fixture
2025-11-28T17:41:13.5082275Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:13.5082529Z       """Database connection pool"""
2025-11-28T17:41:13.5082758Z       return postgresql_pool
2025-11-28T17:41:13.5083136Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:13.5086197Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:13.5089011Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:13.5089237Z 
2025-11-28T17:41:13.5089530Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:13.5090145Z =================================== FAILURES ===================================
2025-11-28T17:41:13.5090644Z [31m[1m___ TestReflectiveMemoryFlags.test_reflective_memory_disabled_no_reflections ___[0m
2025-11-28T17:41:13.5091330Z [1m[31mapps/memory_api/tests/test_reflective_flags.py[0m:40: in test_reflective_memory_disabled_no_reflections
2025-11-28T17:41:13.5092007Z     [0mcontext_builder.reflection_engine.query_reflections.assert_not_called()[90m[39;49;00m
2025-11-28T17:41:13.5092489Z     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5092931Z [1m[31mE   AttributeError: 'function' object has no attribute 'assert_not_called'[0m
2025-11-28T17:41:13.5093371Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5094248Z {"tenant_id": "test_tenant", "reason": "reflective_memory_disabled", "event": "reflections_retrieval_skipped", "level": "info", "logger": "apps.memory_api.services.context_builder", "timestamp": "2025-11-28T17:40:09.947532Z"}
2025-11-28T17:41:13.5095032Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5096215Z [32mINFO    [0m apps.memory_api.services.context_builder:context_builder.py:351 {'tenant_id': 'test_tenant', 'reason': 'reflective_memory_disabled', 'event': 'reflections_retrieval_skipped', 'level': 'info', 'logger': 'apps.memory_api.services.context_builder', 'timestamp': '2025-11-28T17:40:09.947532Z'}
2025-11-28T17:41:13.5097357Z [31m[1m___________ TestDreamingEnabled.test_dreaming_enabled_runs_dreaming ____________[0m
2025-11-28T17:41:13.5097991Z [1m[31mapps/memory_api/tests/test_reflective_flags.py[0m:192: in test_dreaming_enabled_runs_dreaming
2025-11-28T17:41:13.5098588Z     [0mresults = [94mawait[39;49;00m dreaming_worker.run_dreaming_cycle([90m[39;49;00m
2025-11-28T17:41:13.5099122Z [1m[31mapps/memory_api/workers/memory_maintenance.py[0m:369: in run_dreaming_cycle
2025-11-28T17:41:13.5099744Z     [0m[94masync[39;49;00m [94mwith[39;49;00m [96mself[39;49;00m.pool.acquire() [94mas[39;49;00m conn:[90m[39;49;00m
2025-11-28T17:41:13.5100319Z                ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5100809Z [1m[31mE   TypeError: 'coroutine' object does not support the asynchronous context manager protocol[0m
2025-11-28T17:41:13.5101434Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5102446Z {"tenant_id": "test_tenant", "project_id": "test_project", "lookback_hours": 24, "mode": "<MagicMock name='settings.REFLECTIVE_MEMORY_MODE' id='140555305223808'>", "event": "dreaming_cycle_started", "level": "info", "logger": "apps.memory_api.workers.memory_maintenance", "timestamp": "2025-11-28T17:40:10.297244Z"}
2025-11-28T17:41:13.5103446Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5104920Z [32mINFO    [0m apps.memory_api.workers.memory_maintenance:memory_maintenance.py:358 {'tenant_id': 'test_tenant', 'project_id': 'test_project', 'lookback_hours': 24, 'mode': <MagicMock name='settings.REFLECTIVE_MEMORY_MODE' id='140555305223808'>, 'event': 'dreaming_cycle_started', 'level': 'info', 'logger': 'apps.memory_api.workers.memory_maintenance', 'timestamp': '2025-11-28T17:40:10.297244Z'}
2025-11-28T17:41:13.5106237Z [31m[1m__________________________ test_agent_execute_direct ___________________________[0m
2025-11-28T17:41:13.5106707Z [1m[31mtests/api/v1/test_agent.py[0m:10: in test_agent_execute_direct
2025-11-28T17:41:13.5109218Z     [0m[94mwith[39;49;00m patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_context_cache[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_get_cache,          patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_embedding_service[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_embed,          patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_vector_store[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_vec,          patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_llm_provider[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_llm,          patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent._update_memory_access_stats[39;49;00m[33m"[39;49;00m, new=AsyncMock()),          patch([33m"[39;49;00m[33mhttpx.AsyncClient[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_httpx:[90m[39;49;00m
2025-11-28T17:41:13.5111700Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5112243Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/unittest/mock.py[0m:1467: in __enter__
2025-11-28T17:41:13.5112839Z     [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
2025-11-28T17:41:13.5113219Z                       ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5113731Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/unittest/mock.py[0m:1437: in get_original
2025-11-28T17:41:13.5114288Z     [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
2025-11-28T17:41:13.5115249Z [1m[31mE   AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'[0m
2025-11-28T17:41:13.5116173Z [31m[1m_______________________ test_agent_execute_with_context ________________________[0m
2025-11-28T17:41:13.5116659Z [1m[31mtests/api/v1/test_agent.py[0m:58: in test_agent_execute_with_context
2025-11-28T17:41:13.5117383Z     [0m[94mwith[39;49;00m patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_context_cache[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_get_cache, \
2025-11-28T17:41:13.5117972Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5118487Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/unittest/mock.py[0m:1467: in __enter__
2025-11-28T17:41:13.5119042Z     [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
2025-11-28T17:41:13.5119417Z                       ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5119923Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/unittest/mock.py[0m:1437: in get_original
2025-11-28T17:41:13.5120917Z     [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
2025-11-28T17:41:13.5121864Z [1m[31mE   AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'[0m
2025-11-28T17:41:13.5122792Z [31m[1m_____________________ test_agent_execute_with_empty_prompt _____________________[0m
2025-11-28T17:41:13.5123314Z [1m[31mtests/api/v1/test_agent.py[0m:111: in test_agent_execute_with_empty_prompt
2025-11-28T17:41:13.5124053Z     [0m[94mwith[39;49;00m patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_context_cache[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_get_cache, \
2025-11-28T17:41:13.5124630Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5125140Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/unittest/mock.py[0m:1467: in __enter__
2025-11-28T17:41:13.5125714Z     [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
2025-11-28T17:41:13.5126087Z                       ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5126592Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/unittest/mock.py[0m:1437: in get_original
2025-11-28T17:41:13.5127286Z     [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
2025-11-28T17:41:13.5128232Z [1m[31mE   AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'[0m
2025-11-28T17:41:13.5129136Z [31m[1m______________________ test_agent_execute_with_llm_error _______________________[0m
2025-11-28T17:41:13.5129631Z [1m[31mtests/api/v1/test_agent.py[0m:163: in test_agent_execute_with_llm_error
2025-11-28T17:41:13.5130512Z     [0m[94mwith[39;49;00m patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_context_cache[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_get_cache, \
2025-11-28T17:41:13.5131102Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5131626Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/unittest/mock.py[0m:1467: in __enter__
2025-11-28T17:41:13.5132204Z     [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
2025-11-28T17:41:13.5132575Z                       ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5133083Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/unittest/mock.py[0m:1437: in get_original
2025-11-28T17:41:13.5133631Z     [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
2025-11-28T17:41:13.5134594Z [1m[31mE   AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'[0m
2025-11-28T17:41:13.5135517Z [31m[1m_______________________ test_governance_overview_success _______________________[0m
2025-11-28T17:41:13.5136041Z [1m[31mtests/api/v1/test_governance.py[0m:40: in test_governance_overview_success
2025-11-28T17:41:13.5136564Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5136953Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5137302Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5137680Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5138528Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:10.910231Z"}
2025-11-28T17:41:13.5139362Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5140780Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:10.910231Z'}
2025-11-28T17:41:13.5141862Z [31m[1m__________________ test_governance_overview_with_custom_days ___________________[0m
2025-11-28T17:41:13.5142411Z [1m[31mtests/api/v1/test_governance.py[0m:72: in test_governance_overview_with_custom_days
2025-11-28T17:41:13.5142955Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5143328Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5143677Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5144038Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5144881Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:10.930226Z"}
2025-11-28T17:41:13.5145715Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5147084Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:10.930226Z'}
2025-11-28T17:41:13.5148136Z [31m[1m________________________ test_governance_overview_error ________________________[0m
2025-11-28T17:41:13.5148641Z [1m[31mtests/api/v1/test_governance.py[0m:88: in test_governance_overview_error
2025-11-28T17:41:13.5149163Z     [0m[94massert[39;49;00m response.status_code == [94m500[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5149553Z [1m[31mE   assert 401 == 500[0m
2025-11-28T17:41:13.5149892Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5150646Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5151890Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:10.950634Z"}
2025-11-28T17:41:13.5152964Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5154136Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:10.950634Z'}
2025-11-28T17:41:13.5155200Z [31m[1m_____________________ test_tenant_governance_stats_success _____________________[0m
2025-11-28T17:41:13.5155731Z [1m[31mtests/api/v1/test_governance.py[0m:131: in test_tenant_governance_stats_success
2025-11-28T17:41:13.5156269Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5156644Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5156984Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5157352Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5158005Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:10.972340Z"}
2025-11-28T17:41:13.5159146Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:10.972689Z"}
2025-11-28T17:41:13.5160392Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5161349Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:10.972340Z'}
2025-11-28T17:41:13.5162969Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:10.972689Z'}
2025-11-28T17:41:13.5164060Z [31m[1m_____________________ test_tenant_governance_stats_no_data _____________________[0m
2025-11-28T17:41:13.5164592Z [1m[31mtests/api/v1/test_governance.py[0m:161: in test_tenant_governance_stats_no_data
2025-11-28T17:41:13.5165127Z     [0m[94massert[39;49;00m response.status_code == [94m404[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5165499Z [1m[31mE   assert 401 == 404[0m
2025-11-28T17:41:13.5165842Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5166341Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5167014Z {"tenant_id": "nonexistent-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:10.992634Z"}
2025-11-28T17:41:13.5168215Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/nonexistent-tenant", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:10.993021Z"}
2025-11-28T17:41:13.5169109Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5170201Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'nonexistent-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:10.992634Z'}
2025-11-28T17:41:13.5171879Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/nonexistent-tenant', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:10.993021Z'}
2025-11-28T17:41:13.5173002Z [31m[1m_______________ test_tenant_governance_stats_with_custom_period ________________[0m
2025-11-28T17:41:13.5173586Z [1m[31mtests/api/v1/test_governance.py[0m:194: in test_tenant_governance_stats_with_custom_period
2025-11-28T17:41:13.5174149Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5174529Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5174866Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5175233Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5175889Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.014756Z"}
2025-11-28T17:41:13.5177026Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.015151Z"}
2025-11-28T17:41:13.5177884Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5178824Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.014756Z'}
2025-11-28T17:41:13.5180687Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.015151Z'}
2025-11-28T17:41:13.5181784Z [31m[1m______________________ test_tenant_budget_status_success _______________________[0m
2025-11-28T17:41:13.5182305Z [1m[31mtests/api/v1/test_governance.py[0m:214: in test_tenant_budget_status_success
2025-11-28T17:41:13.5182831Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5183205Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5183542Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5183920Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5184566Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.035711Z"}
2025-11-28T17:41:13.5185857Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant/budget", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.036093Z"}
2025-11-28T17:41:13.5186739Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5187687Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.035711Z'}
2025-11-28T17:41:13.5189323Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant/budget', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.036093Z'}
2025-11-28T17:41:13.5190776Z [31m[1m____________________ test_tenant_budget_status_with_alerts _____________________[0m
2025-11-28T17:41:13.5191319Z [1m[31mtests/api/v1/test_governance.py[0m:240: in test_tenant_budget_status_with_alerts
2025-11-28T17:41:13.5191851Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5192227Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5192563Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5192928Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5193572Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.055259Z"}
2025-11-28T17:41:13.5194745Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant/budget", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.055560Z"}
2025-11-28T17:41:13.5195631Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5196575Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.055259Z'}
2025-11-28T17:41:13.5198201Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant/budget', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.055560Z'}
2025-11-28T17:41:13.5199521Z [31m[1m_____________________ test_tenant_budget_status_zero_usage _____________________[0m
2025-11-28T17:41:13.5200178Z [1m[31mtests/api/v1/test_governance.py[0m:261: in test_tenant_budget_status_zero_usage
2025-11-28T17:41:13.5200713Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5201086Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5201423Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5201793Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5202425Z {"tenant_id": "new-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.075525Z"}
2025-11-28T17:41:13.5203581Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/new-tenant/budget", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.075850Z"}
2025-11-28T17:41:13.5204463Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5205527Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'new-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.075525Z'}
2025-11-28T17:41:13.5207136Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/new-tenant/budget', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.075850Z'}
2025-11-28T17:41:13.5208240Z [31m[1m_______________________ test_tenant_budget_status_error ________________________[0m
2025-11-28T17:41:13.5208759Z [1m[31mtests/api/v1/test_governance.py[0m:279: in test_tenant_budget_status_error
2025-11-28T17:41:13.5209279Z     [0m[94massert[39;49;00m response.status_code == [94m500[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5209651Z [1m[31mE   assert 401 == 500[0m
2025-11-28T17:41:13.5210095Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5210476Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5211117Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.094333Z"}
2025-11-28T17:41:13.5212285Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant/budget", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.094579Z"}
2025-11-28T17:41:13.5213171Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5214123Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.094333Z'}
2025-11-28T17:41:13.5215762Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant/budget', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.094579Z'}
2025-11-28T17:41:13.5216870Z [31m[1m____________________ test_governance_overview_invalid_days _____________________[0m
2025-11-28T17:41:13.5217409Z [1m[31mtests/api/v1/test_governance.py[0m:296: in test_governance_overview_invalid_days
2025-11-28T17:41:13.5218106Z     [0m[94massert[39;49;00m response.status_code == [94m422[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5218475Z [1m[31mE   assert 401 == 422[0m
2025-11-28T17:41:13.5218816Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5219182Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5220131Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.112281Z"}
2025-11-28T17:41:13.5220962Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5222103Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.112281Z'}
2025-11-28T17:41:13.5223171Z [31m[1m__________________ test_tenant_governance_stats_invalid_days ___________________[0m
2025-11-28T17:41:13.5223716Z [1m[31mtests/api/v1/test_governance.py[0m:308: in test_tenant_governance_stats_invalid_days
2025-11-28T17:41:13.5224393Z     [0m[94massert[39;49;00m response.status_code == [94m422[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5224765Z [1m[31mE   assert 401 == 422[0m
2025-11-28T17:41:13.5225108Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5225477Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5226119Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.131023Z"}
2025-11-28T17:41:13.5227252Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.131284Z"}
2025-11-28T17:41:13.5228112Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5229056Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.131023Z'}
2025-11-28T17:41:13.5230926Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.131284Z'}
2025-11-28T17:41:13.5232027Z [31m[1m____________________ test_governance_overview_empty_results ____________________[0m
2025-11-28T17:41:13.5232581Z [1m[31mtests/api/v1/test_governance.py[0m:330: in test_governance_overview_empty_results
2025-11-28T17:41:13.5233127Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5233496Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5233838Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5234203Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5235033Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.149162Z"}
2025-11-28T17:41:13.5235866Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5236999Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.149162Z'}
2025-11-28T17:41:13.5238177Z [31m[1m__________________________ test_store_memory_success ___________________________[0m
2025-11-28T17:41:13.5238652Z [1m[31mtests/api/v1/test_memory.py[0m:59: in test_store_memory_success
2025-11-28T17:41:13.5239140Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5239508Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5239849Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5240341Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5240984Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.170026Z"}
2025-11-28T17:41:13.5242072Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/store", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.170346Z"}
2025-11-28T17:41:13.5243076Z STORE ERROR: {'error': {'code': '401', 'message': 'Authentication required to access tenant'}}
2025-11-28T17:41:13.5243511Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5244465Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.170026Z'}
2025-11-28T17:41:13.5246194Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/store', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.170346Z'}
2025-11-28T17:41:13.5247484Z [31m[1m__________________________ test_query_memory_success ___________________________[0m
2025-11-28T17:41:13.5247962Z [1m[31mtests/api/v1/test_memory.py[0m:88: in test_query_memory_success
2025-11-28T17:41:13.5248465Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5248839Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5249207Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5249577Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5250347Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.189691Z"}
2025-11-28T17:41:13.5251432Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/query", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.189989Z"}
2025-11-28T17:41:13.5252236Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5253191Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.189691Z'}
2025-11-28T17:41:13.5254728Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/query', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.189989Z'}
2025-11-28T17:41:13.5255743Z [31m[1m__________________________ test_delete_memory_success __________________________[0m
2025-11-28T17:41:13.5256409Z [1m[31mtests/api/v1/test_memory.py[0m:101: in test_delete_memory_success
2025-11-28T17:41:13.5256914Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5257290Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5257630Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5257996Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5258642Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.207228Z"}
2025-11-28T17:41:13.5259730Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/delete", "method": "DELETE", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.207527Z"}
2025-11-28T17:41:13.5260665Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5261616Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.207228Z'}
2025-11-28T17:41:13.5263313Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/delete', 'method': 'DELETE', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.207527Z'}
2025-11-28T17:41:13.5264346Z [31m[1m________________________ test_reflection_stats_success _________________________[0m
2025-11-28T17:41:13.5264843Z [1m[31mtests/api/v1/test_memory.py[0m:139: in test_reflection_stats_success
2025-11-28T17:41:13.5265343Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5265718Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5266073Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5266439Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5267093Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.437347Z"}
2025-11-28T17:41:13.5268210Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/reflection-stats", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.437699Z"}
2025-11-28T17:41:13.5269050Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5270192Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.437347Z'}
2025-11-28T17:41:13.5271865Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/reflection-stats', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.437699Z'}
2025-11-28T17:41:13.5272943Z [31m[1m___________________ test_store_memory_missing_tenant_header ____________________[0m
2025-11-28T17:41:13.5273472Z [1m[31mtests/api/v1/test_memory.py[0m:157: in test_store_memory_missing_tenant_header
2025-11-28T17:41:13.5274267Z     [0m[94massert[39;49;00m [33m"[39;49;00m[33mX-Tenant-Id[39;49;00m[33m"[39;49;00m [95min[39;49;00m response.json()[[33m"[39;49;00m[33mdetail[39;49;00m[33m"[39;49;00m][90m[39;49;00m
2025-11-28T17:41:13.5275050Z                             ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5275345Z [1m[31mE   KeyError: 'detail'[0m
2025-11-28T17:41:13.5275641Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5276414Z {"status_code": 400, "detail": "X-Tenant-Id header is required", "path": "/v1/memory/store", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.456294Z"}
2025-11-28T17:41:13.5277181Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5278240Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 400, 'detail': 'X-Tenant-Id header is required', 'path': '/v1/memory/store', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.456294Z'}
2025-11-28T17:41:13.5279213Z [31m[1m________________________ test_query_memory_with_filters ________________________[0m
2025-11-28T17:41:13.5279715Z [1m[31mtests/api/v1/test_memory.py[0m:190: in test_query_memory_with_filters
2025-11-28T17:41:13.5280369Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5280750Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5281242Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5281607Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5282249Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.475064Z"}
2025-11-28T17:41:13.5283625Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/query", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.475323Z"}
2025-11-28T17:41:13.5284568Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5285559Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.475064Z'}
2025-11-28T17:41:13.5287111Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/query', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.475323Z'}
2025-11-28T17:41:13.5288142Z [31m[1m____________________ test_query_memory_with_graph_traversal ____________________[0m
2025-11-28T17:41:13.5288666Z [1m[31mtests/api/v1/test_memory.py[0m:221: in test_query_memory_with_graph_traversal
2025-11-28T17:41:13.5289189Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5289567Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5289913Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5290469Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5291120Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.494267Z"}
2025-11-28T17:41:13.5292199Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/query", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.494556Z"}
2025-11-28T17:41:13.5292997Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5293946Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.494267Z'}
2025-11-28T17:41:13.5295732Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/query', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.494556Z'}
2025-11-28T17:41:13.5296767Z [31m[1m_________________________ test_delete_memory_not_found _________________________[0m
2025-11-28T17:41:13.5297254Z [1m[31mtests/api/v1/test_memory.py[0m:238: in test_delete_memory_not_found
2025-11-28T17:41:13.5297754Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5298128Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:13.5298464Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:13.5298838Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5299481Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:11.511357Z"}
2025-11-28T17:41:13.5300709Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/delete", "method": "DELETE", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.511630Z"}
2025-11-28T17:41:13.5301649Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5302599Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:11.511357Z'}
2025-11-28T17:41:13.5304146Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/delete', 'method': 'DELETE', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.511630Z'}
2025-11-28T17:41:13.5305185Z [31m[1m__________________________ test_hybrid_search_success __________________________[0m
2025-11-28T17:41:13.5305685Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:74: in test_hybrid_search_success
2025-11-28T17:41:13.5306206Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5306575Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:13.5306940Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:13.5307325Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5308137Z {"error": "'dict' object has no attribute 'total_results'", "query": "authentication system", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:11.535538Z"}
2025-11-28T17:41:13.5309379Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.535806Z"}
2025-11-28T17:41:13.5310301Z 
2025-11-28T17:41:13.5310564Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:13.5311016Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5312226Z [31m[1mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'authentication system', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:11.535538Z'}
2025-11-28T17:41:13.5314122Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.535806Z'}
2025-11-28T17:41:13.5315160Z [31m[1m______________________ test_hybrid_search_with_reranking _______________________[0m
2025-11-28T17:41:13.5315687Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:137: in test_hybrid_search_with_reranking
2025-11-28T17:41:13.5316214Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5316584Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:13.5316954Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:13.5317340Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5318183Z {"error": "'dict' object has no attribute 'total_results'", "query": "explain the authentication flow", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:11.556129Z"}
2025-11-28T17:41:13.5319447Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.556381Z"}
2025-11-28T17:41:13.5320370Z 
2025-11-28T17:41:13.5320601Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:13.5321052Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5322288Z [31m[1mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'explain the authentication flow', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:11.556129Z'}
2025-11-28T17:41:13.5324068Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.556381Z'}
2025-11-28T17:41:13.5325100Z [31m[1m_______________________ test_hybrid_search_with_filters ________________________[0m
2025-11-28T17:41:13.5325624Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:202: in test_hybrid_search_with_filters
2025-11-28T17:41:13.5326150Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5326523Z [1m[31mE   assert 422 == 200[0m
2025-11-28T17:41:13.5326885Z [1m[31mE    +  where 422 = <Response [422 Unprocessable Entity]>.status_code[0m
2025-11-28T17:41:13.5327276Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5328358Z {"errors": [{"type": "datetime_type", "loc": ["body", "temporal_filter"], "msg": "Input should be a valid datetime", "input": {"start_date": "2025-01-01T00:00:00Z", "end_date": "2025-12-31T23:59:59Z"}}], "path": "/v1/search/hybrid", "method": "POST", "event": "validation_error", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.576948Z"}
2025-11-28T17:41:13.5329287Z 
2025-11-28T17:41:13.5329922Z DEBUG: Response 422: {'error': {'code': '422', 'message': 'Validation Error', 'details': [{'type': 'datetime_type', 'loc': ['body', 'temporal_filter'], 'msg': 'Input should be a valid datetime', 'input': {'start_date': '2025-01-01T00:00:00Z', 'end_date': '2025-12-31T23:59:59Z'}}]}}
2025-11-28T17:41:13.5330886Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5332327Z [33mWARNING [0m apps.memory_api.main:main.py:209 {'errors': [{'type': 'datetime_type', 'loc': ('body', 'temporal_filter'), 'msg': 'Input should be a valid datetime', 'input': {'start_date': '2025-01-01T00:00:00Z', 'end_date': '2025-12-31T23:59:59Z'}}], 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'validation_error', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.576948Z'}
2025-11-28T17:41:13.5333753Z [31m[1m____________________ test_hybrid_search_with_manual_weights ____________________[0m
2025-11-28T17:41:13.5334302Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:267: in test_hybrid_search_with_manual_weights
2025-11-28T17:41:13.5334849Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5335216Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:13.5335585Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:13.5335974Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5336792Z {"error": "'dict' object has no attribute 'total_results'", "query": "database optimization", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:11.596713Z"}
2025-11-28T17:41:13.5338030Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.596961Z"}
2025-11-28T17:41:13.5338878Z 
2025-11-28T17:41:13.5339106Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:13.5339560Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5340884Z [31m[1mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'database optimization', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:11.596713Z'}
2025-11-28T17:41:13.5342654Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.596961Z'}
2025-11-28T17:41:13.5343692Z [31m[1m_____________________ test_hybrid_search_with_graph_depth ______________________[0m
2025-11-28T17:41:13.5344222Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:327: in test_hybrid_search_with_graph_depth
2025-11-28T17:41:13.5344769Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5345150Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:13.5345516Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:13.5345955Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5346799Z {"error": "'dict' object has no attribute 'total_results'", "query": "knowledge graph relationships", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:11.617203Z"}
2025-11-28T17:41:13.5348078Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.617591Z"}
2025-11-28T17:41:13.5348737Z 
2025-11-28T17:41:13.5348970Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:13.5349415Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5350940Z [31m[1mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'knowledge graph relationships', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:11.617203Z'}
2025-11-28T17:41:13.5352928Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.617591Z'}
2025-11-28T17:41:13.5353963Z [31m[1m_________________ test_hybrid_search_with_conversation_history _________________[0m
2025-11-28T17:41:13.5354538Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:390: in test_hybrid_search_with_conversation_history
2025-11-28T17:41:13.5355093Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5355705Z [1m[31mE   assert 422 == 200[0m
2025-11-28T17:41:13.5356260Z [1m[31mE    +  where 422 = <Response [422 Unprocessable Entity]>.status_code[0m
2025-11-28T17:41:13.5356657Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5358176Z {"errors": [{"type": "string_type", "loc": ["body", "conversation_history", 0], "msg": "Input should be a valid string", "input": {"role": "user", "content": "Tell me about authentication"}}, {"type": "string_type", "loc": ["body", "conversation_history", 1], "msg": "Input should be a valid string", "input": {"role": "assistant", "content": "Authentication uses JWT tokens"}}], "path": "/v1/search/hybrid", "method": "POST", "event": "validation_error", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.639352Z"}
2025-11-28T17:41:13.5359670Z 
2025-11-28T17:41:13.5360836Z DEBUG: Response 422: {'error': {'code': '422', 'message': 'Validation Error', 'details': [{'type': 'string_type', 'loc': ['body', 'conversation_history', 0], 'msg': 'Input should be a valid string', 'input': {'role': 'user', 'content': 'Tell me about authentication'}}, {'type': 'string_type', 'loc': ['body', 'conversation_history', 1], 'msg': 'Input should be a valid string', 'input': {'role': 'assistant', 'content': 'Authentication uses JWT tokens'}}]}}
2025-11-28T17:41:13.5362101Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5364086Z [33mWARNING [0m apps.memory_api.main:main.py:209 {'errors': [{'type': 'string_type', 'loc': ('body', 'conversation_history', 0), 'msg': 'Input should be a valid string', 'input': {'role': 'user', 'content': 'Tell me about authentication'}}, {'type': 'string_type', 'loc': ('body', 'conversation_history', 1), 'msg': 'Input should be a valid string', 'input': {'role': 'assistant', 'content': 'Authentication uses JWT tokens'}}], 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'validation_error', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.639352Z'}
2025-11-28T17:41:13.5365792Z [31m[1m________________________ test_hybrid_search_empty_query ________________________[0m
2025-11-28T17:41:13.5366311Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:447: in test_hybrid_search_empty_query
2025-11-28T17:41:13.5366951Z     [0m[94massert[39;49;00m response.status_code [95min[39;49;00m [[94m200[39;49;00m, [94m400[39;49;00m][90m[39;49;00m
2025-11-28T17:41:13.5367410Z [1m[31mE   assert 422 in [200, 400][0m
2025-11-28T17:41:13.5367802Z [1m[31mE    +  where 422 = <Response [422 Unprocessable Entity]>.status_code[0m
2025-11-28T17:41:13.5368194Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5369154Z {"errors": [{"type": "string_too_short", "loc": ["body", "query"], "msg": "String should have at least 1 character", "input": "", "ctx": {"min_length": 1}}], "path": "/v1/search/hybrid", "method": "POST", "event": "validation_error", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.660421Z"}
2025-11-28T17:41:13.5370351Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5371655Z [33mWARNING [0m apps.memory_api.main:main.py:209 {'errors': [{'type': 'string_too_short', 'loc': ('body', 'query'), 'msg': 'String should have at least 1 character', 'input': '', 'ctx': {'min_length': 1}}], 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'validation_error', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.660421Z'}
2025-11-28T17:41:13.5372836Z [31m[1m__________________ test_hybrid_search_all_strategies_disabled __________________[0m
2025-11-28T17:41:13.5373398Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:533: in test_hybrid_search_all_strategies_disabled
2025-11-28T17:41:13.5373952Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5374326Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:13.5374697Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:13.5375087Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:13.5375860Z {"error": "'dict' object has no attribute 'total_results'", "query": "test query", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:11.692083Z"}
2025-11-28T17:41:13.5377185Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:11.692321Z"}
2025-11-28T17:41:13.5377856Z 
2025-11-28T17:41:13.5378166Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:13.5378626Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:13.5379786Z [31m[1mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'test query', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:11.692083Z'}
2025-11-28T17:41:13.5381692Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:11.692321Z'}
2025-11-28T17:41:13.5382710Z [31m[1m____________________________ test_basic_completion _____________________________[0m
2025-11-28T17:41:13.5383171Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:13.5383760Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:13.5384265Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5384983Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:13.5385764Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:13.5386433Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:13.5387238Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:13.5387805Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5388401Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:13.5389421Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5391081Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5391917Z 
2025-11-28T17:41:13.5392178Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:13.5392699Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:106: in test_basic_completion
2025-11-28T17:41:13.5393235Z     [0mresponse = [94mawait[39;49;00m openai_provider.complete(request)[90m[39;49;00m
2025-11-28T17:41:13.5393661Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5394298Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:13.5394992Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5395396Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5396140Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:13.5396834Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5397256Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5397841Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:13.5398453Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5398823Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5399363Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:13.5399932Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5400473Z            ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5401035Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:13.5401611Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:13.5401931Z           ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5402477Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:13.5403105Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:13.5403494Z           ^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5404015Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:449: in result
2025-11-28T17:41:13.5404650Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:13.5405006Z            ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5405556Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:401: in __get_result
2025-11-28T17:41:13.5406141Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:13.5406798Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:13.5407426Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5407781Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5408157Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:13.5408742Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:13.5410120Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5411296Z [31m[1m________________________________ test_json_mode ________________________________[0m
2025-11-28T17:41:13.5411741Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:13.5412320Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:13.5412822Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5413531Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:13.5414296Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:13.5414952Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:13.5415879Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:13.5416437Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5417026Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:13.5417904Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5419250Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5420305Z 
2025-11-28T17:41:13.5420709Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:13.5421505Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:134: in test_json_mode
2025-11-28T17:41:13.5422337Z     [0mresponse = [94mawait[39;49;00m openai_provider.complete(request)[90m[39;49;00m
2025-11-28T17:41:13.5423084Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5424196Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:13.5425446Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5426160Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5427238Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:13.5428502Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5429227Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5430552Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:13.5431762Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5432453Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5433474Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:13.5434898Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5435516Z            ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5436574Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:13.5437741Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:13.5438347Z           ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5439397Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:13.5440905Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:13.5441655Z           ^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5442680Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:449: in result
2025-11-28T17:41:13.5443830Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:13.5444568Z            ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5445657Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:401: in __get_result
2025-11-28T17:41:13.5446931Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:13.5448579Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:13.5449834Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5450762Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5451474Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:13.5452228Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:13.5454619Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5456876Z [31m[1m________________________________ test_streaming ________________________________[0m
2025-11-28T17:41:13.5457770Z [1m[31mapps/llm/providers/openai_provider.py[0m:216: in stream
2025-11-28T17:41:13.5458832Z     [0mstream = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:13.5459770Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5461337Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:13.5462841Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:13.5464130Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:13.5465670Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:13.5466798Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5467988Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:13.5469733Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5472572Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5474428Z 
2025-11-28T17:41:13.5474926Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:13.5475885Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:158: in test_streaming
2025-11-28T17:41:13.5476997Z     [0m[94masync[39;49;00m [94mfor[39;49;00m chunk [95min[39;49;00m openai_provider.stream(request):[90m[39;49;00m
2025-11-28T17:41:13.5477977Z [1m[31mapps/llm/providers/openai_provider.py[0m:234: in stream
2025-11-28T17:41:13.5478728Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:13.5481308Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5483611Z [31m[1m_______________________________ test_token_usage _______________________________[0m
2025-11-28T17:41:13.5484495Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:13.5485603Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:13.5486830Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5488111Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:13.5489594Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:13.5491154Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:13.5492740Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:13.5493854Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5494983Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:13.5496690Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5499307Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5501196Z 
2025-11-28T17:41:13.5501749Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:13.5502778Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:176: in test_token_usage
2025-11-28T17:41:13.5503816Z     [0mresponse = [94mawait[39;49;00m openai_provider.complete(request)[90m[39;49;00m
2025-11-28T17:41:13.5504662Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5505894Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:13.5507238Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5507999Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5509156Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:13.5510832Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5511649Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5513126Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:13.5514222Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5514618Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5515170Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:13.5515743Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5516084Z            ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5516639Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:13.5517215Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:13.5517541Z           ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5518095Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:13.5518714Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:13.5519091Z           ^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5519797Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:449: in result
2025-11-28T17:41:13.5520674Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:13.5521040Z            ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5521598Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:401: in __get_result
2025-11-28T17:41:13.5522186Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:13.5522847Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:13.5523470Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5523830Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5524206Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:13.5524602Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:13.5525853Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5527020Z [31m[1m___________________________ test_temperature_control ___________________________[0m
2025-11-28T17:41:13.5527490Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:13.5528070Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:13.5528570Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5529279Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:13.5530261Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:13.5530918Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:13.5531713Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:13.5532268Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5533007Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:13.5533481Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5534395Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5534404Z 
2025-11-28T17:41:13.5534642Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:13.5534906Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:197: in test_temperature_control
2025-11-28T17:41:13.5535189Z     [0mresponse1 = [94mawait[39;49;00m openai_provider.complete(request_zero)[90m[39;49;00m
2025-11-28T17:41:13.5535341Z                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5535807Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:13.5536056Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5536375Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5536807Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:13.5537075Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5537225Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5537642Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:13.5537852Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5537985Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5538359Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:13.5538552Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5538676Z            ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5539069Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:13.5539247Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:13.5539366Z           ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5539749Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:13.5540163Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:13.5540309Z           ^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5540677Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:449: in result
2025-11-28T17:41:13.5540888Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:13.5541014Z            ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5541405Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:401: in __get_result
2025-11-28T17:41:13.5541606Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:13.5542034Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:13.5542232Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5542362Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5542712Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:13.5542876Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:13.5543921Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5544159Z [31m[1m_______________________________ test_max_tokens ________________________________[0m
2025-11-28T17:41:13.5544364Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:13.5544719Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:13.5544875Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5545413Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:13.5545667Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:13.5546204Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:13.5546624Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:13.5546793Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5547200Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:13.5547672Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5548570Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5548588Z 
2025-11-28T17:41:13.5548824Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:13.5549050Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:216: in test_max_tokens
2025-11-28T17:41:13.5549309Z     [0mresponse = [94mawait[39;49;00m openai_provider.complete(request)[90m[39;49;00m
2025-11-28T17:41:13.5549454Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5549904Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:13.5550332Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5550470Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5550901Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:13.5551170Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5551314Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5551729Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:13.5551932Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5552063Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5552434Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:13.5552745Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5552873Z            ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5553265Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:13.5553444Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:13.5553564Z           ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5553947Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:13.5554179Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:13.5554308Z           ^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5554664Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:449: in result
2025-11-28T17:41:13.5555020Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:13.5555140Z            ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5555525Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:401: in __get_result
2025-11-28T17:41:13.5555839Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:13.5556268Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:13.5556470Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5556595Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5556807Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:13.5556964Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:13.5558003Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5558283Z [31m[1m___________ test_provider_contract_hello_world[openai-gpt-3.5-turbo] ___________[0m
2025-11-28T17:41:13.5558486Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:13.5558831Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:13.5558987Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5559511Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:13.5559767Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:13.5560371Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:13.5560793Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:13.5560969Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5561368Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:13.5561844Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5562730Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5562863Z 
2025-11-28T17:41:13.5563113Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:13.5563414Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:247: in test_provider_contract_hello_world
2025-11-28T17:41:13.5563665Z     [0mresponse = [94mawait[39;49;00m provider.complete(llm_request)[90m[39;49;00m
2025-11-28T17:41:13.5563803Z                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5564252Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:13.5564502Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5564636Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5565074Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:13.5565342Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5565597Z          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5566012Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:13.5566212Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:13.5566344Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5566713Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:13.5566897Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5567025Z            ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5567423Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:13.5567594Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:13.5567720Z           ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5568112Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:13.5568346Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:13.5568472Z           ^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5568830Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:449: in result
2025-11-28T17:41:13.5569045Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:13.5569164Z            ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5569554Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/concurrent/futures/_base.py[0m:401: in __get_result
2025-11-28T17:41:13.5569750Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:13.5570397Z [1m[31m/opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:13.5570620Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:13.5570747Z              ^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5570953Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:13.5571116Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:13.5572148Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:13.5572512Z [31m[1m____________________________ test_merge_node_edges _____________________________[0m
2025-11-28T17:41:13.5572784Z [1m[31mtests/repositories/test_graph_repository.py[0m:94: in test_merge_node_edges
2025-11-28T17:41:13.5573196Z     [0mresult = [94mawait[39;49;00m repo.merge_node_edges(source_node_id=[94m1[39;49;00m, target_node_id=[94m2[39;49;00m)[90m[39;49;00m
2025-11-28T17:41:13.5573365Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5573638Z [1m[31mapps/memory_api/repositories/graph_repository.py[0m:683: in merge_node_edges
2025-11-28T17:41:13.5573862Z     [0m[94masync[39;49;00m [94mwith[39;49;00m conn.transaction():[90m[39;49;00m
2025-11-28T17:41:13.5573987Z                ^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5574312Z [1m[31mE   TypeError: 'coroutine' object does not support the asynchronous context manager protocol[0m
2025-11-28T17:41:13.5574548Z [31m[1m___________________________ test_store_graph_triples ___________________________[0m
2025-11-28T17:41:13.5574829Z [1m[31mtests/repositories/test_graph_repository.py[0m:291: in test_store_graph_triples
2025-11-28T17:41:13.5575167Z     [0mstats = [94mawait[39;49;00m repo.store_graph_triples([90m[39;49;00m
2025-11-28T17:41:13.5575445Z [1m[31mapps/memory_api/repositories/graph_repository.py[0m:521: in store_graph_triples
2025-11-28T17:41:13.5575662Z     [0m[94masync[39;49;00m [94mwith[39;49;00m conn.transaction():[90m[39;49;00m
2025-11-28T17:41:13.5575787Z                ^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5576099Z [1m[31mE   TypeError: 'coroutine' object does not support the asynchronous context manager protocol[0m
2025-11-28T17:41:13.5576323Z [31m[1m______________________________ test_check_budget _______________________________[0m
2025-11-28T17:41:13.5576556Z [1m[31mtests/services/test_budget_service.py[0m:20: in test_check_budget
2025-11-28T17:41:13.5577094Z     [0m[94mawait[39;49;00m budget_service.check_budget(mock_pool, [33m"[39;49;00m[33mt1[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mp1[39;49;00m[33m"[39;49;00m, [94m0.1[39;49;00m)[90m[39;49;00m
2025-11-28T17:41:13.5577258Z           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5577526Z [1m[31mE   TypeError: check_budget() missing 1 required positional argument: 'tokens'[0m
2025-11-28T17:41:13.5577752Z [31m[1m____________________________ test_check_budget_fail ____________________________[0m
2025-11-28T17:41:13.5577994Z [1m[31mtests/services/test_budget_service.py[0m:35: in test_check_budget_fail
2025-11-28T17:41:13.5578513Z     [0m[94mawait[39;49;00m budget_service.check_budget(mock_pool, [33m"[39;49;00m[33mt1[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mp1[39;49;00m[33m"[39;49;00m, [94m0.2[39;49;00m)[90m[39;49;00m
2025-11-28T17:41:13.5578670Z           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5578930Z [1m[31mE   TypeError: check_budget() missing 1 required positional argument: 'tokens'[0m
2025-11-28T17:41:13.5579156Z [31m[1m_____________________________ test_reflection_flow _____________________________[0m
2025-11-28T17:41:13.5579403Z [1m[31mtests/services/test_reflection_engine.py[0m:17: in test_reflection_flow
2025-11-28T17:41:13.5579577Z     [0mengine = ReflectionEngine(mock_pool)[90m[39;49;00m
2025-11-28T17:41:13.5579717Z              ^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5579945Z [1m[31mapps/memory_api/services/reflection_engine.py[0m:82: in __init__
2025-11-28T17:41:13.5580441Z     [0m[96mself[39;49;00m.graph_extractor = GraphExtractionService(pool)[90m[39;49;00m
2025-11-28T17:41:13.5580599Z                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
2025-11-28T17:41:13.5580961Z [1m[31mE   TypeError: GraphExtractionService.__init__() missing 1 required positional argument: 'graph_repo'[0m
2025-11-28T17:41:13.5581319Z [31m[1m_____________________________ test_pydantic_models _____________________________[0m
2025-11-28T17:41:13.5581528Z [1m[31mtest_enterprise_features.py[0m:124: in test_pydantic_models
2025-11-28T17:41:13.5581872Z     [0m[94massert[39;49;00m graph_triple.source == [33m"[39;49;00m[33mEntity1[39;49;00m[33m"[39;49;00m[90m[39;49;00m
2025-11-28T17:41:13.5582056Z [1m[31mE   AssertionError: assert 'entity1' == 'Entity1'[0m
2025-11-28T17:41:13.5582152Z [1m[31mE     [0m
2025-11-28T17:41:13.5582323Z [1m[31mE     [0m[91m- Entity1[39;49;00m[90m[39;49;00m[0m
2025-11-28T17:41:13.5582437Z [1m[31mE     ? ^[90m[39;49;00m[0m
2025-11-28T17:41:13.5582588Z [1m[31mE     [92m+ entity1[39;49;00m[90m[39;49;00m[0m
2025-11-28T17:41:13.5582703Z [1m[31mE     ? ^[90m[39;49;00m[0m
2025-11-28T17:41:13.5582892Z [33m=============================== warnings summary ===============================[0m
2025-11-28T17:41:13.5583191Z ../../../../../opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/starlette/formparsers.py:12
2025-11-28T17:41:13.5583732Z   /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/starlette/formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.
2025-11-28T17:41:13.5583927Z     import multipart
2025-11-28T17:41:13.5583934Z 
2025-11-28T17:41:13.5584097Z apps/memory_api/tests/test_dashboard_websocket.py: 15 warnings
2025-11-28T17:41:13.5584235Z apps/memory_api/tests/test_evaluation_suite.py: 1 warning
2025-11-28T17:41:13.5584461Z apps/memory_api/tests/test_event_triggers.py: 8 warnings
2025-11-28T17:41:13.5584670Z apps/memory_api/tests/test_phase2_models.py: 18 warnings
2025-11-28T17:41:13.5585782Z   /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/pydantic/main.py:250: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5586020Z     validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
2025-11-28T17:41:13.5586027Z 
2025-11-28T17:41:13.5586336Z apps/memory_api/tests/test_reflective_flags.py::TestDreamingEnabled::test_dreaming_enabled_runs_dreaming
2025-11-28T17:41:13.5586661Z apps/memory_api/tests/test_reflective_flags.py::TestMaintenanceScheduler::test_maintenance_with_all_flags_enabled
2025-11-28T17:41:13.5587236Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/workers/memory_maintenance.py:369: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
2025-11-28T17:41:13.5587339Z     async with self.pool.acquire() as conn:
2025-11-28T17:41:13.5587512Z   Enable tracemalloc to get traceback where the object was allocated.
2025-11-28T17:41:13.5587789Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
2025-11-28T17:41:13.5587798Z 
2025-11-28T17:41:13.5587957Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_success
2025-11-28T17:41:13.5588848Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/api/v1/test_search_hybrid.py:39: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5588960Z     "analyzed_at": datetime.utcnow().isoformat()
2025-11-28T17:41:13.5588966Z 
2025-11-28T17:41:13.5589136Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_reranking
2025-11-28T17:41:13.5590187Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/api/v1/test_search_hybrid.py:99: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5590443Z     "analyzed_at": datetime.utcnow().isoformat()
2025-11-28T17:41:13.5590449Z 
2025-11-28T17:41:13.5590616Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_filters
2025-11-28T17:41:13.5591504Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/api/v1/test_search_hybrid.py:161: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5591612Z     "analyzed_at": datetime.utcnow().isoformat()
2025-11-28T17:41:13.5591618Z 
2025-11-28T17:41:13.5591801Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_manual_weights
2025-11-28T17:41:13.5592688Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/api/v1/test_search_hybrid.py:226: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5592794Z     "analyzed_at": datetime.utcnow().isoformat()
2025-11-28T17:41:13.5592799Z 
2025-11-28T17:41:13.5592980Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_graph_depth
2025-11-28T17:41:13.5593859Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/api/v1/test_search_hybrid.py:291: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5594072Z     "analyzed_at": datetime.utcnow().isoformat()
2025-11-28T17:41:13.5594079Z 
2025-11-28T17:41:13.5594277Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_conversation_history
2025-11-28T17:41:13.5595156Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/api/v1/test_search_hybrid.py:351: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5595260Z     "analyzed_at": datetime.utcnow().isoformat()
2025-11-28T17:41:13.5595266Z 
2025-11-28T17:41:13.5595426Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_empty_query
2025-11-28T17:41:13.5596318Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/api/v1/test_search_hybrid.py:414: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5596416Z     "analyzed_at": datetime.utcnow().isoformat()
2025-11-28T17:41:13.5596421Z 
2025-11-28T17:41:13.5596613Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_all_strategies_disabled
2025-11-28T17:41:13.5597495Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/api/v1/test_search_hybrid.py:497: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5597597Z     "analyzed_at": datetime.utcnow().isoformat()
2025-11-28T17:41:13.5597602Z 
2025-11-28T17:41:13.5597805Z tests/repositories/test_graph_repository.py::test_merge_node_edges
2025-11-28T17:41:13.5598422Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/repositories/graph_repository.py:683: RuntimeWarning: coroutine 'test_merge_node_edges.<locals>.mock_transaction' was never awaited
2025-11-28T17:41:13.5598518Z     async with conn.transaction():
2025-11-28T17:41:13.5598687Z   Enable tracemalloc to get traceback where the object was allocated.
2025-11-28T17:41:13.5598960Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
2025-11-28T17:41:13.5598966Z 
2025-11-28T17:41:13.5599152Z tests/repositories/test_graph_repository.py::test_store_graph_triples
2025-11-28T17:41:13.5599871Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/repositories/graph_repository.py:521: RuntimeWarning: coroutine 'test_store_graph_triples.<locals>.mock_transaction' was never awaited
2025-11-28T17:41:13.5600165Z     async with conn.transaction():
2025-11-28T17:41:13.5600399Z   Enable tracemalloc to get traceback where the object was allocated.
2025-11-28T17:41:13.5600680Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
2025-11-28T17:41:13.5600686Z 
2025-11-28T17:41:13.5600819Z test_enterprise_features.py::test_decorator_import
2025-11-28T17:41:13.5601802Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/client.py:18: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-28T17:41:13.5601919Z     class RAEClientConfig(BaseSettings):
2025-11-28T17:41:13.5601925Z 
2025-11-28T17:41:13.5602063Z test_enterprise_features.py::test_decorator_basic_usage
2025-11-28T17:41:13.5602990Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/decorators.py:77: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5603273Z     start_time = datetime.utcnow()
2025-11-28T17:41:13.5603279Z 
2025-11-28T17:41:13.5603409Z test_enterprise_features.py::test_decorator_basic_usage
2025-11-28T17:41:13.5604323Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/decorators.py:89: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5604415Z     end_time = datetime.utcnow()
2025-11-28T17:41:13.5604420Z 
2025-11-28T17:41:13.5604553Z test_enterprise_features.py::test_decorator_basic_usage
2025-11-28T17:41:13.5605466Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/client.py:109: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-28T17:41:13.5605626Z     "POST", "/memory/store", json=memory.dict(exclude_none=True)
2025-11-28T17:41:13.5605632Z 
2025-11-28T17:41:13.5605758Z test_enterprise_features.py::test_decorator_basic_usage
2025-11-28T17:41:13.5606679Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/decorators.py:126: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5606776Z     start_time = datetime.utcnow()
2025-11-28T17:41:13.5606782Z 
2025-11-28T17:41:13.5606902Z test_enterprise_features.py::test_decorator_basic_usage
2025-11-28T17:41:13.5607815Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/decorators.py:138: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
2025-11-28T17:41:13.5607904Z     end_time = datetime.utcnow()
2025-11-28T17:41:13.5607911Z 
2025-11-28T17:41:13.5608041Z test_enterprise_features.py::test_decorator_basic_usage
2025-11-28T17:41:13.5608941Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/client.py:420: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-28T17:41:13.5609250Z     "POST", "/memory/store", json=memory.dict(exclude_none=True)
2025-11-28T17:41:13.5609256Z 
2025-11-28T17:41:13.5609442Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
2025-11-28T17:41:13.5609558Z ================================ tests coverage ================================
2025-11-28T17:41:13.5609740Z _______________ coverage: platform linux, python 3.12.12-final-0 _______________
2025-11-28T17:41:13.5609745Z 
2025-11-28T17:41:13.5609865Z Name                                                         Stmts   Miss  Cover   Missing
2025-11-28T17:41:13.5610169Z ------------------------------------------------------------------------------------------
2025-11-28T17:41:13.5610314Z apps/__init__.py                                                 0      0   100%
2025-11-28T17:41:13.5610450Z apps/llm/__init__.py                                             4      0   100%
2025-11-28T17:41:13.5610609Z apps/llm/broker/__init__.py                                      2      0   100%
2025-11-28T17:41:13.5610840Z apps/llm/broker/llm_router.py                                  104     90    13%   55-57, 61-74, 78-122, 131-153, 169-216, 228-252
2025-11-28T17:41:13.5610995Z apps/llm/models/__init__.py                                      4      0   100%
2025-11-28T17:41:13.5611327Z apps/llm/models/llm_error.py                                    18      0   100%
2025-11-28T17:41:13.5611498Z apps/llm/models/llm_request.py                                  25      0   100%
2025-11-28T17:41:13.5611663Z apps/llm/models/llm_response.py                                 20      0   100%
2025-11-28T17:41:13.5611827Z apps/llm/providers/__init__.py                                   9      0   100%
2025-11-28T17:41:13.5612075Z apps/llm/providers/anthropic_provider.py                        79     68    14%   42-47, 56-66, 70-73, 103-196, 212-247
2025-11-28T17:41:13.5612249Z apps/llm/providers/base.py                                       9      0   100%
2025-11-28T17:41:13.5612499Z apps/llm/providers/deepseek_provider.py                         78     67    14%   41-46, 50, 61-64, 97-195, 211-255
2025-11-28T17:41:13.5612834Z apps/llm/providers/gemini_provider.py                          103     92    11%   37-42, 51-63, 67-71, 101-208, 224-280
2025-11-28T17:41:13.5613130Z apps/llm/providers/grok_provider.py                             85     73    14%   42-47, 51, 62-65, 84-90, 113-215, 231-281
2025-11-28T17:41:13.5613391Z apps/llm/providers/ollama_provider.py                           69     58    16%   35-41, 50-61, 82-139, 155-201
2025-11-28T17:41:13.5613719Z apps/llm/providers/openai_provider.py                           76     25    67%   61, 111, 114, 117, 120, 123, 127-144, 154, 167-180, 208, 211, 214, 218-220, 228, 240
2025-11-28T17:41:13.5614216Z apps/llm/providers/qwen_provider.py                            100     89    11%   43-50, 65-71, 79-82, 117-236, 252-319
2025-11-28T17:41:13.5614400Z apps/memory_api/__init__.py                                      0      0   100%
2025-11-28T17:41:13.5614629Z apps/memory_api/api/__init__.py                                  0      0   100%
2025-11-28T17:41:13.5614821Z apps/memory_api/api/v1/__init__.py                               0      0   100%
2025-11-28T17:41:13.5615041Z apps/memory_api/api/v1/agent.py                                 86     65    24%   58-239, 266-288
2025-11-28T17:41:13.5615318Z apps/memory_api/api/v1/cache.py                                  7      0   100%
2025-11-28T17:41:13.5615622Z apps/memory_api/api/v1/governance.py                           124     75    40%   111-183, 207-310, 334-434
2025-11-28T17:41:13.5615940Z apps/memory_api/api/v1/graph.py                                193    123    36%   154-194, 223-276, 300-363, 404-516, 545-595, 632-688, 720-822
2025-11-28T17:41:13.5616221Z apps/memory_api/api/v1/health.py                               127     86    32%   59-95, 102-135, 142-174, 189-204, 228-265, 282-287, 303, 322-351
2025-11-28T17:41:13.5616467Z apps/memory_api/api/v1/memory.py                               128     96    25%   54-110, 140-247, 263-286, 310-320, 363-422
2025-11-28T17:41:13.5616803Z apps/memory_api/celery_app.py                                    4      0   100%
2025-11-28T17:41:13.5617218Z apps/memory_api/clients/rae_client.py                          270     32    88%   116-119, 242-244, 298, 374-383, 465, 472, 507-508, 512, 516, 561-562, 589, 604, 715, 741, 747, 796-802
2025-11-28T17:41:13.5617480Z apps/memory_api/config.py                                       89      5    94%   40, 141-144
2025-11-28T17:41:13.5617683Z apps/memory_api/cost_model.py                                    8      6    25%   53-61
2025-11-28T17:41:13.5632568Z apps/memory_api/dependencies.py                                 25     13    48%   64-66, 79-81, 102-109, 125-131
2025-11-28T17:41:13.5632986Z apps/memory_api/logging_config.py                               24      0   100%
2025-11-28T17:41:13.5633313Z apps/memory_api/main.py                                         81     14    83%   51-72, 115, 229-230, 249-250, 290
2025-11-28T17:41:13.5633614Z apps/memory_api/metrics.py                                      33      0   100%
2025-11-28T17:41:13.5633954Z apps/memory_api/middleware/cost_guard.py                       144    124    14%   63-95, 111-128, 166-476
2025-11-28T17:41:13.5634197Z apps/memory_api/middleware/rate_limiter.py                      51     31    39%   55-74, 106-114, 165-177, 200-211
2025-11-28T17:41:13.5634593Z apps/memory_api/middleware/tenant.py                             9      0   100%
2025-11-28T17:41:13.5634750Z apps/memory_api/models.py                                       68      0   100%
2025-11-28T17:41:13.5634937Z apps/memory_api/models/__init__.py                              22      0   100%
2025-11-28T17:41:13.5635135Z apps/memory_api/models/dashboard_models.py                     286      0   100%
2025-11-28T17:41:13.5635325Z apps/memory_api/models/evaluation_models.py                    256      0   100%
2025-11-28T17:41:13.5635507Z apps/memory_api/models/event_models.py                         244      0   100%
2025-11-28T17:41:13.5635675Z apps/memory_api/models/graph.py                                 17      0   100%
2025-11-28T17:41:13.5635858Z apps/memory_api/models/graph_enhanced_models.py                254      0   100%
2025-11-28T17:41:13.5636046Z apps/memory_api/models/hybrid_search_models.py                 164      0   100%
2025-11-28T17:41:13.5636242Z apps/memory_api/models/rbac.py                                  95     17    82%   135, 207-224, 234-239
2025-11-28T17:41:13.5636451Z apps/memory_api/models/reflection_models.py                    169      1    99%   69
2025-11-28T17:41:13.5636690Z apps/memory_api/models/reflection_v2_models.py                 149     14    91%   132-133, 171-180, 243-244
2025-11-28T17:41:13.5636878Z apps/memory_api/models/tenant.py                                94     11    88%   193-200, 212-215
2025-11-28T17:41:13.5637067Z apps/memory_api/observability/__init__.py                        2      0   100%
2025-11-28T17:41:13.5637448Z apps/memory_api/observability/opentelemetry_config.py          104     71    32%   136-191, 215-219, 235-254, 275-278, 292-298, 312-318, 352-363, 368-371, 380-383, 388-391
2025-11-28T17:41:13.5637624Z apps/memory_api/plugins/__init__.py                              2      0   100%
2025-11-28T17:41:13.5637946Z apps/memory_api/plugins/base.py                                190     44    77%   137, 185, 198, 214, 232, 242, 252, 268, 281, 296, 309, 329, 378-379, 421-426, 435-436, 456, 470-471, 501-535, 550-551
2025-11-28T17:41:13.5638124Z apps/memory_api/repositories/__init__.py                         0      0   100%
2025-11-28T17:41:13.5638468Z apps/memory_api/repositories/cost_logs_repository.py           141     60    57%   176-242, 279-357, 374-382, 401-408, 425-433, 452-459, 493-543, 577-634, 657-685
2025-11-28T17:41:13.5638783Z apps/memory_api/repositories/graph_repository.py               131     58    56%   53-139, 162, 180-216, 232-253, 275-293, 319-338, 358-380, 522-584, 685-722
2025-11-28T17:41:13.5639461Z apps/memory_api/repositories/graph_repository_enhanced.py      130     99    24%   60, 90-108, 114-127, 133-146, 162-184, 208-216, 260-297, 303-329, 335-350, 354-366, 372-386, 413-436, 471-534, 563-591, 618-631, 635-642, 648-660, 675-689, 708-740, 778-800, 808, 820, 841
2025-11-28T17:41:13.5639791Z apps/memory_api/repositories/memory_repository.py               77     61    21%   59-104, 122-140, 155-170, 185-196, 211-222, 238-263, 279-299, 315-335, 363-405
2025-11-28T17:41:13.5640384Z apps/memory_api/repositories/reflection_repository.py          158    140    11%   83-157, 174-185, 222-295, 312-333, 374-420, 443-471, 494-569, 591-600, 635-659, 669-689, 720
2025-11-28T17:41:13.5640564Z apps/memory_api/routes/__init__.py                               1      0   100%
2025-11-28T17:41:13.5640968Z apps/memory_api/routes/dashboard.py                            239    202    15%   68, 74-78, 114-163, 182-217, 240-274, 296-351, 368-397, 409-421, 444-466, 479, 490-556, 563-643, 650-720, 731-779, 791-806, 811-832, 837-860, 875
2025-11-28T17:41:13.5641264Z apps/memory_api/routes/evaluation.py                            91     59    35%   40, 64-89, 99, 160-193, 203, 250-280, 293-311, 331-358, 368, 406-418, 428, 454, 477
2025-11-28T17:41:13.5641673Z apps/memory_api/routes/event_triggers.py                       159    114    28%   48, 69-89, 95-109, 126-139, 145-154, 160-171, 177-188, 204-219, 237-267, 277, 312-334, 356-373, 379-391, 399-406, 421, 440-457, 479-512, 523, 555
2025-11-28T17:41:13.5642250Z apps/memory_api/routes/graph_enhanced.py                       225    179    20%   63, 79-94, 106-122, 134-151, 167-203, 211-226, 234-245, 253-264, 272-287, 306-361, 376-417, 432-457, 473-504, 510-526, 534-545, 557-581, 598-617, 632-654, 664-706, 717
2025-11-28T17:41:13.5642539Z apps/memory_api/routes/hybrid_search.py                        104     67    36%   89, 115-137, 148-167, 182-194, 209-228, 238-264, 282-369, 394-426, 437, 461
2025-11-28T17:41:13.5642820Z apps/memory_api/routes/reflections.py                           98     71    28%   45, 83-104, 142-200, 225-247, 270-282, 316-352, 387-420, 447-453, 481-510
2025-11-28T17:41:13.5643002Z apps/memory_api/security/__init__.py                             4      0   100%
2025-11-28T17:41:13.5643245Z apps/memory_api/security/auth.py                               106     80    25%   38-56, 81-128, 145-148, 163-165, 170-184, 189, 225-310, 334-423
2025-11-28T17:41:13.5643489Z apps/memory_api/security/dependencies.py                        48     29    40%   56, 78-84, 128-133, 155-210
2025-11-28T17:41:13.5643722Z apps/memory_api/security/rate_limit.py                          78     63    19%   31-32, 36-48, 63-77, 99-179, 189-191, 208-225
2025-11-28T17:41:13.5643992Z apps/memory_api/security/validation.py                          87     68    22%   40-56, 72-95, 111-150, 166-177, 193-203, 219-236, 252-269, 286-301
2025-11-28T17:41:13.5644167Z apps/memory_api/services/__init__.py                             0      0   100%
2025-11-28T17:41:13.5644377Z apps/memory_api/services/analytics.py                          193      4    98%   339-342, 346
2025-11-28T17:41:13.5644631Z apps/memory_api/services/budget_service.py                      88     52    41%   74, 95-136, 160-297, 323-351, 376-458, 487-521
2025-11-28T17:41:13.5644857Z apps/memory_api/services/community_detection.py                 81     12    85%   55, 83-100
2025-11-28T17:41:13.5645130Z apps/memory_api/services/context_builder.py                    139     74    47%   96, 177-239, 254-269, 283-339, 416, 431-476, 497-521
2025-11-28T17:41:13.5645352Z apps/memory_api/services/context_cache.py                       62     36    42%   21, 39-49, 63-102, 106
2025-11-28T17:41:13.5645628Z apps/memory_api/services/cost_controller.py                     55     43    22%   79-146, 171-174, 194-200, 224-241, 260-261, 277-284, 309, 344-359
2025-11-28T17:41:13.5646064Z apps/memory_api/services/dashboard_websocket.py                182     79    57%   131, 175-177, 201, 205-210, 247-253, 257-271, 296, 307, 346-357, 365-372, 410-425, 439-451, 461-498, 620-622, 638, 662-703
2025-11-28T17:41:13.5646505Z apps/memory_api/services/drift_detector.py                     108     33    69%   102-104, 118-124, 248, 292, 329, 333, 357-373, 423-434, 445
2025-11-28T17:41:13.5646724Z apps/memory_api/services/embedding.py                           28     15    46%   28-29, 36-55, 62-64, 72
2025-11-28T17:41:13.5646956Z apps/memory_api/services/entity_resolution.py                   74     16    78%   80-107, 158-161
2025-11-28T17:41:13.5647236Z apps/memory_api/services/evaluation_service.py                 139     82    41%   74-205, 233-234, 275, 330, 357-385, 408-442, 464-474
2025-11-28T17:41:13.5647640Z apps/memory_api/services/graph_algorithms.py                   298     41    86%   34, 55, 93, 126-127, 135-140, 160-165, 191-193, 231, 308, 329, 350-361, 394, 405, 418-419, 445, 451, 454, 490, 554, 573, 589, 665-671, 685-691
2025-11-28T17:41:13.5647945Z apps/memory_api/services/graph_extraction.py                   132     83    37%   39-47, 115, 192-203, 258-260, 264-265, 299-406, 415-467, 483, 497-515, 534-545
2025-11-28T17:41:13.5648265Z apps/memory_api/services/hybrid_cache.py                        90     71    21%   48-58, 82-105, 126-153, 176-185, 202-216, 225-236, 240-248, 257-260, 269, 283-285, 300-302
2025-11-28T17:41:13.5648625Z apps/memory_api/services/hybrid_search.py                      114     88    23%   81-83, 122-230, 254-308, 318, 341-358, 383-388, 411-470, 482-493
2025-11-28T17:41:13.5648938Z apps/memory_api/services/hybrid_search_service.py              226    207     8%   93-98, 145-336, 353-407, 418-473, 485-624, 636-680, 705-776, 796-850
2025-11-28T17:41:13.5649377Z apps/memory_api/services/importance_scoring.py                 159    111    30%   74, 99-114, 151-196, 204-214, 223-242, 252-263, 271-277, 281-290, 305-319, 343, 356, 417-491, 504, 532-539, 556-573, 589-609, 625, 646-649, 687-709
2025-11-28T17:41:13.5649586Z apps/memory_api/services/llm/__init__.py                        20      5    75%   21, 23, 26-33
2025-11-28T17:41:13.5649810Z apps/memory_api/services/llm/anthropic.py                       30     17    43%   18-21, 30-54, 65-78
2025-11-28T17:41:13.5650165Z apps/memory_api/services/llm/base.py                            14      0   100%
2025-11-28T17:41:13.5650391Z apps/memory_api/services/llm/gemini.py                          33     20    39%   18-22, 31-52, 63-74
2025-11-28T17:41:13.5650627Z apps/memory_api/services/llm/litellm_provider.py                19     10    47%   17-20, 28-43, 62-72
2025-11-28T17:41:13.5650834Z apps/memory_api/services/llm/ollama.py                          43     27    37%   20, 30-62, 73-95
2025-11-28T17:41:13.5651032Z apps/memory_api/services/llm/openai.py                          30     10    67%   20, 51-53, 64-76
2025-11-28T17:41:13.5651274Z apps/memory_api/services/memory_scoring_v2.py                   83     21    75%   46, 235-240, 253, 272, 317-340, 356-368
2025-11-28T17:41:13.5651624Z apps/memory_api/services/ml_service_client.py                  122     99    19%   50-54, 58-59, 63-68, 76-90, 94, 125-130, 138, 159-204, 222-250, 268-294, 312-337, 356-385, 396-409, 418-420
2025-11-28T17:41:13.5651854Z apps/memory_api/services/pii_scrubber.py                        24     17    29%   29-30, 40-45, 51-56, 72-89
2025-11-28T17:41:13.5652122Z apps/memory_api/services/query_analyzer.py                      91     62    32%   128-129, 148-197, 216-241, 257-269, 283-312, 344, 363-383
2025-11-28T17:41:13.5652366Z apps/memory_api/services/rbac_service.py                        35     21    40%   29, 42-56, 90-126, 145-154, 168-179, 224-258
2025-11-28T17:41:13.5652564Z apps/memory_api/services/redis_client.py                         5      2    60%   7-8
2025-11-28T17:41:13.5652879Z apps/memory_api/services/reflection_engine.py                   98     65    34%   89-126, 138-154, 167-178, 207-239, 268-319, 335-361, 373-388, 400-412, 425-441
2025-11-28T17:41:13.5653151Z apps/memory_api/services/reflection_engine_v2.py                75     45    40%   160-219, 234-263, 278-295, 307-318, 342-389, 416-424
2025-11-28T17:41:13.5653632Z apps/memory_api/services/reflection_pipeline.py                194    168    13%   126-128, 132-133, 151-247, 258-290, 306-380, 391-473, 479-559, 571-600, 609-615, 624-633
2025-11-28T17:41:13.5654146Z apps/memory_api/services/rules_engine.py                       202    102    50%   95-108, 137-159, 181-183, 196-197, 226, 232, 238, 245-249, 252-260, 266, 269-272, 277-278, 282, 304, 323, 332-341, 357, 360, 384-412, 486-525, 549-569, 592-600, 606-609, 615-618, 624-629, 639-642, 648-651
2025-11-28T17:41:13.5654366Z apps/memory_api/services/scoring.py                             28     20    29%   15-29, 36, 44-64, 72-79
2025-11-28T17:41:13.5654607Z apps/memory_api/services/temporal_graph.py                     186      9    95%   48, 74, 85, 182, 279, 338-340, 426, 478
2025-11-28T17:41:13.5654809Z apps/memory_api/services/token_estimator.py                      4      3    25%   8-10
2025-11-28T17:41:13.5655022Z apps/memory_api/services/vector_store/__init__.py               16      8    50%   17-28
2025-11-28T17:41:13.5655218Z apps/memory_api/services/vector_store/base.py                    6      0   100%
2025-11-28T17:41:13.5655469Z apps/memory_api/services/vector_store/pgvector_store.py         23     11    52%   17, 25-32, 46-55, 62
2025-11-28T17:41:13.5655860Z apps/memory_api/services/vector_store/qdrant_store.py           64     43    33%   49-66, 70-74, 80-106, 129-160, 170-180, 198-208
2025-11-28T17:41:13.5656026Z apps/memory_api/tasks/__init__.py                                0      0   100%
2025-11-28T17:41:13.5656303Z apps/memory_api/tasks/background_tasks.py                      206    103    50%   18, 47-66, 123-125, 268-278, 289-301, 325-449, 470-498, 509-549
2025-11-28T17:41:13.5656462Z apps/memory_api/tests/__init__.py                                0      0   100%
2025-11-28T17:41:13.5656673Z apps/memory_api/tests/conftest.py                               68     30    56%   16-18, 24, 52-55, 146-163, 183-266, 281
2025-11-28T17:41:13.5656861Z apps/memory_api/tests/test_analytics.py                        121      0   100%
2025-11-28T17:41:13.5657050Z apps/memory_api/tests/test_api_client.py                       155      1    99%   116
2025-11-28T17:41:13.5657245Z apps/memory_api/tests/test_api_e2e.py                           26      4    85%   57, 71, 86, 119
2025-11-28T17:41:13.5657452Z apps/memory_api/tests/test_background_tasks.py                 131      1    99%   334
2025-11-28T17:41:13.5657634Z apps/memory_api/tests/test_dashboard_websocket.py               96      0   100%
2025-11-28T17:41:13.5657821Z apps/memory_api/tests/test_evaluation_suite.py                  79      0   100%
2025-11-28T17:41:13.5657999Z apps/memory_api/tests/test_event_triggers.py                    92      0   100%
2025-11-28T17:41:13.5658185Z apps/memory_api/tests/test_graph_algorithms.py                 178      0   100%
2025-11-28T17:41:13.5658391Z apps/memory_api/tests/test_graph_extraction.py                 136    132     3%   18-418
2025-11-28T17:41:13.5658607Z apps/memory_api/tests/test_graph_extraction_integration.py     132    130     2%   23-441
2025-11-28T17:41:13.5658809Z apps/memory_api/tests/test_hybrid_search.py                    223    220     1%   17-931
2025-11-28T17:41:13.5658982Z apps/memory_api/tests/test_openapi.py                           10      0   100%
2025-11-28T17:41:13.5659182Z apps/memory_api/tests/test_phase2_models.py                    158      1    99%   325
2025-11-28T17:41:13.5659373Z apps/memory_api/tests/test_phase2_plugins.py                   209      1    99%   425
2025-11-28T17:41:13.5659566Z apps/memory_api/tests/test_pii_scrubber.py                      74     72     3%   25-197
2025-11-28T17:41:13.5659773Z apps/memory_api/tests/test_reflection_simple.py                 51     45    12%   20-143
2025-11-28T17:41:13.5660193Z apps/memory_api/tests/test_reflective_flags.py                 152      2    99%   197-198
2025-11-28T17:41:13.5660441Z apps/memory_api/tests/test_semantic_memory.py                   70     65     7%   24-216
2025-11-28T17:41:13.5660768Z apps/memory_api/tests/test_temporal_graph.py                   176      0   100%
2025-11-28T17:41:13.5660963Z apps/memory_api/tests/test_vector_store.py                      75     72     4%   26-212
2025-11-28T17:41:13.5661138Z apps/memory_api/workers/__init__.py                              2      0   100%
2025-11-28T17:41:13.5661474Z apps/memory_api/workers/memory_maintenance.py                  156     69    56%   76-133, 137-141, 207-214, 282-299, 370-453, 526, 539, 562-564, 571-581, 596-619, 623
2025-11-28T17:41:13.5661649Z sdk/python/rae_memory_sdk/__init__.py                            5      0   100%
2025-11-28T17:41:13.5662193Z sdk/python/rae_memory_sdk/client.py                            126     60    52%   48, 70-71, 73-79, 90-91, 93-99, 101-102, 111, 119-123, 129-130, 153-159, 182-189, 201, 222-228, 244-247, 263-268, 294-295, 309, 322, 334, 349-350, 364, 380-383, 391, 395, 422, 438-442, 454-457, 469-475, 486-493, 497, 505-506, 510, 516-517
2025-11-28T17:41:13.5662473Z sdk/python/rae_memory_sdk/decorators.py                         89     18    80%   84-86, 115-116, 133-135, 166-167, 218, 244-246, 250, 286, 337-348, 355
2025-11-28T17:41:13.5662652Z sdk/python/rae_memory_sdk/models.py                             41      0   100%
2025-11-28T17:41:13.5662844Z test_enterprise_features.py                                    107     31    71%   55-56, 125-127, 159, 167-206, 210
2025-11-28T17:41:13.5663087Z tests/__init__.py                                                0      0   100%
2025-11-28T17:41:13.5663218Z tests/api/__init__.py                                            0      0   100%
2025-11-28T17:41:13.5663355Z tests/api/v1/__init__.py                                         0      0   100%
2025-11-28T17:41:13.5663542Z tests/api/v1/test_agent.py                                     108     90    17%   12-53, 65-106, 118-158, 170-206
2025-11-28T17:41:13.5663689Z tests/api/v1/test_cache.py                                      10      0   100%
2025-11-28T17:41:13.5663979Z tests/api/v1/test_governance.py                                130     45    65%   41-47, 73-74, 99-101, 132-139, 164-166, 195-196, 215-221, 241-242, 262-265, 282-284, 331-334
2025-11-28T17:41:13.5664165Z tests/api/v1/test_memory.py                                     98     11    89%   60, 89, 140-142, 191-193, 222-224
2025-11-28T17:41:13.5664405Z tests/api/v1/test_search_hybrid.py                             107     15    86%   75-77, 138-139, 203-204, 268-269, 328-329, 391-392, 534-535
2025-11-28T17:41:13.5664542Z tests/conftest.py                                               53      0   100%
2025-11-28T17:41:13.5664799Z tests/integration/test_graphrag.py                              98     69    30%   41-42, 48, 54, 65-124, 142-168, 182-217, 231-269, 282-324, 338-351, 355
2025-11-28T17:41:13.5665115Z tests/integration/test_lite_profile.py                          86     67    22%   37-72, 80-85, 90-93, 98-116, 122-157, 163-175, 181-187, 192-196, 201-207, 212-224, 230-239, 248-253
2025-11-28T17:41:13.5665391Z tests/integration/test_reflection_flow.py                      107     67    37%   38, 44, 50, 56-61, 67, 73, 94-170, 190-231, 256-298, 361-385, 411-484
2025-11-28T17:41:13.5665700Z tests/llm/test_llm_provider_contract.py                        100     42    58%   30, 39, 47, 52-55, 60-63, 68-71, 84, 108-112, 136-142, 159-163, 178-180, 198-202, 219-220, 249-251, 256
2025-11-28T17:41:13.5665949Z tests/repositories/test_graph_repository.py                    150     17    89%   81-86, 96-98, 258-263, 297-298
2025-11-28T17:41:13.5666096Z tests/services/__init__.py                                       0      0   100%
2025-11-28T17:41:13.5666259Z tests/services/llm/__init__.py                                   0      0   100%
2025-11-28T17:41:13.5666437Z tests/services/llm/test_providers.py                            17      0   100%
2025-11-28T17:41:13.5666629Z tests/services/test_budget_service.py                           19      1    95%   36
2025-11-28T17:41:13.5666921Z tests/services/test_community_detection.py                     106      0   100%
2025-11-28T17:41:13.5667094Z tests/services/test_context_cache.py                            10      0   100%
2025-11-28T17:41:13.5667279Z tests/services/test_entity_resolution.py                        77      0   100%
2025-11-28T17:41:13.5667481Z tests/services/test_reflection_engine.py                        23      9    61%   18-36
2025-11-28T17:41:13.5667627Z ------------------------------------------------------------------------------------------
2025-11-28T17:41:13.5667733Z TOTAL                                                        14237   6062    57%
2025-11-28T17:41:13.5667835Z Coverage HTML written to dir htmlcov
2025-11-28T17:41:13.5667935Z Coverage XML written to file coverage.xml
2025-11-28T17:41:13.5668317Z [32mRequired test coverage of 55% reached. Total coverage: 57.42%
2025-11-28T17:41:13.5668503Z [0m============================= slowest 10 durations =============================
2025-11-28T17:41:13.5668716Z 8.64s call     tests/llm/test_llm_provider_contract.py::test_basic_completion
2025-11-28T17:41:13.5668881Z 8.35s call     tests/llm/test_llm_provider_contract.py::test_max_tokens
2025-11-28T17:41:13.5669161Z 8.34s call     tests/llm/test_llm_provider_contract.py::test_provider_contract_hello_world[openai-gpt-3.5-turbo]
2025-11-28T17:41:13.5669426Z 8.32s call     tests/llm/test_llm_provider_contract.py::test_token_usage
2025-11-28T17:41:13.5669604Z 8.26s call     tests/llm/test_llm_provider_contract.py::test_temperature_control
2025-11-28T17:41:13.5669766Z 8.26s call     tests/llm/test_llm_provider_contract.py::test_json_mode
2025-11-28T17:41:13.5670356Z 1.35s call     apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_pool_cleanup
2025-11-28T17:41:13.5670644Z 1.20s call     apps/memory_api/tests/test_api_client.py::test_cache_expiration
2025-11-28T17:41:13.5671128Z 1.07s call     apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_with_mini_model
2025-11-28T17:41:13.5671668Z 0.88s call     apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_success
2025-11-28T17:41:13.5672043Z [36m[1m=========================== short test summary info ============================[0m
2025-11-28T17:41:13.5673923Z [31mFAILED[0m apps/memory_api/tests/test_reflective_flags.py::[1mTestReflectiveMemoryFlags::test_reflective_memory_disabled_no_reflections[0m - AttributeError: 'function' object has no attribute 'assert_not_called'
2025-11-28T17:41:13.5675289Z [31mFAILED[0m apps/memory_api/tests/test_reflective_flags.py::[1mTestDreamingEnabled::test_dreaming_enabled_runs_dreaming[0m - TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-11-28T17:41:13.5676977Z [31mFAILED[0m tests/api/v1/test_agent.py::[1mtest_agent_execute_direct[0m - AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'
2025-11-28T17:41:13.5678924Z [31mFAILED[0m tests/api/v1/test_agent.py::[1mtest_agent_execute_with_context[0m - AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'
2025-11-28T17:41:13.5681186Z [31mFAILED[0m tests/api/v1/test_agent.py::[1mtest_agent_execute_with_empty_prompt[0m - AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'
2025-11-28T17:41:13.5683196Z [31mFAILED[0m tests/api/v1/test_agent.py::[1mtest_agent_execute_with_llm_error[0m - AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'
2025-11-28T17:41:13.5684302Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_success[0m - assert 401 == 200
2025-11-28T17:41:13.5684545Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5685375Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_with_custom_days[0m - assert 401 == 200
2025-11-28T17:41:13.5685629Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5686363Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_error[0m - assert 401 == 500
2025-11-28T17:41:13.5686591Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5687341Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_governance_stats_success[0m - assert 401 == 200
2025-11-28T17:41:13.5687560Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5688318Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_governance_stats_no_data[0m - assert 401 == 404
2025-11-28T17:41:13.5688551Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5689425Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_governance_stats_with_custom_period[0m - assert 401 == 200
2025-11-28T17:41:13.5689642Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5690947Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_budget_status_success[0m - assert 401 == 200
2025-11-28T17:41:13.5691189Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5691967Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_budget_status_with_alerts[0m - assert 401 == 200
2025-11-28T17:41:13.5692200Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5692956Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_budget_status_zero_usage[0m - assert 401 == 200
2025-11-28T17:41:13.5693171Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5693903Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_budget_status_error[0m - assert 401 == 500
2025-11-28T17:41:13.5694119Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5694882Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_invalid_days[0m - assert 401 == 422
2025-11-28T17:41:13.5695122Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5695906Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_governance_stats_invalid_days[0m - assert 401 == 422
2025-11-28T17:41:13.5696137Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5696965Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_empty_results[0m - assert 401 == 200
2025-11-28T17:41:13.5697200Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5697888Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_store_memory_success[0m - assert 401 == 200
2025-11-28T17:41:13.5698124Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5698778Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_query_memory_success[0m - assert 401 == 200
2025-11-28T17:41:13.5698993Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5699610Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_delete_memory_success[0m - assert 401 == 200
2025-11-28T17:41:13.5699755Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5700346Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_reflection_stats_success[0m - assert 401 == 200
2025-11-28T17:41:13.5700474Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5700876Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_store_memory_missing_tenant_header[0m - KeyError: 'detail'
2025-11-28T17:41:13.5701241Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_query_memory_with_filters[0m - assert 401 == 200
2025-11-28T17:41:13.5701547Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5701927Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_query_memory_with_graph_traversal[0m - assert 401 == 200
2025-11-28T17:41:13.5702042Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5702383Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_delete_memory_not_found[0m - assert 401 == 200
2025-11-28T17:41:13.5702492Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:13.5702844Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_success[0m - assert 500 == 200
2025-11-28T17:41:13.5702987Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:13.5703360Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_reranking[0m - assert 500 == 200
2025-11-28T17:41:13.5703500Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:13.5703865Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_filters[0m - assert 422 == 200
2025-11-28T17:41:13.5704009Z  +  where 422 = <Response [422 Unprocessable Entity]>.status_code
2025-11-28T17:41:13.5704427Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_manual_weights[0m - assert 500 == 200
2025-11-28T17:41:13.5704691Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:13.5705107Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_graph_depth[0m - assert 500 == 200
2025-11-28T17:41:13.5705248Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:13.5705682Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_conversation_history[0m - assert 422 == 200
2025-11-28T17:41:13.5705820Z  +  where 422 = <Response [422 Unprocessable Entity]>.status_code
2025-11-28T17:41:13.5706212Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_empty_query[0m - assert 422 in [200, 400]
2025-11-28T17:41:13.5706357Z  +  where 422 = <Response [422 Unprocessable Entity]>.status_code
2025-11-28T17:41:13.5706763Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_all_strategies_disabled[0m - assert 500 == 200
2025-11-28T17:41:13.5706899Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:13.5708265Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_basic_completion[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:14.6802558Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_json_mode[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:14.6806319Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_streaming[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:14.6809340Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_token_usage[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:14.6812905Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_temperature_control[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:14.6815777Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_max_tokens[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:14.6818661Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_provider_contract_hello_world[openai-gpt-3.5-turbo][0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:14.6820881Z [31mFAILED[0m tests/repositories/test_graph_repository.py::[1mtest_merge_node_edges[0m - TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-11-28T17:41:14.6822091Z [31mFAILED[0m tests/repositories/test_graph_repository.py::[1mtest_store_graph_triples[0m - TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-11-28T17:41:14.6823241Z [31mFAILED[0m tests/services/test_budget_service.py::[1mtest_check_budget[0m - TypeError: check_budget() missing 1 required positional argument: 'tokens'
2025-11-28T17:41:14.6824271Z [31mFAILED[0m tests/services/test_budget_service.py::[1mtest_check_budget_fail[0m - TypeError: check_budget() missing 1 required positional argument: 'tokens'
2025-11-28T17:41:14.6825414Z [31mFAILED[0m tests/services/test_reflection_engine.py::[1mtest_reflection_flow[0m - TypeError: GraphExtractionService.__init__() missing 1 required positional argument: 'graph_repo'
2025-11-28T17:41:14.6826415Z [31mFAILED[0m test_enterprise_features.py::[1mtest_pydantic_models[0m - AssertionError: assert 'entity1' == 'Entity1'
2025-11-28T17:41:14.6826867Z   
2025-11-28T17:41:14.6827113Z   [0m[91m- Entity1[39;49;00m[90m[39;49;00m
2025-11-28T17:41:14.6827391Z   ? ^[90m[39;49;00m
2025-11-28T17:41:14.6827630Z   [92m+ entity1[39;49;00m[90m[39;49;00m
2025-11-28T17:41:14.6827890Z   ? ^[90m[39;49;00m
2025-11-28T17:41:14.6828668Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_graph_extraction_basic[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:14.6829855Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_graph_storage[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:14.6831126Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_hybrid_search[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:14.6832314Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_graph_traversal_depth[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:14.6833545Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_hierarchical_reflection[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:14.6834494Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_generate_reflection_from_failure[0m
2025-11-28T17:41:14.6835220Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_generate_reflection_from_success[0m
2025-11-28T17:41:14.6836045Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_reflection_retrieval_in_context[0m
2025-11-28T17:41:14.6836732Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_inject_reflections_into_prompt[0m
2025-11-28T17:41:14.6837414Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_end_to_end_reflection_flow[0m
2025-11-28T17:41:14.6838233Z [31m= [31m[1m48 failed[0m, [32m202 passed[0m, [33m12 skipped[0m, [33m11 deselected[0m, [33m62 warnings[0m, [31m[1m10 errors[0m[31m in 72.24s (0:01:12)[0m[31m =[0m
2025-11-28T17:41:15.7627927Z ##[error]The operation was canceled.
