2025-11-28T17:39:40.8579222Z ##[group]Run pytest -m "not integration" --cov --cov-report=xml --cov-report=term
2025-11-28T17:39:40.8580164Z [36;1mpytest -m "not integration" --cov --cov-report=xml --cov-report=term[0m
2025-11-28T17:39:40.8614049Z shell: /usr/bin/bash -e {0}
2025-11-28T17:39:40.8614283Z env:
2025-11-28T17:39:40.8614537Z   pythonLocation: /opt/hostedtoolcache/Python/3.10.19/x64
2025-11-28T17:39:40.8614983Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.10.19/x64/lib/pkgconfig
2025-11-28T17:39:40.8615399Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2025-11-28T17:39:40.8615763Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2025-11-28T17:39:40.8616142Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2025-11-28T17:39:40.8616519Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.10.19/x64/lib
2025-11-28T17:39:40.8617143Z   DATABASE_URL: ***localhost:5432/test_rae
2025-11-28T17:39:40.8617455Z   REDIS_URL: redis://localhost:6379/0
2025-11-28T17:39:40.8617723Z   QDRANT_URL: http://localhost:6333
2025-11-28T17:39:40.8617998Z   RAE_VECTOR_BACKEND: qdrant
2025-11-28T17:39:40.8618217Z ##[endgroup]
2025-11-28T17:39:49.5032411Z [1m============================= test session starts ==============================[0m
2025-11-28T17:39:49.5033429Z platform linux -- Python 3.10.19, pytest-9.0.1, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.10.19/x64/bin/python
2025-11-28T17:39:49.5034234Z cachedir: .pytest_cache
2025-11-28T17:39:49.5034752Z rootdir: /home/runner/work/RAE-agentic-memory/RAE-agentic-memory
2025-11-28T17:39:49.5035335Z configfile: pytest.ini
2025-11-28T17:39:49.5036086Z testpaths: apps/memory_api/tests, integrations/context-watcher/tests, tests, test_enterprise_features.py
2025-11-28T17:39:49.5037163Z plugins: anyio-4.11.0, cov-7.0.0, asyncio-1.3.0, mock-3.15.1
2025-11-28T17:39:49.5038222Z asyncio: mode=auto, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
2025-11-28T17:39:50.8556298Z [1mcollecting ... [0mcollected 276 items / 11 deselected / 7 skipped / 265 selected
2025-11-28T17:39:50.8557064Z 
2025-11-28T17:39:50.8678948Z apps/memory_api/tests/test_analytics.py::test_get_tenant_stats_cached [32mPASSED[0m[33m [  0%][0m
2025-11-28T17:39:50.8859521Z apps/memory_api/tests/test_analytics.py::test_get_tenant_stats_uncached [32mPASSED[0m[33m [  0%][0m
2025-11-28T17:39:50.8942633Z apps/memory_api/tests/test_analytics.py::test_get_memory_stats [32mPASSED[0m[33m    [  1%][0m
2025-11-28T17:39:50.9024579Z apps/memory_api/tests/test_analytics.py::test_get_query_stats [32mPASSED[0m[33m     [  1%][0m
2025-11-28T17:39:50.9123111Z apps/memory_api/tests/test_analytics.py::test_get_graph_stats [32mPASSED[0m[33m     [  1%][0m
2025-11-28T17:39:50.9206304Z apps/memory_api/tests/test_analytics.py::test_get_reflection_stats [32mPASSED[0m[33m [  2%][0m
2025-11-28T17:39:50.9288324Z apps/memory_api/tests/test_analytics.py::test_get_api_usage_stats [32mPASSED[0m[33m [  2%][0m
2025-11-28T17:39:50.9380277Z apps/memory_api/tests/test_analytics.py::test_get_performance_stats [32mPASSED[0m[33m [  3%][0m
2025-11-28T17:39:50.9462905Z apps/memory_api/tests/test_analytics.py::test_get_cost_stats [32mPASSED[0m[33m      [  3%][0m
2025-11-28T17:39:50.9543583Z apps/memory_api/tests/test_analytics.py::test_calculate_graph_density [32mPASSED[0m[33m [  3%][0m
2025-11-28T17:39:50.9630662Z apps/memory_api/tests/test_analytics.py::test_cache_operations [32mPASSED[0m[33m    [  4%][0m
2025-11-28T17:39:50.9724816Z apps/memory_api/tests/test_analytics.py::test_generate_report [32mPASSED[0m[33m     [  4%][0m
2025-11-28T17:39:50.9808887Z apps/memory_api/tests/test_analytics.py::test_get_real_time_metrics [32mPASSED[0m[33m [  4%][0m
2025-11-28T17:39:50.9902759Z apps/memory_api/tests/test_analytics.py::test_get_usage_alerts [32mPASSED[0m[33m    [  5%][0m
2025-11-28T17:39:51.0001250Z apps/memory_api/tests/test_analytics.py::test_mock_db_methods [32mPASSED[0m[33m     [  5%][0m
2025-11-28T17:39:51.0005571Z apps/memory_api/tests/test_api_client.py::test_classify_network_error [32mPASSED[0m[33m [  6%][0m
2025-11-28T17:39:51.0020825Z apps/memory_api/tests/test_api_client.py::test_classify_timeout_error [32mPASSED[0m[33m [  6%][0m
2025-11-28T17:39:51.0035415Z apps/memory_api/tests/test_api_client.py::test_classify_rate_limit [32mPASSED[0m[33m [  6%][0m
2025-11-28T17:39:51.0050166Z apps/memory_api/tests/test_api_client.py::test_classify_authentication_error [32mPASSED[0m[33m [  7%][0m
2025-11-28T17:39:51.0078108Z apps/memory_api/tests/test_api_client.py::test_circuit_breaker_closed_success [32mPASSED[0m[33m [  7%][0m
2025-11-28T17:39:51.0113345Z apps/memory_api/tests/test_api_client.py::test_circuit_breaker_opens_on_failures [32mPASSED[0m[33m [  7%][0m
2025-11-28T17:39:51.0142642Z apps/memory_api/tests/test_api_client.py::test_circuit_breaker_rejects_when_open [32mPASSED[0m[33m [  8%][0m
2025-11-28T17:39:51.0178675Z apps/memory_api/tests/test_api_client.py::test_circuit_breaker_half_open_recovery [32mPASSED[0m[33m [  8%][0m
2025-11-28T17:39:51.0198154Z apps/memory_api/tests/test_api_client.py::test_cache_set_and_get [32mPASSED[0m[33m  [  9%][0m
2025-11-28T17:39:51.0216887Z apps/memory_api/tests/test_api_client.py::test_cache_miss [32mPASSED[0m[33m         [  9%][0m
2025-11-28T17:39:52.2257200Z apps/memory_api/tests/test_api_client.py::test_cache_expiration [32mPASSED[0m[33m   [  9%][0m
2025-11-28T17:39:52.2277759Z apps/memory_api/tests/test_api_client.py::test_cache_invalidation [32mPASSED[0m[33m [ 10%][0m
2025-11-28T17:39:52.2299683Z apps/memory_api/tests/test_api_client.py::test_cache_clear [32mPASSED[0m[33m        [ 10%][0m
2025-11-28T17:39:52.5583513Z apps/memory_api/tests/test_api_client.py::test_retry_on_network_error [32mPASSED[0m[33m [ 10%][0m
2025-11-28T17:39:53.2887040Z apps/memory_api/tests/test_api_client.py::test_retry_exhausted [32mPASSED[0m[33m    [ 11%][0m
2025-11-28T17:39:53.3168002Z apps/memory_api/tests/test_api_client.py::test_no_retry_on_client_error [32mPASSED[0m[33m [ 11%][0m
2025-11-28T17:39:53.3190440Z apps/memory_api/tests/test_api_client.py::test_exponential_backoff [32mPASSED[0m[33m [ 12%][0m
2025-11-28T17:39:53.3451195Z apps/memory_api/tests/test_api_client.py::test_get_request [32mPASSED[0m[33m        [ 12%][0m
2025-11-28T17:39:53.3713564Z apps/memory_api/tests/test_api_client.py::test_post_request [32mPASSED[0m[33m       [ 12%][0m
2025-11-28T17:39:53.3950339Z apps/memory_api/tests/test_api_client.py::test_client_statistics [32mPASSED[0m[33m  [ 13%][0m
2025-11-28T17:39:53.4188706Z apps/memory_api/tests/test_api_client.py::test_reset_statistics [32mPASSED[0m[33m   [ 13%][0m
2025-11-28T17:39:53.4203938Z apps/memory_api/tests/test_api_e2e.py::TestMemoryAPISmoke::test_store_and_query_memory_e2e [33mSKIPPED[0m[33m [ 13%][0m
2025-11-28T17:39:53.4216008Z apps/memory_api/tests/test_api_e2e.py::TestMemoryAPISmoke::test_hybrid_search_e2e [33mSKIPPED[0m[33m [ 14%][0m
2025-11-28T17:39:53.4227329Z apps/memory_api/tests/test_api_e2e.py::TestHealthCheckSmoke::test_health_check [33mSKIPPED[0m[33m [ 14%][0m
2025-11-28T17:39:53.4947700Z apps/memory_api/tests/test_api_e2e.py::TestAPIErrorHandling::test_missing_tenant_header [32mPASSED[0m[33m [ 15%][0m
2025-11-28T17:39:53.5001246Z apps/memory_api/tests/test_api_e2e.py::TestAPIErrorHandling::test_invalid_json [32mPASSED[0m[33m [ 15%][0m
2025-11-28T17:39:55.0152047Z apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_success [32mPASSED[0m[33m [ 15%][0m
2025-11-28T17:39:55.7260990Z apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_with_mini_model [32mPASSED[0m[33m [ 16%][0m
2025-11-28T17:39:55.7316963Z apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_exception_handling [32mPASSED[0m[33m [ 16%][0m
2025-11-28T17:39:57.0647914Z apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_pool_cleanup [32mPASSED[0m[33m [ 16%][0m
2025-11-28T17:39:57.0726168Z apps/memory_api/tests/test_background_tasks.py::TestProcessGraphExtractionQueue::test_queue_processor_schedules_tasks [32mPASSED[0m[33m [ 17%][0m
2025-11-28T17:39:57.0791440Z apps/memory_api/tests/test_background_tasks.py::TestProcessGraphExtractionQueue::test_queue_processor_no_pending_memories [32mPASSED[0m[33m [ 17%][0m
2025-11-28T17:39:57.0886418Z apps/memory_api/tests/test_background_tasks.py::TestGenerateReflection::test_generate_reflection_calls_engine [32mPASSED[0m[33m [ 18%][0m
2025-11-28T17:39:57.0965138Z apps/memory_api/tests/test_background_tasks.py::TestMemoryDecay::test_apply_decay_updates_strength [32mPASSED[0m[33m [ 18%][0m
2025-11-28T17:39:57.1045280Z apps/memory_api/tests/test_background_tasks.py::TestPruneOldMemories::test_prune_respects_retention_days [32mPASSED[0m[33m [ 18%][0m
2025-11-28T17:39:57.1080768Z apps/memory_api/tests/test_background_tasks.py::TestPruneOldMemories::test_prune_disabled_when_retention_zero [32mPASSED[0m[33m [ 19%][0m
2025-11-28T17:39:57.1164035Z apps/memory_api/tests/test_dashboard_websocket.py::test_websocket_connect [32mPASSED[0m[33m [ 19%][0m
2025-11-28T17:39:57.1244362Z apps/memory_api/tests/test_dashboard_websocket.py::test_websocket_disconnect [32mPASSED[0m[33m [ 20%][0m
2025-11-28T17:39:57.1324845Z apps/memory_api/tests/test_dashboard_websocket.py::test_subscription_filtering [32mPASSED[0m[33m [ 20%][0m
2025-11-28T17:39:57.1418858Z apps/memory_api/tests/test_dashboard_websocket.py::test_broadcast_to_tenant [32mPASSED[0m[33m [ 20%][0m
2025-11-28T17:39:57.1546165Z apps/memory_api/tests/test_dashboard_websocket.py::test_broadcast_all [32mPASSED[0m[33m [ 21%][0m
2025-11-28T17:39:57.1598787Z apps/memory_api/tests/test_dashboard_websocket.py::test_collect_system_metrics [32mPASSED[0m[33m [ 21%][0m
2025-11-28T17:39:57.1647682Z apps/memory_api/tests/test_dashboard_websocket.py::test_metrics_changed_significantly [32mPASSED[0m[33m [ 21%][0m
2025-11-28T17:39:57.1722041Z apps/memory_api/tests/test_dashboard_websocket.py::test_check_system_health [32mPASSED[0m[33m [ 22%][0m
2025-11-28T17:39:57.1775391Z apps/memory_api/tests/test_dashboard_websocket.py::test_health_monitoring_failure [32mPASSED[0m[33m [ 22%][0m
2025-11-28T17:39:57.1881897Z apps/memory_api/tests/test_dashboard_websocket.py::test_broadcast_memory_created [32mPASSED[0m[33m [ 23%][0m
2025-11-28T17:39:57.1991465Z apps/memory_api/tests/test_dashboard_websocket.py::test_broadcast_quality_alert [32mPASSED[0m[33m [ 23%][0m
2025-11-28T17:39:57.2021737Z apps/memory_api/tests/test_evaluation_suite.py::test_mrr_calculation [32mPASSED[0m[33m [ 23%][0m
2025-11-28T17:39:57.2047031Z apps/memory_api/tests/test_evaluation_suite.py::test_ndcg_calculation [32mPASSED[0m[33m [ 24%][0m
2025-11-28T17:39:57.2076367Z apps/memory_api/tests/test_evaluation_suite.py::test_precision_recall [32mPASSED[0m[33m [ 24%][0m
2025-11-28T17:39:57.2120394Z apps/memory_api/tests/test_evaluation_suite.py::test_kolmogorov_smirnov_test [32mPASSED[0m[33m [ 24%][0m
2025-11-28T17:39:57.2157202Z apps/memory_api/tests/test_evaluation_suite.py::test_psi_calculation [32mPASSED[0m[33m [ 25%][0m
2025-11-28T17:39:57.2207276Z apps/memory_api/tests/test_evaluation_suite.py::test_drift_severity_classification [32mPASSED[0m[33m [ 25%][0m
2025-11-28T17:39:57.2294498Z apps/memory_api/tests/test_evaluation_suite.py::test_drift_detection_no_data [32mPASSED[0m[33m [ 26%][0m
2025-11-28T17:39:57.2317794Z apps/memory_api/tests/test_evaluation_suite.py::test_ab_test_traffic_validation [32mPASSED[0m[33m [ 26%][0m
2025-11-28T17:39:57.2369226Z apps/memory_api/tests/test_event_triggers.py::test_process_event [32mPASSED[0m[33m  [ 26%][0m
2025-11-28T17:39:57.2403169Z apps/memory_api/tests/test_event_triggers.py::test_evaluate_simple_condition [32mPASSED[0m[33m [ 27%][0m
2025-11-28T17:39:57.2441408Z apps/memory_api/tests/test_event_triggers.py::test_evaluate_condition_group_and [32mPASSED[0m[33m [ 27%][0m
2025-11-28T17:39:57.2475090Z apps/memory_api/tests/test_event_triggers.py::test_evaluate_condition_group_or [32mPASSED[0m[33m [ 27%][0m
2025-11-28T17:39:57.2508649Z apps/memory_api/tests/test_event_triggers.py::test_nested_condition_groups [32mPASSED[0m[33m [ 28%][0m
2025-11-28T17:39:57.2545948Z apps/memory_api/tests/test_event_triggers.py::test_condition_operators [32mPASSED[0m[33m [ 28%][0m
2025-11-28T17:39:57.2579970Z apps/memory_api/tests/test_event_triggers.py::test_rate_limiting [32mPASSED[0m[33m  [ 29%][0m
2025-11-28T17:39:57.2613782Z apps/memory_api/tests/test_event_triggers.py::test_cooldown_period [32mPASSED[0m[33m [ 29%][0m
2025-11-28T17:39:57.2667700Z apps/memory_api/tests/test_event_triggers.py::test_execute_action [32mPASSED[0m[33m [ 29%][0m
2025-11-28T17:39:57.2702521Z apps/memory_api/tests/test_event_triggers.py::test_workflow_execution [32mPASSED[0m[33m [ 30%][0m
2025-11-28T17:39:57.2725024Z apps/memory_api/tests/test_graph_algorithms.py::test_graph_node [32mPASSED[0m[33m   [ 30%][0m
2025-11-28T17:39:57.2747031Z apps/memory_api/tests/test_graph_algorithms.py::test_graph_edge [32mPASSED[0m[33m   [ 30%][0m
2025-11-28T17:39:57.2769269Z apps/memory_api/tests/test_graph_algorithms.py::test_knowledge_graph [32mPASSED[0m[33m [ 31%][0m
2025-11-28T17:39:57.2850597Z apps/memory_api/tests/test_graph_algorithms.py::test_service_load_tenant_graph [32mPASSED[0m[33m [ 31%][0m
2025-11-28T17:39:57.2931837Z apps/memory_api/tests/test_graph_algorithms.py::test_pagerank [32mPASSED[0m[33m     [ 32%][0m
2025-11-28T17:39:57.3018880Z apps/memory_api/tests/test_graph_algorithms.py::test_shortest_path [32mPASSED[0m[33m [ 32%][0m
2025-11-28T17:39:57.3103028Z apps/memory_api/tests/test_graph_algorithms.py::test_find_all_paths [32mPASSED[0m[33m [ 32%][0m
2025-11-28T17:39:57.3193081Z apps/memory_api/tests/test_graph_algorithms.py::test_find_related_entities [32mPASSED[0m[33m [ 33%][0m
2025-11-28T17:39:57.3277952Z apps/memory_api/tests/test_graph_algorithms.py::test_graph_summary [32mPASSED[0m[33m [ 33%][0m
2025-11-28T17:39:57.3385080Z apps/memory_api/tests/test_graph_algorithms.py::test_community_detection [32mPASSED[0m[33m [ 33%][0m
2025-11-28T17:39:57.3479492Z apps/memory_api/tests/test_graph_algorithms.py::test_calculate_centrality [32mPASSED[0m[33m [ 34%][0m
2025-11-28T17:39:57.3572429Z apps/memory_api/tests/test_graph_algorithms.py::test_graph_density [32mPASSED[0m[33m [ 34%][0m
2025-11-28T17:39:57.3658236Z apps/memory_api/tests/test_graph_algorithms.py::test_subgraph_extraction [32mPASSED[0m[33m [ 35%][0m
2025-11-28T17:39:57.9362306Z apps/memory_api/tests/test_openapi.py::test_openapi_schema [32mPASSED[0m[33m        [ 35%][0m
2025-11-28T17:39:57.9376216Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_tenant_tier_enum [32mPASSED[0m[33m [ 35%][0m
2025-11-28T17:39:57.9390538Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_tenant_config_defaults [32mPASSED[0m[33m [ 36%][0m
2025-11-28T17:39:57.9404761Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_tenant_creation [32mPASSED[0m[33m [ 36%][0m
2025-11-28T17:39:57.9418714Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_get_default_config_for_free_tier [32mPASSED[0m[33m [ 36%][0m
2025-11-28T17:39:57.9432853Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_get_default_config_for_pro_tier [32mPASSED[0m[33m [ 37%][0m
2025-11-28T17:39:57.9446741Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_get_default_config_for_enterprise_tier [32mPASSED[0m[33m [ 37%][0m
2025-11-28T17:39:57.9461583Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_has_quota_available_memories [32mPASSED[0m[33m [ 38%][0m
2025-11-28T17:39:57.9475627Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_has_quota_available_unlimited [32mPASSED[0m[33m [ 38%][0m
2025-11-28T17:39:57.9489433Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_increment_usage [32mPASSED[0m[33m [ 38%][0m
2025-11-28T17:39:57.9503735Z apps/memory_api/tests/test_phase2_models.py::TestTenantModels::test_is_feature_enabled [32mPASSED[0m[33m [ 39%][0m
2025-11-28T17:39:57.9517679Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_enum_values [32mPASSED[0m[33m [ 39%][0m
2025-11-28T17:39:57.9531613Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_levels [32mPASSED[0m[33m [ 40%][0m
2025-11-28T17:39:57.9545432Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_owner [32mPASSED[0m[33m [ 40%][0m
2025-11-28T17:39:57.9559046Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_admin [32mPASSED[0m[33m [ 40%][0m
2025-11-28T17:39:57.9573028Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_developer [32mPASSED[0m[33m [ 41%][0m
2025-11-28T17:39:57.9586645Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_analyst [32mPASSED[0m[33m [ 41%][0m
2025-11-28T17:39:57.9600397Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_can_perform_viewer [32mPASSED[0m[33m [ 41%][0m
2025-11-28T17:39:57.9614009Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_permission_model [32mPASSED[0m[33m [ 42%][0m
2025-11-28T17:39:57.9627871Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_creation [32mPASSED[0m[33m [ 42%][0m
2025-11-28T17:39:57.9642449Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_expiration [32mPASSED[0m[33m [ 43%][0m
2025-11-28T17:39:57.9656617Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_project_access [32mPASSED[0m[33m [ 43%][0m
2025-11-28T17:39:57.9670857Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_can_perform [32mPASSED[0m[33m [ 43%][0m
2025-11-28T17:39:57.9685060Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_user_role_can_perform_with_project [32mPASSED[0m[33m [ 44%][0m
2025-11-28T17:39:57.9698848Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_role_hierarchy_comparison [32mPASSED[0m[33m [ 44%][0m
2025-11-28T17:39:57.9712905Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_can_assign_role [32mPASSED[0m[33m [ 44%][0m
2025-11-28T17:39:57.9727609Z apps/memory_api/tests/test_phase2_models.py::TestRBACModels::test_can_modify_user [32mPASSED[0m[33m [ 45%][0m
2025-11-28T17:39:57.9741826Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginMetadata::test_metadata_creation [32mPASSED[0m[33m [ 45%][0m
2025-11-28T17:39:57.9755918Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginMetadata::test_metadata_to_dict [32mPASSED[0m[33m [ 46%][0m
2025-11-28T17:39:57.9781496Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_plugin_initialization [32mPASSED[0m[33m [ 46%][0m
2025-11-28T17:39:57.9806401Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_plugin_shutdown [32mPASSED[0m[33m [ 46%][0m
2025-11-28T17:39:57.9829567Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_plugin_health_check [32mPASSED[0m[33m [ 47%][0m
2025-11-28T17:39:57.9853855Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_hook_execution [32mPASSED[0m[33m [ 47%][0m
2025-11-28T17:39:57.9877011Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginBase::test_transform_hook [32mPASSED[0m[33m [ 47%][0m
2025-11-28T17:39:57.9892263Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_registry_creation [32mPASSED[0m[33m [ 48%][0m
2025-11-28T17:39:57.9910663Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_register_plugin [32mPASSED[0m[33m [ 48%][0m
2025-11-28T17:39:57.9930078Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_unregister_plugin [32mPASSED[0m[33m [ 49%][0m
2025-11-28T17:39:57.9947804Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_list_plugins [32mPASSED[0m[33m [ 49%][0m
2025-11-28T17:39:57.9965757Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_get_plugins_for_hook [32mPASSED[0m[33m [ 49%][0m
2025-11-28T17:39:57.9997332Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_initialize_all [32mPASSED[0m[33m [ 50%][0m
2025-11-28T17:39:58.0025858Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_shutdown_all [32mPASSED[0m[33m [ 50%][0m
2025-11-28T17:39:58.0058430Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_execute_hook [32mPASSED[0m[33m [ 50%][0m
2025-11-28T17:39:58.0085951Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_execute_transform_hook [32mPASSED[0m[33m [ 51%][0m
2025-11-28T17:39:58.0112423Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_health_check_all [32mPASSED[0m[33m [ 51%][0m
2025-11-28T17:39:58.0127455Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginRegistry::test_get_global_registry [32mPASSED[0m[33m [ 52%][0m
2025-11-28T17:39:58.0142385Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginHooks::test_hook_values [32mPASSED[0m[33m [ 52%][0m
2025-11-28T17:39:58.0157451Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginHooks::test_all_hooks_defined [32mPASSED[0m[33m [ 52%][0m
2025-11-28T17:39:58.0175637Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginDisabling::test_disabled_plugin_not_executed [32mPASSED[0m[33m [ 53%][0m
2025-11-28T17:39:58.0203476Z apps/memory_api/tests/test_phase2_plugins.py::TestPluginDisabling::test_disabled_plugin_not_initialized [32mPASSED[0m[33m [ 53%][0m
2025-11-28T17:39:58.0233137Z apps/memory_api/tests/test_phase2_plugins.py::TestMultiplePlugins::test_multiple_plugins_same_hook [32mPASSED[0m[33m [ 53%][0m
2025-11-28T17:39:58.0262875Z apps/memory_api/tests/test_phase2_plugins.py::TestMultiplePlugins::test_plugin_chaining [32mPASSED[0m[33m [ 54%][0m
2025-11-28T17:39:58.4733515Z apps/memory_api/tests/test_reflective_flags.py::TestReflectiveMemoryFlags::test_reflective_memory_disabled_no_reflections [31mFAILED[0m[31m [ 54%][0m
2025-11-28T17:39:58.4801144Z apps/memory_api/tests/test_reflective_flags.py::TestReflectiveMemoryFlags::test_reflective_memory_enabled_retrieves_reflections [32mPASSED[0m[31m [ 55%][0m
2025-11-28T17:39:58.4864870Z apps/memory_api/tests/test_reflective_flags.py::TestReflectiveMemoryMode::test_lite_mode_uses_lower_limits [32mPASSED[0m[31m [ 55%][0m
2025-11-28T17:39:58.4925935Z apps/memory_api/tests/test_reflective_flags.py::TestReflectiveMemoryMode::test_full_mode_uses_higher_limits [32mPASSED[0m[31m [ 55%][0m
2025-11-28T17:39:58.4967367Z apps/memory_api/tests/test_reflective_flags.py::TestDreamingEnabled::test_dreaming_disabled_no_dreaming [32mPASSED[0m[31m [ 56%][0m
2025-11-28T17:39:58.5682596Z apps/memory_api/tests/test_reflective_flags.py::TestDreamingEnabled::test_dreaming_enabled_runs_dreaming [31mFAILED[0m[31m [ 56%][0m
2025-11-28T17:39:58.5721467Z apps/memory_api/tests/test_reflective_flags.py::TestSummarizationEnabled::test_summarization_disabled_no_summary [32mPASSED[0m[31m [ 56%][0m
2025-11-28T17:39:58.5793723Z apps/memory_api/tests/test_reflective_flags.py::TestSummarizationEnabled::test_summarization_enabled_creates_summary [32mPASSED[0m[31m [ 57%][0m
2025-11-28T17:39:58.5873803Z apps/memory_api/tests/test_reflective_flags.py::TestMaintenanceScheduler::test_maintenance_with_all_flags_disabled [32mPASSED[0m[31m [ 57%][0m
2025-11-28T17:39:58.6002082Z apps/memory_api/tests/test_reflective_flags.py::TestMaintenanceScheduler::test_maintenance_with_all_flags_enabled [32mPASSED[0m[31m [ 58%][0m
2025-11-28T17:39:58.6083885Z apps/memory_api/tests/test_temporal_graph.py::test_create_snapshot [32mPASSED[0m[31m [ 58%][0m
2025-11-28T17:39:58.6159050Z apps/memory_api/tests/test_temporal_graph.py::test_get_snapshot_at_time [32mPASSED[0m[31m [ 58%][0m
2025-11-28T17:39:58.6236972Z apps/memory_api/tests/test_temporal_graph.py::test_get_latest_snapshot [32mPASSED[0m[31m [ 59%][0m
2025-11-28T17:39:58.6314445Z apps/memory_api/tests/test_temporal_graph.py::test_record_change [32mPASSED[0m[31m  [ 59%][0m
2025-11-28T17:39:58.6391986Z apps/memory_api/tests/test_temporal_graph.py::test_get_changes_filters [32mPASSED[0m[31m [ 60%][0m
2025-11-28T17:39:58.6478485Z apps/memory_api/tests/test_temporal_graph.py::test_get_entity_history [32mPASSED[0m[31m [ 60%][0m
2025-11-28T17:39:58.6558412Z apps/memory_api/tests/test_temporal_graph.py::test_reconstruct_graph_at_time [32mPASSED[0m[31m [ 60%][0m
2025-11-28T17:39:58.6631905Z apps/memory_api/tests/test_temporal_graph.py::test_apply_change_logic [32mPASSED[0m[31m [ 61%][0m
2025-11-28T17:39:58.6707946Z apps/memory_api/tests/test_temporal_graph.py::test_compare_graphs [32mPASSED[0m[31m [ 61%][0m
2025-11-28T17:39:58.6785636Z apps/memory_api/tests/test_temporal_graph.py::test_get_evolution_timeline [32mPASSED[0m[31m [ 61%][0m
2025-11-28T17:39:58.6874676Z apps/memory_api/tests/test_temporal_graph.py::test_get_growth_metrics [32mPASSED[0m[31m [ 62%][0m
2025-11-28T17:39:58.6950035Z apps/memory_api/tests/test_temporal_graph.py::test_find_emerging_patterns [32mPASSED[0m[31m [ 62%][0m
2025-11-28T17:39:58.7033047Z apps/memory_api/tests/test_temporal_graph.py::test_cleanup_old_snapshots [32mPASSED[0m[31m [ 63%][0m
2025-11-28T17:39:58.8294034Z tests/api/v1/test_agent.py::test_agent_execute_direct [31mFAILED[0m[31m             [ 63%][0m
2025-11-28T17:39:58.9506938Z tests/api/v1/test_agent.py::test_agent_execute_with_context [31mFAILED[0m[31m       [ 63%][0m
2025-11-28T17:39:59.0712644Z tests/api/v1/test_agent.py::test_agent_execute_with_empty_prompt [31mFAILED[0m[31m  [ 64%][0m
2025-11-28T17:39:59.3788424Z tests/api/v1/test_agent.py::test_agent_execute_with_llm_error [31mFAILED[0m[31m     [ 64%][0m
2025-11-28T17:39:59.3864321Z tests/api/v1/test_cache.py::test_rebuild_cache [32mPASSED[0m[31m                    [ 64%][0m
2025-11-28T17:39:59.4162155Z tests/api/v1/test_governance.py::test_governance_overview_success [31mFAILED[0m[31m [ 65%][0m
2025-11-28T17:39:59.4450521Z tests/api/v1/test_governance.py::test_governance_overview_with_custom_days [31mFAILED[0m[31m [ 65%][0m
2025-11-28T17:39:59.4734630Z tests/api/v1/test_governance.py::test_governance_overview_error [31mFAILED[0m[31m   [ 66%][0m
2025-11-28T17:39:59.5051764Z tests/api/v1/test_governance.py::test_tenant_governance_stats_success [31mFAILED[0m[31m [ 66%][0m
2025-11-28T17:39:59.5350198Z tests/api/v1/test_governance.py::test_tenant_governance_stats_no_data [31mFAILED[0m[31m [ 66%][0m
2025-11-28T17:39:59.5650332Z tests/api/v1/test_governance.py::test_tenant_governance_stats_with_custom_period [31mFAILED[0m[31m [ 67%][0m
2025-11-28T17:39:59.5942016Z tests/api/v1/test_governance.py::test_tenant_budget_status_success [31mFAILED[0m[31m [ 67%][0m
2025-11-28T17:39:59.6242152Z tests/api/v1/test_governance.py::test_tenant_budget_status_with_alerts [31mFAILED[0m[31m [ 67%][0m
2025-11-28T17:39:59.6537975Z tests/api/v1/test_governance.py::test_tenant_budget_status_zero_usage [31mFAILED[0m[31m [ 68%][0m
2025-11-28T17:39:59.6831658Z tests/api/v1/test_governance.py::test_tenant_budget_status_error [31mFAILED[0m[31m  [ 68%][0m
2025-11-28T17:39:59.7116763Z tests/api/v1/test_governance.py::test_governance_overview_invalid_days [31mFAILED[0m[31m [ 69%][0m
2025-11-28T17:39:59.7409896Z tests/api/v1/test_governance.py::test_tenant_governance_stats_invalid_days [31mFAILED[0m[31m [ 69%][0m
2025-11-28T17:39:59.7698213Z tests/api/v1/test_governance.py::test_governance_overview_empty_results [31mFAILED[0m[31m [ 69%][0m
2025-11-28T17:39:59.8025581Z tests/api/v1/test_memory.py::test_store_memory_success [31mFAILED[0m[31m            [ 70%][0m
2025-11-28T17:39:59.8347786Z tests/api/v1/test_memory.py::test_query_memory_success [31mFAILED[0m[31m            [ 70%][0m
2025-11-28T17:39:59.8657939Z tests/api/v1/test_memory.py::test_delete_memory_success [31mFAILED[0m[31m           [ 70%][0m
2025-11-28T17:39:59.8895660Z tests/api/v1/test_memory.py::test_rebuild_reflections_success [32mPASSED[0m[31m     [ 71%][0m
2025-11-28T17:39:59.9168040Z tests/api/v1/test_memory.py::test_reflection_stats_success [31mFAILED[0m[31m        [ 71%][0m
2025-11-28T17:39:59.9489142Z tests/api/v1/test_memory.py::test_store_memory_missing_tenant_header [31mFAILED[0m[31m [ 72%][0m
2025-11-28T17:39:59.9815988Z tests/api/v1/test_memory.py::test_query_memory_with_filters [31mFAILED[0m[31m       [ 72%][0m
2025-11-28T17:40:00.0163812Z tests/api/v1/test_memory.py::test_query_memory_with_graph_traversal [31mFAILED[0m[31m [ 72%][0m
2025-11-28T17:40:00.0475093Z tests/api/v1/test_memory.py::test_delete_memory_not_found [31mFAILED[0m[31m         [ 73%][0m
2025-11-28T17:40:00.0883591Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_success [31mFAILED[0m[31m    [ 73%][0m
2025-11-28T17:40:00.1207204Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_reranking [31mFAILED[0m[31m [ 73%][0m
2025-11-28T17:40:00.1525590Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_filters [31mFAILED[0m[31m [ 74%][0m
2025-11-28T17:40:00.3814423Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_manual_weights [31mFAILED[0m[31m [ 74%][0m
2025-11-28T17:40:00.4150370Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_graph_depth [31mFAILED[0m[31m [ 75%][0m
2025-11-28T17:40:00.4473626Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_with_conversation_history [31mFAILED[0m[31m [ 75%][0m
2025-11-28T17:40:00.4796377Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_empty_query [31mFAILED[0m[31m [ 75%][0m
2025-11-28T17:40:00.5016805Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_service_error [32mPASSED[0m[31m [ 76%][0m
2025-11-28T17:40:00.5344198Z tests/api/v1/test_search_hybrid.py::test_hybrid_search_all_strategies_disabled [31mFAILED[0m[31m [ 76%][0m
2025-11-28T17:40:00.7508718Z tests/integration/test_graphrag.py::test_graph_extraction_basic [31mERROR[0m[31m    [ 76%][0m
2025-11-28T17:40:00.9461214Z tests/integration/test_graphrag.py::test_graph_storage [31mERROR[0m[31m             [ 77%][0m
2025-11-28T17:40:01.1397945Z tests/integration/test_graphrag.py::test_hybrid_search [31mERROR[0m[31m             [ 77%][0m
2025-11-28T17:40:01.5120370Z tests/integration/test_graphrag.py::test_graph_traversal_depth [31mERROR[0m[31m     [ 78%][0m
2025-11-28T17:40:01.7098481Z tests/integration/test_graphrag.py::test_hierarchical_reflection [31mERROR[0m[31m   [ 78%][0m
2025-11-28T17:40:01.7168550Z tests/integration/test_reflection_flow.py::test_generate_reflection_from_failure [31mERROR[0m[31m [ 78%][0m
2025-11-28T17:40:01.7218358Z tests/integration/test_reflection_flow.py::test_generate_reflection_from_success [31mERROR[0m[31m [ 79%][0m
2025-11-28T17:40:01.7268198Z tests/integration/test_reflection_flow.py::test_reflection_retrieval_in_context [31mERROR[0m[31m [ 79%][0m
2025-11-28T17:40:01.7304227Z tests/integration/test_reflection_flow.py::test_memory_scoring_v2 [32mPASSED[0m[31m [ 80%][0m
2025-11-28T17:40:01.7349957Z tests/integration/test_reflection_flow.py::test_inject_reflections_into_prompt [31mERROR[0m[31m [ 80%][0m
2025-11-28T17:40:01.7410754Z tests/integration/test_reflection_flow.py::test_end_to_end_reflection_flow [31mERROR[0m[31m [ 80%][0m
2025-11-28T17:40:10.5501415Z tests/llm/test_llm_provider_contract.py::test_basic_completion [31mFAILED[0m[31m    [ 81%][0m
2025-11-28T17:40:19.1835839Z tests/llm/test_llm_provider_contract.py::test_json_mode [31mFAILED[0m[31m           [ 81%][0m
2025-11-28T17:40:19.4295253Z tests/llm/test_llm_provider_contract.py::test_streaming [31mFAILED[0m[31m           [ 81%][0m
2025-11-28T17:40:27.9180638Z tests/llm/test_llm_provider_contract.py::test_token_usage [31mFAILED[0m[31m         [ 82%][0m
2025-11-28T17:40:36.4060260Z tests/llm/test_llm_provider_contract.py::test_temperature_control [31mFAILED[0m[31m [ 82%][0m
2025-11-28T17:40:45.1352105Z tests/llm/test_llm_provider_contract.py::test_max_tokens [31mFAILED[0m[31m          [ 83%][0m
2025-11-28T17:40:53.6811991Z tests/llm/test_llm_provider_contract.py::test_provider_contract_hello_world[openai-gpt-3.5-turbo] [31mFAILED[0m[31m [ 83%][0m
2025-11-28T17:40:53.6853469Z tests/llm/test_llm_provider_contract.py::test_provider_contract_hello_world[anthropic-claude-3-haiku-20240307] [33mSKIPPED[0m[31m [ 83%][0m
2025-11-28T17:40:53.6894891Z tests/llm/test_llm_provider_contract.py::test_provider_contract_hello_world[gemini-gemini-1.5-flash] [33mSKIPPED[0m[31m [ 84%][0m
2025-11-28T17:40:53.6983439Z tests/repositories/test_graph_repository.py::test_get_all_nodes [32mPASSED[0m[31m   [ 84%][0m
2025-11-28T17:40:53.7069471Z tests/repositories/test_graph_repository.py::test_get_all_edges [32mPASSED[0m[31m   [ 84%][0m
2025-11-28T17:40:53.7160190Z tests/repositories/test_graph_repository.py::test_update_node_label [32mPASSED[0m[31m [ 85%][0m
2025-11-28T17:40:53.7423394Z tests/repositories/test_graph_repository.py::test_merge_node_edges [31mFAILED[0m[31m [ 85%][0m
2025-11-28T17:40:53.7517998Z tests/repositories/test_graph_repository.py::test_delete_node_edges [32mPASSED[0m[31m [ 86%][0m
2025-11-28T17:40:53.7608155Z tests/repositories/test_graph_repository.py::test_delete_node [32mPASSED[0m[31m     [ 86%][0m
2025-11-28T17:40:53.7702125Z tests/repositories/test_graph_repository.py::test_delete_node_not_found [32mPASSED[0m[31m [ 86%][0m
2025-11-28T17:40:53.7803876Z tests/repositories/test_graph_repository.py::test_upsert_node_insert [32mPASSED[0m[31m [ 87%][0m
2025-11-28T17:40:53.7894577Z tests/repositories/test_graph_repository.py::test_upsert_node_update [32mPASSED[0m[31m [ 87%][0m
2025-11-28T17:40:53.7982050Z tests/repositories/test_graph_repository.py::test_create_node [32mPASSED[0m[31m     [ 87%][0m
2025-11-28T17:40:53.8073093Z tests/repositories/test_graph_repository.py::test_create_edge [32mPASSED[0m[31m     [ 88%][0m
2025-11-28T17:40:53.8161099Z tests/repositories/test_graph_repository.py::test_get_node_internal_id [32mPASSED[0m[31m [ 88%][0m
2025-11-28T17:40:53.8248713Z tests/repositories/test_graph_repository.py::test_get_node_internal_id_not_found [32mPASSED[0m[31m [ 89%][0m
2025-11-28T17:40:53.8553061Z tests/repositories/test_graph_repository.py::test_store_graph_triples [31mFAILED[0m[31m [ 89%][0m
2025-11-28T17:40:53.8664420Z tests/services/llm/test_providers.py::test_openai_generate [32mPASSED[0m[31m        [ 89%][0m
2025-11-28T17:40:53.8737437Z tests/services/test_budget_service.py::test_check_budget [31mFAILED[0m[31m          [ 90%][0m
2025-11-28T17:40:53.8810653Z tests/services/test_budget_service.py::test_check_budget_fail [31mFAILED[0m[31m     [ 90%][0m
2025-11-28T17:40:53.8886318Z tests/services/test_community_detection.py::test_load_graph_uses_repository [32mPASSED[0m[31m [ 90%][0m
2025-11-28T17:40:53.8955985Z tests/services/test_community_detection.py::test_load_graph_with_disconnected_edges [32mPASSED[0m[31m [ 91%][0m
2025-11-28T17:40:53.9021015Z tests/services/test_community_detection.py::test_store_super_node_uses_repository [32mPASSED[0m[31m [ 91%][0m
2025-11-28T17:40:53.9104009Z tests/services/test_community_detection.py::test_run_community_detection_insufficient_nodes [32mPASSED[0m[31m [ 92%][0m
2025-11-28T17:40:53.9164672Z tests/services/test_community_detection.py::test_generate_summary_llm_integration [32mPASSED[0m[31m [ 92%][0m
2025-11-28T17:40:53.9250648Z tests/services/test_community_detection.py::test_generate_summary_llm_failure [32mPASSED[0m[31m [ 92%][0m
2025-11-28T17:40:53.9327628Z tests/services/test_community_detection.py::test_process_community_workflow [32mPASSED[0m[31m [ 93%][0m
2025-11-28T17:40:53.9398382Z tests/services/test_community_detection.py::test_empty_graph_handling [32mPASSED[0m[31m [ 93%][0m
2025-11-28T17:40:53.9440988Z tests/services/test_context_cache.py::test_context_cache_flow [32mPASSED[0m[31m     [ 93%][0m
2025-11-28T17:40:53.9515634Z tests/services/test_entity_resolution.py::test_fetch_nodes_uses_repository [32mPASSED[0m[31m [ 94%][0m
2025-11-28T17:40:53.9622395Z tests/services/test_entity_resolution.py::test_merge_nodes_with_canonical_name [32mPASSED[0m[31m [ 94%][0m
2025-11-28T17:40:53.9730581Z tests/services/test_entity_resolution.py::test_merge_nodes_without_canonical_name [32mPASSED[0m[31m [ 95%][0m
2025-11-28T17:40:53.9808510Z tests/services/test_entity_resolution.py::test_merge_nodes_empty_list [32mPASSED[0m[31m [ 95%][0m
2025-11-28T17:40:53.9894008Z tests/services/test_entity_resolution.py::test_run_clustering_with_insufficient_nodes [32mPASSED[0m[31m [ 95%][0m
2025-11-28T17:40:53.9994745Z tests/services/test_entity_resolution.py::test_process_group_with_merge_approval [32mPASSED[0m[31m [ 96%][0m
2025-11-28T17:40:54.0083868Z tests/services/test_entity_resolution.py::test_process_group_with_merge_rejection [32mPASSED[0m[31m [ 96%][0m
2025-11-28T17:40:54.0275151Z tests/services/test_reflection_engine.py::test_reflection_flow [31mFAILED[0m[31m    [ 96%][0m
2025-11-28T17:40:54.0474057Z test_enterprise_features.py::test_decorator_import [32mPASSED[0m[31m                [ 97%][0m
2025-11-28T17:40:54.0958661Z test_enterprise_features.py::test_decorator_basic_usage [32mPASSED[0m[31m           [ 97%][0m
2025-11-28T17:40:54.0972970Z test_enterprise_features.py::test_reflection_engine_import [32mPASSED[0m[31m        [ 98%][0m
2025-11-28T17:40:54.0987173Z test_enterprise_features.py::test_hierarchical_reflection_methods [32mPASSED[0m[31m [ 98%][0m
2025-11-28T17:40:54.1001854Z test_enterprise_features.py::test_llm_structured_outputs [32mPASSED[0m[31m          [ 98%][0m
2025-11-28T17:40:54.1114076Z test_enterprise_features.py::test_pydantic_models [31mFAILED[0m[31m                 [ 99%][0m
2025-11-28T17:40:54.1569537Z test_enterprise_features.py::test_memory_client_async_methods [32mPASSED[0m[31m     [ 99%][0m
2025-11-28T17:41:05.5584127Z test_enterprise_features.py::test_api_endpoint_exists [32mPASSED[0m[31m             [100%][0m
2025-11-28T17:41:05.5585597Z 
2025-11-28T17:41:05.5586356Z ==================================== ERRORS ====================================
2025-11-28T17:41:05.5587802Z [31m[1m________________ ERROR at setup of test_graph_extraction_basic _________________[0m
2025-11-28T17:41:05.5589312Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:05.5590983Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:05.5592458Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:05.5593858Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:05.5595288Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:05.5596359Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:05.5597293Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:05.5598422Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:05.5599596Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:05.5600849Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:05.5601871Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:05.5602901Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:05.5603981Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:05.5605655Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:05.5606740Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:05.5607758Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:05.5608764Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:05.5609527Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:05.5610330Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/asyncio/tasks.py[0m:304: in __wakeup
2025-11-28T17:41:05.5611182Z     [0mfuture.result()[90m[39;49;00m
2025-11-28T17:41:05.5611932Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:05.5612734Z [31m[1m_____________________ ERROR at setup of test_graph_storage _____________________[0m
2025-11-28T17:41:05.5613318Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:05.5613860Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:05.5614691Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:05.5615413Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:05.5616106Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:05.5616739Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:05.5617376Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:05.5618177Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:05.5619281Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:05.5620140Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:05.5620874Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:05.5621609Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:05.5622388Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:05.5623063Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:05.5623788Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:05.5624633Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:05.5625460Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:05.5626063Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:05.5626583Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/asyncio/tasks.py[0m:304: in __wakeup
2025-11-28T17:41:05.5627044Z     [0mfuture.result()[90m[39;49;00m
2025-11-28T17:41:05.5627566Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:05.5628179Z [31m[1m_____________________ ERROR at setup of test_hybrid_search _____________________[0m
2025-11-28T17:41:05.5628622Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:05.5629044Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:05.5630070Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:05.5630838Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:05.5631463Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:05.5632034Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:05.5632608Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:05.5633301Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:05.5634031Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:05.5634671Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:05.5635306Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:05.5635980Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:05.5636637Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:05.5637232Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:05.5637868Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:05.5638603Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:05.5639343Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:05.5640221Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:05.5640735Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/asyncio/tasks.py[0m:304: in __wakeup
2025-11-28T17:41:05.5641189Z     [0mfuture.result()[90m[39;49;00m
2025-11-28T17:41:05.5641696Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:05.5642299Z [31m[1m_________________ ERROR at setup of test_graph_traversal_depth _________________[0m
2025-11-28T17:41:05.5642742Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:05.5643151Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:05.5643780Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:05.5644384Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:05.5645004Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:05.5645564Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:05.5646133Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:05.5646819Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:05.5647542Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:05.5648164Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:05.5648804Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:05.5649442Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:05.5650369Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:05.5651069Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:05.5651710Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:05.5652521Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:05.5653272Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:05.5653839Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:05.5654347Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/asyncio/tasks.py[0m:304: in __wakeup
2025-11-28T17:41:05.5654813Z     [0mfuture.result()[90m[39;49;00m
2025-11-28T17:41:05.5655326Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:05.5655944Z [31m[1m________________ ERROR at setup of test_hierarchical_reflection ________________[0m
2025-11-28T17:41:05.5656393Z [1m[31mtests/integration/test_graphrag.py[0m:35: in db_pool
2025-11-28T17:41:05.5656809Z     [0mpool = [94mawait[39;49;00m asyncpg.create_pool([90m[39;49;00m
2025-11-28T17:41:05.5657429Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:418: in _async__init__
2025-11-28T17:41:05.5658042Z     [0m[94mawait[39;49;00m [96mself[39;49;00m._initialize()[90m[39;49;00m
2025-11-28T17:41:05.5658660Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:445: in _initialize
2025-11-28T17:41:05.5659265Z     [0m[94mawait[39;49;00m first_ch.connect()[90m[39;49;00m
2025-11-28T17:41:05.5660416Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:132: in connect
2025-11-28T17:41:05.5661286Z     [0m[96mself[39;49;00m._con = [94mawait[39;49;00m [96mself[39;49;00m._pool._get_new_connection()[90m[39;49;00m
2025-11-28T17:41:05.5662016Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/pool.py[0m:517: in _get_new_connection
2025-11-28T17:41:05.5662645Z     [0mcon = [94mawait[39;49;00m [96mself[39;49;00m._connect([90m[39;49;00m
2025-11-28T17:41:05.5663266Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connection.py[0m:2421: in connect
2025-11-28T17:41:05.5663902Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m connect_utils._connect([90m[39;49;00m
2025-11-28T17:41:05.5664574Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:1049: in _connect
2025-11-28T17:41:05.5665165Z     [0mconn = [94mawait[39;49;00m _connect_addr([90m[39;49;00m
2025-11-28T17:41:05.5665804Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:886: in _connect_addr
2025-11-28T17:41:05.5666549Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m __connect_addr(params, [94mTrue[39;49;00m, *args)[90m[39;49;00m
2025-11-28T17:41:05.5667298Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/asyncpg/connect_utils.py[0m:934: in __connect_addr
2025-11-28T17:41:05.5667962Z     [0m[94mawait[39;49;00m connected[90m[39;49;00m
2025-11-28T17:41:05.5668466Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/asyncio/tasks.py[0m:304: in __wakeup
2025-11-28T17:41:05.5668927Z     [0mfuture.result()[90m[39;49;00m
2025-11-28T17:41:05.5669439Z [1m[31mE   asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"[0m
2025-11-28T17:41:05.5670472Z [31m[1m___________ ERROR at setup of test_generate_reflection_from_failure ____________[0m
2025-11-28T17:41:05.5671363Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 81
2025-11-28T17:41:05.5672037Z   @pytest.mark.asyncio
2025-11-28T17:41:05.5672340Z   async def test_generate_reflection_from_failure(
2025-11-28T17:41:05.5672659Z       reflection_engine, memory_repo, tenant_id, project_id
2025-11-28T17:41:05.5672930Z   ):
2025-11-28T17:41:05.5673079Z       """
2025-11-28T17:41:05.5673297Z       Test reflection generation from a failed task execution.
2025-11-28T17:41:05.5673513Z 
2025-11-28T17:41:05.5673580Z       Scenario:
2025-11-28T17:41:05.5673877Z       1. Task fails with SQL timeout error
2025-11-28T17:41:05.5674150Z       2. Reflection engine generates lesson learned
2025-11-28T17:41:05.5674459Z       3. Reflection is stored with proper importance/confidence
2025-11-28T17:41:05.5674731Z       """
2025-11-28T17:41:05.5674895Z       # 1. Create failure context
2025-11-28T17:41:05.5675105Z       events = [
2025-11-28T17:41:05.5675279Z           Event(
2025-11-28T17:41:05.5675453Z               event_id="evt_1",
2025-11-28T17:41:05.5675707Z               event_type=EventType.TOOL_CALL,
2025-11-28T17:41:05.5675983Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:05.5676296Z               content="Executing SQL query: SELECT * FROM large_table",
2025-11-28T17:41:05.5676610Z               metadata={"tool": "sql_executor"},
2025-11-28T17:41:05.5676858Z               tool_name="sql_executor",
2025-11-28T17:41:05.5677066Z           ),
2025-11-28T17:41:05.5677220Z           Event(
2025-11-28T17:41:05.5677391Z               event_id="evt_2",
2025-11-28T17:41:05.5677606Z               event_type=EventType.ERROR_EVENT,
2025-11-28T17:41:05.5677872Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:05.5678143Z               content="Query timeout after 30 seconds",
2025-11-28T17:41:05.5678409Z               metadata={"error_code": "TIMEOUT"},
2025-11-28T17:41:05.5678699Z               error={"type": "TimeoutError", "code": "QUERY_TIMEOUT"},
2025-11-28T17:41:05.5678971Z           ),
2025-11-28T17:41:05.5679133Z       ]
2025-11-28T17:41:05.5679217Z 
2025-11-28T17:41:05.5679294Z       error_info = ErrorInfo(
2025-11-28T17:41:05.5679512Z           error_code="QUERY_TIMEOUT",
2025-11-28T17:41:05.5680013Z           error_category=ErrorCategory.TIMEOUT_ERROR,
2025-11-28T17:41:05.5680359Z           error_message="SQL query timeout after 30 seconds",
2025-11-28T17:41:05.5680635Z           tool_name="sql_executor",
2025-11-28T17:41:05.5680940Z           context={"query": "SELECT * FROM large_table", "timeout_seconds": 30},
2025-11-28T17:41:05.5681243Z       )
2025-11-28T17:41:05.5681327Z 
2025-11-28T17:41:05.5681412Z       context = ReflectionContext(
2025-11-28T17:41:05.5681633Z           events=events,
2025-11-28T17:41:05.5681974Z           outcome=OutcomeType.FAILURE,
2025-11-28T17:41:05.5682328Z           error=error_info,
2025-11-28T17:41:05.5682671Z           task_description="Fetch data from large table",
2025-11-28T17:41:05.5682973Z           task_goal="Retrieve user analytics data",
2025-11-28T17:41:05.5683228Z           tenant_id=tenant_id,
2025-11-28T17:41:05.5683443Z           project_id=project_id,
2025-11-28T17:41:05.5683647Z       )
2025-11-28T17:41:05.5683733Z 
2025-11-28T17:41:05.5683813Z       # 2. Generate reflection
2025-11-28T17:41:05.5684082Z       result = await reflection_engine.generate_reflection(context)
2025-11-28T17:41:05.5684315Z 
2025-11-28T17:41:05.5684403Z       # 3. Assertions on reflection result
2025-11-28T17:41:05.5684641Z       assert result is not None
2025-11-28T17:41:05.5684957Z       assert len(result.reflection_text) > 0, "Reflection text should not be empty"
2025-11-28T17:41:05.5685438Z       assert result.importance > 0.3, "Failure reflection should have reasonable importance"
2025-11-28T17:41:05.5685878Z       assert result.confidence > 0.0, "Confidence should be non-zero"
2025-11-28T17:41:05.5686256Z       assert result.error_category == ErrorCategory.TIMEOUT_ERROR
2025-11-28T17:41:05.5686742Z       assert len(result.source_event_ids) == len(events)
2025-11-28T17:41:05.5687039Z 
2025-11-28T17:41:05.5687116Z       # Check for relevant tags
2025-11-28T17:41:05.5687316Z       assert any(
2025-11-28T17:41:05.5687544Z           tag.lower() in ["sql", "timeout", "performance", "query"]
2025-11-28T17:41:05.5687824Z           for tag in result.tags
2025-11-28T17:41:05.5688056Z       ), "Reflection should have relevant tags"
2025-11-28T17:41:05.5688228Z 
2025-11-28T17:41:05.5688304Z       # 4. Store reflection
2025-11-28T17:41:05.5688546Z       stored_ids = await reflection_engine.store_reflection(
2025-11-28T17:41:05.5688818Z           result=result,
2025-11-28T17:41:05.5689013Z           tenant_id=tenant_id,
2025-11-28T17:41:05.5689216Z           project_id=project_id,
2025-11-28T17:41:05.5689416Z       )
2025-11-28T17:41:05.5689502Z 
2025-11-28T17:41:05.5689595Z       assert "reflection_id" in stored_ids
2025-11-28T17:41:05.5690041Z       assert stored_ids["reflection_id"] is not None
2025-11-28T17:41:05.5690238Z 
2025-11-28T17:41:05.5690315Z       # 5. Verify stored in database
2025-11-28T17:41:05.5690602Z       reflections = await memory_repo.get_reflective_memories(
2025-11-28T17:41:05.5690918Z           tenant_id=tenant_id, project=project_id
2025-11-28T17:41:05.5691150Z       )
2025-11-28T17:41:05.5691398Z       assert len(reflections) >= 1, "Reflection should be stored in database"
2025-11-28T17:41:05.5691646Z 
2025-11-28T17:41:05.5691723Z       # Find our reflection
2025-11-28T17:41:05.5691919Z       our_reflection = next(
2025-11-28T17:41:05.5692208Z           (r for r in reflections if r["id"] == stored_ids["reflection_id"]), None
2025-11-28T17:41:05.5692510Z       )
2025-11-28T17:41:05.5692673Z       assert our_reflection is not None
2025-11-28T17:41:05.5692959Z       assert our_reflection["content"] == result.reflection_text
2025-11-28T17:41:05.5693299Z       assert our_reflection["importance"] == result.importance
2025-11-28T17:41:05.5693829Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 47
2025-11-28T17:41:05.5694308Z   @pytest.fixture
2025-11-28T17:41:05.5694529Z   async def reflection_engine(db_pool, memory_repo):
2025-11-28T17:41:05.5694798Z       """Reflection engine v2"""
2025-11-28T17:41:05.5695049Z       return ReflectionEngineV2(db_pool, memory_repo)
2025-11-28T17:41:05.5695547Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:05.5696014Z   @pytest.fixture
2025-11-28T17:41:05.5696206Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:05.5696443Z       """Database connection pool"""
2025-11-28T17:41:05.5696672Z       return postgresql_pool
2025-11-28T17:41:05.5697006Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:05.5701352Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:05.5704214Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:05.5704438Z 
2025-11-28T17:41:05.5704738Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:05.5705372Z [31m[1m___________ ERROR at setup of test_generate_reflection_from_success ____________[0m
2025-11-28T17:41:05.5706131Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 178
2025-11-28T17:41:05.5706723Z   @pytest.mark.asyncio
2025-11-28T17:41:05.5706958Z   async def test_generate_reflection_from_success(
2025-11-28T17:41:05.5707273Z       reflection_engine, memory_repo, tenant_id, project_id
2025-11-28T17:41:05.5707542Z   ):
2025-11-28T17:41:05.5707691Z       """
2025-11-28T17:41:05.5707920Z       Test reflection generation from a successful task execution.
2025-11-28T17:41:05.5708151Z 
2025-11-28T17:41:05.5708217Z       Scenario:
2025-11-28T17:41:05.5708404Z       1. Task succeeds with optimization
2025-11-28T17:41:05.5708679Z       2. Reflection engine generates positive pattern
2025-11-28T17:41:05.5708958Z       3. Reflection stored as reusable strategy
2025-11-28T17:41:05.5709203Z       """
2025-11-28T17:41:05.5709352Z       events = [
2025-11-28T17:41:05.5709514Z           Event(
2025-11-28T17:41:05.5709693Z               event_id="evt_1",
2025-11-28T17:41:05.5710191Z               event_type=EventType.TOOL_CALL,
2025-11-28T17:41:05.5710464Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:05.5710846Z               content="Executing optimized SQL query: SELECT id, name FROM users LIMIT 100",
2025-11-28T17:41:05.5711355Z               metadata={"tool": "sql_executor", "optimization": "added_limit"},
2025-11-28T17:41:05.5711733Z               tool_name="sql_executor",
2025-11-28T17:41:05.5711947Z           ),
2025-11-28T17:41:05.5712106Z           Event(
2025-11-28T17:41:05.5712279Z               event_id="evt_2",
2025-11-28T17:41:05.5712504Z               event_type=EventType.TOOL_RESPONSE,
2025-11-28T17:41:05.5712773Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:05.5713077Z               content="Query completed successfully in 0.5 seconds",
2025-11-28T17:41:05.5713374Z               metadata={"execution_time_ms": 500},
2025-11-28T17:41:05.5713607Z           ),
2025-11-28T17:41:05.5713767Z       ]
2025-11-28T17:41:05.5713852Z 
2025-11-28T17:41:05.5713941Z       context = ReflectionContext(
2025-11-28T17:41:05.5714165Z           events=events,
2025-11-28T17:41:05.5714374Z           outcome=OutcomeType.SUCCESS,
2025-11-28T17:41:05.5714644Z           task_description="Fetch user data efficiently",
2025-11-28T17:41:05.5715046Z           task_goal="Retrieve first 100 users",
2025-11-28T17:41:05.5715300Z           tenant_id=tenant_id,
2025-11-28T17:41:05.5715513Z           project_id=project_id,
2025-11-28T17:41:05.5715713Z       )
2025-11-28T17:41:05.5715804Z 
2025-11-28T17:41:05.5715878Z       # Generate reflection
2025-11-28T17:41:05.5716152Z       result = await reflection_engine.generate_reflection(context)
2025-11-28T17:41:05.5716381Z 
2025-11-28T17:41:05.5716463Z       assert result is not None
2025-11-28T17:41:05.5716687Z       assert len(result.reflection_text) > 0
2025-11-28T17:41:05.5717052Z       assert result.importance >= 0.0, "Success reflection should have some importance"
2025-11-28T17:41:05.5717338Z 
2025-11-28T17:41:05.5717439Z       # Success reflections might have strategy
2025-11-28T17:41:05.5717691Z       if result.strategy_text:
2025-11-28T17:41:05.5717920Z           assert len(result.strategy_text) > 0
2025-11-28T17:41:05.5718201Z           # Store should create both reflection and strategy
2025-11-28T17:41:05.5718520Z           stored_ids = await reflection_engine.store_reflection(
2025-11-28T17:41:05.5718856Z               result=result, tenant_id=tenant_id, project_id=project_id
2025-11-28T17:41:05.5719134Z           )
2025-11-28T17:41:05.5719309Z           assert "strategy_id" in stored_ids
2025-11-28T17:41:05.5719984Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 47
2025-11-28T17:41:05.5720540Z   @pytest.fixture
2025-11-28T17:41:05.5720766Z   async def reflection_engine(db_pool, memory_repo):
2025-11-28T17:41:05.5721218Z       """Reflection engine v2"""
2025-11-28T17:41:05.5721831Z       return ReflectionEngineV2(db_pool, memory_repo)
2025-11-28T17:41:05.5722538Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:05.5723130Z   @pytest.fixture
2025-11-28T17:41:05.5723318Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:05.5723561Z       """Database connection pool"""
2025-11-28T17:41:05.5723793Z       return postgresql_pool
2025-11-28T17:41:05.5724103Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:05.5727139Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:05.5729982Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:05.5730223Z 
2025-11-28T17:41:05.5730513Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:05.5731157Z [31m[1m____________ ERROR at setup of test_reflection_retrieval_in_context ____________[0m
2025-11-28T17:41:05.5731792Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 239
2025-11-28T17:41:05.5732277Z   @pytest.mark.asyncio
2025-11-28T17:41:05.5732516Z   async def test_reflection_retrieval_in_context(
2025-11-28T17:41:05.5732789Z       reflection_engine,
2025-11-28T17:41:05.5732988Z       context_builder,
2025-11-28T17:41:05.5733169Z       memory_repo,
2025-11-28T17:41:05.5733341Z       tenant_id,
2025-11-28T17:41:05.5733514Z       project_id,
2025-11-28T17:41:05.5733675Z   ):
2025-11-28T17:41:05.5733822Z       """
2025-11-28T17:41:05.5734064Z       Test that reflections are retrieved and injected into context.
2025-11-28T17:41:05.5734298Z 
2025-11-28T17:41:05.5734363Z       Scenario:
2025-11-28T17:41:05.5734559Z       1. Store a reflection about SQL timeouts
2025-11-28T17:41:05.5734824Z       2. Build context for a new SQL query task
2025-11-28T17:41:05.5735087Z       3. Verify reflection is included in context
2025-11-28T17:41:05.5735322Z       """
2025-11-28T17:41:05.5735495Z       # 1. Store a reflection manually
2025-11-28T17:41:05.5735722Z       reflection_content = (
2025-11-28T17:41:05.5736048Z           "SQL queries on large tables should always include LIMIT clause "
2025-11-28T17:41:05.5736431Z           "to prevent timeout errors. Default timeout is 30 seconds."
2025-11-28T17:41:05.5736717Z       )
2025-11-28T17:41:05.5736803Z 
2025-11-28T17:41:05.5736982Z       reflection_record = await memory_repo.insert_memory(
2025-11-28T17:41:05.5737492Z           tenant_id=tenant_id,
2025-11-28T17:41:05.5737774Z           content=reflection_content,
2025-11-28T17:41:05.5738000Z           source="test",
2025-11-28T17:41:05.5738196Z           importance=0.8,
2025-11-28T17:41:05.5738388Z           layer="rm",
2025-11-28T17:41:05.5738596Z           tags=["sql", "timeout", "best-practice"],
2025-11-28T17:41:05.5738878Z           timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:05.5739130Z           project=project_id,
2025-11-28T17:41:05.5739330Z       )
2025-11-28T17:41:05.5739415Z 
2025-11-28T17:41:05.5739504Z       # 2. Build context with query about SQL
2025-11-28T17:41:05.5739935Z       query = "I need to fetch all user data from the users table"
2025-11-28T17:41:05.5740237Z 
2025-11-28T17:41:05.5740522Z       working_memory = await context_builder.build_context(
2025-11-28T17:41:05.5740953Z           tenant_id=tenant_id,
2025-11-28T17:41:05.5741164Z           project_id=project_id,
2025-11-28T17:41:05.5741377Z           query=query,
2025-11-28T17:41:05.5741559Z           recent_messages=[],
2025-11-28T17:41:05.5741753Z       )
2025-11-28T17:41:05.5741843Z 
2025-11-28T17:41:05.5741929Z       # 3. Verify reflection is in context
2025-11-28T17:41:05.5742272Z       assert len(working_memory.reflections) >= 1, "Should retrieve reflections"
2025-11-28T17:41:05.5742538Z 
2025-11-28T17:41:05.5742657Z       # Check our reflection is included (by content or ID)
2025-11-28T17:41:05.5742931Z       reflection_found = any(
2025-11-28T17:41:05.5743189Z           refl.metadata.get("id") == reflection_record["id"]
2025-11-28T17:41:05.5743483Z           for refl in working_memory.reflections
2025-11-28T17:41:05.5743720Z       )
2025-11-28T17:41:05.5743972Z       assert reflection_found, "Our test reflection should be in context"
2025-11-28T17:41:05.5744222Z 
2025-11-28T17:41:05.5744347Z       # 4. Verify formatted context includes lessons learned
2025-11-28T17:41:05.5744868Z       assert "Lessons Learned" in working_memory.context_text or "lessons learned" in working_memory.context_text.lower(), \
2025-11-28T17:41:05.5745376Z           "Context should include lessons learned section"
2025-11-28T17:41:05.5745568Z 
2025-11-28T17:41:05.5745688Z       # 5. Verify reflection content is in formatted text
2025-11-28T17:41:05.5745988Z       # (It should be in the Lessons Learned section)
2025-11-28T17:41:05.5746231Z       assert any(
2025-11-28T17:41:05.5746424Z           reflection_content in refl.content
2025-11-28T17:41:05.5746686Z           for refl in working_memory.reflections
2025-11-28T17:41:05.5746950Z       ), "Reflection content should be accessible"
2025-11-28T17:41:05.5747457Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 47
2025-11-28T17:41:05.5747941Z   @pytest.fixture
2025-11-28T17:41:05.5748156Z   async def reflection_engine(db_pool, memory_repo):
2025-11-28T17:41:05.5748435Z       """Reflection engine v2"""
2025-11-28T17:41:05.5748691Z       return ReflectionEngineV2(db_pool, memory_repo)
2025-11-28T17:41:05.5749198Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:05.5749661Z   @pytest.fixture
2025-11-28T17:41:05.5750089Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:05.5750340Z       """Database connection pool"""
2025-11-28T17:41:05.5750567Z       return postgresql_pool
2025-11-28T17:41:05.5751120Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:05.5754260Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:05.5756922Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:05.5757154Z 
2025-11-28T17:41:05.5757442Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:05.5758073Z [31m[1m____________ ERROR at setup of test_inject_reflections_into_prompt _____________[0m
2025-11-28T17:41:05.5758666Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 353
2025-11-28T17:41:05.5759396Z   @pytest.mark.asyncio
2025-11-28T17:41:05.5759629Z   async def test_inject_reflections_into_prompt(
2025-11-28T17:41:05.5760153Z       context_builder, memory_repo, tenant_id, project_id
2025-11-28T17:41:05.5760423Z   ):
2025-11-28T17:41:05.5760570Z       """
2025-11-28T17:41:05.5760830Z       Test the helper method for injecting reflections into existing prompts.
2025-11-28T17:41:05.5761151Z       """
2025-11-28T17:41:05.5761313Z       # 1. Store a reflection
2025-11-28T17:41:05.5761532Z       await memory_repo.insert_memory(
2025-11-28T17:41:05.5761761Z           tenant_id=tenant_id,
2025-11-28T17:41:05.5762029Z           content="Always validate user input before processing",
2025-11-28T17:41:05.5762322Z           source="test",
2025-11-28T17:41:05.5762512Z           importance=0.9,
2025-11-28T17:41:05.5762703Z           layer="rm",
2025-11-28T17:41:05.5762902Z           tags=["security", "validation"],
2025-11-28T17:41:05.5763171Z           timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:05.5763429Z           project=project_id,
2025-11-28T17:41:05.5763628Z       )
2025-11-28T17:41:05.5763715Z 
2025-11-28T17:41:05.5763795Z       # 2. Inject into prompt
2025-11-28T17:41:05.5764030Z       base_prompt = "You are a helpful assistant."
2025-11-28T17:41:05.5764391Z       enhanced_prompt = await context_builder.inject_reflections_into_prompt(
2025-11-28T17:41:05.5764738Z           base_prompt=base_prompt,
2025-11-28T17:41:05.5764955Z           tenant_id=tenant_id,
2025-11-28T17:41:05.5765169Z           project_id=project_id,
2025-11-28T17:41:05.5765427Z           query="How should I handle user input?",
2025-11-28T17:41:05.5765659Z       )
2025-11-28T17:41:05.5765748Z 
2025-11-28T17:41:05.5765819Z       # 3. Verify injection
2025-11-28T17:41:05.5766124Z       assert len(enhanced_prompt) > len(base_prompt), "Prompt should be enhanced"
2025-11-28T17:41:05.5766630Z       assert "Lessons Learned" in enhanced_prompt or "lessons learned" in enhanced_prompt.lower(), \
2025-11-28T17:41:05.5767046Z           "Should include lessons learned section"
2025-11-28T17:41:05.5767449Z       assert "validate user input" in enhanced_prompt.lower(), "Should include reflection content"
2025-11-28T17:41:05.5768085Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 53
2025-11-28T17:41:05.5768557Z   @pytest.fixture
2025-11-28T17:41:05.5768820Z   async def context_builder(db_pool, memory_repo, reflection_engine):
2025-11-28T17:41:05.5769138Z       """Context builder"""
2025-11-28T17:41:05.5769343Z       config = ContextConfig(
2025-11-28T17:41:05.5769549Z           max_reflection_items=5,
2025-11-28T17:41:05.5769996Z           min_reflection_importance=0.5,
2025-11-28T17:41:05.5770248Z           enable_enhanced_scoring=True,
2025-11-28T17:41:05.5770482Z       )
2025-11-28T17:41:05.5770740Z       return ContextBuilder(db_pool, memory_repo, reflection_engine, config)
2025-11-28T17:41:05.5771319Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:05.5771797Z   @pytest.fixture
2025-11-28T17:41:05.5771986Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:05.5772227Z       """Database connection pool"""
2025-11-28T17:41:05.5772460Z       return postgresql_pool
2025-11-28T17:41:05.5772759Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:05.5775788Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:05.5778656Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:05.5778877Z 
2025-11-28T17:41:05.5779157Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:05.5779884Z [31m[1m______________ ERROR at setup of test_end_to_end_reflection_flow _______________[0m
2025-11-28T17:41:05.5780478Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 393
2025-11-28T17:41:05.5780959Z   @pytest.mark.asyncio
2025-11-28T17:41:05.5781180Z   async def test_end_to_end_reflection_flow(
2025-11-28T17:41:05.5781427Z       reflection_engine,
2025-11-28T17:41:05.5781624Z       context_builder,
2025-11-28T17:41:05.5781804Z       memory_repo,
2025-11-28T17:41:05.5781985Z       tenant_id,
2025-11-28T17:41:05.5782148Z       project_id,
2025-11-28T17:41:05.5782327Z   ):
2025-11-28T17:41:05.5782477Z       """
2025-11-28T17:41:05.5782641Z       Test complete end-to-end flow:
2025-11-28T17:41:05.5782877Z       1. Task fails with error
2025-11-28T17:41:05.5783099Z       2. Reflection generated and stored
2025-11-28T17:41:05.5783336Z       3. Next task retrieves reflection
2025-11-28T17:41:05.5783586Z       4. Reflection influences behavior
2025-11-28T17:41:05.5783808Z       """
2025-11-28T17:41:05.5783988Z       # === Phase 1: First execution fails ===
2025-11-28T17:41:05.5784160Z 
2025-11-28T17:41:05.5784239Z       # Simulate tool error
2025-11-28T17:41:05.5784439Z       events_fail = [
2025-11-28T17:41:05.5784621Z           Event(
2025-11-28T17:41:05.5784791Z               event_id="evt_1",
2025-11-28T17:41:05.5785024Z               event_type=EventType.TOOL_CALL,
2025-11-28T17:41:05.5785300Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:05.5785609Z               content="Calling API without authentication header",
2025-11-28T17:41:05.5785907Z               metadata={"tool": "http_client"},
2025-11-28T17:41:05.5786160Z               tool_name="http_client",
2025-11-28T17:41:05.5786375Z           ),
2025-11-28T17:41:05.5786527Z           Event(
2025-11-28T17:41:05.5786777Z               event_id="evt_2",
2025-11-28T17:41:05.5787210Z               event_type=EventType.ERROR_EVENT,
2025-11-28T17:41:05.5787574Z               timestamp=datetime.now(timezone.utc),
2025-11-28T17:41:05.5787916Z               content="401 Unauthorized",
2025-11-28T17:41:05.5802243Z               metadata={"error_code": "UNAUTHORIZED"},
2025-11-28T17:41:05.5802763Z               error={"type": "AuthError", "code": "401"},
2025-11-28T17:41:05.5803180Z           ),
2025-11-28T17:41:05.5803442Z       ]
2025-11-28T17:41:05.5803596Z 
2025-11-28T17:41:05.5803734Z       error = ErrorInfo(
2025-11-28T17:41:05.5804075Z           error_code="401",
2025-11-28T17:41:05.5804494Z           error_category=ErrorCategory.PERMISSION_ERROR,
2025-11-28T17:41:05.5805037Z           error_message="API call failed: 401 Unauthorized",
2025-11-28T17:41:05.5805508Z           tool_name="http_client",
2025-11-28T17:41:05.5805774Z       )
2025-11-28T17:41:05.5805871Z 
2025-11-28T17:41:05.5805958Z       context_fail = ReflectionContext(
2025-11-28T17:41:05.5806204Z           events=events_fail,
2025-11-28T17:41:05.5806429Z           outcome=OutcomeType.FAILURE,
2025-11-28T17:41:05.5806665Z           error=error,
2025-11-28T17:41:05.5806881Z           task_description="Call external API",
2025-11-28T17:41:05.5807141Z           task_goal="Fetch data from API",
2025-11-28T17:41:05.5807372Z           tenant_id=tenant_id,
2025-11-28T17:41:05.5807595Z           project_id=project_id,
2025-11-28T17:41:05.5807801Z       )
2025-11-28T17:41:05.5807884Z 
2025-11-28T17:41:05.5807970Z       # Generate and store reflection
2025-11-28T17:41:05.5808519Z       result = await reflection_engine.generate_reflection(context_fail)
2025-11-28T17:41:05.5809003Z       stored_ids = await reflection_engine.store_reflection(
2025-11-28T17:41:05.5809343Z           result=result, tenant_id=tenant_id, project_id=project_id
2025-11-28T17:41:05.5809615Z       )
2025-11-28T17:41:05.5809897Z 
2025-11-28T17:41:05.5810061Z       reflection_id = stored_ids["reflection_id"]
2025-11-28T17:41:05.5810331Z       assert reflection_id is not None
2025-11-28T17:41:05.5810486Z 
2025-11-28T17:41:05.5810596Z       # === Phase 2: Second execution retrieves lesson ===
2025-11-28T17:41:05.5810794Z 
2025-11-28T17:41:05.5810878Z       # Build context for similar task
2025-11-28T17:41:05.5811144Z       query = "I need to call the external API again"
2025-11-28T17:41:05.5811458Z       working_memory = await context_builder.build_context(
2025-11-28T17:41:05.5811794Z           tenant_id=tenant_id, project_id=project_id, query=query
2025-11-28T17:41:05.5812078Z       )
2025-11-28T17:41:05.5812164Z 
2025-11-28T17:41:05.5812257Z       # Verify reflection is available
2025-11-28T17:41:05.5812622Z       assert len(working_memory.reflections) >= 1, "Should retrieve previous reflection"
2025-11-28T17:41:05.5812919Z 
2025-11-28T17:41:05.5813004Z       # Check if our reflection is there
2025-11-28T17:41:05.5813236Z       our_refl = next(
2025-11-28T17:41:05.5813547Z           (r for r in working_memory.reflections if r.metadata.get("id") == reflection_id),
2025-11-28T17:41:05.5813882Z           None,
2025-11-28T17:41:05.5814048Z       )
2025-11-28T17:41:05.5814282Z       assert our_refl is not None, "Our reflection should be retrieved"
2025-11-28T17:41:05.5814516Z 
2025-11-28T17:41:05.5814626Z       # === Phase 3: Verify reflection is actionable ===
2025-11-28T17:41:05.5814825Z 
2025-11-28T17:41:05.5814968Z       # The reflection should mention authentication or auth header
2025-11-28T17:41:05.5815256Z       assert any(
2025-11-28T17:41:05.5815471Z           keyword in our_refl.content.lower()
2025-11-28T17:41:05.5815786Z           for keyword in ["auth", "unauthorized", "401", "header", "token"]
2025-11-28T17:41:05.5816135Z       ), "Reflection should mention authentication issue"
2025-11-28T17:41:05.5816328Z 
2025-11-28T17:41:05.5816449Z       # If strategy was generated, it should be actionable
2025-11-28T17:41:05.5816719Z       if result.strategy_text:
2025-11-28T17:41:05.5817019Z           assert len(result.strategy_text) > 10, "Strategy should be meaningful"
2025-11-28T17:41:05.5817592Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 47
2025-11-28T17:41:05.5818071Z   @pytest.fixture
2025-11-28T17:41:05.5818290Z   async def reflection_engine(db_pool, memory_repo):
2025-11-28T17:41:05.5818575Z       """Reflection engine v2"""
2025-11-28T17:41:05.5818834Z       return ReflectionEngineV2(db_pool, memory_repo)
2025-11-28T17:41:05.5819346Z file /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py, line 35
2025-11-28T17:41:05.5819962Z   @pytest.fixture
2025-11-28T17:41:05.5820168Z   async def db_pool(postgresql_pool):
2025-11-28T17:41:05.5820415Z       """Database connection pool"""
2025-11-28T17:41:05.5820643Z       return postgresql_pool
2025-11-28T17:41:05.5820990Z [31mE       fixture 'postgresql_pool' not found[0m
2025-11-28T17:41:05.5824011Z [31m>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, class_mocker, context_builder, cov, db_pool, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, memory_repo, mock_app_state_pool, mock_env_and_settings, mocker, module_mocker, monkeypatch, no_cover, override_auth, package_mocker, project_id, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, reflection_engine, session_mocker, subtests, tenant_id, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory[0m
2025-11-28T17:41:05.5826855Z [31m>       use 'pytest --fixtures [testpath]' for help on them.[0m
2025-11-28T17:41:05.5827078Z 
2025-11-28T17:41:05.5827371Z /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/tests/integration/test_reflection_flow.py:35
2025-11-28T17:41:05.5827841Z =================================== FAILURES ===================================
2025-11-28T17:41:05.5828342Z [31m[1m___ TestReflectiveMemoryFlags.test_reflective_memory_disabled_no_reflections ___[0m
2025-11-28T17:41:05.5829022Z [1m[31mapps/memory_api/tests/test_reflective_flags.py[0m:40: in test_reflective_memory_disabled_no_reflections
2025-11-28T17:41:05.5829687Z     [0mcontext_builder.reflection_engine.query_reflections.assert_not_called()[90m[39;49;00m
2025-11-28T17:41:05.5830504Z [1m[31mE   AttributeError: 'function' object has no attribute 'assert_not_called'[0m
2025-11-28T17:41:05.5830949Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5831798Z {"tenant_id": "test_tenant", "reason": "reflective_memory_disabled", "event": "reflections_retrieval_skipped", "level": "info", "logger": "apps.memory_api.services.context_builder", "timestamp": "2025-11-28T17:39:58.049830Z"}
2025-11-28T17:41:05.5832573Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5833755Z [32mINFO    [0m apps.memory_api.services.context_builder:context_builder.py:351 {'tenant_id': 'test_tenant', 'reason': 'reflective_memory_disabled', 'event': 'reflections_retrieval_skipped', 'level': 'info', 'logger': 'apps.memory_api.services.context_builder', 'timestamp': '2025-11-28T17:39:58.049830Z'}
2025-11-28T17:41:05.5834884Z [31m[1m___________ TestDreamingEnabled.test_dreaming_enabled_runs_dreaming ____________[0m
2025-11-28T17:41:05.5835508Z [1m[31mapps/memory_api/tests/test_reflective_flags.py[0m:192: in test_dreaming_enabled_runs_dreaming
2025-11-28T17:41:05.5836136Z     [0mresults = [94mawait[39;49;00m dreaming_worker.run_dreaming_cycle([90m[39;49;00m
2025-11-28T17:41:05.5836674Z [1m[31mapps/memory_api/workers/memory_maintenance.py[0m:369: in run_dreaming_cycle
2025-11-28T17:41:05.5837281Z     [0m[94masync[39;49;00m [94mwith[39;49;00m [96mself[39;49;00m.pool.acquire() [94mas[39;49;00m conn:[90m[39;49;00m
2025-11-28T17:41:05.5837732Z [1m[31mE   AttributeError: __aenter__[0m
2025-11-28T17:41:05.5838048Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5839046Z {"tenant_id": "test_tenant", "project_id": "test_project", "lookback_hours": 24, "mode": "<MagicMock name='settings.REFLECTIVE_MEMORY_MODE' id='140081390550608'>", "event": "dreaming_cycle_started", "level": "info", "logger": "apps.memory_api.workers.memory_maintenance", "timestamp": "2025-11-28T17:39:58.505074Z"}
2025-11-28T17:41:05.5840243Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5841799Z [32mINFO    [0m apps.memory_api.workers.memory_maintenance:memory_maintenance.py:358 {'tenant_id': 'test_tenant', 'project_id': 'test_project', 'lookback_hours': 24, 'mode': <MagicMock name='settings.REFLECTIVE_MEMORY_MODE' id='140081390550608'>, 'event': 'dreaming_cycle_started', 'level': 'info', 'logger': 'apps.memory_api.workers.memory_maintenance', 'timestamp': '2025-11-28T17:39:58.505074Z'}
2025-11-28T17:41:05.5843816Z [31m[1m__________________________ test_agent_execute_direct ___________________________[0m
2025-11-28T17:41:05.5844295Z [1m[31mtests/api/v1/test_agent.py[0m:10: in test_agent_execute_direct
2025-11-28T17:41:05.5846763Z     [0m[94mwith[39;49;00m patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_context_cache[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_get_cache,          patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_embedding_service[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_embed,          patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_vector_store[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_vec,          patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_llm_provider[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_llm,          patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent._update_memory_access_stats[39;49;00m[33m"[39;49;00m, new=AsyncMock()),          patch([33m"[39;49;00m[33mhttpx.AsyncClient[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_httpx:[90m[39;49;00m
2025-11-28T17:41:05.5849142Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/unittest/mock.py[0m:1447: in __enter__
2025-11-28T17:41:05.5849895Z     [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
2025-11-28T17:41:05.5850530Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/unittest/mock.py[0m:1420: in get_original
2025-11-28T17:41:05.5851090Z     [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
2025-11-28T17:41:05.5852054Z [1m[31mE   AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'[0m
2025-11-28T17:41:05.5852967Z [31m[1m_______________________ test_agent_execute_with_context ________________________[0m
2025-11-28T17:41:05.5853442Z [1m[31mtests/api/v1/test_agent.py[0m:58: in test_agent_execute_with_context
2025-11-28T17:41:05.5854163Z     [0m[94mwith[39;49;00m patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_context_cache[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_get_cache, \
2025-11-28T17:41:05.5854926Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/unittest/mock.py[0m:1447: in __enter__
2025-11-28T17:41:05.5855492Z     [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
2025-11-28T17:41:05.5856064Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/unittest/mock.py[0m:1420: in get_original
2025-11-28T17:41:05.5856620Z     [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
2025-11-28T17:41:05.5857555Z [1m[31mE   AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'[0m
2025-11-28T17:41:05.5858461Z [31m[1m_____________________ test_agent_execute_with_empty_prompt _____________________[0m
2025-11-28T17:41:05.5858967Z [1m[31mtests/api/v1/test_agent.py[0m:111: in test_agent_execute_with_empty_prompt
2025-11-28T17:41:05.5859694Z     [0m[94mwith[39;49;00m patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_context_cache[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_get_cache, \
2025-11-28T17:41:05.5860556Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/unittest/mock.py[0m:1447: in __enter__
2025-11-28T17:41:05.5861109Z     [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
2025-11-28T17:41:05.5861680Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/unittest/mock.py[0m:1420: in get_original
2025-11-28T17:41:05.5862224Z     [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
2025-11-28T17:41:05.5863156Z [1m[31mE   AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'[0m
2025-11-28T17:41:05.5864050Z [31m[1m______________________ test_agent_execute_with_llm_error _______________________[0m
2025-11-28T17:41:05.5864535Z [1m[31mtests/api/v1/test_agent.py[0m:163: in test_agent_execute_with_llm_error
2025-11-28T17:41:05.5865256Z     [0m[94mwith[39;49;00m patch([33m"[39;49;00m[33mapps.memory_api.api.v1.agent.get_context_cache[39;49;00m[33m"[39;49;00m) [94mas[39;49;00m mock_get_cache, \
2025-11-28T17:41:05.5866148Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/unittest/mock.py[0m:1447: in __enter__
2025-11-28T17:41:05.5866810Z     [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
2025-11-28T17:41:05.5867373Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/unittest/mock.py[0m:1420: in get_original
2025-11-28T17:41:05.5867916Z     [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
2025-11-28T17:41:05.5868848Z [1m[31mE   AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'[0m
2025-11-28T17:41:05.5869841Z [31m[1m_______________________ test_governance_overview_success _______________________[0m
2025-11-28T17:41:05.5870487Z [1m[31mtests/api/v1/test_governance.py[0m:40: in test_governance_overview_success
2025-11-28T17:41:05.5871024Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5871417Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5871763Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5872126Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5872973Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.405148Z"}
2025-11-28T17:41:05.5873799Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5874933Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.405148Z'}
2025-11-28T17:41:05.5876001Z [31m[1m__________________ test_governance_overview_with_custom_days ___________________[0m
2025-11-28T17:41:05.5876537Z [1m[31mtests/api/v1/test_governance.py[0m:72: in test_governance_overview_with_custom_days
2025-11-28T17:41:05.5877073Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5877442Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5877774Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5878138Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5878971Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.433879Z"}
2025-11-28T17:41:05.5880067Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5881228Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.433879Z'}
2025-11-28T17:41:05.5882270Z [31m[1m________________________ test_governance_overview_error ________________________[0m
2025-11-28T17:41:05.5882772Z [1m[31mtests/api/v1/test_governance.py[0m:88: in test_governance_overview_error
2025-11-28T17:41:05.5883287Z     [0m[94massert[39;49;00m response.status_code == [94m500[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5883657Z [1m[31mE   assert 401 == 500[0m
2025-11-28T17:41:05.5883992Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5884358Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5885354Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.462648Z"}
2025-11-28T17:41:05.5886282Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5887413Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.462648Z'}
2025-11-28T17:41:05.5888453Z [31m[1m_____________________ test_tenant_governance_stats_success _____________________[0m
2025-11-28T17:41:05.5888979Z [1m[31mtests/api/v1/test_governance.py[0m:131: in test_tenant_governance_stats_success
2025-11-28T17:41:05.5889516Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5890135Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5890478Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5890849Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5891499Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.494082Z"}
2025-11-28T17:41:05.5892622Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.494355Z"}
2025-11-28T17:41:05.5893483Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5894705Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.494082Z'}
2025-11-28T17:41:05.5896359Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.494355Z'}
2025-11-28T17:41:05.5897450Z [31m[1m_____________________ test_tenant_governance_stats_no_data _____________________[0m
2025-11-28T17:41:05.5897980Z [1m[31mtests/api/v1/test_governance.py[0m:161: in test_tenant_governance_stats_no_data
2025-11-28T17:41:05.5898512Z     [0m[94massert[39;49;00m response.status_code == [94m404[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5898885Z [1m[31mE   assert 401 == 404[0m
2025-11-28T17:41:05.5899230Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5899598Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5900421Z {"tenant_id": "nonexistent-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.523945Z"}
2025-11-28T17:41:05.5901609Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/nonexistent-tenant", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.524237Z"}
2025-11-28T17:41:05.5902497Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5903462Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'nonexistent-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.523945Z'}
2025-11-28T17:41:05.5905394Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/nonexistent-tenant', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.524237Z'}
2025-11-28T17:41:05.5906519Z [31m[1m_______________ test_tenant_governance_stats_with_custom_period ________________[0m
2025-11-28T17:41:05.5907098Z [1m[31mtests/api/v1/test_governance.py[0m:194: in test_tenant_governance_stats_with_custom_period
2025-11-28T17:41:05.5907652Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5908016Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5908351Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5908714Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5909352Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.553225Z"}
2025-11-28T17:41:05.5910637Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.553490Z"}
2025-11-28T17:41:05.5911492Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5912425Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.553225Z'}
2025-11-28T17:41:05.5914012Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.553490Z'}
2025-11-28T17:41:05.5915109Z [31m[1m______________________ test_tenant_budget_status_success _______________________[0m
2025-11-28T17:41:05.5915620Z [1m[31mtests/api/v1/test_governance.py[0m:214: in test_tenant_budget_status_success
2025-11-28T17:41:05.5916145Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5916511Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5916840Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5917205Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5917838Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.583124Z"}
2025-11-28T17:41:05.5918996Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant/budget", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.583385Z"}
2025-11-28T17:41:05.5920162Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5921111Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.583124Z'}
2025-11-28T17:41:05.5922729Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant/budget', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.583385Z'}
2025-11-28T17:41:05.5924001Z [31m[1m____________________ test_tenant_budget_status_with_alerts _____________________[0m
2025-11-28T17:41:05.5924631Z [1m[31mtests/api/v1/test_governance.py[0m:240: in test_tenant_budget_status_with_alerts
2025-11-28T17:41:05.5925160Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5925516Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5925852Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5926214Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5926842Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.613260Z"}
2025-11-28T17:41:05.5928000Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant/budget", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.613512Z"}
2025-11-28T17:41:05.5928893Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5930074Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.613260Z'}
2025-11-28T17:41:05.5931709Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant/budget', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.613512Z'}
2025-11-28T17:41:05.5932808Z [31m[1m_____________________ test_tenant_budget_status_zero_usage _____________________[0m
2025-11-28T17:41:05.5933328Z [1m[31mtests/api/v1/test_governance.py[0m:261: in test_tenant_budget_status_zero_usage
2025-11-28T17:41:05.5933856Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5934222Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5934553Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5934913Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5935543Z {"tenant_id": "new-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.642756Z"}
2025-11-28T17:41:05.5936713Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/new-tenant/budget", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.643041Z"}
2025-11-28T17:41:05.5937590Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5938518Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'new-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.642756Z'}
2025-11-28T17:41:05.5940488Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/new-tenant/budget', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.643041Z'}
2025-11-28T17:41:05.5941593Z [31m[1m_______________________ test_tenant_budget_status_error ________________________[0m
2025-11-28T17:41:05.5942470Z [1m[31mtests/api/v1/test_governance.py[0m:279: in test_tenant_budget_status_error
2025-11-28T17:41:05.5943118Z     [0m[94massert[39;49;00m response.status_code == [94m500[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5944165Z [1m[31mE   assert 401 == 500[0m
2025-11-28T17:41:05.5944781Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5945446Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5946558Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.671669Z"}
2025-11-28T17:41:05.5948498Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant/budget", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.671916Z"}
2025-11-28T17:41:05.5949411Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5950722Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.671669Z'}
2025-11-28T17:41:05.5952383Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant/budget', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.671916Z'}
2025-11-28T17:41:05.5953498Z [31m[1m____________________ test_governance_overview_invalid_days _____________________[0m
2025-11-28T17:41:05.5954042Z [1m[31mtests/api/v1/test_governance.py[0m:296: in test_governance_overview_invalid_days
2025-11-28T17:41:05.5954579Z     [0m[94massert[39;49;00m response.status_code == [94m422[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5954949Z [1m[31mE   assert 401 == 422[0m
2025-11-28T17:41:05.5955290Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5955658Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5956508Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.700793Z"}
2025-11-28T17:41:05.5957326Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5958449Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.700793Z'}
2025-11-28T17:41:05.5959498Z [31m[1m__________________ test_tenant_governance_stats_invalid_days ___________________[0m
2025-11-28T17:41:05.5960296Z [1m[31mtests/api/v1/test_governance.py[0m:308: in test_tenant_governance_stats_invalid_days
2025-11-28T17:41:05.5960849Z     [0m[94massert[39;49;00m response.status_code == [94m422[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5961212Z [1m[31mE   assert 401 == 422[0m
2025-11-28T17:41:05.5961549Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5961913Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5962554Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.729951Z"}
2025-11-28T17:41:05.5963863Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/governance/tenant/test-tenant", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.730236Z"}
2025-11-28T17:41:05.5964960Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5966035Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.729951Z'}
2025-11-28T17:41:05.5967625Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/governance/tenant/test-tenant', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.730236Z'}
2025-11-28T17:41:05.5968713Z [31m[1m____________________ test_governance_overview_empty_results ____________________[0m
2025-11-28T17:41:05.5969255Z [1m[31mtests/api/v1/test_governance.py[0m:330: in test_governance_overview_empty_results
2025-11-28T17:41:05.5969993Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5970380Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5970727Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5971086Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5971917Z {"status_code": 401, "detail": "Authentication required for admin access", "path": "/v1/governance/overview", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.758957Z"}
2025-11-28T17:41:05.5972745Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5973867Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required for admin access', 'path': '/v1/governance/overview', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.758957Z'}
2025-11-28T17:41:05.5974907Z [31m[1m__________________________ test_store_memory_success ___________________________[0m
2025-11-28T17:41:05.5975374Z [1m[31mtests/api/v1/test_memory.py[0m:59: in test_store_memory_success
2025-11-28T17:41:05.5975867Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5976235Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5976564Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5976922Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5977556Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.792271Z"}
2025-11-28T17:41:05.5978629Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/store", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.792542Z"}
2025-11-28T17:41:05.5979501Z STORE ERROR: {'error': {'code': '401', 'message': 'Authentication required to access tenant'}}
2025-11-28T17:41:05.5980171Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5981128Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.792271Z'}
2025-11-28T17:41:05.5982654Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/store', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.792542Z'}
2025-11-28T17:41:05.5983656Z [31m[1m__________________________ test_query_memory_success ___________________________[0m
2025-11-28T17:41:05.5984256Z [1m[31mtests/api/v1/test_memory.py[0m:88: in test_query_memory_success
2025-11-28T17:41:05.5984842Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5985208Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5985540Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5985891Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5986525Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.825136Z"}
2025-11-28T17:41:05.5987602Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/query", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.825413Z"}
2025-11-28T17:41:05.5988416Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5989359Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.825136Z'}
2025-11-28T17:41:05.5991161Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/query', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.825413Z'}
2025-11-28T17:41:05.5992179Z [31m[1m__________________________ test_delete_memory_success __________________________[0m
2025-11-28T17:41:05.5992657Z [1m[31mtests/api/v1/test_memory.py[0m:101: in test_delete_memory_success
2025-11-28T17:41:05.5993151Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.5993523Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.5993863Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.5994226Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.5994856Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.856186Z"}
2025-11-28T17:41:05.5995937Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/delete", "method": "DELETE", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.856460Z"}
2025-11-28T17:41:05.5996743Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.5997679Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.856186Z'}
2025-11-28T17:41:05.5999218Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/delete', 'method': 'DELETE', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.856460Z'}
2025-11-28T17:41:05.6000454Z [31m[1m________________________ test_reflection_stats_success _________________________[0m
2025-11-28T17:41:05.6000937Z [1m[31mtests/api/v1/test_memory.py[0m:139: in test_reflection_stats_success
2025-11-28T17:41:05.6001437Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6001806Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.6002132Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.6002635Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6003383Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.907145Z"}
2025-11-28T17:41:05.6004495Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/reflection-stats", "method": "GET", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.907433Z"}
2025-11-28T17:41:05.6005328Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6006264Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.907145Z'}
2025-11-28T17:41:05.6007836Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/reflection-stats', 'method': 'GET', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.907433Z'}
2025-11-28T17:41:05.6008907Z [31m[1m___________________ test_store_memory_missing_tenant_header ____________________[0m
2025-11-28T17:41:05.6009426Z [1m[31mtests/api/v1/test_memory.py[0m:157: in test_store_memory_missing_tenant_header
2025-11-28T17:41:05.6010426Z     [0m[94massert[39;49;00m [33m"[39;49;00m[33mX-Tenant-Id[39;49;00m[33m"[39;49;00m [95min[39;49;00m response.json()[[33m"[39;49;00m[33mdetail[39;49;00m[33m"[39;49;00m][90m[39;49;00m
2025-11-28T17:41:05.6010985Z [1m[31mE   KeyError: 'detail'[0m
2025-11-28T17:41:05.6011279Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6012045Z {"status_code": 400, "detail": "X-Tenant-Id header is required", "path": "/v1/memory/store", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.939566Z"}
2025-11-28T17:41:05.6012814Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6013869Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 400, 'detail': 'X-Tenant-Id header is required', 'path': '/v1/memory/store', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.939566Z'}
2025-11-28T17:41:05.6014838Z [31m[1m________________________ test_query_memory_with_filters ________________________[0m
2025-11-28T17:41:05.6015323Z [1m[31mtests/api/v1/test_memory.py[0m:190: in test_query_memory_with_filters
2025-11-28T17:41:05.6015825Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6016189Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.6016532Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.6016899Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6017536Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:39:59.971720Z"}
2025-11-28T17:41:05.6018598Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/query", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:39:59.972042Z"}
2025-11-28T17:41:05.6019389Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6020431Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:39:59.971720Z'}
2025-11-28T17:41:05.6022101Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/query', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:39:59.972042Z'}
2025-11-28T17:41:05.6023227Z [31m[1m____________________ test_query_memory_with_graph_traversal ____________________[0m
2025-11-28T17:41:05.6023740Z [1m[31mtests/api/v1/test_memory.py[0m:221: in test_query_memory_with_graph_traversal
2025-11-28T17:41:05.6024370Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6024965Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.6025389Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.6025760Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6026412Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:00.006645Z"}
2025-11-28T17:41:05.6027484Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/query", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.006914Z"}
2025-11-28T17:41:05.6028279Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6029206Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:00.006645Z'}
2025-11-28T17:41:05.6030856Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/query', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.006914Z'}
2025-11-28T17:41:05.6031883Z [31m[1m_________________________ test_delete_memory_not_found _________________________[0m
2025-11-28T17:41:05.6032370Z [1m[31mtests/api/v1/test_memory.py[0m:238: in test_delete_memory_not_found
2025-11-28T17:41:05.6032872Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6033255Z [1m[31mE   assert 401 == 200[0m
2025-11-28T17:41:05.6033592Z [1m[31mE    +  where 401 = <Response [401 Unauthorized]>.status_code[0m
2025-11-28T17:41:05.6033955Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6034590Z {"tenant_id": "test-tenant", "event": "check_tenant_access_no_user_id", "level": "warning", "logger": "apps.memory_api.security.auth", "timestamp": "2025-11-28T17:40:00.037786Z"}
2025-11-28T17:41:05.6035668Z {"status_code": 401, "detail": "Authentication required to access tenant", "path": "/v1/memory/delete", "method": "DELETE", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.038101Z"}
2025-11-28T17:41:05.6036532Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6037471Z [33mWARNING [0m apps.memory_api.security.auth:auth.py:218 {'tenant_id': 'test-tenant', 'event': 'check_tenant_access_no_user_id', 'level': 'warning', 'logger': 'apps.memory_api.security.auth', 'timestamp': '2025-11-28T17:40:00.037786Z'}
2025-11-28T17:41:05.6039014Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 401, 'detail': 'Authentication required to access tenant', 'path': '/v1/memory/delete', 'method': 'DELETE', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.038101Z'}
2025-11-28T17:41:05.6040241Z [31m[1m__________________________ test_hybrid_search_success __________________________[0m
2025-11-28T17:41:05.6040893Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:74: in test_hybrid_search_success
2025-11-28T17:41:05.6041509Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6041875Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:05.6042238Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:05.6042625Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6043428Z {"error": "'dict' object has no attribute 'total_results'", "query": "authentication system", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:00.074418Z"}
2025-11-28T17:41:05.6044661Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.074701Z"}
2025-11-28T17:41:05.6045326Z 
2025-11-28T17:41:05.6045567Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:05.6046024Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6047228Z [1m[31mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'authentication system', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:00.074418Z'}
2025-11-28T17:41:05.6048961Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.074701Z'}
2025-11-28T17:41:05.6050192Z [31m[1m______________________ test_hybrid_search_with_reranking _______________________[0m
2025-11-28T17:41:05.6050740Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:137: in test_hybrid_search_with_reranking
2025-11-28T17:41:05.6051266Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6051638Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:05.6052015Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:05.6052412Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6053246Z {"error": "'dict' object has no attribute 'total_results'", "query": "explain the authentication flow", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:00.107076Z"}
2025-11-28T17:41:05.6054505Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.107333Z"}
2025-11-28T17:41:05.6055181Z 
2025-11-28T17:41:05.6055417Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:05.6055873Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6057090Z [1m[31mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'explain the authentication flow', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:00.107076Z'}
2025-11-28T17:41:05.6058840Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.107333Z'}
2025-11-28T17:41:05.6060218Z [31m[1m_______________________ test_hybrid_search_with_filters ________________________[0m
2025-11-28T17:41:05.6060741Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:202: in test_hybrid_search_with_filters
2025-11-28T17:41:05.6061269Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6061643Z [1m[31mE   assert 422 == 200[0m
2025-11-28T17:41:05.6062010Z [1m[31mE    +  where 422 = <Response [422 Unprocessable Entity]>.status_code[0m
2025-11-28T17:41:05.6062405Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6063496Z {"errors": [{"type": "datetime_type", "loc": ["body", "temporal_filter"], "msg": "Input should be a valid datetime", "input": {"start_date": "2025-01-01T00:00:00Z", "end_date": "2025-12-31T23:59:59Z"}}], "path": "/v1/search/hybrid", "method": "POST", "event": "validation_error", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.139326Z"}
2025-11-28T17:41:05.6064420Z 
2025-11-28T17:41:05.6065050Z DEBUG: Response 422: {'error': {'code': '422', 'message': 'Validation Error', 'details': [{'type': 'datetime_type', 'loc': ['body', 'temporal_filter'], 'msg': 'Input should be a valid datetime', 'input': {'start_date': '2025-01-01T00:00:00Z', 'end_date': '2025-12-31T23:59:59Z'}}]}}
2025-11-28T17:41:05.6065895Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6067334Z [33mWARNING [0m apps.memory_api.main:main.py:209 {'errors': [{'type': 'datetime_type', 'loc': ('body', 'temporal_filter'), 'msg': 'Input should be a valid datetime', 'input': {'start_date': '2025-01-01T00:00:00Z', 'end_date': '2025-12-31T23:59:59Z'}}], 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'validation_error', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.139326Z'}
2025-11-28T17:41:05.6068618Z [31m[1m____________________ test_hybrid_search_with_manual_weights ____________________[0m
2025-11-28T17:41:05.6069170Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:267: in test_hybrid_search_with_manual_weights
2025-11-28T17:41:05.6069816Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6070187Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:05.6070559Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:05.6070952Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6071764Z {"error": "'dict' object has no attribute 'total_results'", "query": "database optimization", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:00.367607Z"}
2025-11-28T17:41:05.6073072Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.367935Z"}
2025-11-28T17:41:05.6073748Z 
2025-11-28T17:41:05.6073974Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:05.6074436Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6075629Z [1m[31mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'database optimization', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:00.367607Z'}
2025-11-28T17:41:05.6077368Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.367935Z'}
2025-11-28T17:41:05.6078650Z [31m[1m_____________________ test_hybrid_search_with_graph_depth ______________________[0m
2025-11-28T17:41:05.6079180Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:327: in test_hybrid_search_with_graph_depth
2025-11-28T17:41:05.6079866Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6080302Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:05.6080662Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:05.6081047Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6081883Z {"error": "'dict' object has no attribute 'total_results'", "query": "knowledge graph relationships", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:00.401260Z"}
2025-11-28T17:41:05.6083151Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.401570Z"}
2025-11-28T17:41:05.6083810Z 
2025-11-28T17:41:05.6084047Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:05.6084489Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6085977Z [1m[31mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'knowledge graph relationships', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:00.401260Z'}
2025-11-28T17:41:05.6087744Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.401570Z'}
2025-11-28T17:41:05.6088787Z [31m[1m_________________ test_hybrid_search_with_conversation_history _________________[0m
2025-11-28T17:41:05.6089352Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:390: in test_hybrid_search_with_conversation_history
2025-11-28T17:41:05.6090114Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6090495Z [1m[31mE   assert 422 == 200[0m
2025-11-28T17:41:05.6090860Z [1m[31mE    +  where 422 = <Response [422 Unprocessable Entity]>.status_code[0m
2025-11-28T17:41:05.6091243Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6092739Z {"errors": [{"type": "string_type", "loc": ["body", "conversation_history", 0], "msg": "Input should be a valid string", "input": {"role": "user", "content": "Tell me about authentication"}}, {"type": "string_type", "loc": ["body", "conversation_history", 1], "msg": "Input should be a valid string", "input": {"role": "assistant", "content": "Authentication uses JWT tokens"}}], "path": "/v1/search/hybrid", "method": "POST", "event": "validation_error", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.434214Z"}
2025-11-28T17:41:05.6094086Z 
2025-11-28T17:41:05.6095108Z DEBUG: Response 422: {'error': {'code': '422', 'message': 'Validation Error', 'details': [{'type': 'string_type', 'loc': ['body', 'conversation_history', 0], 'msg': 'Input should be a valid string', 'input': {'role': 'user', 'content': 'Tell me about authentication'}}, {'type': 'string_type', 'loc': ['body', 'conversation_history', 1], 'msg': 'Input should be a valid string', 'input': {'role': 'assistant', 'content': 'Authentication uses JWT tokens'}}]}}
2025-11-28T17:41:05.6096489Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6098606Z [33mWARNING [0m apps.memory_api.main:main.py:209 {'errors': [{'type': 'string_type', 'loc': ('body', 'conversation_history', 0), 'msg': 'Input should be a valid string', 'input': {'role': 'user', 'content': 'Tell me about authentication'}}, {'type': 'string_type', 'loc': ('body', 'conversation_history', 1), 'msg': 'Input should be a valid string', 'input': {'role': 'assistant', 'content': 'Authentication uses JWT tokens'}}], 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'validation_error', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.434214Z'}
2025-11-28T17:41:05.6100422Z [31m[1m________________________ test_hybrid_search_empty_query ________________________[0m
2025-11-28T17:41:05.6100936Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:447: in test_hybrid_search_empty_query
2025-11-28T17:41:05.6101565Z     [0m[94massert[39;49;00m response.status_code [95min[39;49;00m [[94m200[39;49;00m, [94m400[39;49;00m][90m[39;49;00m
2025-11-28T17:41:05.6102036Z [1m[31mE   assert 422 in [200, 400][0m
2025-11-28T17:41:05.6102418Z [1m[31mE    +  where 422 = <Response [422 Unprocessable Entity]>.status_code[0m
2025-11-28T17:41:05.6102801Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6103745Z {"errors": [{"type": "string_too_short", "loc": ["body", "query"], "msg": "String should have at least 1 character", "input": "", "ctx": {"min_length": 1}}], "path": "/v1/search/hybrid", "method": "POST", "event": "validation_error", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.466045Z"}
2025-11-28T17:41:05.6104668Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6105960Z [33mWARNING [0m apps.memory_api.main:main.py:209 {'errors': [{'type': 'string_too_short', 'loc': ('body', 'query'), 'msg': 'String should have at least 1 character', 'input': '', 'ctx': {'min_length': 1}}], 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'validation_error', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.466045Z'}
2025-11-28T17:41:05.6107132Z [31m[1m__________________ test_hybrid_search_all_strategies_disabled __________________[0m
2025-11-28T17:41:05.6107684Z [1m[31mtests/api/v1/test_search_hybrid.py[0m:533: in test_hybrid_search_all_strategies_disabled
2025-11-28T17:41:05.6108234Z     [0m[94massert[39;49;00m response.status_code == [94m200[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6108600Z [1m[31mE   assert 500 == 200[0m
2025-11-28T17:41:05.6108964Z [1m[31mE    +  where 500 = <Response [500 Internal Server Error]>.status_code[0m
2025-11-28T17:41:05.6109350Z ----------------------------- Captured stdout call -----------------------------
2025-11-28T17:41:05.6110213Z {"error": "'dict' object has no attribute 'total_results'", "query": "test query", "event": "hybrid_search_failed", "level": "error", "logger": "apps.memory_api.routes.hybrid_search", "timestamp": "2025-11-28T17:40:00.521406Z"}
2025-11-28T17:41:05.6111411Z {"status_code": 500, "detail": "'dict' object has no attribute 'total_results'", "path": "/v1/search/hybrid", "method": "POST", "event": "http_exception", "level": "warning", "logger": "apps.memory_api.main", "timestamp": "2025-11-28T17:40:00.521651Z"}
2025-11-28T17:41:05.6112081Z 
2025-11-28T17:41:05.6112309Z DEBUG: Response 500: {'error': {'code': '500', 'message': "'dict' object has no attribute 'total_results'"}}
2025-11-28T17:41:05.6112753Z ------------------------------ Captured log call -------------------------------
2025-11-28T17:41:05.6113899Z [1m[31mERROR   [0m apps.memory_api.routes.hybrid_search:hybrid_search.py:95 {'error': "'dict' object has no attribute 'total_results'", 'query': 'test query', 'event': 'hybrid_search_failed', 'level': 'error', 'logger': 'apps.memory_api.routes.hybrid_search', 'timestamp': '2025-11-28T17:40:00.521406Z'}
2025-11-28T17:41:05.6115732Z [33mWARNING [0m apps.memory_api.main:main.py:194 {'status_code': 500, 'detail': "'dict' object has no attribute 'total_results'", 'path': '/v1/search/hybrid', 'method': 'POST', 'event': 'http_exception', 'level': 'warning', 'logger': 'apps.memory_api.main', 'timestamp': '2025-11-28T17:40:00.521651Z'}
2025-11-28T17:41:05.6116854Z [31m[1m____________________________ test_basic_completion _____________________________[0m
2025-11-28T17:41:05.6117304Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:05.6117884Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:05.6118773Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:05.6119535Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:05.6120432Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:05.6121243Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:05.6122034Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:05.6122905Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6124261Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6125075Z 
2025-11-28T17:41:05.6125318Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:05.6125833Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:106: in test_basic_completion
2025-11-28T17:41:05.6126362Z     [0mresponse = [94mawait[39;49;00m openai_provider.complete(request)[90m[39;49;00m
2025-11-28T17:41:05.6127084Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:05.6127777Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6128463Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:05.6129153Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6130030Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:05.6130664Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6131275Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:05.6131836Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6132436Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:05.6133012Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:05.6133599Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:05.6134216Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:05.6134813Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:451: in result
2025-11-28T17:41:05.6135571Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:05.6136323Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:403: in __get_result
2025-11-28T17:41:05.6136908Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:05.6137549Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:05.6138172Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6138603Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:05.6138994Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:05.6140341Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6141495Z [31m[1m________________________________ test_json_mode ________________________________[0m
2025-11-28T17:41:05.6141935Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:05.6142510Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:05.6143372Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:05.6144126Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:05.6144768Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:05.6145559Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:05.6146348Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:05.6147214Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6148539Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6149346Z 
2025-11-28T17:41:05.6149585Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:05.6150176Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:134: in test_json_mode
2025-11-28T17:41:05.6150731Z     [0mresponse = [94mawait[39;49;00m openai_provider.complete(request)[90m[39;49;00m
2025-11-28T17:41:05.6151463Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:05.6152151Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6152837Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:05.6153518Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6154305Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:05.6154922Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6155532Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:05.6156311Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6156913Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:05.6157484Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:05.6158068Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:05.6158684Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:05.6159290Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:451: in result
2025-11-28T17:41:05.6160065Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:05.6160683Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:403: in __get_result
2025-11-28T17:41:05.6161266Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:05.6161917Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:05.6162540Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6162963Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:05.6163356Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:05.6164587Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6165721Z [31m[1m________________________________ test_streaming ________________________________[0m
2025-11-28T17:41:05.6166153Z [1m[31mapps/llm/providers/openai_provider.py[0m:216: in stream
2025-11-28T17:41:05.6166710Z     [0mstream = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:05.6167568Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:05.6168322Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:05.6168965Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:05.6169943Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:05.6170756Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:05.6171635Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6172963Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6173763Z 
2025-11-28T17:41:05.6174001Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:05.6174485Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:158: in test_streaming
2025-11-28T17:41:05.6175060Z     [0m[94masync[39;49;00m [94mfor[39;49;00m chunk [95min[39;49;00m openai_provider.stream(request):[90m[39;49;00m
2025-11-28T17:41:05.6175579Z [1m[31mapps/llm/providers/openai_provider.py[0m:234: in stream
2025-11-28T17:41:05.6176095Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:05.6177415Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6178550Z [31m[1m_______________________________ test_token_usage _______________________________[0m
2025-11-28T17:41:05.6178992Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:05.6179575Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:05.6180554Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:05.6181309Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:05.6181960Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:05.6182746Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:05.6183530Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:05.6184393Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6185707Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6186514Z 
2025-11-28T17:41:05.6186750Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:05.6187230Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:176: in test_token_usage
2025-11-28T17:41:05.6187737Z     [0mresponse = [94mawait[39;49;00m openai_provider.complete(request)[90m[39;49;00m
2025-11-28T17:41:05.6188465Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:05.6189155Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6189930Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:05.6190619Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6191302Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:05.6191922Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6192516Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:05.6193078Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6193679Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:05.6194246Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:05.6194826Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:05.6195440Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:05.6196163Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:451: in result
2025-11-28T17:41:05.6196853Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:05.6197461Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:403: in __get_result
2025-11-28T17:41:05.6198046Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:05.6198696Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:05.6199313Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6199920Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:05.6200358Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:05.6201584Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6202738Z [31m[1m___________________________ test_temperature_control ___________________________[0m
2025-11-28T17:41:05.6203185Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:05.6203750Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:05.6204616Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:05.6205369Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:05.6206010Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:05.6206801Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:05.6207590Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:05.6208458Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6209940Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6210769Z 
2025-11-28T17:41:05.6211009Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:05.6211538Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:197: in test_temperature_control
2025-11-28T17:41:05.6212102Z     [0mresponse1 = [94mawait[39;49;00m openai_provider.complete(request_zero)[90m[39;49;00m
2025-11-28T17:41:05.6212844Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:05.6213540Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6214225Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:05.6214914Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6215592Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:05.6216211Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6216960Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:05.6217633Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6218230Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:05.6218798Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:05.6219385Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:05.6220123Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:05.6220722Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:451: in result
2025-11-28T17:41:05.6221303Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:05.6221917Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:403: in __get_result
2025-11-28T17:41:05.6222502Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:05.6223146Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:05.6223766Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6224194Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:05.6224580Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:05.6225813Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6226951Z [31m[1m_______________________________ test_max_tokens ________________________________[0m
2025-11-28T17:41:05.6227397Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:05.6227960Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:05.6228817Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:05.6229569Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:05.6230324Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:05.6231120Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:05.6231903Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:05.6232771Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6234092Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6234892Z 
2025-11-28T17:41:05.6235131Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:05.6235613Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:216: in test_max_tokens
2025-11-28T17:41:05.6236142Z     [0mresponse = [94mawait[39;49;00m openai_provider.complete(request)[90m[39;49;00m
2025-11-28T17:41:05.6237009Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:05.6237812Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6238492Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:05.6239183Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6240082Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:05.6240714Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6241310Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:05.6241875Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6242481Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:05.6242655Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:05.6243047Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:05.6243276Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:05.6243640Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:451: in result
2025-11-28T17:41:05.6243848Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:05.6244228Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:403: in __get_result
2025-11-28T17:41:05.6244432Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:05.6244861Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:05.6245056Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6245271Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:05.6245430Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:05.6246472Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6246741Z [31m[1m___________ test_provider_contract_hello_world[openai-gpt-3.5-turbo] ___________[0m
2025-11-28T17:41:05.6246954Z [1m[31mapps/llm/providers/openai_provider.py[0m:125: in complete
2025-11-28T17:41:05.6247293Z     [0mresponse = [94mawait[39;49;00m [96mself[39;49;00m.client.chat.completions.create(**params)[90m[39;49;00m
2025-11-28T17:41:05.6247818Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py[0m:2672: in create
2025-11-28T17:41:05.6248074Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m._post([90m[39;49;00m
2025-11-28T17:41:05.6248461Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1794: in post
2025-11-28T17:41:05.6248864Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m [96mself[39;49;00m.request(cast_to, opts, stream=stream, stream_cls=stream_cls)[90m[39;49;00m
2025-11-28T17:41:05.6249263Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/openai/_base_client.py[0m:1594: in request
2025-11-28T17:41:05.6250052Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._make_status_error_from_response(err.response) [94mfrom[39;49;00m[90m [39;49;00m[94mNone[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6251141Z [1m[31mE   openai.AuthenticationError: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6251149Z 
2025-11-28T17:41:05.6251384Z [33mDuring handling of the above exception, another exception occurred:[0m
2025-11-28T17:41:05.6251679Z [1m[31mtests/llm/test_llm_provider_contract.py[0m:247: in test_provider_contract_hello_world
2025-11-28T17:41:05.6251925Z     [0mresponse = [94mawait[39;49;00m provider.complete(llm_request)[90m[39;49;00m
2025-11-28T17:41:05.6252378Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:189: in async_wrapped
2025-11-28T17:41:05.6252632Z     [0m[94mreturn[39;49;00m [94mawait[39;49;00m copy(fn, *args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6253062Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:111: in __call__
2025-11-28T17:41:05.6253333Z     [0mdo = [94mawait[39;49;00m [96mself[39;49;00m.iter(retry_state=retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6253743Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:153: in iter
2025-11-28T17:41:05.6253943Z     [0mresult = [94mawait[39;49;00m action(retry_state)[90m[39;49;00m
2025-11-28T17:41:05.6254319Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/_utils.py[0m:99: in inner
2025-11-28T17:41:05.6254501Z     [0m[94mreturn[39;49;00m call(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6254899Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:420: in exc_check
2025-11-28T17:41:05.6255079Z     [0m[94mraise[39;49;00m retry_exc.reraise()[90m[39;49;00m
2025-11-28T17:41:05.6255466Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/__init__.py[0m:187: in reraise
2025-11-28T17:41:05.6255695Z     [0m[94mraise[39;49;00m [96mself[39;49;00m.last_attempt.result()[90m[39;49;00m
2025-11-28T17:41:05.6256065Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:451: in result
2025-11-28T17:41:05.6256274Z     [0m[94mreturn[39;49;00m [96mself[39;49;00m.__get_result()[90m[39;49;00m
2025-11-28T17:41:05.6256655Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/concurrent/futures/_base.py[0m:403: in __get_result
2025-11-28T17:41:05.6256849Z     [0m[94mraise[39;49;00m [96mself[39;49;00m._exception[90m[39;49;00m
2025-11-28T17:41:05.6257279Z [1m[31m/opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/tenacity/asyncio/__init__.py[0m:114: in __call__
2025-11-28T17:41:05.6257477Z     [0mresult = [94mawait[39;49;00m fn(*args, **kwargs)[90m[39;49;00m
2025-11-28T17:41:05.6257690Z [1m[31mapps/llm/providers/openai_provider.py[0m:162: in complete
2025-11-28T17:41:05.6257847Z     [0m[94mraise[39;49;00m LLMAuthError([90m[39;49;00m
2025-11-28T17:41:05.6258879Z [1m[31mE   apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}[0m
2025-11-28T17:41:05.6259109Z [31m[1m____________________________ test_merge_node_edges _____________________________[0m
2025-11-28T17:41:05.6259372Z [1m[31mtests/repositories/test_graph_repository.py[0m:94: in test_merge_node_edges
2025-11-28T17:41:05.6259902Z     [0mresult = [94mawait[39;49;00m repo.merge_node_edges(source_node_id=[94m1[39;49;00m, target_node_id=[94m2[39;49;00m)[90m[39;49;00m
2025-11-28T17:41:05.6260470Z [1m[31mapps/memory_api/repositories/graph_repository.py[0m:683: in merge_node_edges
2025-11-28T17:41:05.6260686Z     [0m[94masync[39;49;00m [94mwith[39;49;00m conn.transaction():[90m[39;49;00m
2025-11-28T17:41:05.6260824Z [1m[31mE   AttributeError: __aenter__[0m
2025-11-28T17:41:05.6261048Z [31m[1m___________________________ test_store_graph_triples ___________________________[0m
2025-11-28T17:41:05.6261331Z [1m[31mtests/repositories/test_graph_repository.py[0m:291: in test_store_graph_triples
2025-11-28T17:41:05.6261548Z     [0mstats = [94mawait[39;49;00m repo.store_graph_triples([90m[39;49;00m
2025-11-28T17:41:05.6261823Z [1m[31mapps/memory_api/repositories/graph_repository.py[0m:521: in store_graph_triples
2025-11-28T17:41:05.6262044Z     [0m[94masync[39;49;00m [94mwith[39;49;00m conn.transaction():[90m[39;49;00m
2025-11-28T17:41:05.6262167Z [1m[31mE   AttributeError: __aenter__[0m
2025-11-28T17:41:05.6262390Z [31m[1m______________________________ test_check_budget _______________________________[0m
2025-11-28T17:41:05.6262627Z [1m[31mtests/services/test_budget_service.py[0m:20: in test_check_budget
2025-11-28T17:41:05.6263166Z     [0m[94mawait[39;49;00m budget_service.check_budget(mock_pool, [33m"[39;49;00m[33mt1[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mp1[39;49;00m[33m"[39;49;00m, [94m0.1[39;49;00m)[90m[39;49;00m
2025-11-28T17:41:05.6263442Z [1m[31mE   TypeError: check_budget() missing 1 required positional argument: 'tokens'[0m
2025-11-28T17:41:05.6263658Z [31m[1m____________________________ test_check_budget_fail ____________________________[0m
2025-11-28T17:41:05.6263898Z [1m[31mtests/services/test_budget_service.py[0m:35: in test_check_budget_fail
2025-11-28T17:41:05.6264422Z     [0m[94mawait[39;49;00m budget_service.check_budget(mock_pool, [33m"[39;49;00m[33mt1[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mp1[39;49;00m[33m"[39;49;00m, [94m0.2[39;49;00m)[90m[39;49;00m
2025-11-28T17:41:05.6264687Z [1m[31mE   TypeError: check_budget() missing 1 required positional argument: 'tokens'[0m
2025-11-28T17:41:05.6264912Z [31m[1m_____________________________ test_reflection_flow _____________________________[0m
2025-11-28T17:41:05.6265160Z [1m[31mtests/services/test_reflection_engine.py[0m:17: in test_reflection_flow
2025-11-28T17:41:05.6265332Z     [0mengine = ReflectionEngine(mock_pool)[90m[39;49;00m
2025-11-28T17:41:05.6265566Z [1m[31mapps/memory_api/services/reflection_engine.py[0m:82: in __init__
2025-11-28T17:41:05.6265819Z     [0m[96mself[39;49;00m.graph_extractor = GraphExtractionService(pool)[90m[39;49;00m
2025-11-28T17:41:05.6266181Z [1m[31mE   TypeError: GraphExtractionService.__init__() missing 1 required positional argument: 'graph_repo'[0m
2025-11-28T17:41:05.6266397Z [31m[1m_____________________________ test_pydantic_models _____________________________[0m
2025-11-28T17:41:05.6266601Z [1m[31mtest_enterprise_features.py[0m:124: in test_pydantic_models
2025-11-28T17:41:05.6266941Z     [0m[94massert[39;49;00m graph_triple.source == [33m"[39;49;00m[33mEntity1[39;49;00m[33m"[39;49;00m[90m[39;49;00m
2025-11-28T17:41:05.6267121Z [1m[31mE   AssertionError: assert 'entity1' == 'Entity1'[0m
2025-11-28T17:41:05.6267219Z [1m[31mE     [0m
2025-11-28T17:41:05.6267383Z [1m[31mE     [0m[91m- Entity1[39;49;00m[90m[39;49;00m[0m
2025-11-28T17:41:05.6267495Z [1m[31mE     ? ^[90m[39;49;00m[0m
2025-11-28T17:41:05.6267648Z [1m[31mE     [92m+ entity1[39;49;00m[90m[39;49;00m[0m
2025-11-28T17:41:05.6267755Z [1m[31mE     ? ^[90m[39;49;00m[0m
2025-11-28T17:41:05.6267939Z [33m=============================== warnings summary ===============================[0m
2025-11-28T17:41:05.6268227Z ../../../../../opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/starlette/formparsers.py:12
2025-11-28T17:41:05.6268788Z   /opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/starlette/formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.
2025-11-28T17:41:05.6269038Z     import multipart
2025-11-28T17:41:05.6269044Z 
2025-11-28T17:41:05.6269385Z ../../../../../opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/google/api_core/_python_version_support.py:266
2025-11-28T17:41:05.6270660Z   /opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/google/api_core/_python_version_support.py:266: FutureWarning: You are using a Python version (3.10.19) which Google will stop supporting in new releases of google.api_core once it reaches its end of life (2026-10-04). Please upgrade to the latest Python version, or at least Python 3.11, to continue receiving updates for google.api_core past that date.
2025-11-28T17:41:05.6270766Z     warnings.warn(message, FutureWarning)
2025-11-28T17:41:05.6270772Z 
2025-11-28T17:41:05.6271078Z apps/memory_api/tests/test_reflective_flags.py::TestDreamingEnabled::test_dreaming_enabled_runs_dreaming
2025-11-28T17:41:05.6271408Z apps/memory_api/tests/test_reflective_flags.py::TestMaintenanceScheduler::test_maintenance_with_all_flags_enabled
2025-11-28T17:41:05.6271978Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/workers/memory_maintenance.py:369: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
2025-11-28T17:41:05.6272083Z     async with self.pool.acquire() as conn:
2025-11-28T17:41:05.6272249Z   Enable tracemalloc to get traceback where the object was allocated.
2025-11-28T17:41:05.6272530Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
2025-11-28T17:41:05.6272541Z 
2025-11-28T17:41:05.6272713Z tests/repositories/test_graph_repository.py::test_merge_node_edges
2025-11-28T17:41:05.6273322Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/repositories/graph_repository.py:683: RuntimeWarning: coroutine 'test_merge_node_edges.<locals>.mock_transaction' was never awaited
2025-11-28T17:41:05.6273421Z     async with conn.transaction():
2025-11-28T17:41:05.6273586Z   Enable tracemalloc to get traceback where the object was allocated.
2025-11-28T17:41:05.6273850Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
2025-11-28T17:41:05.6273861Z 
2025-11-28T17:41:05.6274037Z tests/repositories/test_graph_repository.py::test_store_graph_triples
2025-11-28T17:41:05.6274655Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/repositories/graph_repository.py:521: RuntimeWarning: coroutine 'test_store_graph_triples.<locals>.mock_transaction' was never awaited
2025-11-28T17:41:05.6274747Z     async with conn.transaction():
2025-11-28T17:41:05.6274900Z   Enable tracemalloc to get traceback where the object was allocated.
2025-11-28T17:41:05.6275162Z   See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.
2025-11-28T17:41:05.6275174Z 
2025-11-28T17:41:05.6275296Z test_enterprise_features.py::test_decorator_import
2025-11-28T17:41:05.6276260Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/client.py:18: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-28T17:41:05.6276363Z     class RAEClientConfig(BaseSettings):
2025-11-28T17:41:05.6276368Z 
2025-11-28T17:41:05.6276498Z test_enterprise_features.py::test_decorator_basic_usage
2025-11-28T17:41:05.6277394Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/client.py:109: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-28T17:41:05.6277530Z     "POST", "/memory/store", json=memory.dict(exclude_none=True)
2025-11-28T17:41:05.6277663Z 
2025-11-28T17:41:05.6277790Z test_enterprise_features.py::test_decorator_basic_usage
2025-11-28T17:41:05.6278781Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/sdk/python/rae_memory_sdk/client.py:420: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-28T17:41:05.6278914Z     "POST", "/memory/store", json=memory.dict(exclude_none=True)
2025-11-28T17:41:05.6278919Z 
2025-11-28T17:41:05.6279098Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
2025-11-28T17:41:05.6279209Z ================================ tests coverage ================================
2025-11-28T17:41:05.6279378Z _______________ coverage: platform linux, python 3.10.19-final-0 _______________
2025-11-28T17:41:05.6279384Z 
2025-11-28T17:41:05.6279503Z Name                                                         Stmts   Miss  Cover   Missing
2025-11-28T17:41:05.6279649Z ------------------------------------------------------------------------------------------
2025-11-28T17:41:05.6279984Z apps/__init__.py                                                 0      0   100%
2025-11-28T17:41:05.6280130Z apps/llm/__init__.py                                             4      0   100%
2025-11-28T17:41:05.6280279Z apps/llm/broker/__init__.py                                      2      0   100%
2025-11-28T17:41:05.6280505Z apps/llm/broker/llm_router.py                                  104     90    13%   55-57, 61-74, 78-122, 131-153, 169-216, 228-252
2025-11-28T17:41:05.6280650Z apps/llm/models/__init__.py                                      4      0   100%
2025-11-28T17:41:05.6280810Z apps/llm/models/llm_error.py                                    18      0   100%
2025-11-28T17:41:05.6280969Z apps/llm/models/llm_request.py                                  25      0   100%
2025-11-28T17:41:05.6281137Z apps/llm/models/llm_response.py                                 20      0   100%
2025-11-28T17:41:05.6281303Z apps/llm/providers/__init__.py                                   9      0   100%
2025-11-28T17:41:05.6281548Z apps/llm/providers/anthropic_provider.py                        79     68    14%   42-47, 56-66, 70-73, 103-196, 212-247
2025-11-28T17:41:05.6281710Z apps/llm/providers/base.py                                       9      0   100%
2025-11-28T17:41:05.6281944Z apps/llm/providers/deepseek_provider.py                         78     67    14%   41-46, 50, 61-64, 97-195, 211-255
2025-11-28T17:41:05.6282177Z apps/llm/providers/gemini_provider.py                          103     92    11%   37-42, 51-63, 67-71, 101-208, 224-280
2025-11-28T17:41:05.6282404Z apps/llm/providers/grok_provider.py                             85     73    14%   42-47, 51, 62-65, 84-90, 113-215, 231-281
2025-11-28T17:41:05.6282624Z apps/llm/providers/ollama_provider.py                           69     58    16%   35-41, 50-61, 82-139, 155-201
2025-11-28T17:41:05.6282920Z apps/llm/providers/openai_provider.py                           76     25    67%   61, 111, 114, 117, 120, 123, 127-144, 154, 167-180, 208, 211, 214, 218-220, 228, 240
2025-11-28T17:41:05.6283142Z apps/llm/providers/qwen_provider.py                            100     89    11%   43-50, 65-71, 79-82, 117-236, 252-319
2025-11-28T17:41:05.6283286Z apps/memory_api/__init__.py                                      0      0   100%
2025-11-28T17:41:05.6283444Z apps/memory_api/api/__init__.py                                  0      0   100%
2025-11-28T17:41:05.6283598Z apps/memory_api/api/v1/__init__.py                               0      0   100%
2025-11-28T17:41:05.6283786Z apps/memory_api/api/v1/agent.py                                 86     65    24%   58-239, 266-288
2025-11-28T17:41:05.6283949Z apps/memory_api/api/v1/cache.py                                  7      0   100%
2025-11-28T17:41:05.6284159Z apps/memory_api/api/v1/governance.py                           124     75    40%   111-183, 207-310, 334-434
2025-11-28T17:41:05.6284547Z apps/memory_api/api/v1/graph.py                                193    123    36%   154-194, 223-276, 300-363, 404-516, 545-595, 632-688, 720-822
2025-11-28T17:41:05.6284900Z apps/memory_api/api/v1/health.py                               127     86    32%   59-95, 102-135, 142-174, 189-204, 228-265, 282-287, 303, 322-351
2025-11-28T17:41:05.6285115Z apps/memory_api/api/v1/memory.py                               128     96    25%   54-110, 140-247, 263-286, 310-320, 363-422
2025-11-28T17:41:05.6285270Z apps/memory_api/celery_app.py                                    4      0   100%
2025-11-28T17:41:05.6285606Z apps/memory_api/clients/rae_client.py                          270     32    88%   116-119, 242-244, 298, 374-383, 465, 472, 507-508, 512, 516, 561-562, 589, 604, 715, 741, 747, 796-802
2025-11-28T17:41:05.6285778Z apps/memory_api/config.py                                       89      5    94%   40, 141-144
2025-11-28T17:41:05.6285951Z apps/memory_api/cost_model.py                                    8      6    25%   53-61
2025-11-28T17:41:05.6286161Z apps/memory_api/dependencies.py                                 25     13    48%   64-66, 79-81, 102-109, 125-131
2025-11-28T17:41:05.6286327Z apps/memory_api/logging_config.py                               24      0   100%
2025-11-28T17:41:05.6286495Z apps/memory_api/main.py                                         81     14    83%   51-72, 115, 229-230, 249-250, 290
2025-11-28T17:41:05.6286652Z apps/memory_api/metrics.py                                      33      0   100%
2025-11-28T17:41:05.6286869Z apps/memory_api/middleware/cost_guard.py                       144    124    14%   63-95, 111-128, 166-476
2025-11-28T17:41:05.6287102Z apps/memory_api/middleware/rate_limiter.py                      51     31    39%   55-74, 106-114, 165-177, 200-211
2025-11-28T17:41:05.6287278Z apps/memory_api/middleware/tenant.py                             9      0   100%
2025-11-28T17:41:05.6287433Z apps/memory_api/models.py                                       68      0   100%
2025-11-28T17:41:05.6287603Z apps/memory_api/models/__init__.py                              22      0   100%
2025-11-28T17:41:05.6287788Z apps/memory_api/models/dashboard_models.py                     286      0   100%
2025-11-28T17:41:05.6287979Z apps/memory_api/models/evaluation_models.py                    256      0   100%
2025-11-28T17:41:05.6288152Z apps/memory_api/models/event_models.py                         244      0   100%
2025-11-28T17:41:05.6288314Z apps/memory_api/models/graph.py                                 17      0   100%
2025-11-28T17:41:05.6288500Z apps/memory_api/models/graph_enhanced_models.py                254      0   100%
2025-11-28T17:41:05.6288680Z apps/memory_api/models/hybrid_search_models.py                 164      0   100%
2025-11-28T17:41:05.6288865Z apps/memory_api/models/rbac.py                                  95     17    82%   135, 207-224, 234-239
2025-11-28T17:41:05.6289070Z apps/memory_api/models/reflection_models.py                    169      1    99%   69
2025-11-28T17:41:05.6289306Z apps/memory_api/models/reflection_v2_models.py                 149     14    91%   132-133, 171-180, 243-244
2025-11-28T17:41:05.6289499Z apps/memory_api/models/tenant.py                                94     11    88%   193-200, 212-215
2025-11-28T17:41:05.6289678Z apps/memory_api/observability/__init__.py                        2      0   100%
2025-11-28T17:41:05.6290318Z apps/memory_api/observability/opentelemetry_config.py          104     71    32%   136-191, 215-219, 235-254, 275-278, 292-298, 312-318, 352-363, 368-371, 380-383, 388-391
2025-11-28T17:41:05.6290509Z apps/memory_api/plugins/__init__.py                              2      0   100%
2025-11-28T17:41:05.6290828Z apps/memory_api/plugins/base.py                                190     44    77%   137, 185, 198, 214, 232, 242, 252, 268, 281, 296, 309, 329, 378-379, 421-426, 435-436, 456, 470-471, 501-535, 550-551
2025-11-28T17:41:05.6291155Z apps/memory_api/repositories/__init__.py                         0      0   100%
2025-11-28T17:41:05.6291589Z apps/memory_api/repositories/cost_logs_repository.py           141     60    57%   176-242, 279-357, 374-382, 401-408, 425-433, 452-459, 493-543, 577-634, 657-685
2025-11-28T17:41:05.6291905Z apps/memory_api/repositories/graph_repository.py               131     58    56%   53-139, 162, 180-216, 232-253, 275-293, 319-338, 358-380, 522-584, 685-722
2025-11-28T17:41:05.6292459Z apps/memory_api/repositories/graph_repository_enhanced.py      130     99    24%   60, 90-108, 114-127, 133-146, 162-184, 208-216, 260-297, 303-329, 335-350, 354-366, 372-386, 413-436, 471-534, 563-591, 618-631, 635-642, 648-660, 675-689, 708-740, 778-800, 808, 820, 841
2025-11-28T17:41:05.6292784Z apps/memory_api/repositories/memory_repository.py               77     61    21%   59-104, 122-140, 155-170, 185-196, 211-222, 238-263, 279-299, 315-335, 363-405
2025-11-28T17:41:05.6293168Z apps/memory_api/repositories/reflection_repository.py          158    140    11%   83-157, 174-185, 222-295, 312-333, 374-420, 443-471, 494-569, 591-600, 635-659, 669-689, 720
2025-11-28T17:41:05.6293340Z apps/memory_api/routes/__init__.py                               1      0   100%
2025-11-28T17:41:05.6293752Z apps/memory_api/routes/dashboard.py                            239    202    15%   68, 74-78, 114-163, 182-217, 240-274, 296-351, 368-397, 409-421, 444-466, 479, 490-556, 563-643, 650-720, 731-779, 791-806, 811-832, 837-860, 875
2025-11-28T17:41:05.6294036Z apps/memory_api/routes/evaluation.py                            91     59    35%   40, 64-89, 99, 160-193, 203, 250-280, 293-311, 331-358, 368, 406-418, 428, 454, 477
2025-11-28T17:41:05.6294451Z apps/memory_api/routes/event_triggers.py                       159    114    28%   48, 69-89, 95-109, 126-139, 145-154, 160-171, 177-188, 204-219, 237-267, 277, 312-334, 356-373, 379-391, 399-406, 421, 440-457, 479-512, 523, 555
2025-11-28T17:41:05.6294906Z apps/memory_api/routes/graph_enhanced.py                       225    179    20%   63, 79-94, 106-122, 134-151, 167-203, 211-226, 234-245, 253-264, 272-287, 306-361, 376-417, 432-457, 473-504, 510-526, 534-545, 557-581, 598-617, 632-654, 664-706, 717
2025-11-28T17:41:05.6295196Z apps/memory_api/routes/hybrid_search.py                        104     67    36%   89, 115-137, 148-167, 182-194, 209-228, 238-264, 282-369, 394-426, 437, 461
2025-11-28T17:41:05.6295477Z apps/memory_api/routes/reflections.py                           98     71    28%   45, 83-104, 142-200, 225-247, 270-282, 316-352, 387-420, 447-453, 481-510
2025-11-28T17:41:05.6295645Z apps/memory_api/security/__init__.py                             4      0   100%
2025-11-28T17:41:05.6295893Z apps/memory_api/security/auth.py                               106     80    25%   38-56, 81-128, 145-148, 163-165, 170-184, 189, 225-310, 334-423
2025-11-28T17:41:05.6296121Z apps/memory_api/security/dependencies.py                        48     29    40%   56, 78-84, 128-133, 155-210
2025-11-28T17:41:05.6296358Z apps/memory_api/security/rate_limit.py                          78     63    19%   31-32, 36-48, 63-77, 99-179, 189-191, 208-225
2025-11-28T17:41:05.6296632Z apps/memory_api/security/validation.py                          87     68    22%   40-56, 72-95, 111-150, 166-177, 193-203, 219-236, 252-269, 286-301
2025-11-28T17:41:05.6296798Z apps/memory_api/services/__init__.py                             0      0   100%
2025-11-28T17:41:05.6297010Z apps/memory_api/services/analytics.py                          193      4    98%   339-342, 346
2025-11-28T17:41:05.6297255Z apps/memory_api/services/budget_service.py                      88     52    41%   74, 95-136, 160-297, 323-351, 376-458, 487-521
2025-11-28T17:41:05.6297494Z apps/memory_api/services/community_detection.py                 81     12    85%   55, 83-100
2025-11-28T17:41:05.6297766Z apps/memory_api/services/context_builder.py                    139     74    47%   96, 177-239, 254-269, 283-339, 416, 431-476, 497-521
2025-11-28T17:41:05.6298069Z apps/memory_api/services/context_cache.py                       62     36    42%   21, 39-49, 63-102, 106
2025-11-28T17:41:05.6298423Z apps/memory_api/services/cost_controller.py                     55     43    22%   79-146, 171-174, 194-200, 224-241, 260-261, 277-284, 309, 344-359
2025-11-28T17:41:05.6298823Z apps/memory_api/services/dashboard_websocket.py                182     79    57%   131, 175-177, 201, 205-210, 247-253, 257-271, 296, 307, 346-357, 365-372, 410-425, 439-451, 461-498, 620-622, 638, 662-703
2025-11-28T17:41:05.6299103Z apps/memory_api/services/drift_detector.py                     108     33    69%   102-104, 118-124, 248, 292, 329, 333, 357-373, 423-434, 445
2025-11-28T17:41:05.6299317Z apps/memory_api/services/embedding.py                           28     15    46%   28-29, 36-55, 62-64, 72
2025-11-28T17:41:05.6299541Z apps/memory_api/services/entity_resolution.py                   74     16    78%   80-107, 158-161
2025-11-28T17:41:05.6300079Z apps/memory_api/services/evaluation_service.py                 139     82    41%   74-205, 233-234, 275, 330, 357-385, 408-442, 464-474
2025-11-28T17:41:05.6300721Z apps/memory_api/services/graph_algorithms.py                   298     41    86%   34, 55, 93, 126-127, 135-140, 160-165, 191-193, 231, 308, 329, 350-361, 394, 405, 418-419, 445, 451, 454, 490, 554, 573, 589, 665-671, 685-691
2025-11-28T17:41:05.6301044Z apps/memory_api/services/graph_extraction.py                   132     83    37%   39-47, 115, 192-203, 258-260, 264-265, 299-406, 415-467, 483, 497-515, 534-545
2025-11-28T17:41:05.6301352Z apps/memory_api/services/hybrid_cache.py                        90     71    21%   48-58, 82-105, 126-153, 176-185, 202-216, 225-236, 240-248, 257-260, 269, 283-285, 300-302
2025-11-28T17:41:05.6301624Z apps/memory_api/services/hybrid_search.py                      114     88    23%   81-83, 122-230, 254-308, 318, 341-358, 383-388, 411-470, 482-493
2025-11-28T17:41:05.6301935Z apps/memory_api/services/hybrid_search_service.py              226    207     8%   93-98, 145-336, 353-407, 418-473, 485-624, 636-680, 705-776, 796-850
2025-11-28T17:41:05.6302384Z apps/memory_api/services/importance_scoring.py                 159    111    30%   74, 99-114, 151-196, 204-214, 223-242, 252-263, 271-277, 281-290, 305-319, 343, 356, 417-491, 504, 532-539, 556-573, 589-609, 625, 646-649, 687-709
2025-11-28T17:41:05.6302590Z apps/memory_api/services/llm/__init__.py                        20      5    75%   21, 23, 26-33
2025-11-28T17:41:05.6302813Z apps/memory_api/services/llm/anthropic.py                       30     17    43%   18-21, 30-54, 65-78
2025-11-28T17:41:05.6303000Z apps/memory_api/services/llm/base.py                            14      0   100%
2025-11-28T17:41:05.6303203Z apps/memory_api/services/llm/gemini.py                          33     20    39%   18-22, 31-52, 63-74
2025-11-28T17:41:05.6303432Z apps/memory_api/services/llm/litellm_provider.py                19     10    47%   17-20, 28-43, 62-72
2025-11-28T17:41:05.6303643Z apps/memory_api/services/llm/ollama.py                          43     27    37%   20, 30-62, 73-95
2025-11-28T17:41:05.6303847Z apps/memory_api/services/llm/openai.py                          30     10    67%   20, 51-53, 64-76
2025-11-28T17:41:05.6304100Z apps/memory_api/services/memory_scoring_v2.py                   83     21    75%   46, 235-240, 253, 272, 317-340, 356-368
2025-11-28T17:41:05.6304439Z apps/memory_api/services/ml_service_client.py                  122     99    19%   50-54, 58-59, 63-68, 76-90, 94, 125-130, 138, 159-204, 222-250, 268-294, 312-337, 356-385, 396-409, 418-420
2025-11-28T17:41:05.6304661Z apps/memory_api/services/pii_scrubber.py                        24     17    29%   29-30, 40-45, 51-56, 72-89
2025-11-28T17:41:05.6304930Z apps/memory_api/services/query_analyzer.py                      91     62    32%   128-129, 148-197, 216-241, 257-269, 283-312, 344, 363-383
2025-11-28T17:41:05.6305164Z apps/memory_api/services/rbac_service.py                        35     21    40%   29, 42-56, 90-126, 145-154, 168-179, 224-258
2025-11-28T17:41:05.6305514Z apps/memory_api/services/redis_client.py                         5      2    60%   7-8
2025-11-28T17:41:05.6305931Z apps/memory_api/services/reflection_engine.py                   98     65    34%   89-126, 138-154, 167-178, 207-239, 268-319, 335-361, 373-388, 400-412, 425-441
2025-11-28T17:41:05.6306200Z apps/memory_api/services/reflection_engine_v2.py                75     45    40%   160-219, 234-263, 278-295, 307-318, 342-389, 416-424
2025-11-28T17:41:05.6306551Z apps/memory_api/services/reflection_pipeline.py                194    168    13%   126-128, 132-133, 151-247, 258-290, 306-380, 391-473, 479-559, 571-600, 609-615, 624-633
2025-11-28T17:41:05.6307073Z apps/memory_api/services/rules_engine.py                       202    102    50%   95-108, 137-159, 181-183, 196-197, 226, 232, 238, 245-249, 252-260, 266, 269-272, 277-278, 282, 304, 323, 332-341, 357, 360, 384-412, 486-525, 549-569, 592-600, 606-609, 615-618, 624-629, 639-642, 648-651
2025-11-28T17:41:05.6307292Z apps/memory_api/services/scoring.py                             28     20    29%   15-29, 36, 44-64, 72-79
2025-11-28T17:41:05.6307542Z apps/memory_api/services/temporal_graph.py                     186      9    95%   48, 74, 85, 182, 279, 338-340, 426, 478
2025-11-28T17:41:05.6307748Z apps/memory_api/services/token_estimator.py                      4      3    25%   8-10
2025-11-28T17:41:05.6307954Z apps/memory_api/services/vector_store/__init__.py               16      8    50%   17-28
2025-11-28T17:41:05.6308143Z apps/memory_api/services/vector_store/base.py                    6      0   100%
2025-11-28T17:41:05.6308398Z apps/memory_api/services/vector_store/pgvector_store.py         23     11    52%   17, 25-32, 46-55, 62
2025-11-28T17:41:05.6308673Z apps/memory_api/services/vector_store/qdrant_store.py           64     43    33%   49-66, 70-74, 80-106, 129-160, 170-180, 198-208
2025-11-28T17:41:05.6308839Z apps/memory_api/tasks/__init__.py                                0      0   100%
2025-11-28T17:41:05.6309119Z apps/memory_api/tasks/background_tasks.py                      206    103    50%   18, 47-66, 123-125, 268-278, 289-301, 325-449, 470-498, 509-549
2025-11-28T17:41:05.6309281Z apps/memory_api/tests/__init__.py                                0      0   100%
2025-11-28T17:41:05.6309497Z apps/memory_api/tests/conftest.py                               68     30    56%   16-18, 24, 52-55, 146-163, 183-266, 281
2025-11-28T17:41:05.6309674Z apps/memory_api/tests/test_analytics.py                        121      0   100%
2025-11-28T17:41:05.6309983Z apps/memory_api/tests/test_api_client.py                       155      1    99%   116
2025-11-28T17:41:05.6310267Z apps/memory_api/tests/test_api_e2e.py                           26      4    85%   57, 71, 86, 119
2025-11-28T17:41:05.6310550Z apps/memory_api/tests/test_background_tasks.py                 131      1    99%   334
2025-11-28T17:41:05.6310811Z apps/memory_api/tests/test_dashboard_websocket.py               96      0   100%
2025-11-28T17:41:05.6311029Z apps/memory_api/tests/test_evaluation_suite.py                  79      0   100%
2025-11-28T17:41:05.6311243Z apps/memory_api/tests/test_event_triggers.py                    92      0   100%
2025-11-28T17:41:05.6311492Z apps/memory_api/tests/test_graph_algorithms.py                 178      0   100%
2025-11-28T17:41:05.6311926Z apps/memory_api/tests/test_graph_extraction.py                 136    132     3%   18-418
2025-11-28T17:41:05.6312186Z apps/memory_api/tests/test_graph_extraction_integration.py     132    130     2%   23-441
2025-11-28T17:41:05.6312450Z apps/memory_api/tests/test_hybrid_search.py                    223    220     1%   17-931
2025-11-28T17:41:05.6312656Z apps/memory_api/tests/test_openapi.py                           10      0   100%
2025-11-28T17:41:05.6312914Z apps/memory_api/tests/test_phase2_models.py                    158      1    99%   325
2025-11-28T17:41:05.6313123Z apps/memory_api/tests/test_phase2_plugins.py                   209      1    99%   425
2025-11-28T17:41:05.6313572Z apps/memory_api/tests/test_pii_scrubber.py                      74     72     3%   25-197
2025-11-28T17:41:05.6313970Z apps/memory_api/tests/test_reflection_simple.py                 51     45    12%   20-143
2025-11-28T17:41:05.6314210Z apps/memory_api/tests/test_reflective_flags.py                 152      2    99%   197-198
2025-11-28T17:41:05.6314471Z apps/memory_api/tests/test_semantic_memory.py                   70     65     7%   24-216
2025-11-28T17:41:05.6314685Z apps/memory_api/tests/test_temporal_graph.py                   176      0   100%
2025-11-28T17:41:05.6314891Z apps/memory_api/tests/test_vector_store.py                      75     72     4%   26-212
2025-11-28T17:41:05.6315198Z apps/memory_api/workers/__init__.py                              2      0   100%
2025-11-28T17:41:05.6315557Z apps/memory_api/workers/memory_maintenance.py                  156     69    56%   76-133, 137-141, 207-214, 282-299, 370-453, 526, 539, 562-564, 571-581, 596-619, 623
2025-11-28T17:41:05.6315787Z sdk/python/rae_memory_sdk/__init__.py                            5      0   100%
2025-11-28T17:41:05.6330993Z sdk/python/rae_memory_sdk/client.py                            126     60    52%   48, 70-71, 73-79, 90-91, 93-99, 101-102, 111, 119-123, 129-130, 153-159, 182-189, 201, 222-228, 244-247, 263-268, 294-295, 309, 322, 334, 349-350, 364, 380-383, 391, 395, 422, 438-442, 454-457, 469-475, 486-493, 497, 505-506, 510, 516-517
2025-11-28T17:41:05.6331371Z sdk/python/rae_memory_sdk/decorators.py                         89     18    80%   84-86, 115-116, 133-135, 166-167, 218, 244-246, 250, 286, 337-348, 355
2025-11-28T17:41:05.6331570Z sdk/python/rae_memory_sdk/models.py                             41      0   100%
2025-11-28T17:41:05.6331769Z test_enterprise_features.py                                    107     31    71%   55-56, 125-127, 159, 167-206, 210
2025-11-28T17:41:05.6331913Z tests/__init__.py                                                0      0   100%
2025-11-28T17:41:05.6332063Z tests/api/__init__.py                                            0      0   100%
2025-11-28T17:41:05.6332210Z tests/api/v1/__init__.py                                         0      0   100%
2025-11-28T17:41:05.6332407Z tests/api/v1/test_agent.py                                     108     90    17%   12-53, 65-106, 118-158, 170-206
2025-11-28T17:41:05.6332557Z tests/api/v1/test_cache.py                                      10      0   100%
2025-11-28T17:41:05.6332853Z tests/api/v1/test_governance.py                                130     45    65%   41-47, 73-74, 99-101, 132-139, 164-166, 195-196, 215-221, 241-242, 262-265, 282-284, 331-334
2025-11-28T17:41:05.6333040Z tests/api/v1/test_memory.py                                     98     11    89%   60, 89, 140-142, 191-193, 222-224
2025-11-28T17:41:05.6333275Z tests/api/v1/test_search_hybrid.py                             107     15    86%   75-77, 138-139, 203-204, 268-269, 328-329, 391-392, 534-535
2025-11-28T17:41:05.6333413Z tests/conftest.py                                               53      0   100%
2025-11-28T17:41:05.6333677Z tests/integration/test_graphrag.py                              98     69    30%   41-42, 48, 54, 65-124, 142-168, 182-217, 231-269, 282-324, 338-351, 355
2025-11-28T17:41:05.6333997Z tests/integration/test_lite_profile.py                          86     67    22%   37-72, 80-85, 90-93, 98-116, 122-157, 163-175, 181-187, 192-196, 201-207, 212-224, 230-239, 248-253
2025-11-28T17:41:05.6334262Z tests/integration/test_reflection_flow.py                      107     67    37%   38, 44, 50, 56-61, 67, 73, 94-170, 190-231, 256-298, 361-385, 411-484
2025-11-28T17:41:05.6334573Z tests/llm/test_llm_provider_contract.py                        100     42    58%   30, 39, 47, 52-55, 60-63, 68-71, 84, 108-112, 136-142, 159-163, 178-180, 198-202, 219-220, 249-251, 256
2025-11-28T17:41:05.6334813Z tests/repositories/test_graph_repository.py                    150     17    89%   81-86, 96-98, 258-263, 297-298
2025-11-28T17:41:05.6335160Z tests/services/__init__.py                                       0      0   100%
2025-11-28T17:41:05.6335470Z tests/services/llm/__init__.py                                   0      0   100%
2025-11-28T17:41:05.6335647Z tests/services/llm/test_providers.py                            17      0   100%
2025-11-28T17:41:05.6335848Z tests/services/test_budget_service.py                           19      1    95%   36
2025-11-28T17:41:05.6336069Z tests/services/test_community_detection.py                     106      0   100%
2025-11-28T17:41:05.6336240Z tests/services/test_context_cache.py                            10      0   100%
2025-11-28T17:41:05.6336421Z tests/services/test_entity_resolution.py                        77      0   100%
2025-11-28T17:41:05.6336618Z tests/services/test_reflection_engine.py                        23      9    61%   18-36
2025-11-28T17:41:05.6336761Z ------------------------------------------------------------------------------------------
2025-11-28T17:41:05.6336875Z TOTAL                                                        14237   6062    57%
2025-11-28T17:41:05.6336980Z Coverage HTML written to dir htmlcov
2025-11-28T17:41:05.6337082Z Coverage XML written to file coverage.xml
2025-11-28T17:41:05.6337421Z [32mRequired test coverage of 55% reached. Total coverage: 57.42%
2025-11-28T17:41:05.6337603Z [0m============================= slowest 10 durations =============================
2025-11-28T17:41:05.6337801Z 8.55s call     tests/llm/test_llm_provider_contract.py::test_basic_completion
2025-11-28T17:41:05.6338083Z 8.36s call     tests/llm/test_llm_provider_contract.py::test_provider_contract_hello_world[openai-gpt-3.5-turbo]
2025-11-28T17:41:05.6338250Z 8.32s call     tests/llm/test_llm_provider_contract.py::test_max_tokens
2025-11-28T17:41:05.6338405Z 8.29s call     tests/llm/test_llm_provider_contract.py::test_token_usage
2025-11-28T17:41:05.6338578Z 8.28s call     tests/llm/test_llm_provider_contract.py::test_temperature_control
2025-11-28T17:41:05.6338733Z 8.23s call     tests/llm/test_llm_provider_contract.py::test_json_mode
2025-11-28T17:41:05.6339023Z 1.51s call     apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_success
2025-11-28T17:41:05.6339325Z 1.33s call     apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_pool_cleanup
2025-11-28T17:41:05.6339504Z 1.20s call     apps/memory_api/tests/test_api_client.py::test_cache_expiration
2025-11-28T17:41:05.6339930Z 0.71s call     apps/memory_api/tests/test_background_tasks.py::TestExtractGraphLazy::test_extract_graph_with_mini_model
2025-11-28T17:41:05.6340152Z [36m[1m=========================== short test summary info ============================[0m
2025-11-28T17:41:05.6341367Z [31mFAILED[0m apps/memory_api/tests/test_reflective_flags.py::[1mTestReflectiveMemoryFlags::test_reflective_memory_disabled_no_reflections[0m - AttributeError: 'function' object has no attribute 'assert_not_called'
2025-11-28T17:41:05.6341932Z [31mFAILED[0m apps/memory_api/tests/test_reflective_flags.py::[1mTestDreamingEnabled::test_dreaming_enabled_runs_dreaming[0m - AttributeError: __aenter__
2025-11-28T17:41:05.6342924Z [31mFAILED[0m tests/api/v1/test_agent.py::[1mtest_agent_execute_direct[0m - AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'
2025-11-28T17:41:05.6343893Z [31mFAILED[0m tests/api/v1/test_agent.py::[1mtest_agent_execute_with_context[0m - AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'
2025-11-28T17:41:05.6344903Z [31mFAILED[0m tests/api/v1/test_agent.py::[1mtest_agent_execute_with_empty_prompt[0m - AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'
2025-11-28T17:41:05.6346027Z [31mFAILED[0m tests/api/v1/test_agent.py::[1mtest_agent_execute_with_llm_error[0m - AttributeError: <module 'apps.memory_api.api.v1.agent' from '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/api/v1/agent.py'> does not have the attribute 'get_context_cache'
2025-11-28T17:41:05.6346512Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_success[0m - assert 401 == 200
2025-11-28T17:41:05.6346635Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6347038Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_with_custom_days[0m - assert 401 == 200
2025-11-28T17:41:05.6347156Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6347514Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_error[0m - assert 401 == 500
2025-11-28T17:41:05.6347630Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6348012Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_governance_stats_success[0m - assert 401 == 200
2025-11-28T17:41:05.6348132Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6348500Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_governance_stats_no_data[0m - assert 401 == 404
2025-11-28T17:41:05.6348607Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6349026Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_governance_stats_with_custom_period[0m - assert 401 == 200
2025-11-28T17:41:05.6349133Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6349498Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_budget_status_success[0m - assert 401 == 200
2025-11-28T17:41:05.6349605Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6350095Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_budget_status_with_alerts[0m - assert 401 == 200
2025-11-28T17:41:05.6350221Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6350588Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_budget_status_zero_usage[0m - assert 401 == 200
2025-11-28T17:41:05.6350695Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6351048Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_budget_status_error[0m - assert 401 == 500
2025-11-28T17:41:05.6351155Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6351531Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_invalid_days[0m - assert 401 == 422
2025-11-28T17:41:05.6351638Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6352025Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_tenant_governance_stats_invalid_days[0m - assert 401 == 422
2025-11-28T17:41:05.6352142Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6352524Z [31mFAILED[0m tests/api/v1/test_governance.py::[1mtest_governance_overview_empty_results[0m - assert 401 == 200
2025-11-28T17:41:05.6352638Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6352956Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_store_memory_success[0m - assert 401 == 200
2025-11-28T17:41:05.6353063Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6353373Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_query_memory_success[0m - assert 401 == 200
2025-11-28T17:41:05.6353479Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6353795Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_delete_memory_success[0m - assert 401 == 200
2025-11-28T17:41:05.6353908Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6354234Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_reflection_stats_success[0m - assert 401 == 200
2025-11-28T17:41:05.6354541Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6355014Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_store_memory_missing_tenant_header[0m - KeyError: 'detail'
2025-11-28T17:41:05.6355344Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_query_memory_with_filters[0m - assert 401 == 200
2025-11-28T17:41:05.6355456Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6355814Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_query_memory_with_graph_traversal[0m - assert 401 == 200
2025-11-28T17:41:05.6355925Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6356246Z [31mFAILED[0m tests/api/v1/test_memory.py::[1mtest_delete_memory_not_found[0m - assert 401 == 200
2025-11-28T17:41:05.6356353Z  +  where 401 = <Response [401 Unauthorized]>.status_code
2025-11-28T17:41:05.6356704Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_success[0m - assert 500 == 200
2025-11-28T17:41:05.6356854Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:05.6357231Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_reranking[0m - assert 500 == 200
2025-11-28T17:41:05.6357364Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:05.6357719Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_filters[0m - assert 422 == 200
2025-11-28T17:41:05.6357865Z  +  where 422 = <Response [422 Unprocessable Entity]>.status_code
2025-11-28T17:41:05.6358248Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_manual_weights[0m - assert 500 == 200
2025-11-28T17:41:05.6358379Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:05.6358761Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_graph_depth[0m - assert 500 == 200
2025-11-28T17:41:05.6358902Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:05.6359325Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_with_conversation_history[0m - assert 422 == 200
2025-11-28T17:41:05.6359455Z  +  where 422 = <Response [422 Unprocessable Entity]>.status_code
2025-11-28T17:41:05.6360075Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_empty_query[0m - assert 422 in [200, 400]
2025-11-28T17:41:05.6360231Z  +  where 422 = <Response [422 Unprocessable Entity]>.status_code
2025-11-28T17:41:05.6360644Z [31mFAILED[0m tests/api/v1/test_search_hybrid.py::[1mtest_hybrid_search_all_strategies_disabled[0m - assert 500 == 200
2025-11-28T17:41:05.6360779Z  +  where 500 = <Response [500 Internal Server Error]>.status_code
2025-11-28T17:41:05.6362101Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_basic_completion[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:06.7403950Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_json_mode[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:06.7409159Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_streaming[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:06.7413987Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_token_usage[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:06.7418266Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_temperature_control[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:06.7422258Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_max_tokens[0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:06.7426280Z [31mFAILED[0m tests/llm/test_llm_provider_contract.py::[1mtest_provider_contract_hello_world[openai-gpt-3.5-turbo][0m - apps.llm.models.llm_error.LLMAuthError: OpenAI authentication failed: Error code: 401 - {'error': {'message': 'Incorrect API key provided: sk-test-key. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'code': 'invalid_api_key', 'param': None}}
2025-11-28T17:41:06.7428948Z [31mFAILED[0m tests/repositories/test_graph_repository.py::[1mtest_merge_node_edges[0m - AttributeError: __aenter__
2025-11-28T17:41:06.7430472Z [31mFAILED[0m tests/repositories/test_graph_repository.py::[1mtest_store_graph_triples[0m - AttributeError: __aenter__
2025-11-28T17:41:06.7431990Z [31mFAILED[0m tests/services/test_budget_service.py::[1mtest_check_budget[0m - TypeError: check_budget() missing 1 required positional argument: 'tokens'
2025-11-28T17:41:06.7433631Z [31mFAILED[0m tests/services/test_budget_service.py::[1mtest_check_budget_fail[0m - TypeError: check_budget() missing 1 required positional argument: 'tokens'
2025-11-28T17:41:06.7435454Z [31mFAILED[0m tests/services/test_reflection_engine.py::[1mtest_reflection_flow[0m - TypeError: GraphExtractionService.__init__() missing 1 required positional argument: 'graph_repo'
2025-11-28T17:41:06.7437028Z [31mFAILED[0m test_enterprise_features.py::[1mtest_pydantic_models[0m - AssertionError: assert 'entity1' == 'Entity1'
2025-11-28T17:41:06.7437715Z   
2025-11-28T17:41:06.7438052Z   [0m[91m- Entity1[39;49;00m[90m[39;49;00m
2025-11-28T17:41:06.7438466Z   ? ^[90m[39;49;00m
2025-11-28T17:41:06.7438824Z   [92m+ entity1[39;49;00m[90m[39;49;00m
2025-11-28T17:41:06.7439221Z   ? ^[90m[39;49;00m
2025-11-28T17:41:06.7440585Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_graph_extraction_basic[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:06.7442473Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_graph_storage[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:06.7444340Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_hybrid_search[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:06.7446263Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_graph_traversal_depth[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:06.7448251Z [31mERROR[0m tests/integration/test_graphrag.py::[1mtest_hierarchical_reflection[0m - asyncpg.exceptions.InvalidPasswordError: password authentication failed for user "memory"
2025-11-28T17:41:06.7450165Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_generate_reflection_from_failure[0m
2025-11-28T17:41:06.7451467Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_generate_reflection_from_success[0m
2025-11-28T17:41:06.7452567Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_reflection_retrieval_in_context[0m
2025-11-28T17:41:06.7453672Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_inject_reflections_into_prompt[0m
2025-11-28T17:41:06.7454741Z [31mERROR[0m tests/integration/test_reflection_flow.py::[1mtest_end_to_end_reflection_flow[0m
2025-11-28T17:41:06.7456018Z [31m= [31m[1m48 failed[0m, [32m202 passed[0m, [33m12 skipped[0m, [33m11 deselected[0m, [33m9 warnings[0m, [31m[1m10 errors[0m[31m in 76.10s (0:01:16)[0m[31m =[0m
2025-11-28T17:41:07.7911338Z ##[error]Process completed with exit code 1.
