2025-11-24T21:22:48.8888194Z ##[group]Run pytest -m "not integration" --cov --cov-report=xml --cov-report=term
2025-11-24T21:22:48.8888772Z [36;1mpytest -m "not integration" --cov --cov-report=xml --cov-report=term[0m
2025-11-24T21:22:48.8922355Z shell: /usr/bin/bash -e {0}
2025-11-24T21:22:48.8922597Z env:
2025-11-24T21:22:48.8922842Z   pythonLocation: /opt/hostedtoolcache/Python/3.12.12/x64
2025-11-24T21:22:48.8923235Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib/pkgconfig
2025-11-24T21:22:48.8923638Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2025-11-24T21:22:48.8923990Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2025-11-24T21:22:48.8924331Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.12.12/x64
2025-11-24T21:22:48.8924689Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.12.12/x64/lib
2025-11-24T21:22:48.8925239Z   DATABASE_URL: ***localhost:5432/test_rae
2025-11-24T21:22:48.8925516Z   REDIS_URL: redis://localhost:6379/0
2025-11-24T21:22:48.8925780Z   QDRANT_URL: http://localhost:6333
2025-11-24T21:22:48.8926047Z   RAE_VECTOR_BACKEND: qdrant
2025-11-24T21:22:48.8926262Z ##[endgroup]
2025-11-24T21:22:50.0560411Z [1m============================= test session starts ==============================[0m
2025-11-24T21:22:50.0563672Z platform linux -- Python 3.12.12, pytest-9.0.1, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.12.12/x64/bin/python
2025-11-24T21:22:50.0564519Z cachedir: .pytest_cache
2025-11-24T21:22:50.0565049Z rootdir: /home/runner/work/RAE-agentic-memory/RAE-agentic-memory
2025-11-24T21:22:50.0565661Z configfile: pytest.ini
2025-11-24T21:22:50.0566398Z testpaths: apps/memory_api/tests, sdk/python/rae_memory_sdk/tests, integrations/mcp-server/tests
2025-11-24T21:22:50.0567513Z plugins: anyio-4.11.0, cov-7.0.0, asyncio-1.3.0, mock-3.15.1
2025-11-24T21:22:50.0568495Z asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
2025-11-24T21:23:03.8992218Z [1mcollecting ... [0mcollected 176 items / 1 error / 7 skipped
2025-11-24T21:23:03.8994230Z 
2025-11-24T21:23:03.8994467Z ==================================== ERRORS ====================================
2025-11-24T21:23:03.8995410Z [31m[1m____________ ERROR collecting apps/memory_api/tests/test_openapi.py ____________[0m
2025-11-24T21:23:03.8996963Z [31mImportError while importing test module '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/tests/test_openapi.py'.
2025-11-24T21:23:03.8998675Z Hint: make sure your test modules/packages have valid Python names.
2025-11-24T21:23:03.8999623Z Traceback:
2025-11-24T21:23:03.9000311Z /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/importlib/__init__.py:90: in import_module
2025-11-24T21:23:03.9001236Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-11-24T21:23:03.9001813Z            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
2025-11-24T21:23:03.9002345Z apps/memory_api/tests/test_openapi.py:3: in <module>
2025-11-24T21:23:03.9002893Z     from apps.memory_api.main import app
2025-11-24T21:23:03.9003383Z apps/memory_api/main.py:23: in <module>
2025-11-24T21:23:03.9003867Z     from apps.memory_api.routes import (
2025-11-24T21:23:03.9004400Z apps/memory_api/routes/reflections.py:31: in <module>
2025-11-24T21:23:03.9005153Z     from apps.memory_api.services.reflection_pipeline import ReflectionPipeline
2025-11-24T21:23:03.9005970Z apps/memory_api/services/reflection_pipeline.py:20: in <module>
2025-11-24T21:23:03.9006601Z     from sklearn.cluster import HDBSCAN, KMeans
2025-11-24T21:23:03.9007467Z E   ModuleNotFoundError: No module named 'sklearn'[0m
2025-11-24T21:23:03.9008294Z [33m=============================== warnings summary ===============================[0m
2025-11-24T21:23:03.9009182Z ../../../../../opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/starlette/formparsers.py:12
2025-11-24T21:23:03.9011163Z   /opt/hostedtoolcache/Python/3.12.12/x64/lib/python3.12/site-packages/starlette/formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.
2025-11-24T21:23:03.9012764Z     import multipart
2025-11-24T21:23:03.9013208Z 
2025-11-24T21:23:03.9013439Z apps/memory_api/models/evaluation_models.py:478
2025-11-24T21:23:03.9015629Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/evaluation_models.py:478: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9018140Z     variants: List[ABTestVariant] = Field(..., min_items=2, max_items=10)
2025-11-24T21:23:03.9018596Z 
2025-11-24T21:23:03.9018828Z apps/memory_api/models/evaluation_models.py:478
2025-11-24T21:23:03.9020935Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/evaluation_models.py:478: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9023003Z     variants: List[ABTestVariant] = Field(..., min_items=2, max_items=10)
2025-11-24T21:23:03.9023420Z 
2025-11-24T21:23:03.9023602Z apps/memory_api/models/evaluation_models.py:529
2025-11-24T21:23:03.9025506Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/evaluation_models.py:529: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9028437Z     queries: List[str] = Field(..., min_items=1)
2025-11-24T21:23:03.9028930Z 
2025-11-24T21:23:03.9029119Z apps/memory_api/models/evaluation_models.py:530
2025-11-24T21:23:03.9030990Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/evaluation_models.py:530: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9032991Z     relevance_judgments: List[RelevanceJudgment] = Field(..., min_items=1)
2025-11-24T21:23:03.9033391Z 
2025-11-24T21:23:03.9033602Z apps/memory_api/repositories/cost_logs_repository.py:30
2025-11-24T21:23:03.9035573Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/repositories/cost_logs_repository.py:30: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9037834Z     class LLMCallLog(BaseModel):
2025-11-24T21:23:03.9038071Z 
2025-11-24T21:23:03.9038236Z apps/memory_api/services/budget_service.py:23
2025-11-24T21:23:03.9040097Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/services/budget_service.py:23: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9041978Z     class Budget(BaseModel):
2025-11-24T21:23:03.9042185Z 
2025-11-24T21:23:03.9042365Z apps/memory_api/models/graph_enhanced_models.py:47
2025-11-24T21:23:03.9044256Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:47: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9046112Z     class EnhancedGraphNode(BaseModel):
2025-11-24T21:23:03.9046372Z 
2025-11-24T21:23:03.9046548Z apps/memory_api/models/graph_enhanced_models.py:79
2025-11-24T21:23:03.9048891Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:79: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9050756Z     class EnhancedGraphEdge(BaseModel):
2025-11-24T21:23:03.9051020Z 
2025-11-24T21:23:03.9051199Z apps/memory_api/models/graph_enhanced_models.py:171
2025-11-24T21:23:03.9053116Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:171: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9054968Z     class GraphSnapshot(BaseModel):
2025-11-24T21:23:03.9055207Z 
2025-11-24T21:23:03.9055390Z apps/memory_api/models/graph_enhanced_models.py:211
2025-11-24T21:23:03.9057427Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:211: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9059317Z     class GraphTraversal(BaseModel):
2025-11-24T21:23:03.9059571Z 
2025-11-24T21:23:03.9059753Z apps/memory_api/models/graph_enhanced_models.py:561
2025-11-24T21:23:03.9061595Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:561: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9063516Z     nodes: List[Dict[str, Any]] = Field(..., min_items=1, max_items=1000)
2025-11-24T21:23:03.9063898Z 
2025-11-24T21:23:03.9064073Z apps/memory_api/models/graph_enhanced_models.py:561
2025-11-24T21:23:03.9065933Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:561: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9068221Z     nodes: List[Dict[str, Any]] = Field(..., min_items=1, max_items=1000)
2025-11-24T21:23:03.9068587Z 
2025-11-24T21:23:03.9068763Z apps/memory_api/models/graph_enhanced_models.py:569
2025-11-24T21:23:03.9070618Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:569: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9072593Z     edges: List[CreateGraphEdgeRequest] = Field(..., min_items=1, max_items=1000)
2025-11-24T21:23:03.9073044Z 
2025-11-24T21:23:03.9073237Z apps/memory_api/models/graph_enhanced_models.py:569
2025-11-24T21:23:03.9075136Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:569: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:03.9077138Z     edges: List[CreateGraphEdgeRequest] = Field(..., min_items=1, max_items=1000)
2025-11-24T21:23:03.9077726Z 
2025-11-24T21:23:03.9077892Z apps/memory_api/models/reflection_models.py:97
2025-11-24T21:23:03.9079886Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/reflection_models.py:97: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:04.6959381Z     class ReflectionUnit(BaseModel):
2025-11-24T21:23:04.6960206Z 
2025-11-24T21:23:04.6965822Z apps/memory_api/models/reflection_models.py:184
2025-11-24T21:23:04.6969066Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/reflection_models.py:184: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:04.6972197Z     class ReflectionRelationship(BaseModel):
2025-11-24T21:23:04.6972669Z 
2025-11-24T21:23:04.6976305Z apps/memory_api/models/reflection_models.py:227
2025-11-24T21:23:04.6980092Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/reflection_models.py:227: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:04.7000398Z     class ReflectionCluster(BaseModel):
2025-11-24T21:23:04.7000785Z 
2025-11-24T21:23:04.7001012Z apps/memory_api/models/reflection_models.py:450
2025-11-24T21:23:04.7002947Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/reflection_models.py:450: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:04.7004868Z     class ReflectionUsageLog(BaseModel):
2025-11-24T21:23:04.7005142Z 
2025-11-24T21:23:04.7005310Z apps/memory_api/tests/test_phase2_plugins.py:19
2025-11-24T21:23:04.7006872Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/tests/test_phase2_plugins.py:19: PytestCollectionWarning: cannot collect test class 'TestPlugin' because it has a __init__ constructor (from: apps/memory_api/tests/test_phase2_plugins.py)
2025-11-24T21:23:04.7008664Z     class TestPlugin(Plugin):
2025-11-24T21:23:04.7008898Z 
2025-11-24T21:23:04.7009193Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
2025-11-24T21:23:04.7010118Z [36m[1m=========================== short test summary info ============================[0m
2025-11-24T21:23:04.7011114Z [31mERROR[0m apps/memory_api/tests/test_openapi.py
2025-11-24T21:23:04.7011634Z !!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
2025-11-24T21:23:04.7012505Z [31m================== [33m7 skipped[0m, [33m20 warnings[0m, [31m[1m1 error[0m[31m in 13.85s[0m[31m ===================[0m
2025-11-24T21:23:05.4921891Z ##[error]Process completed with exit code 2.
