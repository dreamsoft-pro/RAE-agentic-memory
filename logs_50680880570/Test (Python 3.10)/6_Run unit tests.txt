2025-11-24T21:22:54.9269554Z ##[group]Run pytest -m "not integration" --cov --cov-report=xml --cov-report=term
2025-11-24T21:22:54.9270151Z [36;1mpytest -m "not integration" --cov --cov-report=xml --cov-report=term[0m
2025-11-24T21:22:54.9303271Z shell: /usr/bin/bash -e {0}
2025-11-24T21:22:54.9303506Z env:
2025-11-24T21:22:54.9303749Z   pythonLocation: /opt/hostedtoolcache/Python/3.10.19/x64
2025-11-24T21:22:54.9304166Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.10.19/x64/lib/pkgconfig
2025-11-24T21:22:54.9304583Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2025-11-24T21:22:54.9304925Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2025-11-24T21:22:54.9305276Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.10.19/x64
2025-11-24T21:22:54.9305616Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.10.19/x64/lib
2025-11-24T21:22:54.9306216Z   DATABASE_URL: ***localhost:5432/test_rae
2025-11-24T21:22:54.9306493Z   REDIS_URL: redis://localhost:6379/0
2025-11-24T21:22:54.9306755Z   QDRANT_URL: http://localhost:6333
2025-11-24T21:22:54.9307032Z   RAE_VECTOR_BACKEND: qdrant
2025-11-24T21:22:54.9307242Z ##[endgroup]
2025-11-24T21:22:55.8249683Z [1m============================= test session starts ==============================[0m
2025-11-24T21:22:55.8250644Z platform linux -- Python 3.10.19, pytest-9.0.1, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.10.19/x64/bin/python
2025-11-24T21:22:55.8251430Z cachedir: .pytest_cache
2025-11-24T21:22:55.8251969Z rootdir: /home/runner/work/RAE-agentic-memory/RAE-agentic-memory
2025-11-24T21:22:55.8252518Z configfile: pytest.ini
2025-11-24T21:22:55.8253168Z testpaths: apps/memory_api/tests, sdk/python/rae_memory_sdk/tests, integrations/mcp-server/tests
2025-11-24T21:22:55.8254005Z plugins: anyio-4.11.0, cov-7.0.0, asyncio-1.3.0, mock-3.15.1
2025-11-24T21:22:55.8254894Z asyncio: mode=auto, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
2025-11-24T21:23:06.1913591Z [1mcollecting ... [0mcollected 176 items / 1 error / 7 skipped
2025-11-24T21:23:06.1915328Z 
2025-11-24T21:23:06.1915700Z ==================================== ERRORS ====================================
2025-11-24T21:23:06.1917007Z [31m[1m____________ ERROR collecting apps/memory_api/tests/test_openapi.py ____________[0m
2025-11-24T21:23:06.1922779Z [31mImportError while importing test module '/home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/tests/test_openapi.py'.
2025-11-24T21:23:06.1930447Z Hint: make sure your test modules/packages have valid Python names.
2025-11-24T21:23:06.1931001Z Traceback:
2025-11-24T21:23:06.1931645Z /opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/importlib/__init__.py:126: in import_module
2025-11-24T21:23:06.1932468Z     return _bootstrap._gcd_import(name[level:], package, level)
2025-11-24T21:23:06.1933039Z apps/memory_api/tests/test_openapi.py:3: in <module>
2025-11-24T21:23:06.1933508Z     from apps.memory_api.main import app
2025-11-24T21:23:06.1933931Z apps/memory_api/main.py:23: in <module>
2025-11-24T21:23:06.1934337Z     from apps.memory_api.routes import (
2025-11-24T21:23:06.1934795Z apps/memory_api/routes/reflections.py:31: in <module>
2025-11-24T21:23:06.1935428Z     from apps.memory_api.services.reflection_pipeline import ReflectionPipeline
2025-11-24T21:23:06.1936144Z apps/memory_api/services/reflection_pipeline.py:20: in <module>
2025-11-24T21:23:06.1936662Z     from sklearn.cluster import HDBSCAN, KMeans
2025-11-24T21:23:06.1937577Z E   ModuleNotFoundError: No module named 'sklearn'[0m
2025-11-24T21:23:06.1938204Z [33m=============================== warnings summary ===============================[0m
2025-11-24T21:23:06.1939203Z ../../../../../opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/starlette/formparsers.py:12
2025-11-24T21:23:06.1940641Z   /opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/starlette/formparsers.py:12: PendingDeprecationWarning: Please use `import python_multipart` instead.
2025-11-24T21:23:06.1941757Z     import multipart
2025-11-24T21:23:06.1942204Z 
2025-11-24T21:23:06.1942758Z ../../../../../opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/google/api_core/_python_version_support.py:266
2025-11-24T21:23:06.1945300Z   /opt/hostedtoolcache/Python/3.10.19/x64/lib/python3.10/site-packages/google/api_core/_python_version_support.py:266: FutureWarning: You are using a Python version (3.10.19) which Google will stop supporting in new releases of google.api_core once it reaches its end of life (2026-10-04). Please upgrade to the latest Python version, or at least Python 3.11, to continue receiving updates for google.api_core past that date.
2025-11-24T21:23:06.1947481Z     warnings.warn(message, FutureWarning)
2025-11-24T21:23:06.1947744Z 
2025-11-24T21:23:06.1947910Z apps/memory_api/models/evaluation_models.py:478
2025-11-24T21:23:06.1949960Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/evaluation_models.py:478: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1952078Z     variants: List[ABTestVariant] = Field(..., min_items=2, max_items=10)
2025-11-24T21:23:06.1952480Z 
2025-11-24T21:23:06.1952652Z apps/memory_api/models/evaluation_models.py:478
2025-11-24T21:23:06.1954492Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/evaluation_models.py:478: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1956454Z     variants: List[ABTestVariant] = Field(..., min_items=2, max_items=10)
2025-11-24T21:23:06.1956852Z 
2025-11-24T21:23:06.1957024Z apps/memory_api/models/evaluation_models.py:529
2025-11-24T21:23:06.1959049Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/evaluation_models.py:529: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1960912Z     queries: List[str] = Field(..., min_items=1)
2025-11-24T21:23:06.1961195Z 
2025-11-24T21:23:06.1961372Z apps/memory_api/models/evaluation_models.py:530
2025-11-24T21:23:06.1963266Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/evaluation_models.py:530: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1976675Z     relevance_judgments: List[RelevanceJudgment] = Field(..., min_items=1)
2025-11-24T21:23:06.1977163Z 
2025-11-24T21:23:06.1977415Z apps/memory_api/repositories/cost_logs_repository.py:30
2025-11-24T21:23:06.1979613Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/repositories/cost_logs_repository.py:30: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1981574Z     class LLMCallLog(BaseModel):
2025-11-24T21:23:06.1982040Z 
2025-11-24T21:23:06.1982220Z apps/memory_api/services/budget_service.py:23
2025-11-24T21:23:06.1984149Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/services/budget_service.py:23: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1986021Z     class Budget(BaseModel):
2025-11-24T21:23:06.1986238Z 
2025-11-24T21:23:06.1986642Z apps/memory_api/models/graph_enhanced_models.py:47
2025-11-24T21:23:06.1988616Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:47: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1990720Z     class EnhancedGraphNode(BaseModel):
2025-11-24T21:23:06.1990987Z 
2025-11-24T21:23:06.1991170Z apps/memory_api/models/graph_enhanced_models.py:79
2025-11-24T21:23:06.1993073Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:79: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1994945Z     class EnhancedGraphEdge(BaseModel):
2025-11-24T21:23:06.1995216Z 
2025-11-24T21:23:06.1995403Z apps/memory_api/models/graph_enhanced_models.py:171
2025-11-24T21:23:06.1997347Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:171: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.1999379Z     class GraphSnapshot(BaseModel):
2025-11-24T21:23:06.1999625Z 
2025-11-24T21:23:06.1999809Z apps/memory_api/models/graph_enhanced_models.py:211
2025-11-24T21:23:06.2001740Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:211: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.2003619Z     class GraphTraversal(BaseModel):
2025-11-24T21:23:06.2003871Z 
2025-11-24T21:23:06.2004051Z apps/memory_api/models/graph_enhanced_models.py:561
2025-11-24T21:23:06.2005916Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:561: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.2007882Z     nodes: List[Dict[str, Any]] = Field(..., min_items=1, max_items=1000)
2025-11-24T21:23:06.2008261Z 
2025-11-24T21:23:06.2008438Z apps/memory_api/models/graph_enhanced_models.py:561
2025-11-24T21:23:06.2010474Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:561: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.2012449Z     nodes: List[Dict[str, Any]] = Field(..., min_items=1, max_items=1000)
2025-11-24T21:23:06.2012833Z 
2025-11-24T21:23:06.2013019Z apps/memory_api/models/graph_enhanced_models.py:569
2025-11-24T21:23:06.2014923Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:569: PydanticDeprecatedSince20: `min_items` is deprecated and will be removed, use `min_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:06.2017111Z     edges: List[CreateGraphEdgeRequest] = Field(..., min_items=1, max_items=1000)
2025-11-24T21:23:06.2017541Z 
2025-11-24T21:23:06.2017712Z apps/memory_api/models/graph_enhanced_models.py:569
2025-11-24T21:23:07.1602850Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/graph_enhanced_models.py:569: PydanticDeprecatedSince20: `max_items` is deprecated and will be removed, use `max_length` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:07.1605752Z     edges: List[CreateGraphEdgeRequest] = Field(..., min_items=1, max_items=1000)
2025-11-24T21:23:07.1606280Z 
2025-11-24T21:23:07.1606509Z apps/memory_api/models/reflection_models.py:97
2025-11-24T21:23:07.1608653Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/reflection_models.py:97: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:07.1610818Z     class ReflectionUnit(BaseModel):
2025-11-24T21:23:07.1611105Z 
2025-11-24T21:23:07.1611281Z apps/memory_api/models/reflection_models.py:184
2025-11-24T21:23:07.1613275Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/reflection_models.py:184: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:07.1615201Z     class ReflectionRelationship(BaseModel):
2025-11-24T21:23:07.1615501Z 
2025-11-24T21:23:07.1615673Z apps/memory_api/models/reflection_models.py:227
2025-11-24T21:23:07.1617589Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/reflection_models.py:227: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:07.1669794Z     class ReflectionCluster(BaseModel):
2025-11-24T21:23:07.1670126Z 
2025-11-24T21:23:07.1670318Z apps/memory_api/models/reflection_models.py:450
2025-11-24T21:23:07.1672272Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/models/reflection_models.py:450: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
2025-11-24T21:23:07.1674166Z     class ReflectionUsageLog(BaseModel):
2025-11-24T21:23:07.1674458Z 
2025-11-24T21:23:07.1674626Z apps/memory_api/tests/test_phase2_plugins.py:19
2025-11-24T21:23:07.1676188Z   /home/runner/work/RAE-agentic-memory/RAE-agentic-memory/apps/memory_api/tests/test_phase2_plugins.py:19: PytestCollectionWarning: cannot collect test class 'TestPlugin' because it has a __init__ constructor (from: apps/memory_api/tests/test_phase2_plugins.py)
2025-11-24T21:23:07.1677711Z     class TestPlugin(Plugin):
2025-11-24T21:23:07.1677937Z 
2025-11-24T21:23:07.1678256Z -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
2025-11-24T21:23:07.1679341Z [36m[1m=========================== short test summary info ============================[0m
2025-11-24T21:23:07.1680005Z [31mERROR[0m apps/memory_api/tests/test_openapi.py
2025-11-24T21:23:07.1680544Z !!!!!!!!!!!!!!!!!!!! Interrupted: 1 error during collection !!!!!!!!!!!!!!!!!!!!
2025-11-24T21:23:07.1681421Z [31m================== [33m7 skipped[0m, [33m21 warnings[0m, [31m[1m1 error[0m[31m in 10.37s[0m[31m ===================[0m
2025-11-24T21:23:08.0830196Z ##[error]The operation was canceled.
