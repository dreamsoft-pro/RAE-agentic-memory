{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:6-16:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.filters","name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["NotificationProvider"],"antiPatterns":[],"text":"angular.module('dpClient.helpers', ['ui-notification']) .config(function(NotificationProvider) {\n        NotificationProvider.setOptions({\n            startTop: 50,\n            startRight: 10,\n            verticalSpacing: 20,\n            horizontalSpacing: 20,\n            positionX: 'right',\n            positionY: 'top',\n            additionalClasses: 'my-notification-class'\n        });\n    });","start":6,"end":16,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["angular.module","NotificationProvider.setOptions"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:810-869:factory:metaTags","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"metaTags","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('metaTags', function ($q, $http, $config) {\n    return {\n        getRoute : function (path) {\n            var def = $q.defer();\n            $http({\n                url: $config.API_URL + 'routes/getRouteByUrl',\n                method: 'PATCH',\n                data:{url : path}\n            }).then(function (res) {\n                def.resolve(res.data)\n            }, function (err) {\n                def.reject(new Error(err));\n            });\n            return def.promise;\n        },\n        getByGroup: function (groupUrl, categoryUrl) {\n            var def = $q.defer();\n\n            $http({\n                url: $config.API_URL + 'dp_metaTags' + '?type=' + 'group' + '&' + 'itemUrl=' + groupUrl + '&categoryUrl=' + categoryUrl,\n                method: 'GET'\n            }).then(function (res) {\n                def.resolve(res.data)\n            }, function (err) {\n                def.reject(new Error(err));\n            });\n\n            return def.promise;\n        },\n        getByType: function (typeUrl, categoryUrl) {\n            var def = $q.defer();\n\n            $http({\n                url: $config.API_URL + 'dp_metaTags' + '?type=' + 'type' + '&' + 'itemUrl=' + typeUrl + '&categoryUrl=' + categoryUrl,\n                method: 'GET'\n            }).then(function (res) {\n                def.resolve(res.data)\n            }, function (err) {\n                def.reject(new Error(err));\n            });\n\n            return def.promise;\n        },\n        getByCategory: function (categoryUrl) {\n\n            var def = $q.defer();\n\n            $http({\n                url: $config.API_URL + 'dp_metaTags' + '?type=' + 'category' + '&' + 'itemUrl=' + categoryUrl,\n                method: 'GET'\n            }).then(function (res) {\n                def.resolve(res.data)\n            }, function (err) {\n                def.reject(new Error(err));\n            });\n\n            return def.promise;\n        }\n    };\n});","start":810,"end":869,"route":null,"symbol":"metaTags","metadata":{"calls_functions":["$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/getRouteByUrl","method":"PATCH","dataKeys":["url"],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_metaTags?type=group&itemUrl=${{node.name}}&categoryUrl=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_metaTags?type=type&itemUrl=${{node.name}}&categoryUrl=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_metaTags?type=category&itemUrl=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:799-809:factory:socket","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"socket","kind":"service","nodeType":"Function","dependenciesDI":["socketFactory","$config"],"antiPatterns":[],"text":"    .factory('socket', function (socketFactory, $config) {\n    var myIoSocket = io.connect($config.SOCKET_URL, {secure: true});\n\n    var mySocket = socketFactory({\n        prefix: '',\n        ioSocket: myIoSocket\n    });\n\n    mySocket.forward('error');\n    return mySocket;\n})","start":799,"end":809,"route":null,"symbol":"socket","metadata":{"calls_functions":["io.connect","socketFactory","mySocket.forward"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:790-798:factory:readExpiryTimeInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"readExpiryTimeInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q"],"antiPatterns":[],"text":"    .factory('readExpiryTimeInterceptor', function ($q) {\n    return {\n        response: function (response) {\n            if (response.headers()['x-http-method-override']) {\n                console.log('ok');\n            }\n        }\n    }\n})","start":790,"end":798,"route":null,"symbol":"readExpiryTimeInterceptor","metadata":{"calls_functions":["response.headers","console.log"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:774-789:factory:responseErrorInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"responseErrorInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$injector","$timeout"],"antiPatterns":[],"text":"    .factory('responseErrorInterceptor', function ($q, $injector, $timeout) {\n        return {\n            responseError: function (response) {\n\n                if (response.status == 0 || response.status == 408 || response.status > 500) {\n                    var $http = $injector.get('$http');\n                    return $timeout(function () {\n                        return $http(response.config);\n                    }, 3000, false);\n                } else {\n                    return $q.reject(response);\n                }\n\n            }\n        }\n    })","start":774,"end":789,"route":null,"symbol":"responseErrorInterceptor","metadata":{"calls_functions":["$injector.get","$timeout","$http","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:764-773:factory:catchMailErrorInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"catchMailErrorInterceptor","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .factory('catchMailErrorInterceptor', function () {\n        return {\n            response: function (response) {\n                if (response.data.mailInfo && response.data.mailInfo.error) {\n                    console.log('Mail Error: ' + response.data.mailInfo.error);\n                }\n                return response;\n            }\n        }\n    })","start":764,"end":773,"route":null,"symbol":"catchMailErrorInterceptor","metadata":{"calls_functions":["console.log"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:742-763:factory:loadingInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"loadingInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","LoadingService"],"antiPatterns":[],"text":"    .factory('loadingInterceptor', function ($q, $rootScope, LoadingService) {\n        return {\n            request: function (config) {\n                LoadingService.requested();\n                config.requestTimestamp = new Date().getTime();\n                $rootScope.$broadcast('loading:start');\n                return config;\n            },\n            response: function (response) {\n                LoadingService.responsed(response.status);\n                $rootScope.$broadcast('loading:finish');\n                return response;\n            },\n            responseError: function (rejection) {\n\n                LoadingService.responsed(rejection.status);\n\n                $rootScope.$broadcast('loading:finish');\n                return $q.reject(rejection);\n            }\n        }\n    })","start":742,"end":763,"route":null,"symbol":"loadingInterceptor","metadata":{"calls_functions":["LoadingService.requested","$rootScope.$broadcast","LoadingService.responsed","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":3},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:640-741:factory:authInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"authInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$location","AuthDataService","TokenService","$cookieStore","$cookies","localStorageService","$rootScope","$injector","$config","$langStorage"],"antiPatterns":[],"text":"    .factory('authInterceptor', function ($q,\n                                          $location,\n                                          AuthDataService,\n                                          TokenService,\n                                          $cookieStore,\n                                          $cookies,\n                                          localStorageService,\n                                          $rootScope,\n                                          $injector,\n                                          $config,\n                                          $langStorage) {\n        return {\n            request: function (config) {\n\n                config.headers = config.headers || {};\n\n                config.headers.domainID = $rootScope.domainID;\n\n                var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n                config.headers.lang = $langStorage.getLangCode();\n\n                if (AuthDataService.getAccessToken()) {\n                    config.headers[accessTokenName] = AuthDataService.getAccessToken();\n                }\n\n                if (!angular.isDefined($rootScope.user)) {\n                    $rootScope.user = {};\n\n                    TokenService.check().then(\n\n                        function (data) {\n\n                            if (data.loggedOut == true) {\n                                $rootScope.logged = false;\n                                AuthDataService.destroyUserData();\n                                TokenService.getNonUserToken().then(function (data) {\n                                    AuthDataService.setAccessToken(data.token);\n                                    config.headers[accessTokenName] = AuthDataService.getAccessToken();\n                                });\n                            } else if (_.isObject(data.user)) {\n                                $rootScope.logged = true;\n                                $rootScope.user = data.user;\n                                $rootScope.orderID = data.orderID;\n                                $rootScope.oneTimeUser = data.user.onetime;\n                                // $rootScope.carts = data.carts;\n                                $rootScope.$emit('cartRequired', true)\n                            } else {\n                                $rootScope.logged = false;\n                            }\n\n                        },\n                        // fail\n                        function (data) {\n\n                         // AuthDataService.checkLogedInOutsideServices();\n\n                            $rootScope.logged = false;\n\n                            if (angular.isDefined(data['noLogin']) && data['noLogin'] == true) {\n                                TokenService.getFromCart().then(function (dataCarts) {\n                                    // $rootScope.carts = dataCarts.carts;\n                                    $rootScope.$emit('cartRequired',true);\n                                    $rootScope.orderID = dataCarts.orderID;\n                                });\n                                AuthDataService.setAccessToken(data.token);\n                            } else {\n                                TokenService.getNonUserToken().then(function (data) {\n                                    AuthDataService.setAccessToken(data.token);\n                                    config.headers[accessTokenName] = AuthDataService.getAccessToken();\n                                });\n                            }\n\n                        });\n\n                }\n\n                config.headers.sourceApp = 'client';\n\n                return config;\n            },\n            responseError: function (rejection) {\n                if (rejection.status === 403) {\n                    var Notification = $injector.get('Notification');\n                    var $filter = $injector.get('$filter');\n                    Notification.info($filter('translate')('you_are_loggedout'));\n                    var $state = $injector.get('$state');\n                    var $stateParams = $injector.get('$stateParams');\n                    var $rootScope = $injector.get('$rootScope');\n                    if( $state.current.name !== 'login' ) {\n                        $rootScope.startPoint = {\n                            'state': $state.current.name,\n                            'params': $stateParams\n                        };\n                    }\n\n                    $state.go('login');\n                }\n                return $q.reject(rejection);\n            }\n        };\n    })","start":640,"end":741,"route":null,"symbol":"authInterceptor","metadata":{"calls_functions":["$langStorage.getLangCode","AuthDataService.getAccessToken","angular.isDefined","TokenService.check","AuthDataService.destroyUserData","TokenService.getNonUserToken","AuthDataService.setAccessToken","_.isObject","$rootScope.$emit","TokenService.getFromCart","$injector.get","Notification.info","$filter","$state.go","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":2,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:516-638:factory:routes","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"routes","kind":"service","nodeType":"Function","dependenciesDI":["$http","$config","$q","$rootScope","$cookieStore"],"antiPatterns":[],"text":"    .factory('routes', function ($http, $config, $q, $rootScope, $cookieStore) {\n        return {\n            getAll: function () {\n\n                var def = $q.defer();\n\n                $http({\n                    url: $config.API_URL + ['routes', 'show'].join('/'),\n                    method: 'GET'\n                }).then(function successCallback(response) {\n                    def.resolve(response);\n                }, function errorCallback(response) {\n                    def.reject(response);\n                });\n                return def.promise;\n            },\n            setAll: function () {\n                var def = $q.defer();\n\n                var defaultLang = $cookieStore.get('lang') ? $cookieStore.get('lang') : getLangCode();\n\n                var actDate = new Date();\n                var dateStr = actDate.getHours() + actDate.getMinutes() + actDate.getSeconds();\n\n                var state;\n\n                var counter = 0;\n                //this.getAll().then(function (res) {\n\n                    _.each($rootScope.routes, function (value, index) {\n\n                        if (value.abstract == 1) {\n                            value.abstract = true;\n                        } else {\n                            value.abstract = false;\n                        }\n\n                        if (value.langs && angular.isDefined(value.langs[defaultLang]) && value.langs[defaultLang].url != null) {\n\n                            state = {\n                                \"name\": value.name,\n                                \"url\": value.langs[defaultLang].url,\n                                \"parent\": value.parent,\n                                \"abstract\": value.abstract,\n                                \"views\": {},\n                                \"ncyBreadcrumb\": {\n                                    \"label\": value.langs[defaultLang].name\n                                }\n                            };\n                        } else {\n\n                            state = {\n                                \"name\": value.name,\n                                \"parent\": value.parent,\n                                \"abstract\": value.abstract,\n                                \"views\": {},\n                                \"ncyBreadcrumb\": {\n                                    \"skip\": true\n                                }\n                            };\n\n                        }\n\n                        if (angular.isDefined(value.controller) && value.controller != null) {\n                            state.controller = value.controller;\n                        }\n\n                        if (value.abstract === true && value.name == 'main') {\n                            var actTemplate = value.views.pop();\n\n                            state.templateUrl = actTemplate.template.url + '?ver=' + dateStr;\n\n                            delete state.views;\n\n                        } else if (value.route === true) {\n\n                            delete state.views;\n\n                        } else {\n\n                            angular.forEach(value.views, function (view) {\n\n                                if (view.template) {\n\n                                    //$templateCache.get()\n\n                                    console.log( view.template );\n\n                                    state.views[view.name] = {\n                                        templateUrl: view.template.url + '?ver=' + dateStr,\n                                        controller: view.controller\n                                    };\n                                }\n\n                            });\n\n                        }\n\n                        $stateProviderRef.state(value.name, state);\n\n                        counter++;\n                        if (counter == res.data.length) {\n                            def.resolve(true);\n                        }\n\n                    });\n                //});\n\n                return def.promise;\n            },\n            findOne: function (name) {\n                var def = $q.defer();\n\n                _.each($rootScope.routes, function (each) {\n                    if (each.name === name) {\n                        def.resolve(each);\n                    }\n                });\n\n                return def.promise;\n            }\n        };\n    })","start":516,"end":638,"route":null,"symbol":"routes","metadata":{"calls_functions":["$q.defer","$http","def.resolve","def.reject","$cookieStore.get","getLangCode","actDate.getHours","actDate.getMinutes","actDate.getSeconds","_.each","angular.isDefined","value.views.pop","angular.forEach","console.log","$stateProviderRef.state"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/show","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:495-515:factory:translateRouting","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"translateRouting","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","$http","$config"],"antiPatterns":[],"text":"    .factory('translateRouting', function ($q, $rootScope, $http, $config) {\n        return {\n            request: function (actualState, stateParams, lang) {\n\n                var def = $q.defer();\n                var params=stateParams;\n                params.lang=lang;\n                $http({\n                    url: $config.API_URL + ['routes', 'translateState', actualState].join('/'),\n                    method: 'GET',\n                    params: params\n                }).then(function (res) {\n                    def.resolve(res.data)\n                }, function (err) {\n                    def.reject(new Error(err));\n                });\n\n                return def.promise;\n            }\n        };\n    })","start":495,"end":515,"route":null,"symbol":"translateRouting","metadata":{"calls_functions":["$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/translateState/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":["..."]}],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:476-494:factory:getDomains","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"getDomains","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('getDomains', function ($q, $http, $config) {\n        return {\n            request: function () {\n\n                var def = $q.defer();\n\n                $http({\n                    url: $config.API_URL + ['domains'].join('/'),\n                    method: 'GET'\n                }).then(function (res) {\n                    def.resolve(res.data)\n                }, function (err) {\n                    def.reject(new Error(err));\n                });\n\n                return def.promise;\n            }\n        };\n    })","start":476,"end":494,"route":null,"symbol":"getDomains","metadata":{"calls_functions":["$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}domains","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:464-475:factory:httpMethodOverride","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"httpMethodOverride","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .factory('httpMethodOverride', function () {\n        return {\n            'request': function (config) {\n                if (config.method === 'PUT' || config.method === 'PATCH') {\n                    config.headers['x-http-method-override'] = config.method.toLowerCase();\n                    config.method = 'POST';\n                }\n                return config;\n            }\n\n        };\n    })","start":464,"end":475,"route":null,"symbol":"httpMethodOverride","metadata":{"calls_functions":["config.method.toLowerCase"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:68-173:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$configProvider","$locationProvider","$urlRouterProvider","$stateProvider","RestangularProvider","localStorageServiceProvider","ApiCollectionProvider","$breadcrumbProvider","$httpProvider","$provide"],"antiPatterns":[],"text":"    .config(function ($configProvider, $locationProvider, $urlRouterProvider, $stateProvider, RestangularProvider,\n                      localStorageServiceProvider, ApiCollectionProvider, $breadcrumbProvider, $httpProvider, $provide) {\n\n        function $LangStorageProvider() {\n            return {\n                $get: function () {\n                    return this\n                },\n                getLangCode: getLangCode\n            }\n        }\n        var reg=$provide.provider('$langStorage',$LangStorageProvider);\n        $urlRouterProviderRef = $urlRouterProvider;\n        $stateProviderRef = $stateProvider;\n        $locationProvider.html5Mode(true);\n        $urlRouterProvider.deferIntercept();\n\n        var mainURL = 'REPLACE_API_URL';\n        var staticUrlTmp = '';\n\n\n        if (mainURL === 'REPLACE_API_URL') {\n            $configProvider.set('API_URL', 'http://localtest.me/api/');\n            $configProvider.set('API_URL_EDITOR', 'http://editor.localtest.me/api/');\n            RestangularProvider.setBaseUrl('http://localtest.me/api/');\n            $configProvider.set('AUTH_URL', 'http://authapp.localtest.me/');\n            $configProvider.set('STATIC_URL', 'http://localtest.me/static/');\n            staticUrlTmp = 'http://localtest.me/static/';\n            $configProvider.set('SOCKET_URL', 'http://authapp.localtest.me');\n            $configProvider.set('EDITOR_URL', 'http://editor.localtest.me');\n        } else {\n            $configProvider.set('API_URL', mainURL);\n            RestangularProvider.setBaseUrl(mainURL);\n            $configProvider.set('API_URL_EDITOR', 'REPLACE_API_URL_EDITOR');\n            $configProvider.set('AUTH_URL', 'REPLACE_AUTH_URL');\n            $configProvider.set('STATIC_URL', 'REPLACE_STATIC_URL');\n            staticUrlTmp = 'REPLACE_STATIC_URL';\n            $configProvider.set('SOCKET_URL', 'REPLACE_SOCKET_URL');\n            $configProvider.set('EDITOR_URL', 'REPLACE_EDITOR_URL'+'indexu.html');\n        }\n\n        $configProvider.set('ACCESS_TOKEN_NAME', 'access-token');\n\n        RestangularProvider.setMethodOverriders(['put', 'patch']);\n\n        localStorageServiceProvider.setPrefix('digitalprint');\n\n        $breadcrumbProvider.setOptions({\n            includeAbstract: false,\n            template: '<ol class=\"breadcrumb\">\\n' +\n                '    <li ng-repeat=\"step in steps\" ng-class=\"{active: $last}\" ng-switch=\"$last || !!step.abstract\">\\n' +\n                '        <a ng-switch-when=\"false\" href=\"{{step.ncyBreadcrumbLink}}\">\\n' +\n                '            <span ng-if=\"!($root.customBreadcrumbs[step.name] && $root.customBreadcrumbs[step.name] !== step.name)\">\\n' +\n                '                {{step.ncyBreadcrumbLabel}}\\n' +\n                '            </span>\\n' +\n                '            <span ng-if=\"$root.customBreadcrumbs[step.name] && $root.customBreadcrumbs[step.name] !== step.name\">\\n' +\n                '                {{ $root.customBreadcrumbs[step.name] }}\\n' +\n                '            </span>\\n' +\n                '        </a>\\n' +\n                '        <span ng-switch-when=\"true\">\\n' +\n                '            <span ng-if=\"!($root.customBreadcrumbs[step.name] && $root.customBreadcrumbs[step.name] !== step.name)\">\\n' +\n                '                {{step.ncyBreadcrumbLabel}}\\n' +\n                '            </span>\\n' +\n                '            <span ng-if=\"$root.customBreadcrumbs[step.name] && $root.customBreadcrumbs[step.name] !== step.name\">\\n' +\n                '                {{ $root.customBreadcrumbs[step.name] }}\\n' +\n                '            </span>\\n' +\n                '        </span>\\n' +\n                '    </li>\\n' +\n                '</ol>'\n        });\n\n        $httpProvider.interceptors.push('authInterceptor');\n        $httpProvider.interceptors.push('httpMethodOverride');\n        $httpProvider.interceptors.push('loadingInterceptor');\n        $httpProvider.interceptors.push('catchMailErrorInterceptor');\n        $httpProvider.interceptors.push('responseErrorInterceptor');\n\n        var blankPage = {\n            abstract: false,\n            templateUrl: staticUrlTmp + 'templates/default/120/404.html',\n            name: 'blankPage',\n            url: '/404',\n            controller: function ($scope) {\n                $scope.lang = getLangCode()\n            }\n        };\n        $stateProvider.state(blankPage);\n        if (window.location.pathname !== '/') {\n            $urlRouterProvider.otherwise(function ($injector, $location) {\n                console.error('Invalid url', $location.path())\n                return '/404';\n            })\n        } else {\n            $urlRouterProvider.otherwise(function ($injector, $location) {\n                console.error('Invalid url', $location.path())\n                return '/'+getLangCode();\n            });\n        }\n        ;\n        var routesContainer = JSON.parse(globalRoutes);\n        var currentLang=getLangCode();\n        _.each(routesContainer[currentLang], function (route) {\n            $stateProvider.state(route);\n        });\n\n    })","start":68,"end":173,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["angular.module","$provide.provider","$locationProvider.html5Mode","$urlRouterProvider.deferIntercept","$configProvider.set","RestangularProvider.setBaseUrl","RestangularProvider.setMethodOverriders","localStorageServiceProvider.setPrefix","$breadcrumbProvider.setOptions","$httpProvider.interceptors.push","getLangCode","$stateProvider.state","$urlRouterProvider.otherwise","console.error","$location.path","JSON.parse","_.each"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:871-884:directive:myScroll","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.app","name":"myScroll","kind":"directive","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('myScroll', function () {\n    return {\n        restrict: \"A\",\n        link: function (scope, element) {\n            $(element).on('click', function () {\n\n                $('html, body').animate({\n                    scrollTop: 0\n                });\n                return false;\n            });\n        }\n    };\n});","start":871,"end":884,"route":null,"symbol":"myScroll","metadata":{"calls_functions":["angular.module","$"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:886-897:directive:initBind","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"initBind","kind":"directive","nodeType":"Function","dependenciesDI":["$compile"],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('initBind', function ($compile) {\n    return {\n        restrict: 'A',\n        link : function (scope, element, attr) {\n            attr.$observe('ngBindHtml',function(){\n                if(attr.ngBindHtml){\n                    $compile(element[0].children)(scope);\n                }\n            })\n        }\n    };\n});","start":886,"end":897,"route":null,"symbol":"initBind","metadata":{"calls_functions":["angular.module","attr.$observe","$compile"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:899-1053:directive:spinnerSlider","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"spinnerSlider","kind":"directive","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('spinnerSlider', function() {\n    return {\n        restrict: 'E',\n        scope: {\n            model: '=',      // Wartość liczbową wiążemy dwukierunkowo\n            min: '@',        // min, max, step jako stringi z atrybutów\n            max: '@',\n            step: '@',\n            onChange: '&'    // Funkcja wywoływana po zmianie wartości\n        },\n        bindToController: true,\n        controllerAs: 'ctrl',\n        template: `\n            <div class=\"input-group spincontainer\">\n                <div class=\"input-group-btn\">\n                    <button type=\"button\" class=\"btn btn-default\" ng-click=\"ctrl.decrement()\" data-dir=\"dwn\">\n                        <i class=\"fa fa-minus\"></i>\n                    </button>\n                </div>\n                <input class=\"form-control spinner-input\"\n                       type=\"number\"\n                       force-number\n                       ng-model=\"ctrl.model\"\n                       min=\"{{ctrl.min}}\"\n                       max=\"{{ctrl.max}}\"\n                       step=\"{{ctrl.step}}\"\n                       ng-init=\"ctrl.initModel()\"\n                       ng-change=\"ctrl.fixValueAndNotify()\" />\n                <div class=\"input-group-btn\">\n                    <button type=\"button\" class=\"btn btn-default\" ng-click=\"ctrl.increment()\" data-dir=\"up\">\n                        <i class=\"fa fa-plus\"></i>\n                    </button>\n                </div>\n            </div>\n\n            <div class=\"slider-container\">\n                <input class=\"form-control slider\"\n                       type=\"range\"\n                       force-number\n                       ng-model=\"ctrl.model\"\n                       min=\"{{ctrl.min}}\"\n                       max=\"{{ctrl.max}}\"\n                       step=\"{{ctrl.step}}\"\n                       ng-change=\"ctrl.fixValueAndNotify()\" />\n                <div class=\"slider-values\">\n                    <span class=\"slider-min\">Min: {{ctrl.min}}</span>\n                    <span class=\"slider-max\">Max: {{ctrl.max}}</span>\n                </div>\n            </div>\n        `,\n        controller: [ '$scope', function($scope) {\n            var vm = this;\n\n            // 1) Inicjalizacja wartości jako średniej z min i max\n            vm.initModel = function() {\n                // jeżeli model już jest przypisany przez rodzica, nie nadpisujemy go\n                // ale jeśli nie jest, ustawiamy średnią\n                if (typeof vm.model === 'undefined' || vm.model === null) {\n                    var minVal = parseFloat(vm.min) || 0;\n                    var maxVal = parseFloat(vm.max) || 100;\n                    var stepVal = parseFloat(vm.step) || 1;\n\n                    var avg = (minVal + maxVal) / 2;\n                    vm.model = roundValueToStep(avg, minVal, maxVal, stepVal);\n                } else {\n                    // jeżeli już coś jest w modelu, to zafixujemy ją w razie czego\n                    vm.fixValueAndNotify();\n                }\n            };\n\n            // 2) Funkcje do przycisków +/- (decrement/increment)\n            vm.decrement = function() {\n                var current = parseFloat(vm.model) || 0;\n                var stepVal = parseFloat(vm.step) || 1;\n                var minVal = parseFloat(vm.min) || 0;\n                var maxVal = parseFloat(vm.max) || 100;\n\n                var newVal = current - stepVal;\n                // 3) Jeżeli spadniemy poniżej minimum, ustawiamy wartość min\n                if (newVal < minVal) {\n                    newVal = minVal;\n                }\n                vm.model = newVal;\n                vm.callOnChange();\n            };\n\n            vm.increment = function() {\n                var current = parseFloat(vm.model) || 0;\n                var stepVal = parseFloat(vm.step) || 1;\n                var minVal = parseFloat(vm.min) || 0;\n                var maxVal = parseFloat(vm.max) || 100;\n\n                var newVal = current + stepVal;\n                // 4) Jeżeli przekroczymy maksimum, ustawiamy wartość max\n                if (newVal > maxVal) {\n                    newVal = maxVal;\n                }\n                vm.model = newVal;\n                vm.callOnChange();\n            };\n\n            // 5) Funkcja wywoływana przy zmianie (np. ręcznej w input, suwaku, itp.)\n            vm.fixValueAndNotify = function() {\n                var minVal = parseFloat(vm.min) || 0;\n                var maxVal = parseFloat(vm.max) || 100;\n                var stepVal = parseFloat(vm.step) || 1;\n                var current = parseFloat(vm.model) || 0;\n\n                // Zaokrąglamy zgodnie z krokiem, jeśli mieści się w min/max\n                // + wymuszamy min/max jeśli user wpisał wartości poza zakresem\n                vm.model = roundValueToStep(current, minVal, maxVal, stepVal);\n\n                vm.callOnChange();\n            };\n\n            // 6) Wywołanie callbacku, jeśli zdefiniowane\n            vm.callOnChange = function() {\n                if (typeof vm.onChange === 'function') {\n                    vm.onChange({ value: vm.model });\n                }\n            };\n\n            // Funkcja pomocnicza: zaokrągla liczbę do najbliższej wartości (wielokrotności) kroku,\n            // dbając o zakres [min, max].\n            function roundValueToStep(value, min, max, step) {\n                if (value < min) {\n                    return min;\n                }\n                if (value > max) {\n                    return max;\n                }\n                // 2) Zaokrąglamy do wielokrotności kroku\n                // Najpierw dzielimy przez step, zaokrąglamy, potem mnożymy z powrotem\n                var stepsCount = Math.round(value / step);\n                var newVal = stepsCount * step;\n\n                // Upewniamy się, że dalej mieścimy się w zakresie\n                if (newVal < min) {\n                    newVal = min;\n                }\n                if (newVal > max) {\n                    newVal = max;\n                }\n                return newVal;\n            }\n\n            // 7) Dodatkowo możesz obserwować zmiany w $scope,\n            //    jeśli chciałbyś \"na żywo\" naprawiać wartość.\n            //    Tutaj wykorzystujemy \"vm.fixValueAndNotify()\" w watchu:\n            $scope.$watch(function() { return vm.model; }, function() {\n                vm.fixValueAndNotify();\n            });\n        }]\n    };\n});","start":899,"end":1053,"route":null,"symbol":"spinnerSlider","metadata":{"calls_functions":["angular.module","parseFloat","roundValueToStep","vm.fixValueAndNotify","vm.callOnChange","vm.onChange","Math.round","$scope.$watch"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":1,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:1056-1082:directive:forceNumber","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":"dpClient.helpers","name":"forceNumber","kind":"directive","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('forceNumber', function() {\n    return {\n        restrict: 'A',\n        require: 'ngModel',\n        link: function(scope, element, attrs, ngModelCtrl) {\n            ngModelCtrl.$parsers.push(function(value) {\n                if (typeof value === 'string') {\n                    var numVal = parseFloat(value);\n                    if (!isNaN(numVal)) {\n                        return numVal;\n                    }\n                }\n                return value;\n            });\n\n            ngModelCtrl.$formatters.push(function(value) {\n                if (typeof value === 'string') {\n                    var numVal = parseFloat(value);\n                    if (!isNaN(numVal)) {\n                        return numVal;\n                    }\n                }\n                return value;\n            });\n        }\n    };\n});","start":1056,"end":1082,"route":null,"symbol":"forceNumber","metadata":{"calls_functions":["angular.module","ngModelCtrl.$parsers.push","parseFloat","isNaN","ngModelCtrl.$formatters.push"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:6-16:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.filters","name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["NotificationProvider"],"antiPatterns":[],"text":"angular.module('dpClient.helpers', ['ui-notification']) .config(function(NotificationProvider) {\n        NotificationProvider.setOptions({\n            startTop: 50,\n            startRight: 10,\n            verticalSpacing: 20,\n            horizontalSpacing: 20,\n            positionX: 'right',\n            positionY: 'top',\n            additionalClasses: 'my-notification-class'\n        });\n    });","start":6,"end":16,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["angular.module","NotificationProvider.setOptions"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:810-869:factory:metaTags","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"metaTags","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('metaTags', function ($q, $http, $config) {\n    return {\n        getRoute : function (path) {\n            var def = $q.defer();\n            $http({\n                url: $config.API_URL + 'routes/getRouteByUrl',\n                method: 'PATCH',\n                data:{url : path}\n            }).then(function (res) {\n                def.resolve(res.data)\n            }, function (err) {\n                def.reject(new Error(err));\n            });\n            return def.promise;\n        },\n        getByGroup: function (groupUrl, categoryUrl) {\n            var def = $q.defer();\n\n            $http({\n                url: $config.API_URL + 'dp_metaTags' + '?type=' + 'group' + '&' + 'itemUrl=' + groupUrl + '&categoryUrl=' + categoryUrl,\n                method: 'GET'\n            }).then(function (res) {\n                def.resolve(res.data)\n            }, function (err) {\n                def.reject(new Error(err));\n            });\n\n            return def.promise;\n        },\n        getByType: function (typeUrl, categoryUrl) {\n            var def = $q.defer();\n\n            $http({\n                url: $config.API_URL + 'dp_metaTags' + '?type=' + 'type' + '&' + 'itemUrl=' + typeUrl + '&categoryUrl=' + categoryUrl,\n                method: 'GET'\n            }).then(function (res) {\n                def.resolve(res.data)\n            }, function (err) {\n                def.reject(new Error(err));\n            });\n\n            return def.promise;\n        },\n        getByCategory: function (categoryUrl) {\n\n            var def = $q.defer();\n\n            $http({\n                url: $config.API_URL + 'dp_metaTags' + '?type=' + 'category' + '&' + 'itemUrl=' + categoryUrl,\n                method: 'GET'\n            }).then(function (res) {\n                def.resolve(res.data)\n            }, function (err) {\n                def.reject(new Error(err));\n            });\n\n            return def.promise;\n        }\n    };\n});","start":810,"end":869,"route":null,"symbol":"metaTags","metadata":{"calls_functions":["$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/getRouteByUrl","method":"PATCH","dataKeys":["url"],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_metaTags?type=group&itemUrl=${{node.name}}&categoryUrl=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_metaTags?type=type&itemUrl=${{node.name}}&categoryUrl=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_metaTags?type=category&itemUrl=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:799-809:factory:socket","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"socket","kind":"service","nodeType":"Function","dependenciesDI":["socketFactory","$config"],"antiPatterns":[],"text":"    .factory('socket', function (socketFactory, $config) {\n    var myIoSocket = io.connect($config.SOCKET_URL, {secure: true});\n\n    var mySocket = socketFactory({\n        prefix: '',\n        ioSocket: myIoSocket\n    });\n\n    mySocket.forward('error');\n    return mySocket;\n})","start":799,"end":809,"route":null,"symbol":"socket","metadata":{"calls_functions":["io.connect","socketFactory","mySocket.forward"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:790-798:factory:readExpiryTimeInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"readExpiryTimeInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q"],"antiPatterns":[],"text":"    .factory('readExpiryTimeInterceptor', function ($q) {\n    return {\n        response: function (response) {\n            if (response.headers()['x-http-method-override']) {\n                console.log('ok');\n            }\n        }\n    }\n})","start":790,"end":798,"route":null,"symbol":"readExpiryTimeInterceptor","metadata":{"calls_functions":["response.headers","console.log"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:774-789:factory:responseErrorInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"responseErrorInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$injector","$timeout"],"antiPatterns":[],"text":"    .factory('responseErrorInterceptor', function ($q, $injector, $timeout) {\n        return {\n            responseError: function (response) {\n\n                if (response.status == 0 || response.status == 408 || response.status > 500) {\n                    var $http = $injector.get('$http');\n                    return $timeout(function () {\n                        return $http(response.config);\n                    }, 3000, false);\n                } else {\n                    return $q.reject(response);\n                }\n\n            }\n        }\n    })","start":774,"end":789,"route":null,"symbol":"responseErrorInterceptor","metadata":{"calls_functions":["$injector.get","$timeout","$http","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:764-773:factory:catchMailErrorInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"catchMailErrorInterceptor","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .factory('catchMailErrorInterceptor', function () {\n        return {\n            response: function (response) {\n                if (response.data.mailInfo && response.data.mailInfo.error) {\n                    console.log('Mail Error: ' + response.data.mailInfo.error);\n                }\n                return response;\n            }\n        }\n    })","start":764,"end":773,"route":null,"symbol":"catchMailErrorInterceptor","metadata":{"calls_functions":["console.log"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:742-763:factory:loadingInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"loadingInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","LoadingService"],"antiPatterns":[],"text":"    .factory('loadingInterceptor', function ($q, $rootScope, LoadingService) {\n        return {\n            request: function (config) {\n                LoadingService.requested();\n                config.requestTimestamp = new Date().getTime();\n                $rootScope.$broadcast('loading:start');\n                return config;\n            },\n            response: function (response) {\n                LoadingService.responsed(response.status);\n                $rootScope.$broadcast('loading:finish');\n                return response;\n            },\n            responseError: function (rejection) {\n\n                LoadingService.responsed(rejection.status);\n\n                $rootScope.$broadcast('loading:finish');\n                return $q.reject(rejection);\n            }\n        }\n    })","start":742,"end":763,"route":null,"symbol":"loadingInterceptor","metadata":{"calls_functions":["LoadingService.requested","$rootScope.$broadcast","LoadingService.responsed","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":3},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:640-741:factory:authInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"authInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$location","AuthDataService","TokenService","$cookieStore","$cookies","localStorageService","$rootScope","$injector","$config","$langStorage"],"antiPatterns":[],"text":"    .factory('authInterceptor', function ($q,\n                                          $location,\n                                          AuthDataService,\n                                          TokenService,\n                                          $cookieStore,\n                                          $cookies,\n                                          localStorageService,\n                                          $rootScope,\n                                          $injector,\n                                          $config,\n                                          $langStorage) {\n        return {\n            request: function (config) {\n\n                config.headers = config.headers || {};\n\n                config.headers.domainID = $rootScope.domainID;\n\n                var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n                config.headers.lang = $langStorage.getLangCode();\n\n                if (AuthDataService.getAccessToken()) {\n                    config.headers[accessTokenName] = AuthDataService.getAccessToken();\n                }\n\n                if (!angular.isDefined($rootScope.user)) {\n                    $rootScope.user = {};\n\n                    TokenService.check().then(\n\n                        function (data) {\n\n                            if (data.loggedOut == true) {\n                                $rootScope.logged = false;\n                                AuthDataService.destroyUserData();\n                                TokenService.getNonUserToken().then(function (data) {\n                                    AuthDataService.setAccessToken(data.token);\n                                    config.headers[accessTokenName] = AuthDataService.getAccessToken();\n                                });\n                            } else if (_.isObject(data.user)) {\n                                $rootScope.logged = true;\n                                $rootScope.user = data.user;\n                                $rootScope.orderID = data.orderID;\n                                $rootScope.oneTimeUser = data.user.onetime;\n                                // $rootScope.carts = data.carts;\n                                $rootScope.$emit('cartRequired', true)\n                            } else {\n                                $rootScope.logged = false;\n                            }\n\n                        },\n                        // fail\n                        function (data) {\n\n                         // AuthDataService.checkLogedInOutsideServices();\n\n                            $rootScope.logged = false;\n\n                            if (angular.isDefined(data['noLogin']) && data['noLogin'] == true) {\n                                TokenService.getFromCart().then(function (dataCarts) {\n                                    // $rootScope.carts = dataCarts.carts;\n                                    $rootScope.$emit('cartRequired',true);\n                                    $rootScope.orderID = dataCarts.orderID;\n                                });\n                                AuthDataService.setAccessToken(data.token);\n                            } else {\n                                TokenService.getNonUserToken().then(function (data) {\n                                    AuthDataService.setAccessToken(data.token);\n                                    config.headers[accessTokenName] = AuthDataService.getAccessToken();\n                                });\n                            }\n\n                        });\n\n                }\n\n                config.headers.sourceApp = 'client';\n\n                return config;\n            },\n            responseError: function (rejection) {\n                if (rejection.status === 403) {\n                    var Notification = $injector.get('Notification');\n                    var $filter = $injector.get('$filter');\n                    Notification.info($filter('translate')('you_are_loggedout'));\n                    var $state = $injector.get('$state');\n                    var $stateParams = $injector.get('$stateParams');\n                    var $rootScope = $injector.get('$rootScope');\n                    if( $state.current.name !== 'login' ) {\n                        $rootScope.startPoint = {\n                            'state': $state.current.name,\n                            'params': $stateParams\n                        };\n                    }\n\n                    $state.go('login');\n                }\n                return $q.reject(rejection);\n            }\n        };\n    })","start":640,"end":741,"route":null,"symbol":"authInterceptor","metadata":{"calls_functions":["$langStorage.getLangCode","AuthDataService.getAccessToken","angular.isDefined","TokenService.check","AuthDataService.destroyUserData","TokenService.getNonUserToken","AuthDataService.setAccessToken","_.isObject","$rootScope.$emit","TokenService.getFromCart","$injector.get","Notification.info","$filter","$state.go","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":2,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:516-638:factory:routes","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"routes","kind":"service","nodeType":"Function","dependenciesDI":["$http","$config","$q","$rootScope","$cookieStore"],"antiPatterns":[],"text":"    .factory('routes', function ($http, $config, $q, $rootScope, $cookieStore) {\n        return {\n            getAll: function () {\n\n                var def = $q.defer();\n\n                $http({\n                    url: $config.API_URL + ['routes', 'show'].join('/'),\n                    method: 'GET'\n                }).then(function successCallback(response) {\n                    def.resolve(response);\n                }, function errorCallback(response) {\n                    def.reject(response);\n                });\n                return def.promise;\n            },\n            setAll: function () {\n                var def = $q.defer();\n\n                var defaultLang = $cookieStore.get('lang') ? $cookieStore.get('lang') : getLangCode();\n\n                var actDate = new Date();\n                var dateStr = actDate.getHours() + actDate.getMinutes() + actDate.getSeconds();\n\n                var state;\n\n                var counter = 0;\n                //this.getAll().then(function (res) {\n\n                    _.each($rootScope.routes, function (value, index) {\n\n                        if (value.abstract == 1) {\n                            value.abstract = true;\n                        } else {\n                            value.abstract = false;\n                        }\n\n                        if (value.langs && angular.isDefined(value.langs[defaultLang]) && value.langs[defaultLang].url != null) {\n\n                            state = {\n                                \"name\": value.name,\n                                \"url\": value.langs[defaultLang].url,\n                                \"parent\": value.parent,\n                                \"abstract\": value.abstract,\n                                \"views\": {},\n                                \"ncyBreadcrumb\": {\n                                    \"label\": value.langs[defaultLang].name\n                                }\n                            };\n                        } else {\n\n                            state = {\n                                \"name\": value.name,\n                                \"parent\": value.parent,\n                                \"abstract\": value.abstract,\n                                \"views\": {},\n                                \"ncyBreadcrumb\": {\n                                    \"skip\": true\n                                }\n                            };\n\n                        }\n\n                        if (angular.isDefined(value.controller) && value.controller != null) {\n                            state.controller = value.controller;\n                        }\n\n                        if (value.abstract === true && value.name == 'main') {\n                            var actTemplate = value.views.pop();\n\n                            state.templateUrl = actTemplate.template.url + '?ver=' + dateStr;\n\n                            delete state.views;\n\n                        } else if (value.route === true) {\n\n                            delete state.views;\n\n                        } else {\n\n                            angular.forEach(value.views, function (view) {\n\n                                if (view.template) {\n\n                                    //$templateCache.get()\n\n                                    console.log( view.template );\n\n                                    state.views[view.name] = {\n                                        templateUrl: view.template.url + '?ver=' + dateStr,\n                                        controller: view.controller\n                                    };\n                                }\n\n                            });\n\n                        }\n\n                        $stateProviderRef.state(value.name, state);\n\n                        counter++;\n                        if (counter == res.data.length) {\n                            def.resolve(true);\n                        }\n\n                    });\n                //});\n\n                return def.promise;\n            },\n            findOne: function (name) {\n                var def = $q.defer();\n\n                _.each($rootScope.routes, function (each) {\n                    if (each.name === name) {\n                        def.resolve(each);\n                    }\n                });\n\n                return def.promise;\n            }\n        };\n    })","start":516,"end":638,"route":null,"symbol":"routes","metadata":{"calls_functions":["$q.defer","$http","def.resolve","def.reject","$cookieStore.get","getLangCode","actDate.getHours","actDate.getMinutes","actDate.getSeconds","_.each","angular.isDefined","value.views.pop","angular.forEach","console.log","$stateProviderRef.state"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/show","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:495-515:factory:translateRouting","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"translateRouting","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","$http","$config"],"antiPatterns":[],"text":"    .factory('translateRouting', function ($q, $rootScope, $http, $config) {\n        return {\n            request: function (actualState, stateParams, lang) {\n\n                var def = $q.defer();\n                var params=stateParams;\n                params.lang=lang;\n                $http({\n                    url: $config.API_URL + ['routes', 'translateState', actualState].join('/'),\n                    method: 'GET',\n                    params: params\n                }).then(function (res) {\n                    def.resolve(res.data)\n                }, function (err) {\n                    def.reject(new Error(err));\n                });\n\n                return def.promise;\n            }\n        };\n    })","start":495,"end":515,"route":null,"symbol":"translateRouting","metadata":{"calls_functions":["$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/translateState/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":["..."]}],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:476-494:factory:getDomains","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"getDomains","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('getDomains', function ($q, $http, $config) {\n        return {\n            request: function () {\n\n                var def = $q.defer();\n\n                $http({\n                    url: $config.API_URL + ['domains'].join('/'),\n                    method: 'GET'\n                }).then(function (res) {\n                    def.resolve(res.data)\n                }, function (err) {\n                    def.reject(new Error(err));\n                });\n\n                return def.promise;\n            }\n        };\n    })","start":476,"end":494,"route":null,"symbol":"getDomains","metadata":{"calls_functions":["$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}domains","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:464-475:factory:httpMethodOverride","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"httpMethodOverride","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .factory('httpMethodOverride', function () {\n        return {\n            'request': function (config) {\n                if (config.method === 'PUT' || config.method === 'PATCH') {\n                    config.headers['x-http-method-override'] = config.method.toLowerCase();\n                    config.method = 'POST';\n                }\n                return config;\n            }\n\n        };\n    })","start":464,"end":475,"route":null,"symbol":"httpMethodOverride","metadata":{"calls_functions":["config.method.toLowerCase"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:68-173:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$configProvider","$locationProvider","$urlRouterProvider","$stateProvider","RestangularProvider","localStorageServiceProvider","ApiCollectionProvider","$breadcrumbProvider","$httpProvider","$provide"],"antiPatterns":[],"text":"    .config(function ($configProvider, $locationProvider, $urlRouterProvider, $stateProvider, RestangularProvider,\n                      localStorageServiceProvider, ApiCollectionProvider, $breadcrumbProvider, $httpProvider, $provide) {\n\n        function $LangStorageProvider() {\n            return {\n                $get: function () {\n                    return this\n                },\n                getLangCode: getLangCode\n            }\n        }\n        var reg=$provide.provider('$langStorage',$LangStorageProvider);\n        $urlRouterProviderRef = $urlRouterProvider;\n        $stateProviderRef = $stateProvider;\n        $locationProvider.html5Mode(true);\n        $urlRouterProvider.deferIntercept();\n\n        var mainURL = 'REPLACE_API_URL';\n        var staticUrlTmp = '';\n\n\n        if (mainURL === 'REPLACE_API_URL') {\n            $configProvider.set('API_URL', 'http://localtest.me/api/');\n            $configProvider.set('API_URL_EDITOR', 'http://editor.localtest.me/api/');\n            RestangularProvider.setBaseUrl('http://localtest.me/api/');\n            $configProvider.set('AUTH_URL', 'http://authapp.localtest.me/');\n            $configProvider.set('STATIC_URL', 'http://localtest.me/static/');\n            staticUrlTmp = 'http://localtest.me/static/';\n            $configProvider.set('SOCKET_URL', 'http://authapp.localtest.me');\n            $configProvider.set('EDITOR_URL', 'http://editor.localtest.me');\n        } else {\n            $configProvider.set('API_URL', mainURL);\n            RestangularProvider.setBaseUrl(mainURL);\n            $configProvider.set('API_URL_EDITOR', 'REPLACE_API_URL_EDITOR');\n            $configProvider.set('AUTH_URL', 'REPLACE_AUTH_URL');\n            $configProvider.set('STATIC_URL', 'REPLACE_STATIC_URL');\n            staticUrlTmp = 'REPLACE_STATIC_URL';\n            $configProvider.set('SOCKET_URL', 'REPLACE_SOCKET_URL');\n            $configProvider.set('EDITOR_URL', 'REPLACE_EDITOR_URL'+'indexu.html');\n        }\n\n        $configProvider.set('ACCESS_TOKEN_NAME', 'access-token');\n\n        RestangularProvider.setMethodOverriders(['put', 'patch']);\n\n        localStorageServiceProvider.setPrefix('digitalprint');\n\n        $breadcrumbProvider.setOptions({\n            includeAbstract: false,\n            template: '<ol class=\"breadcrumb\">\\n' +\n                '    <li ng-repeat=\"step in steps\" ng-class=\"{active: $last}\" ng-switch=\"$last || !!step.abstract\">\\n' +\n                '        <a ng-switch-when=\"false\" href=\"{{step.ncyBreadcrumbLink}}\">\\n' +\n                '            <span ng-if=\"!($root.customBreadcrumbs[step.name] && $root.customBreadcrumbs[step.name] !== step.name)\">\\n' +\n                '                {{step.ncyBreadcrumbLabel}}\\n' +\n                '            </span>\\n' +\n                '            <span ng-if=\"$root.customBreadcrumbs[step.name] && $root.customBreadcrumbs[step.name] !== step.name\">\\n' +\n                '                {{ $root.customBreadcrumbs[step.name] }}\\n' +\n                '            </span>\\n' +\n                '        </a>\\n' +\n                '        <span ng-switch-when=\"true\">\\n' +\n                '            <span ng-if=\"!($root.customBreadcrumbs[step.name] && $root.customBreadcrumbs[step.name] !== step.name)\">\\n' +\n                '                {{step.ncyBreadcrumbLabel}}\\n' +\n                '            </span>\\n' +\n                '            <span ng-if=\"$root.customBreadcrumbs[step.name] && $root.customBreadcrumbs[step.name] !== step.name\">\\n' +\n                '                {{ $root.customBreadcrumbs[step.name] }}\\n' +\n                '            </span>\\n' +\n                '        </span>\\n' +\n                '    </li>\\n' +\n                '</ol>'\n        });\n\n        $httpProvider.interceptors.push('authInterceptor');\n        $httpProvider.interceptors.push('httpMethodOverride');\n        $httpProvider.interceptors.push('loadingInterceptor');\n        $httpProvider.interceptors.push('catchMailErrorInterceptor');\n        $httpProvider.interceptors.push('responseErrorInterceptor');\n\n        var blankPage = {\n            abstract: false,\n            templateUrl: staticUrlTmp + 'templates/default/120/404.html',\n            name: 'blankPage',\n            url: '/404',\n            controller: function ($scope) {\n                $scope.lang = getLangCode()\n            }\n        };\n        $stateProvider.state(blankPage);\n        if (window.location.pathname !== '/') {\n            $urlRouterProvider.otherwise(function ($injector, $location) {\n                console.error('Invalid url', $location.path())\n                return '/404';\n            })\n        } else {\n            $urlRouterProvider.otherwise(function ($injector, $location) {\n                console.error('Invalid url', $location.path())\n                return '/'+getLangCode();\n            });\n        }\n        ;\n        var routesContainer = JSON.parse(globalRoutes);\n        var currentLang=getLangCode();\n        _.each(routesContainer[currentLang], function (route) {\n            $stateProvider.state(route);\n        });\n\n    })","start":68,"end":173,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["angular.module","$provide.provider","$locationProvider.html5Mode","$urlRouterProvider.deferIntercept","$configProvider.set","RestangularProvider.setBaseUrl","RestangularProvider.setMethodOverriders","localStorageServiceProvider.setPrefix","$breadcrumbProvider.setOptions","$httpProvider.interceptors.push","getLangCode","$stateProvider.state","$urlRouterProvider.otherwise","console.error","$location.path","JSON.parse","_.each"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:871-884:directive:myScroll","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.app","name":"myScroll","kind":"directive","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('myScroll', function () {\n    return {\n        restrict: \"A\",\n        link: function (scope, element) {\n            $(element).on('click', function () {\n\n                $('html, body').animate({\n                    scrollTop: 0\n                });\n                return false;\n            });\n        }\n    };\n});","start":871,"end":884,"route":null,"symbol":"myScroll","metadata":{"calls_functions":["angular.module","$"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:886-897:directive:initBind","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"initBind","kind":"directive","nodeType":"Function","dependenciesDI":["$compile"],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('initBind', function ($compile) {\n    return {\n        restrict: 'A',\n        link : function (scope, element, attr) {\n            attr.$observe('ngBindHtml',function(){\n                if(attr.ngBindHtml){\n                    $compile(element[0].children)(scope);\n                }\n            })\n        }\n    };\n});","start":886,"end":897,"route":null,"symbol":"initBind","metadata":{"calls_functions":["angular.module","attr.$observe","$compile"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:899-1053:directive:spinnerSlider","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"spinnerSlider","kind":"directive","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('spinnerSlider', function() {\n    return {\n        restrict: 'E',\n        scope: {\n            model: '=',      // Wartość liczbową wiążemy dwukierunkowo\n            min: '@',        // min, max, step jako stringi z atrybutów\n            max: '@',\n            step: '@',\n            onChange: '&'    // Funkcja wywoływana po zmianie wartości\n        },\n        bindToController: true,\n        controllerAs: 'ctrl',\n        template: `\n            <div class=\"input-group spincontainer\">\n                <div class=\"input-group-btn\">\n                    <button type=\"button\" class=\"btn btn-default\" ng-click=\"ctrl.decrement()\" data-dir=\"dwn\">\n                        <i class=\"fa fa-minus\"></i>\n                    </button>\n                </div>\n                <input class=\"form-control spinner-input\"\n                       type=\"number\"\n                       force-number\n                       ng-model=\"ctrl.model\"\n                       min=\"{{ctrl.min}}\"\n                       max=\"{{ctrl.max}}\"\n                       step=\"{{ctrl.step}}\"\n                       ng-init=\"ctrl.initModel()\"\n                       ng-change=\"ctrl.fixValueAndNotify()\" />\n                <div class=\"input-group-btn\">\n                    <button type=\"button\" class=\"btn btn-default\" ng-click=\"ctrl.increment()\" data-dir=\"up\">\n                        <i class=\"fa fa-plus\"></i>\n                    </button>\n                </div>\n            </div>\n\n            <div class=\"slider-container\">\n                <input class=\"form-control slider\"\n                       type=\"range\"\n                       force-number\n                       ng-model=\"ctrl.model\"\n                       min=\"{{ctrl.min}}\"\n                       max=\"{{ctrl.max}}\"\n                       step=\"{{ctrl.step}}\"\n                       ng-change=\"ctrl.fixValueAndNotify()\" />\n                <div class=\"slider-values\">\n                    <span class=\"slider-min\">Min: {{ctrl.min}}</span>\n                    <span class=\"slider-max\">Max: {{ctrl.max}}</span>\n                </div>\n            </div>\n        `,\n        controller: [ '$scope', function($scope) {\n            var vm = this;\n\n            // 1) Inicjalizacja wartości jako średniej z min i max\n            vm.initModel = function() {\n                // jeżeli model już jest przypisany przez rodzica, nie nadpisujemy go\n                // ale jeśli nie jest, ustawiamy średnią\n                if (typeof vm.model === 'undefined' || vm.model === null) {\n                    var minVal = parseFloat(vm.min) || 0;\n                    var maxVal = parseFloat(vm.max) || 100;\n                    var stepVal = parseFloat(vm.step) || 1;\n\n                    var avg = (minVal + maxVal) / 2;\n                    vm.model = roundValueToStep(avg, minVal, maxVal, stepVal);\n                } else {\n                    // jeżeli już coś jest w modelu, to zafixujemy ją w razie czego\n                    vm.fixValueAndNotify();\n                }\n            };\n\n            // 2) Funkcje do przycisków +/- (decrement/increment)\n            vm.decrement = function() {\n                var current = parseFloat(vm.model) || 0;\n                var stepVal = parseFloat(vm.step) || 1;\n                var minVal = parseFloat(vm.min) || 0;\n                var maxVal = parseFloat(vm.max) || 100;\n\n                var newVal = current - stepVal;\n                // 3) Jeżeli spadniemy poniżej minimum, ustawiamy wartość min\n                if (newVal < minVal) {\n                    newVal = minVal;\n                }\n                vm.model = newVal;\n                vm.callOnChange();\n            };\n\n            vm.increment = function() {\n                var current = parseFloat(vm.model) || 0;\n                var stepVal = parseFloat(vm.step) || 1;\n                var minVal = parseFloat(vm.min) || 0;\n                var maxVal = parseFloat(vm.max) || 100;\n\n                var newVal = current + stepVal;\n                // 4) Jeżeli przekroczymy maksimum, ustawiamy wartość max\n                if (newVal > maxVal) {\n                    newVal = maxVal;\n                }\n                vm.model = newVal;\n                vm.callOnChange();\n            };\n\n            // 5) Funkcja wywoływana przy zmianie (np. ręcznej w input, suwaku, itp.)\n            vm.fixValueAndNotify = function() {\n                var minVal = parseFloat(vm.min) || 0;\n                var maxVal = parseFloat(vm.max) || 100;\n                var stepVal = parseFloat(vm.step) || 1;\n                var current = parseFloat(vm.model) || 0;\n\n                // Zaokrąglamy zgodnie z krokiem, jeśli mieści się w min/max\n                // + wymuszamy min/max jeśli user wpisał wartości poza zakresem\n                vm.model = roundValueToStep(current, minVal, maxVal, stepVal);\n\n                vm.callOnChange();\n            };\n\n            // 6) Wywołanie callbacku, jeśli zdefiniowane\n            vm.callOnChange = function() {\n                if (typeof vm.onChange === 'function') {\n                    vm.onChange({ value: vm.model });\n                }\n            };\n\n            // Funkcja pomocnicza: zaokrągla liczbę do najbliższej wartości (wielokrotności) kroku,\n            // dbając o zakres [min, max].\n            function roundValueToStep(value, min, max, step) {\n                if (value < min) {\n                    return min;\n                }\n                if (value > max) {\n                    return max;\n                }\n                // 2) Zaokrąglamy do wielokrotności kroku\n                // Najpierw dzielimy przez step, zaokrąglamy, potem mnożymy z powrotem\n                var stepsCount = Math.round(value / step);\n                var newVal = stepsCount * step;\n\n                // Upewniamy się, że dalej mieścimy się w zakresie\n                if (newVal < min) {\n                    newVal = min;\n                }\n                if (newVal > max) {\n                    newVal = max;\n                }\n                return newVal;\n            }\n\n            // 7) Dodatkowo możesz obserwować zmiany w $scope,\n            //    jeśli chciałbyś \"na żywo\" naprawiać wartość.\n            //    Tutaj wykorzystujemy \"vm.fixValueAndNotify()\" w watchu:\n            $scope.$watch(function() { return vm.model; }, function() {\n                vm.fixValueAndNotify();\n            });\n        }]\n    };\n});","start":899,"end":1053,"route":null,"symbol":"spinnerSlider","metadata":{"calls_functions":["angular.module","parseFloat","roundValueToStep","vm.fixValueAndNotify","vm.callOnChange","vm.onChange","Math.round","$scope.$watch"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":1,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:1056-1082:directive:forceNumber","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":"dpClient.helpers","name":"forceNumber","kind":"directive","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('forceNumber', function() {\n    return {\n        restrict: 'A',\n        require: 'ngModel',\n        link: function(scope, element, attrs, ngModelCtrl) {\n            ngModelCtrl.$parsers.push(function(value) {\n                if (typeof value === 'string') {\n                    var numVal = parseFloat(value);\n                    if (!isNaN(numVal)) {\n                        return numVal;\n                    }\n                }\n                return value;\n            });\n\n            ngModelCtrl.$formatters.push(function(value) {\n                if (typeof value === 'string') {\n                    var numVal = parseFloat(value);\n                    if (!isNaN(numVal)) {\n                        return numVal;\n                    }\n                }\n                return value;\n            });\n        }\n    };\n});","start":1056,"end":1082,"route":null,"symbol":"forceNumber","metadata":{"calls_functions":["angular.module","ngModelCtrl.$parsers.push","parseFloat","isNaN","ngModelCtrl.$formatters.push"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":138,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/app.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:242-255:factory:translateRouting","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":"dpClient.filters","name":"translateRouting","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","$http","$config"],"antiPatterns":[],"text":".factory('translateRouting', function ($q, $rootScope, $http, $config) {\n    return {\n        request: function (actualState, stateParams, lang) {\n            let params = { ...stateParams, lang };\n            return $http({\n                url: $config.API_URL + ['routes', 'translateState', actualState].join('/'),\n                method: 'GET',\n                params: params\n            })\n            .then(res => res.data)\n            .catch(err => $q.reject(new Error(err)));\n        }\n    };\n});","start":242,"end":255,"route":null,"symbol":"translateRouting","metadata":{"calls_functions":["$http","$q.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/translateState/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":["..."]}],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:230-241:factory:getDomains","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":"dpClient.filters","name":"getDomains","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":".factory('getDomains', function ($q, $http, $config) {\n    return {\n        request: function () {\n            return $http({\n                url: $config.API_URL + 'domains',\n                method: 'GET'\n            })\n            .then(res => res.data)\n            .catch(err => $q.reject(new Error(err)));\n        }\n    };\n})","start":230,"end":241,"route":null,"symbol":"getDomains","metadata":{"calls_functions":["$http","$q.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}domains","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:153-229:factory:routes","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":"dpClient.filters","name":"routes","kind":"service","nodeType":"Function","dependenciesDI":["$http","$config","$q","$rootScope","$cookieStore","$stateProvider"],"antiPatterns":[],"text":".factory('routes', function ($http, $config, $q, $rootScope, $cookieStore, $stateProvider) {\n    return {\n        getAll: function () {\n            return $http({\n                url: $config.API_URL + 'routes/show',\n                method: 'GET'\n            })\n            .then(response => {\n              $rootScope.routes = response.data; // Przypisz dane do $rootScope.routes\n              return response.data;\n            })\n            .catch(error => $q.reject(error));\n        },\n        setAll: function () {\n          const defaultLang = $cookieStore.get('lang') ? $cookieStore.get('lang') : 'pl'; // Użyj 'pl' jako domyślnego\n          const actDate = new Date();\n          const dateStr = '' + actDate.getHours() + actDate.getMinutes() + actDate.getSeconds();\n\n          // Iteruj po trasach z $rootScope.routes\n          $rootScope.routes.forEach((value) => {\n              value.abstract = (value.abstract == 1);\n\n              let state;\n              if (value.langs && angular.isDefined(value.langs[defaultLang]) && value.langs[defaultLang].url != null) {\n                  state = {\n                      name: value.name,\n                      url: value.langs[defaultLang].url,\n                      parent: value.parent,\n                      abstract: value.abstract,\n                      views: {},\n                      ncyBreadcrumb: {\n                          label: value.langs[defaultLang].name\n                      }\n                  };\n              } else {\n                  state = {\n                      name: value.name,\n                      parent: value.parent,\n                      abstract: value.abstract,\n                      views: {},\n                      ncyBreadcrumb: { skip: true }\n                  };\n              }\n\n              if (angular.isDefined(value.controller) && value.controller != null) {\n                  state.controller = value.controller;\n              }\n\n              if (value.abstract === true && value.name === 'main') {\n                const actTemplate = value.views.pop();\n                state.templateUrl = actTemplate.template.url + '?ver=' + dateStr;\n                delete state.views;\n              } else if (value.route === true) {\n                delete state.views;\n              } else {\n                angular.forEach(value.views, (view) => {\n                  if (view.template) {\n                    state.views[view.name] = {\n                      templateUrl: view.template.url + '?ver=' + dateStr,\n                      controller: view.controller\n                    };\n                  }\n                });\n              }\n\n              $stateProvider.state(value.name, state);\n          });\n        },\n        findOne: function (name) {\n          return $q((resolve) => {\n            // Szukaj trasy w $rootScope.routes\n            const route = $rootScope.routes.find(each => each.name === name);\n            resolve(route);\n          });\n        }\n    };\n})","start":153,"end":229,"route":null,"symbol":"routes","metadata":{"calls_functions":["$http","$q.reject","$cookieStore.get","actDate.getHours","actDate.getMinutes","actDate.getSeconds","$rootScope.routes.forEach","angular.isDefined","value.views.pop","angular.forEach","$stateProvider.state","$q","$rootScope.routes.find","resolve"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/show","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:140-152:factory:responseErrorInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":"dpClient.filters","name":"responseErrorInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$injector","$timeout"],"antiPatterns":[],"text":".factory('responseErrorInterceptor', function ($q, $injector, $timeout) {\n    return {\n        responseError: function (response) {\n            console.log('responseError Status: ' + response.status);\n            if (response.status == 0 || response.status == 408 || response.status >= 500) {\n                var $http = $injector.get('$http');\n                return $timeout(() => $http(response.config), 3000, false);\n            } else {\n                return $q.reject(response);\n            }\n        }\n    };\n})","start":140,"end":152,"route":null,"symbol":"responseErrorInterceptor","metadata":{"calls_functions":["console.log","$injector.get","$timeout","$http","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:116-139:factory:loadingInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":"dpClient.filters","name":"loadingInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","LoadingService"],"antiPatterns":[],"text":".factory('loadingInterceptor', function ($q, $rootScope, LoadingService) {\n    return {\n        request: function (config) {\n            LoadingService.requested();\n            config.requestTimestamp = new Date().getTime();\n            $rootScope.$broadcast('loading:start');\n            return config;\n        },\n        response: function (response) {\n            LoadingService.responsed();\n            $rootScope.$broadcast('loading:finish');\n            return response;\n        },\n        responseError: function (rejection) {\n            if (rejection.status == 401) {\n                LoadingService.responsed();\n            } else {\n                LoadingService.countError();\n            }\n            $rootScope.$broadcast('loading:finish');\n            return $q.reject(rejection);\n        }\n    };\n})","start":116,"end":139,"route":null,"symbol":"loadingInterceptor","metadata":{"calls_functions":["LoadingService.requested","$rootScope.$broadcast","LoadingService.responsed","LoadingService.countError","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":3},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:105-115:factory:httpMethodOverride","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":"dpClient.filters","name":"httpMethodOverride","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":".factory('httpMethodOverride', function () {\n    return {\n        request: function (config) {\n            if (config.method === 'PUT' || config.method === 'PATCH') {\n                config.headers['x-http-method-override'] = config.method.toLowerCase();\n                config.method = 'POST';\n            }\n            return config;\n        }\n    };\n})","start":105,"end":115,"route":null,"symbol":"httpMethodOverride","metadata":{"calls_functions":["config.method.toLowerCase"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:36-81:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":"dpClient.filters","name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$httpProvider","$locationProvider","$urlRouterProvider","$stateProvider","RestangularProvider","localStorageServiceProvider","ApiCollectionProvider","$breadcrumbProvider","$provide","$configProvider"],"antiPatterns":[],"text":".config(function (\n    $httpProvider,\n    $locationProvider,\n    $urlRouterProvider,\n    $stateProvider,\n    RestangularProvider,\n    localStorageServiceProvider,\n    ApiCollectionProvider,\n    $breadcrumbProvider,\n    $provide,\n    $configProvider\n    ) {\n\n    $configProvider.set('API_URL', 'http://localtest.me/api/');\n    $configProvider.set('API_URL_EDITOR', 'http://localhost:1351/api/');\n    RestangularProvider.setBaseUrl('http://localtest.me/api/');\n    $configProvider.set('AUTH_URL', 'http://localtest.me:2600/');\n    $configProvider.set('STATIC_URL', 'http://localtest.me/static/');\n    $configProvider.set('SOCKET_URL', 'http://localtest.me:2600');\n    $configProvider.set('EDITOR_URL', 'http://localhost:1400');\n\n    function $LangStorageProvider() {\n        return {\n            $get: function () {\n                return this;\n            },\n            getLangCode: () => 'pl'\n        };\n    }\n    $provide.provider('$langStorage', $LangStorageProvider);\n\n    $locationProvider.html5Mode(true);\n\n    $urlRouterProvider.otherwise(function ($injector, $location) {\n        // Użyj $state do przekierowania zamiast bezpośredniego zwracania URL\n        $injector.get('$state').go('deliveries');\n        return true; // Zwróć true, aby zatrzymać domyślne zachowanie\n    });\n\n    RestangularProvider.setMethodOverriders(['put', 'patch']);\n    localStorageServiceProvider.setPrefix('digitalprint');\n\n    $httpProvider.interceptors.push('httpMethodOverride');\n    $httpProvider.interceptors.push('loadingInterceptor');\n    $httpProvider.interceptors.push('responseErrorInterceptor');\n})","start":36,"end":81,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["angular.module","$configProvider.set","RestangularProvider.setBaseUrl","$provide.provider","$locationProvider.html5Mode","$urlRouterProvider.otherwise","$injector.get","RestangularProvider.setMethodOverriders","localStorageServiceProvider.setPrefix","$httpProvider.interceptors.push"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:257-268:directive:initBind","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":"dpClient.app","name":"initBind","kind":"directive","nodeType":"Function","dependenciesDI":["$compile"],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('initBind', function ($compile) {\n    return {\n        restrict: 'A',\n        link: function (scope, element, attr) {\n            attr.$observe('ngBindHtml', function () {\n                if (attr.ngBindHtml) {\n                    $compile(element[0].children)(scope);\n                }\n            });\n        }\n    };\n});","start":257,"end":268,"route":null,"symbol":"initBind","metadata":{"calls_functions":["angular.module","attr.$observe","$compile"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/app.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js:17-107:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js","module":null,"name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$locationProvider","$stateProvider"],"antiPatterns":[],"text":"        function ($locationProvider, $stateProvider) {\n            $stateProvider.state({\n                abstract: false,\n                template: '<deliveries delivery-connected=\"1\" products=\"[productItem]\"/>',\n                name: 'deliveries',\n                url: '/deliveries',\n                resolve:{\n                    productAddresses:()=> [{index:1}, {index:2}],\n                    productItem:()=> {\n                        return{\n                            volume:2\n                        }\n                    }\n                },\n                controller: function ($scope,$rootScope, $httpBackend,productAddresses,productItem) {\n                    $scope.productAddresses=productAddresses\n                    $scope.productItem=productItem\n                    $httpBackend.whenGET(/deliveries\\/deliveriesPublic/).respond(200, [{\"ID\":17,\"domainID\":4,\"courierID\":15,\"priceID\":10,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"pl\":\"Poczta Polska paczka do 5 kg - przesy\\u0142ka gratis\",\"en\":\"Polish Post parcel up to 5 kg - free shipping\",\"ru\":\"\\u041f\\u043e\\u0441\\u0442-\\u043f\\u043e\\u0447\\u0442\\u043e\\u0432\\u0430\\u044f \\u043f\\u043e\\u0447\\u0442\\u0430 \\u0434\\u043e 5 \\u043a\\u0433 - \\u0431\\u0435\\u0441\\u043f\\u043b\\u0430\\u0442\\u043d\\u0430\\u044f \\u0434\\u043e\\u0441\\u0442\\u0430\\u0432\\u043a\\u0430\"},\"module\":{\"ID\":15,\"name\":\"Poczta Polska\",\"key\":\"pocztapl\",\"typeID\":1},\"price\":{\"ID\":10,\"price\":0,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":100000,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":0,\"tax\":23}},{\"ID\":18,\"domainID\":4,\"courierID\":11,\"priceID\":11,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"6\":\"taxID\",\"pl\":\"UPS paczka do 20 kg\",\"en\":\"UPS package up to 20 kg\",\"ru\":\"UPS \\u0434\\u043e 20 \\u043a\\u0433\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":11,\"price\":20,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":10000,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":24.6,\"tax\":23}},{\"ID\":19,\"domainID\":4,\"courierID\":11,\"priceID\":12,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"6\":\"UnitQty\",\"7\":\"taxID\",\"pl\":\"UPS 100 szt w paczce, paczka do 10 kg\",\"en\":\"UPS 100 pcs in package, package up 10 kg\",\"ru\":\"UPS 100 \\u0448\\u0442. \\u0412 \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0435, \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 10 \\u043a\\u0433\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":12,\"price\":15,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":10,\"UnitQty\":100,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":18.45,\"tax\":23}},{\"ID\":24,\"domainID\":4,\"courierID\":11,\"priceID\":15,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"6\":\"UnitQty\",\"pl\":\"Metoda 4 - paczka do 10 kg, 10 szt w paczce\",\"en\":\"Method 4 - packge up to 10 kg, 10 pcs in a package\",\"ru\":\"\\u0421\\u043f\\u043e\\u0441\\u043e\\u0431 4 - \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 10 \\u043a\\u0433, 10 \\u0448\\u0442. \\u0412 \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0435\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":15,\"price\":10,\"taxID\":null,\"date\":\"0000-00-00 00:00:00\",\"weight\":10,\"UnitQty\":10,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":10,\"tax\":null}},{\"ID\":25,\"domainID\":4,\"courierID\":17,\"priceID\":16,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"6\":\"UnitQty\",\"pl\":\"Metoda 5 - paczka do 20 kg, 200 sztuk w paczce\",\"en\":\"Method 5 - package up to 20 kg, 200 pcs in a package\",\"ru\":\"\\u0421\\u043f\\u043e\\u0441\\u043e\\u0431 5 - \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 20 \\u043a\\u0433, 200 \\u0448\\u0442. \\u0412 \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0435\"},\"module\":{\"ID\":17,\"name\":\"Apaczka\",\"key\":\"apaczka\",\"typeID\":1},\"price\":{\"ID\":16,\"price\":20,\"taxID\":null,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":200,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":20,\"tax\":null}},{\"ID\":26,\"domainID\":4,\"courierID\":18,\"priceID\":17,\"active\":1,\"names\":{\"pl\":\"Odbi\\u00f3r osobisty - gratis\",\"en\":\"personal collection (free of charge)\",\"ru\":\"\\u043b\\u0438\\u0447\\u043d\\u0430\\u044f \\u043a\\u043e\\u043b\\u043b\\u0435\\u043a\\u0446\\u0438\\u044f (\\u0431\\u0435\\u0441\\u043f\\u043b\\u0430\\u0442\\u043d\\u043e)\"},\"module\":{\"ID\":18,\"name\":\"Odbi\\u00f3r osobisty\",\"key\":\"drukarnia1\",\"typeID\":1,\"keys\":[{\"ID\":13,\"moduleID\":18,\"key\":\"address\",\"type\":\"text\",\"func\":\"collectionAttributes\",\"langs\":{\"pl\":{\"name\":\"Adres punktu odbioru\"}}}]},\"price\":{\"ID\":17,\"price\":0,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":1000000,\"FS_WeightStart\":0,\"FS_WeightEnd\":0,\"FS_ValStart\":10000,\"FS_ValEnd\":30000,\"EX_WeightStart\":0,\"EX_WeightEnd\":0,\"EX_ValStart\":30100,\"EX_ValEnd\":0,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":0,\"tax\":23}},{\"ID\":27,\"domainID\":4,\"courierID\":11,\"priceID\":18,\"active\":1,\"names\":{\"pl\":\"Paleta do 300 do 600 kg\",\"en\":\"Pallet up to 600 kg\",\"ru\":\"\\u041f\\u043e\\u0434\\u0434\\u043e\\u043d \\u0434\\u043e 600 \\u043a\\u0433\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":18,\"price\":140,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":600,\"UnitQty\":10000000,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":0,\"EX_WeightEnd\":299,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":172.2,\"tax\":23}},{\"ID\":28,\"domainID\":4,\"courierID\":11,\"priceID\":19,\"active\":1,\"names\":{\"pl\":\"UPS paczka do 20 kg\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":19,\"price\":10,\"taxID\":14,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":10000000,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":12.3,\"tax\":23}},{\"ID\":29,\"domainID\":4,\"courierID\":18,\"priceID\":20,\"active\":1,\"names\":{\"pl\":\"Odbi\\u00f3r osobisty\"},\"module\":{\"ID\":18,\"name\":\"Odbi\\u00f3r osobisty\",\"key\":\"drukarnia1\",\"typeID\":1,\"keys\":[{\"ID\":13,\"moduleID\":18,\"key\":\"address\",\"type\":\"text\",\"func\":\"collectionAttributes\",\"langs\":{\"pl\":{\"name\":\"Adres punktu odbioru\"}}}]},\"price\":{\"ID\":20,\"price\":0,\"taxID\":14,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":99999999.99,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":0,\"tax\":23}},{\"ID\":30,\"domainID\":4,\"courierID\":21,\"priceID\":21,\"active\":1,\"names\":{\"pl\":\"Paczka do 20kg DHL 25z\\u0142 (za darmo w przedziale 10-30 kg)\",\"en\":\"Package up to 20kg DHL 25z\\u0142 (free of charge in the range of 10-30 kg)\",\"ru\":\"\\u0423\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 20 \\u043a\\u0433 DHL 25z\\u0142 (\\u0431\\u0435\\u0441\\u043f\\u043b\\u0430\\u0442\\u043d\\u043e \\u0432 \\u0434\\u0438\\u0430\\u043f\\u0430\\u0437\\u043e\\u043d\\u0435 10-30 \\u043a\\u0433)\"},\"module\":{\"ID\":21,\"name\":\"DHL\",\"key\":\"dhl\",\"typeID\":1},\"price\":{\"ID\":21,\"price\":25,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":10000000,\"FS_WeightStart\":10,\"FS_WeightEnd\":30,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":30.75,\"tax\":23}},{\"ID\":31,\"domainID\":4,\"courierID\":21,\"priceID\":22,\"active\":1,\"names\":{\"pl\":\"Paczka do 20kg DHL 25z\\u0142 (za darmo dostawa dla warto\\u015bci od 100 do 1000 z\\u0142)\",\"en\":\"Package up to 20kg DHL 25z\\u0142 (free delivery for value from 100 to 1000 z\\u0142)\",\"ru\":\"\\u0423\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 20 \\u043a\\u0433 DHL 25z\\u0142 (\\u0431\\u0435\\u0441\\u043f\\u043b\\u0430\\u0442\\u043d\\u0430\\u044f \\u0434\\u043e\\u0441\\u0442\\u0430\\u0432\\u043a\\u0430 \\u043f\\u043e \\u0446\\u0435\\u043d\\u0435 \\u043e\\u0442 100 \\u0434\\u043e 1000 \\u0437\\u043b\\u043e\\u0442\\u044b\\u0445)\"},\"module\":{\"ID\":21,\"name\":\"DHL\",\"key\":\"dhl\",\"typeID\":1},\"price\":{\"ID\":22,\"price\":25,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":99999999.99,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":100,\"FS_ValEnd\":1000,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":30.75,\"tax\":23}},{\"ID\":34,\"domainID\":4,\"courierID\":15,\"priceID\":31,\"active\":1,\"names\":{\"pl\":\"poczta paczka 20 zl\"},\"module\":{\"ID\":15,\"name\":\"Poczta Polska\",\"key\":\"pocztapl\",\"typeID\":1},\"price\":{\"ID\":31,\"price\":20,\"taxID\":null,\"date\":\"2021-05-25 10:42:19\",\"weight\":20,\"UnitQty\":10000,\"FS_WeightStart\":0,\"FS_WeightEnd\":0,\"FS_ValStart\":0,\"FS_ValEnd\":0,\"EX_WeightStart\":0,\"EX_WeightEnd\":0,\"EX_ValStart\":0,\"EX_ValEnd\":0,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":20,\"tax\":null}}]);\n                    $httpBackend.whenGET(/address\\/getUserAddresses/).respond(200, {\"response\":true,\"addresses\":[{\"ID\":418,\"name\":\"Grzegorz\",\"lastname\":\"Le\\u015bniowski\",\"street\":\"Zielona\",\"house\":35,\"apartment\":null,\"zipcode\":\"12-123\",\"city\":\"Z\\u0105bkowice\",\"areaCode\":48,\"telephone\":501680500,\"companyName\":null,\"nip\":null,\"addressName\":\"Z\\u0105bkowice, Zielona 35\",\"copyFromID\":null,\"countryCode\":\"PL\",\"externalID\":null,\"default\":0,\"joinID\":54,\"userID\":285},{\"ID\":376,\"name\":\"Grzegorz\",\"lastname\":\"Le\\u015bniowski\",\"street\":\"Kwiatowa\",\"house\":9,\"apartment\":null,\"zipcode\":\"32-085\",\"city\":\"Modlnica\",\"areaCode\":48,\"telephone\":501680500,\"companyName\":null,\"nip\":null,\"addressName\":\"Modlnica, Kwiatowa 9\",\"copyFromID\":null,\"countryCode\":\"PL\",\"externalID\":null,\"default\":1,\"joinID\":51,\"userID\":285}],\"senders\":[{\"name\":\"sender_printhouse\",\"type\":1},{\"name\":\"sender_client\",\"type\":2}]});\n                    $rootScope.logged=true\n                }\n            })\n\n            $stateProvider.state({\n                abstract: false,\n                templateUrl: 'src/cart/templates/cart.html',\n                name: 'cart',\n                url: '/cart',\n                resolve:{\n                },\n                onEnter:function ($rootScope, $httpBackend) {\n                    backedResponses($httpBackend)\n                    $rootScope.logged=true\n                    $rootScope.currentLang={code:'pl'}\n                },\n                controller: 'cart.CartCtrl'\n            })\n\n            $stateProvider.state({\n                abstract: false,\n                templateUrl: 'src/cart/templates/cart.html',\n                name: 'cart_unauthorized',\n                url: '/cart_u',\n                resolve:{\n                },\n                onEnter:function ($rootScope, $httpBackend) {\n                    backedResponses($httpBackend)\n                    $httpBackend.whenGET(/addresses\\?domainName=localhost/).respond(200, []);\n                    $httpBackend.whenGET(/address\\/addressPublic/).respond(200, []);\n                    $rootScope.logged=false\n                    $rootScope.currentLang={code:'pl'}\n                },\n                controller: 'cart.CartCtrl'\n            })\n\n            $stateProvider.state({\n                abstract: false,\n                templateUrl: 'src/category/templates/calc.html',\n                name: 'calc',\n                url: '/calc',\n                resolve:{\n                },\n                onEnter:function ($rootScope, $httpBackend,$stateParams) {\n                    $httpBackend.whenGET(/settings\\/getPublicSettings\\/additionalSettings/).respond(200, {\"onlyForCompanies\":{\"value\":\"\"},\"reclamationDays\":{\"value\":60},\"rssFeed\":{\"value\":\"http:\\/\\/vprojekt.eu\\/index.php\\/feed\\/\"},\"captchaPublicKey\":{\"value\":\"6Lc4aZwUAAAAAP9RfmPACWVNBNmrAhjPoUoITLoB\"},\"confirmButtonInCart\":{\"value\":1},\"recalculateInCart\":{\"value\":1},\"rssCharLimit\":{\"value\":4},\"separateConfirmButton\":{\"value\":1},\"filteredAttribute\":{\"value\":2},\"calcWithoutDelivery\":{\"value\":1},\"wcgaUsed\":{\"value\":1},\"confirmTextInCart\":{\"pl\":\"* O\\u015bwiadczam, \\u017ce zapozna\\u0142em si\\u0119 i akceptuj\\u0119 <a href=\\\"\\/pl\\/strona\\/regulamin\\\">regulamin<\\/a>. ( ! POLE OBOWI\\u0104ZKOWE ! )\",\"en\":\"* I declare that I have read and accept the <a href=\\\"\\/en\\/page\\/statute\\\">statute<\\/a>. ( ! REQUIRED ! )\",\"ru\":\"* \\u042f \\u0437\\u0430\\u044f\\u0432\\u043b\\u044f\\u044e, \\u0447\\u0442\\u043e \\u043f\\u0440\\u043e\\u0447\\u0438\\u0442\\u0430\\u043b \\u0438 \\u043f\\u0440\\u0438\\u043d\\u044f\\u043b <a href=\\\"\\/ru\\/site-ru\\/statute-ru\\\">\\u043f\\u0440\\u0430\\u0432\\u0438\\u043b\\u0430<\\/a>.  ( \\n! \\u041e\\u0411\\u042f\\u0417\\u0410\\u0422\\u0415\\u041b\\u042c\\u041dO ! )\"}});\n\n                    backedResponses($httpBackend)\n                    $httpBackend.whenGET(/ps_groups\\/\\/ps_types\\/oneForView\\/Przykladowy-produkt-produkt-prosty/).respond(200, {})\n                    $httpBackend.whenGET(/dp_products\\/\\/calcFilesUploader/).respond(200, [])\n                    $httpBackend.whenGET(/dp_categories\\/oneForView\\/promocje/).respond(200, [])\n                    $httpBackend.whenGET(/templateVariables\\/getVariables\\?templateName=calc/).respond(200, {\"response\":[{\"name\":\"attributeView\",\"value\":3},{\"name\":\"attributeRealisationColors\",\"value\":1},{\"name\":\"attributeRealisationView\",\"value\":1},{\"name\":\"attributeSendingView\",\"value\":1},{\"name\":\"productDescriptionView\",\"value\":1}]})\n                    $httpBackend.whenGET(/settings\\/getPublicSettings\\/general/).respond(200, {\"defaultUserType\":{\"value\":1},\"menuLeft\":{\"value\":0},\"skinName\":{\"value\":\"\"},\"defaultCurrency\":{\"value\":24},\"defaultLang\":{\"value\":16},\"defaultTax\":{\"value\":26},\"googleTagManager\":{\"value\":\"GTM-52MDDF9\"},\"synchronizeExternalApi\":{\"value\":0}})\n                    $httpBackend.whenGET(/tax\\/taxForProduct\\?groupID=undefined/).respond(200, [{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1,\"default\":1},{\"ID\":27,\"domainID\":4,\"name\":\"vat 7\",\"value\":7,\"active\":1}])\n                    $httpBackend.whenGET(/ps_groups\\/undefined\\/ps_types\\/undefined\\/ps_formats\\/formatsPublic\\/0/).respond(200, [{\"ID\":181,\"groupID\":49,\"typeID\":80,\"name\":\"10x10 cm (cyfra)\",\"adminName\":null,\"width\":100,\"height\":100,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":0,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":10,\"minHeight\":10,\"maxWidth\":300,\"maxHeight\":300,\"langs\":{\"pl\":{\"name\":\"10x10 cm (cyfra)\"},\"en\":{\"name\":\"10x10 cm (cyfra)\"},\"es\":{\"name\":\"10x10 cm (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":192,\"groupID\":49,\"typeID\":80,\"name\":\"10x10 cm (offset)\",\"adminName\":null,\"width\":100,\"height\":100,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":1,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"10x10 cm (offset)\"},\"en\":{\"name\":\"10x10 cm (offset)\"},\"es\":{\"name\":\"10x10 cm (offset)\"}},\"printTypes\":[{\"printTypeID\":1,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":193,\"groupID\":49,\"typeID\":80,\"name\":\"10x10 cm (wielki format)\",\"adminName\":null,\"width\":100,\"height\":100,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":2,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"10x10 cm (wielki format)\"},\"en\":{\"name\":\"10x10 cm (wielki format)\"},\"es\":{\"name\":\"10x10 cm (wielki format)\"}},\"printTypes\":[{\"printTypeID\":14,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":188,\"groupID\":49,\"typeID\":80,\"name\":\"A7 (105x74 mm) (cyfra)\",\"adminName\":null,\"width\":106,\"height\":75,\"slope\":1,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":3,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A7 (105x74 mm) (cyfra)\"},\"en\":{\"name\":\"A7 (105x74 mm) (cyfra)\"},\"es\":{\"name\":\"A7 (105x74 mm) (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":187,\"groupID\":49,\"typeID\":80,\"name\":\"A6 (148,5x105 mm) (cyfra)\",\"adminName\":null,\"width\":150,\"height\":107,\"slope\":1,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":4,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A6 (148,5x105 mm) (cyfra)\"},\"en\":{\"name\":\"A6 (148,5x105 mm) (cyfra)\"},\"es\":{\"name\":\"A6 (148,5x105 mm) (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":186,\"groupID\":49,\"typeID\":80,\"name\":\"A5 (148,5x210 mm)  (cyfra)\",\"adminName\":null,\"width\":150,\"height\":212,\"slope\":1,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":5,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A5 (148,5x210 mm)  (cyfra)\"},\"en\":{\"name\":\"A5 (148,5x210 mm)  (cyfra)\"},\"es\":{\"name\":\"A5 (148,5x210 mm)  (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":182,\"groupID\":49,\"typeID\":80,\"name\":\"A4 (210x297 mm) (cyfra)\",\"adminName\":null,\"width\":210,\"height\":297,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":6,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A4 (210x297 mm) (cyfra)\"},\"en\":{\"name\":\"A4 (210x297 mm) (cyfra)\"},\"es\":{\"name\":\"A4 (210x297 mm) (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":189,\"groupID\":49,\"typeID\":80,\"name\":\"A3 (420x297 mm) poziom (cyfra)\",\"adminName\":null,\"width\":420,\"height\":297,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":7,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A3 (420x297 mm) poziom (cyfra)\"},\"en\":{\"name\":\"A3 (420x297 mm) poziom (cyfra)\"},\"es\":{\"name\":\"A3 (420x297 mm) poziom (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":183,\"groupID\":49,\"typeID\":80,\"name\":\"A3 (297x420 mm) pion  (cyfra)\",\"adminName\":null,\"width\":297,\"height\":420,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":8,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A3 (297x420 mm) pion  (cyfra)\"},\"en\":{\"name\":\"A3 (297x420 mm) pion  (cyfra)\"},\"es\":{\"name\":\"A3 (297x420 mm) pion  (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":184,\"groupID\":49,\"typeID\":80,\"name\":\"1m x 1m (wielki format)\",\"adminName\":null,\"width\":1000,\"height\":1000,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":9,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"1m x 1m (wielki format)\"},\"en\":{\"name\":\"1m x 1m (wielki format)\"},\"es\":{\"name\":\"1m x 1m (wielki format)\"}},\"printTypes\":[{\"printTypeID\":14,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":185,\"groupID\":49,\"typeID\":80,\"name\":\"W\\u0142asny format (wielki format)\",\"adminName\":null,\"width\":null,\"height\":null,\"slope\":0,\"custom\":1,\"active\":1,\"interchangeability\":1,\"customID\":null,\"rows\":null,\"order\":10,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":120,\"minHeight\":120,\"maxWidth\":10000,\"maxHeight\":10000,\"langs\":{\"en\":{\"name\":\"W\\u0142asny format (wielki format)\"},\"es\":{\"name\":\"W\\u0142asny format (wielki format)\"},\"il\":{\"name\":\"W\\u0142asny format (wielki format)\"},\"pl\":{\"name\":\"W\\u0142asny format (wielki format)\"},\"ru\":{\"name\":\"W\\u0142asny format (wielki format)\"}},\"printTypes\":[{\"printTypeID\":14,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":190,\"groupID\":49,\"typeID\":80,\"name\":\"A2 (offset)\",\"adminName\":null,\"width\":420,\"height\":590,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":11,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A2 (offset)\"},\"en\":{\"name\":\"A2 (offset)\"},\"es\":{\"name\":\"A2 (offset)\"}},\"printTypes\":[{\"printTypeID\":1,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":191,\"groupID\":49,\"typeID\":80,\"name\":\"25x25cm (offset)\",\"adminName\":null,\"width\":250,\"height\":250,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":12,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"25x25cm (offset)\"},\"en\":{\"name\":\"25x25cm (offset)\"},\"es\":{\"name\":\"25x25cm (offset)\"}},\"printTypes\":[{\"printTypeID\":1,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]}])\n                    $httpBackend.whenGET(/ps_groups\\/undefined\\/ps_types\\/undefined\\/ps_pages\\/pagesPublic/).respond(200, [{\"ID\":68,\"groupID\":49,\"typeID\":80,\"pages\":null,\"minPages\":1,\"maxPages\":1000,\"step\":1,\"name\":null,\"doublePage\":0,\"similar\":null}])\n                    $httpBackend.whenGET(/ps_groups\\/undefined\\/ps_types\\/selectedOptions\\/undefined/).respond(200, [{\"attrID\":-2,\"tooltip\":null,\"customName\":[]},{\"attrID\":-1,\"tooltip\":null,\"customName\":[]},{\"attrID\":1,\"attrName\":\"Druk\",\"attrSort\":2,\"minPages\":null,\"step\":null,\"maxPages\":null,\"names\":{\"en\":{\"name\":\"Print\"},\"pl\":{\"name\":\"Druk\"},\"es\":{\"name\":\"Druk\"}},\"tooltip\":null,\"options\":[{\"ID\":150,\"productOptionID\":1177,\"name\":\"UV kolor\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":11,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"en\":{\"name\":\"UV color\"},\"pl\":{\"name\":\"UV kolor\"},\"es\":{\"name\":\"UV kolor\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0},{\"attrID\":2,\"attrName\":\"Papier\",\"attrSort\":5,\"minPages\":null,\"step\":null,\"maxPages\":null,\"names\":{\"en\":{\"name\":\"Paper\"},\"pl\":{\"name\":\"Papier\"},\"es\":{\"name\":\"Papier\"}},\"tooltip\":null,\"options\":[{\"ID\":399,\"productOptionID\":1124,\"name\":\"01 - przyk\\u0142adowe pod\\u0142o\\u017ce - 100g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":0.1,\"invisible\":0,\"sort\":38,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"01 - przyk\\u0142adowe pod\\u0142o\\u017ce - 100g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)\"},\"en\":{\"name\":\"01 - przyk\\u0142adowe pod\\u0142o\\u017ce - 100g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)\"},\"es\":{\"name\":\"01 - przyk\\u0142adowe pod\\u0142o\\u017ce - 100g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":400,\"productOptionID\":1125,\"name\":\"02 - przyk\\u0142adowe pod\\u0142o\\u017ce - 500g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":0.5,\"invisible\":0,\"sort\":39,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"02 - przyk\\u0142adowe pod\\u0142o\\u017ce - 500g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)\"},\"en\":{\"name\":\"02 - przyk\\u0142adowe pod\\u0142o\\u017ce - 500g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)\"},\"es\":{\"name\":\"02 - przyk\\u0142adowe pod\\u0142o\\u017ce - 500g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":401,\"productOptionID\":1126,\"name\":\"03 - przyk\\u0142adowe pod\\u0142o\\u017ce - 1000g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":1,\"invisible\":0,\"sort\":40,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"03 - przyk\\u0142adowe pod\\u0142o\\u017ce - 1000g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)\"},\"en\":{\"name\":\"03 - przyk\\u0142adowe pod\\u0142o\\u017ce - 1000g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)\"},\"es\":{\"name\":\"03 - przyk\\u0142adowe pod\\u0142o\\u017ce - 1000g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":435,\"productOptionID\":1158,\"name\":\"brak\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":41,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"brak\"},\"en\":{\"name\":\"brak\"},\"es\":{\"name\":\"brak\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":511,\"productOptionID\":1637,\"name\":\"06 - przyk\\u0142adowa waga 1kg za sztuk\\u0119\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":43,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"06 - przyk\\u0142adowa waga 1kg za sztuk\\u0119\"},\"en\":{\"name\":\"06 - przyk\\u0142adowa waga 1kg za sztuk\\u0119\"},\"es\":{\"name\":\"06 - przyk\\u0142adowa waga 1kg za sztuk\\u0119\"}},\"slugs\":null,\"deliveries\":[27],\"excludesOptions\":[]},{\"ID\":512,\"productOptionID\":1638,\"name\":\"04 - przyk\\u0142adowa waga 10g za sztuk\\u0119\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":43,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"04 - przyk\\u0142adowa waga 10g za sztuk\\u0119\"},\"en\":{\"name\":\"04 - przyk\\u0142adowa waga 10g za sztuk\\u0119\"},\"es\":{\"name\":\"04 - przyk\\u0142adowa waga 10g za sztuk\\u0119\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":513,\"productOptionID\":1639,\"name\":\"05 - przyk\\u0142adowa waga 100g za sztuk\\u0119\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":43,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"05 - przyk\\u0142adowa waga 100g za sztuk\\u0119\"},\"en\":{\"name\":\"05 - przyk\\u0142adowa waga 100g za sztuk\\u0119\"},\"es\":{\"name\":\"05 - przyk\\u0142adowa waga 100g za sztuk\\u0119\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0},{\"attrID\":56,\"attrName\":\"cecha testowa\",\"attrSort\":53,\"minPages\":null,\"step\":null,\"maxPages\":null,\"names\":{\"pl\":{\"name\":\"cecha testowa\"},\"en\":{\"name\":\"cecha testowa\"},\"es\":{\"name\":\"cecha testowa\"}},\"tooltip\":null,\"options\":[{\"ID\":375,\"productOptionID\":1054,\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":0,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"},\"en\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"},\"es\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":376,\"productOptionID\":1053,\"name\":\"(02) sztuki produktu (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":1,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"},\"en\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"},\"es\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":377,\"productOptionID\":1055,\"name\":\"(03) komplet blach (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":2,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"},\"en\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"},\"es\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":378,\"productOptionID\":1056,\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":3,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"},\"en\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"},\"es\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":379,\"productOptionID\":1057,\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":4,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"},\"en\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"},\"es\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":380,\"productOptionID\":1058,\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":5,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"en\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"es\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":381,\"productOptionID\":1059,\"name\":\"(07) wszystkie strony (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":6,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"},\"en\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"},\"es\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":382,\"productOptionID\":1060,\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":7,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"en\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"es\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":383,\"productOptionID\":1061,\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":8,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"},\"en\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"},\"es\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":384,\"productOptionID\":1062,\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":9,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"},\"en\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"},\"es\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":385,\"productOptionID\":1063,\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":10,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"},\"en\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"},\"es\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":386,\"productOptionID\":1064,\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":11,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"},\"en\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"},\"es\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":387,\"productOptionID\":1065,\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":12,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"},\"en\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"},\"es\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":388,\"productOptionID\":1066,\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":13,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"},\"en\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"},\"es\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":389,\"productOptionID\":1067,\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":14,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"},\"en\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"},\"es\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":390,\"productOptionID\":1068,\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":15,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"},\"en\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"},\"es\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":391,\"productOptionID\":1069,\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":16,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"},\"en\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"},\"es\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":392,\"productOptionID\":1070,\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":17,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"},\"en\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"},\"es\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":393,\"productOptionID\":1071,\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":18,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"},\"en\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"},\"es\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":394,\"productOptionID\":1072,\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":19,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"},\"en\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"},\"es\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":395,\"productOptionID\":1073,\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":20,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"},\"en\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"},\"es\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":397,\"productOptionID\":1075,\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":21,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"},\"en\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"},\"es\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":402,\"productOptionID\":1078,\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":22,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"},\"en\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"},\"es\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":403,\"productOptionID\":1080,\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":23,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"},\"en\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"},\"es\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":404,\"productOptionID\":1083,\"name\":\"(25) metry kwadratowe dla formatu netto\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":24,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"},\"en\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"},\"es\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":434,\"productOptionID\":1121,\"name\":\"(26) metry kwadratowe dla stron\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":25,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(26) metry kwadratowe dla stron\"},\"en\":{\"name\":\"(26) metry kwadratowe dla stron\"},\"es\":{\"name\":\"(26) metry kwadratowe dla stron\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":436,\"productOptionID\":1123,\"name\":\"(27) cena procentowa (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":26,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(27) cena procentowa (jeden typ cennika)\"},\"en\":{\"name\":\"(27) cena procentowa (jeden typ cennika)\"},\"es\":{\"name\":\"(27) cena procentowa (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":440,\"productOptionID\":1166,\"name\":\"(28) pakiet\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":27,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(28) pakiet\"},\"en\":{\"name\":\"(28) pakiet\"},\"es\":{\"name\":\"(28) pakiet\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":444,\"productOptionID\":1635,\"name\":\"(29) paczka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":28,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(29) paczka\"},\"en\":{\"name\":\"(29) paczka\"},\"es\":{\"name\":\"(29) paczka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":443,\"productOptionID\":1167,\"name\":\"(30) sztuki produktu - cena dla nak\\u0142adu\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":29,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(30) sztuki produktu - cena dla nak\\u0142adu\"},\"en\":{\"name\":\"(30) sztuki produktu - cena dla nak\\u0142adu\"},\"es\":{\"name\":\"(30) sztuki produktu - cena dla nak\\u0142adu\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":510,\"productOptionID\":1636,\"name\":\"(31) wszystkie arkusze - cena dla nak\\u0142adu\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":30,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(31) wszystkie arkusze - cena dla nak\\u0142adu\"},\"en\":{\"name\":\"(31) wszystkie arkusze - cena dla nak\\u0142adu\"},\"es\":{\"name\":\"(31) wszystkie arkusze - cena dla nak\\u0142adu\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":432,\"productOptionID\":1094,\"name\":\"brak\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":35,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"brak\"},\"en\":{\"name\":\"brak\"},\"es\":{\"name\":\"brak\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":620,\"productOptionID\":2034,\"name\":\"cm\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":41,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"cm\"},\"en\":{\"name\":\"cm\"},\"es\":{\"name\":\"cm\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0},{\"attrID\":57,\"attrName\":\"cecha testowa dla wybranych stron\",\"attrSort\":54,\"minPages\":1,\"step\":1,\"maxPages\":5,\"names\":{\"pl\":{\"name\":\"cecha testowa dla wybranych stron\"},\"en\":{\"name\":\"cecha testowa dla wybranych stron\"},\"es\":{\"name\":\"cecha testowa dla wybranych stron\"}},\"tooltip\":null,\"options\":[{\"ID\":433,\"productOptionID\":1127,\"name\":\"brak\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":0,\"emptyChoice\":true,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"brak\"},\"en\":{\"name\":\"brak\"},\"es\":{\"name\":\"brak\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":407,\"productOptionID\":1128,\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":1,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(01) # wszystkie arkusze (jeden typ cennika)\"},\"en\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"},\"es\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":408,\"productOptionID\":1129,\"name\":\"(02) sztuki produktu (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":2,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(02) # sztuki produktu (jeden typ cennika)\"},\"en\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"},\"es\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":409,\"productOptionID\":1130,\"name\":\"(03) komplet blach (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":3,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"},\"en\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"},\"es\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":410,\"productOptionID\":1131,\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":4,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"},\"en\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"},\"es\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":411,\"productOptionID\":1132,\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":5,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(05) # obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"},\"en\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"},\"es\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":412,\"productOptionID\":1133,\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":6,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"en\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"es\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":413,\"productOptionID\":1134,\"name\":\"(07) wszystkie strony (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":7,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(07) # wszystkie strony (jeden typ cennika)\"},\"en\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"},\"es\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":414,\"productOptionID\":1135,\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":8,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(08) # wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"en\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"es\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":415,\"productOptionID\":1136,\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":9,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"},\"en\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"},\"es\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":416,\"productOptionID\":1137,\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":10,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"},\"en\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"},\"es\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":417,\"productOptionID\":1138,\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":11,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(11) # sztuki produktu - cena procentowa (jeden typ cennika)\"},\"en\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"},\"es\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":418,\"productOptionID\":1139,\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":12,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(12) # d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"},\"en\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"},\"es\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":419,\"productOptionID\":1140,\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":13,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(13) # d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"},\"en\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"},\"es\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":420,\"productOptionID\":1141,\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":14,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(14) # ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"},\"en\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"},\"es\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":421,\"productOptionID\":1142,\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":15,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"},\"en\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"},\"es\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":422,\"productOptionID\":1143,\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":16,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"},\"en\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"},\"es\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":423,\"productOptionID\":1144,\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":17,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(17) # d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"},\"en\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"},\"es\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":424,\"productOptionID\":1145,\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":18,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"},\"en\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"},\"es\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":425,\"productOptionID\":1146,\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":19,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"},\"en\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"},\"es\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":426,\"productOptionID\":1147,\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":20,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"},\"en\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"},\"es\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":427,\"productOptionID\":1148,\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":21,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"},\"en\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"},\"es\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":428,\"productOptionID\":1149,\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":22,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"},\"en\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"},\"es\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":429,\"productOptionID\":1150,\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":23,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(23) # d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"},\"en\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"},\"es\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":430,\"productOptionID\":1151,\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":24,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(24) # d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"},\"en\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"},\"es\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":431,\"productOptionID\":1152,\"name\":\"(25) metry kwadratowe dla formatu netto\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":25,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"},\"en\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"},\"es\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":437,\"productOptionID\":1154,\"name\":\"(26) metry kwadratowe dla stron\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":26,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(26) metry kwadratowe dla stron\"},\"en\":{\"name\":\"(26) metry kwadratowe dla stron\"},\"es\":{\"name\":\"(26) metry kwadratowe dla stron\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":438,\"productOptionID\":1155,\"name\":\"(27) cena procentowa\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":27,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(27) cena procentowa\"},\"en\":{\"name\":\"(27) cena procentowa\"},\"es\":{\"name\":\"(27) cena procentowa\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":441,\"productOptionID\":1160,\"name\":\"(28) ilo\\u015b\\u0107 produkt\\u00f3w w pakiecie\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":28,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(28) ilo\\u015b\\u0107 produkt\\u00f3w w pakiecie\"},\"en\":{\"name\":\"(28) ilo\\u015b\\u0107 produkt\\u00f3w w pakiecie\"},\"es\":{\"name\":\"(28) ilo\\u015b\\u0107 produkt\\u00f3w w pakiecie\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":442,\"productOptionID\":1161,\"name\":\"(29) Paczka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":29,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(29) Paczka\"},\"en\":{\"name\":\"(29) Paczka\"},\"es\":{\"name\":\"(29) Paczka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0},{\"attrID\":71,\"attrName\":\"sztancowanie (powi\\u0105zane z formatem druku)\",\"attrSort\":65,\"minPages\":null,\"step\":null,\"maxPages\":null,\"names\":{\"pl\":{\"name\":\"sztancowanie (powi\\u0105zane z formatem druku)\"},\"en\":{\"name\":\"sztancowanie (powi\\u0105zane z formatem druku)\"},\"es\":{\"name\":\"sztancowanie (powi\\u0105zane z formatem druku)\"}},\"tooltip\":null,\"options\":[{\"ID\":527,\"productOptionID\":1678,\"name\":\"brak\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":1,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"brak\"},\"en\":{\"name\":\"brak\"},\"es\":{\"name\":\"brak\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":528,\"productOptionID\":1679,\"name\":\"sztancowanie\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":2,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"sztancowanie\"},\"en\":{\"name\":\"sztancowanie\"},\"es\":{\"name\":\"sztancowanie\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0}])\n                    $httpBackend.whenGET(/ps_typeDescriptions\\/typeDescriptionsPublic\\?groupID=undefined&typeID=undefined/).respond(200, [{\"ID\":60,\"typeID\":80,\"descID\":59,\"order\":0,\"langs\":{\"pl\":{\"name\":\"Opis pola wyboru - cecha testowa\",\"description\":\"<p>Produkt przygotowany poni\\u017cej ma ustawione parametry prezentuj\\u0105ce r\\u00f3\\u017cne sposoby wyliczania ceny. Warto\\u015bci, kt\\u00f3rymi si\\u0119 pos\\u0142u\\u017cy\\u0142em pokazuj\\u0105 jak dzia\\u0142a dana metoda.<\\/p><p>W przypadku gdy w cenniku pos\\u0142ugujemy si\\u0119 cen\\u0105 zmniejszaj\\u0105c\\u0105 si\\u0119 dla rosn\\u0105cych nak\\u0142ad\\u00f3w (im wy\\u017cszy nak\\u0142ad tym ni\\u017csza cena), pomi\\u0119dzy warto\\u015bciami brzegowymi wpisanymi w przedzia\\u0142y program wylicza \\u015bredni\\u0105 arytmetyczn\\u0105 dla ilo\\u015bci i ceny z konkretnego przedzia\\u0142u.<\\/p><p>Niekt\\u00f3re cechy opisa\\u0142em jedn\\u0105 warto\\u015bci\\u0105, by pokaza\\u0107, \\u017ce zmiana warto\\u015bci zale\\u017cy od np: ilo\\u015bci sztuk, &nbsp;grubo\\u015bci pod\\u0142o\\u017ca, powierzchni, obwodu.&nbsp;<\\/p><p>Ka\\u017cda opcja cechy (warto\\u015b\\u0107 wybierana z pola wyboru) ma mo\\u017cliwo\\u015b\\u0107 ustawienia (w przypadku tego produktu nie u\\u017cy\\u0142em tych mo\\u017cliwo\\u015bci):<\\/p><ul><li>ceny za start (warto\\u015b\\u0107 doliczana jednorazowo do warto\\u015bci wyliczonej z cennik\\u00f3w)<\\/li><li>ceny minimalnej (warto\\u015b\\u0107 brana pod uwag\\u0119 do czasu, a\\u017c cena z cennik\\u00f3w przekroczy cen\\u0119 minimaln\\u0105)<\\/li><li>kosztu za start jak i ka\\u017cd\\u0105 opcj\\u0119 cechy (mo\\u017cna u\\u017cy\\u0107 tej funkcjonalno\\u015bci do wyliczenia rentowno\\u015bci, albo do ustalenia drugiego cennika)<\\/li><\\/ul>\"}},\"descType\":1,\"isOpen\":false,\"visible\":0,\"countFormats\":0,\"formats\":[]},{\"ID\":61,\"typeID\":80,\"descID\":60,\"order\":0,\"langs\":{\"pl\":{\"name\":\"Opis poszczeg\\u00f3lnych cennik\\u00f3w (metod wyliczania ceny)\",\"description\":\"<p>Poni\\u017cej opisa\\u0142em jak dzia\\u0142aj\\u0105 poszczeg\\u00f3lne metody wyliczania cen, we wszystkich przypadkach pos\\u0142uguj\\u0119 si\\u0119 danymi dost\\u0119pnymi w panelu administracyjnym wybieraj\\u0105c:<br>Rodzaj cennika z rozwijanej listy <br>w pola: Ilo\\u015b\\u0107 (przedzia\\u0142), Cena jednostkowa, Koszt jednostkowy wpisa\\u0142em warto\\u015bci przyk\\u0142adowe (dla druku cyfrowego o formacie SRA3, druk offsefowy i wielkoformatowy maj\\u0105 wpisane inne warto\\u015bci).<\\/p><ol><li><b>Przeloty (wszystkie arkusze)<\\/b> - Program wylicza ile arkuszy jest potrzebnych do wydrukowania danej pracy (na podstawie zdefiniowanych format\\u00f3w, kt\\u00f3re mo\\u017cna w\\u0142o\\u017cy\\u0107 do maszyny drukuj\\u0105cej oraz formatu produktu wybieranego z rozwijanej listy lub podanego przez u\\u017cytkownika (je\\u015bli taka opcja jest w\\u0142\\u0105czona) i za ka\\u017cdy arkusz dolicza warto\\u015b\\u0107 zdefiniowan\\u0105 w przedzia\\u0142ach, w przypadku tej opcji wpisa\\u0142em: <br><u>1 arkusz<\\/u> - 10 z\\u0142, <u>10 arkuszy<\\/u> - 8 z\\u0142, <u>100 arkuszy<\\/u> - 7 z\\u0142 (cena dotyczy jednego arkusza w podanym nak\\u0142adzie). Cena zale\\u017cy od formatu papieru jaki wk\\u0142adamy do maszyny drukuj\\u0105cej, formatu pracy i nak\\u0142adu.<\\/li><li><b>Sztuki produktu<\\/b>&nbsp;<b>- cena dla jednostki <\\/b>- Program liczy podane w tabeli warto\\u015bci dla ka\\u017cdej sztuki produktu. Cena nie zale\\u017cy od formatu ani obj\\u0119to\\u015bci, w przypadku tej opcji wpisa\\u0142em: <br><u>1 sztuka<\\/u> - 10 z\\u0142, <u>10 sztuk<\\/u> - 8 z\\u0142, <u>100 sztuk<\\/u> - 7 z\\u0142 (cena dotyczy jednej sztuki w nak\\u0142adzie).<\\/li><li><b>Komplety blach (ilo\\u015b\\u0107 arkuszy drukarskich)<\\/b> - Program sprawdza ile u\\u017cytk\\u00f3w zmie\\u015bci si\\u0119 na arkuszu i dla prac wielostronicowych wylicza ile rodzaj\\u00f3w arkuszy (arkuszy drukarskich) jest potrzebne do wydrukowania danej pracy, do ka\\u017cdego rodzaju arkusza (arkusza drukarskiego) dolicza warto\\u015bci z tabeli.  w przypadku tej opcji wpisa\\u0142em: <br><u>1 arkusz<\\/u> (ka\\u017cdy arkusz drukarski)- 10 z\\u0142. Tego rodzaju cennika mo\\u017cna u\\u017cy\\u0107 do okre\\u015blenia warto\\u015bci przyrz\\u0105du (ustawienia maszyny drukuj\\u0105cej) \\u0142\\u0105cznie z blachami.<\\/li><li><b>Metry kwadratowe<\\/b> - Program wylicza ile metr\\u00f3w kwadratowych jest potrzebne do wydrukowania danej pracy, <u>spad jest brany pod uwag\\u0119<\\/u>, cena zale\\u017cy wy\\u0142\\u0105cznie od powierzchni brutto pracy (\\u0142\\u0105cznie ze spadem), metoda dzia\\u0142a dla sztuki produktu nie bior\\u0105c pod uwag\\u0119 obj\\u0119to\\u015bci, w przypadku tej opcji wpisa\\u0142em: <br><u>1 m\\u00b2<\\/u> - 10 z\\u0142, <u>10 m\\u00b2<\\/u> - 8 z\\u0142, <u>100 m\\u00b2<\\/u> - 7 z\\u0142 (cena dotyczy jednego metra kwadratowego przy zam\\u00f3wieniu odpowiedniej (podanej w przedzia\\u0142ach) ilo\\u015bci metr\\u00f3w kwadratowych). (dzia\\u0142a gdy jest jedna kartka, nie dzia\\u0142a dla produkt\\u00f3w wielostronicowych)<\\/li><li><b>Obw\\u00f3d w metrach<\\/b> - (dzia\\u0142a gdy jest jedna kartka, nie dzia\\u0142a dla produkt\\u00f3w wielostronicowych)<br><u>1 m<\\/u> - 10 z\\u0142<\\/li><li><b>Wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu)<\\/b> - Program wylicza ile arkuszy jest potrzebnych do wydrukowania danej pracy (na podstawie zdefiniowanych format\\u00f3w, kt\\u00f3re mo\\u017cna w\\u0142o\\u017cy\\u0107 do maszyny drukuj\\u0105cej oraz formatu produktu wybieranego z rozwijanej listy lub podanego przez u\\u017cytkownika (je\\u015bli taka opcja jest w\\u0142\\u0105czona) i za ka\\u017cdy arkusz dolicza warto\\u015b\\u0107 zdefiniowan\\u0105 dla nak\\u0142adu produktu (inaczej ni\\u017c dla pierwszej metody), w przypadku tej opcji wpisa\\u0142em: <br><u>1 arkusz<\\/u> - 10 z\\u0142, <u>10 arkuszy<\\/u> - 8 z\\u0142, <u>100 arkuszy<\\/u> - 7 z\\u0142 (cena dotyczy jednego arkusza w podanym nak\\u0142adzie). Cena zale\\u017cy od formatu papieru jaki wk\\u0142adamy do maszyny drukuj\\u0105cej, formatu pracy i nak\\u0142adu (z nak\\u0142adu produktu s\\u0105 brane przedzia\\u0142y ilo\\u015bciowe).<\\/li><li><b>Wszystkie strony<\\/b> (jeden typ cennika) - 1 strona - 10 z\\u0142, 10 stron - 8 z\\u0142, 100 stron - 7 z\\u0142 (cena dotyczy jednej strony w podanym nak\\u0142adzie).&nbsp;<\\/li><li><b>Wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) <\\/b>- 1 strona - 10 z\\u0142, 10 stron - 8 z\\u0142, 100 stron - 7 z\\u0142 (cena dotyczy jednej strony w nak\\u0142adzie pobieranym z nak\\u0142adu produktu).<\\/li><li><b>Sztuki produktu (przedzia\\u0142 cenowy dla arkuszy)<\\/b> - Program dolicza zdefiniowan\\u0105 w przedzia\\u0142ach warto\\u015b\\u0107 do ka\\u017cdej sztuki produktu w zale\\u017cno\\u015bci od tego ile arkuszy do druku jest potrzebnych do wydrukowania danej pracy, w przypadku tej opcji wpisa\\u0142em: <br><u>1 arkusz<\\/u> - 1 z\\u0142, <u>10 arkuszy<\\/u> - 5 z\\u0142, <u>100 arkuszy<\\/u> - 10 z\\u0142 (cena dotyczy jednego arkusza w podanym nak\\u0142adzie).<\\/li><li><b>Sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm)<\\/b> - Cena zale\\u017cy od grubo\\u015bci egzemplarza w mm, by funkcja zadzia\\u0142a\\u0142a musimy mie\\u0107 wpisan\\u0105 grubo\\u015b\\u0107 poszczeg\\u00f3lnych pod\\u0142o\\u017cy, w tym przypadku ustawi\\u0142em przedzia\\u0142y: <br><u>od 1 do 5 mm<\\/u> w cenie 1 z\\u0142 za sztuk\\u0119 produktu, <br><u>6-10 mm<\\/u> - 2 z\\u0142, <u>11-20 mm<\\/u> - 3 z\\u0142,<u> 21-30 mm<\\/u> - 4 z\\u0142, <u>31-40 mm<\\/u> - 5 z\\u0142, <u>100 mm<\\/u> 10 z\\u0142, <br>co oznacza, \\u017ce od 40 do 100 mm b\\u0119dzie wyliczana \\u015brednia cena pomi\\u0119dzy 5 z\\u0142 a 10 z\\u0142 - w zale\\u017cno\\u015bci od grubo\\u015bci egzemplarza,<br>grubo\\u015b\\u0107 pracy jest wyliczana z cechy papier, kt\\u00f3ra ma nast\\u0119puj\\u0105ce opcje: <ul><li>01 - przyk\\u0142adowe pod\\u0142o\\u017ce - <u>100 g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)<\\/u><\\/li><li>02 - przyk\\u0142adowe pod\\u0142o\\u017ce - <u>500 g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)<\\/u><\\/li><li>03 - przyk\\u0142adowe pod\\u0142o\\u017ce - <u>1000 g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)<\\/u><\\/li><\\/ul><\\/li><li><b>Sztuki produktu - cena procentowa<\\/b> - funkcja dodaje do wyliczonej warto\\u015bci z poprzedzaj\\u0105cych j\\u0105 innych rodzaj\\u00f3w cennik\\u00f3w przypisanych do danej opcji cechy krotno\\u015b\\u0107 podanego wsp\\u00f3\\u0142czynnika procentowego, <u>gdzie cena jednostkowa 1 to 100%<\\/u>.<br>W przypadku tej opcji ustawi\\u0142em cennik:<br>- Przeloty (wszystkie arkusze) gdzie za ka\\u017cdy arkusz jest doliczane 10 z\\u0142, <br>- Sztuki produktu gdzie za ka\\u017cd\\u0105 sztuk\\u0119 jest doliczany 1 z\\u0142.<br>Cennik: Sztuki produktu - cena procentowa, ma wpisane nast\\u0119puj\\u0105ce warto\\u015bci:<br>1 sztuka - 2&nbsp;<\\/li><li><b>D\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku<\\/b> - dla sztuki produktu, obj\\u0119to\\u015b\\u0107 nie ma wp\\u0142ywu ce wyliczon\\u0105 cen\\u0119, w przypadku tej opcji wpisa\\u0142em: <u>1 m - 10 z\\u0142<\\/u>, dla warto\\u015bci ni\\u017cszych jest wyliczana \\u015brednia, jednostk\\u0105 w przypadku tej cechy jest metr, gdy d\\u0142ugo\\u015b\\u0107 wynosi np 50 cm wyliczana cena b\\u0119dzie wynosi\\u0107 5 z\\u0142<\\/li><li><b>D\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku <\\/b>- dla sztuki produktu, obj\\u0119to\\u015b\\u0107 nie ma wp\\u0142ywu ce wyliczon\\u0105 cen\\u0119, w przypadku tej opcji wpisa\\u0142em: <u>1 m - 10 z\\u0142<\\/u>, dla warto\\u015bci ni\\u017cszych jest wyliczana \\u015brednia, jednostk\\u0105 w przypadku tej cechy jest metr, gdy d\\u0142ugo\\u015b\\u0107 wynosi np 40 cm wyliczana cena b\\u0119dzie wynosi\\u0107 4 z\\u0142<\\/li><li><b>Ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w<\\/b>, w przedziale 1 ustawiamy cen\\u0119 za 2 u\\u017cytki, dla nieparzystych ilo\\u015bci program wyliczy \\u015bredni\\u0105, cena nie zale\\u017cy od formatu, tylko od ilo\\u015bci stron (u\\u017cytk\\u00f3w) w wyliczanej pracy, w przypadku tej opcji wpisa\\u0142em: <u>1 u\\u017cytek - 10 z\\u0142<\\/u>, co dla zwi\\u0119kszenia obj\\u0119to\\u015bci o 1 zwi\\u0119ksza cen\\u0119 o 5 z\\u0142<\\/li><li><b>Ilo\\u015b\\u0107 farby w litrach<\\/b> (przedzia\\u0142 cenowy dla nak\\u0142adu) - funkcja wyliczaj\\u0105ca zu\\u017cycie farby, przygotowana dla maszyn Jetrion na podstawie analizy zawarto\\u015bci pliku, u\\u017cycie jej wymaga&nbsp;<\\/li><li><b>Sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron)<\\/b> &nbsp;- program dolicza zdefiniowan\\u0105 warto\\u015b\\u0107 w zale\\u017cno\\u015bci od obj\\u0119to\\u015bci liczonej w stronach, <br>w tym przypadku wpisa\\u0142em dla <u>1 strony - 1 z\\u0142<\\/u>, dla <u>10 stron - 2 z\\u0142<\\/u>, dla <u>100 stron - 3 z\\u0142<\\/u><\\/li><li><b>D\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach<\\/b> &nbsp;- program liczy obw\\u00f3d wszystkich u\\u017cytk\\u00f3w, <br>w tym przypadku wpisa\\u0142em wpisa\\u0142em dla <u>1 m - 10 z\\u0142<\\/u><\\/li><li><b>Metry kwadratowe zu\\u017cytego materia\\u0142u<\\/b> - &nbsp;liczy powierzchni\\u0119 \\u0142\\u0105cznie ze spadem dla sztuki produktu, w przypadku tej opcji wpisa\\u0142em: <u>1 m\\u00b2 - 10 z\\u0142, <\\/u>obj\\u0119to\\u015b\\u0107\\/ilo\\u015b\\u0107 stron nie ma wp\\u0142ywu na cen\\u0119<\\/li><li><b>Ilo\\u015b\\u0107 wszystkich falc\\u00f3w<\\/b> - do konfiguracji tej cechy niezb\\u0119dne jest ustawienie formatu strony w rozk\\u0142ad\\u00f3wkach (wyliczane i wy\\u015bwietlane parametry s\\u0105 rozdzielne i tak dla katalogu o formacie A4 podajemy format rozk\\u0142ad\\u00f3wki), oraz uzupe\\u0142nienie papier\\u00f3w o maksymaln\\u0105 ilo\\u015b\\u0107 falc\\u00f3w dla danej gramatury czy rodzaju papieru.<\\/li><li><b>Powierzchnia zu\\u017cytych arkuszy<\\/b> - program liczy powierzchni\\u0119 wszystkich wykorzystanych arkuszy bior\\u0105c pod uwag\\u0119 r\\u00f3wnie\\u017c zwy\\u017cki,  ten typ wyliczania ceny nadaje si\\u0119 do u\\u017cywania w produktach nie wielkoformatowych (do wielkiego formatu istniej\\u0105 inne rodzaje cen). W przedziale podajemy ilo\\u015b\\u0107 m\\u00b2 a w cenie - cen\\u0119 za 1 m\\u00b2, w przypadku tej opcji wpisa\\u0142em: <u>1 m\\u00b2 - 10 z\\u0142<\\/u>,&nbsp;<\\/li><li><b>Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy)<\\/b> - program liczy powierzchni\\u0119 wszystkich wykorzystanych arkuszy bior\\u0105c pod uwag\\u0119 r\\u00f3wnie\\u017c zwy\\u017cki, ten typ wyliczania ceny nadaje si\\u0119 do u\\u017cywania w produktach nie wielkoformatowych (do wielkiego formatu istniej\\u0105 inne rodzaje cen). W przedziale podajemy ilo\\u015b\\u0107 arkuszy a w cenie - cen\\u0119 za 1 m\\u00b2, w przypadku tej opcji wpisa\\u0142em: <u>1 m\\u00b2 - 10 z\\u0142,&nbsp;<\\/u><\\/li><li><b>Zbieranie po falcowaniu <\\/b>- program liczy ile arkuszy mamy do zbierania po falcowaniu, wynik dzia\\u0142ania zale\\u017cy od tego jakie parametry mamy ustawione dla papieru ile razy papier mo\\u017ce by\\u0107 \\u0142amany (falcowany), np dla arkusza A2 i formatu pracy A4<br><ul><li>dla maksymalnej ilo\\u015bci falc\\u00f3w 3 arkusz b\\u0119dzie nie b\\u0119dzie rozcinany i zostanie sfalcowany w 16-stk\\u0119 - z ka\\u017cdego arkusza drukarskiego mamy 1 arkusz do zbierania<\\/li><li>dla maksymalnej ilo\\u015bci falc\\u00f3w 2 arkusz b\\u0119dzie rozci\\u0119ty na 2 cz\\u0119\\u015bci b\\u0119dzie sfalcowany w 8-k\\u0119 - z ka\\u017cdego arkusza drukarskiego mamy 2 arkusze do zbierania<\\/li><li>dla maksymalnej ilo\\u015bci falc\\u00f3w 1 arkusz b\\u0119dzie rozci\\u0119ty na 4 cz\\u0119\\u015bci i zostanie sfalcowany w 4-k\\u0119 - z ka\\u017cdego arkusza drukarskiego mamy 4 arkusze do zbierania<\\/li><\\/ul><\\/li><li><b>D\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci <\\/b>- dla sztuki produktu, obj\\u0119to\\u015b\\u0107 nie ma wp\\u0142ywu wyliczon\\u0105 cen\\u0119, w przypadku tej opcji wpisa\\u0142em: 1 m - 10 z\\u0142, dla warto\\u015bci ni\\u017cszych jest wyliczana \\u015brednia, jednostk\\u0105 w przypadku tej cechy jest metr, gdy d\\u0142ugo\\u015b\\u0107 wynosi np 50 cm wyliczana cena b\\u0119dzie wynosi\\u0107 5 z\\u0142<\\/li><li><b>D\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci<\\/b> - dla sztuki produktu, obj\\u0119to\\u015b\\u0107 nie ma wp\\u0142ywu wyliczon\\u0105 cen\\u0119, w przypadku tej opcji wpisa\\u0142em: 1 m - 10 z\\u0142, dla warto\\u015bci ni\\u017cszych jest wyliczana \\u015brednia, jednostk\\u0105 w przypadku tej cechy jest metr, gdy d\\u0142ugo\\u015b\\u0107 wynosi np 50 cm wyliczana cena b\\u0119dzie wynosi\\u0107 5 z\\u0142<\\/li><li><b>Metry kwadratowe dla formatu netto<\\/b> - Program wylicza ile metr\\u00f3w kwadratowych jest potrzebne do wydrukowania danej pracy, <u>spad nie jest brany pod uwag\\u0119<\\/u>, cena zale\\u017cy wy\\u0142\\u0105cznie od powierzchni netto pracy, metoda dzia\\u0142a dla sztuki produktu nie bior\\u0105c pod uwag\\u0119 obj\\u0119to\\u015bci, w przypadku tej opcji wpisa\\u0142em: <br>1 m\\u00b2 - 10 z\\u0142, 10 m\\u00b2 - 8 z\\u0142, 100 m\\u00b2 - 7 z\\u0142 (cena dotyczy jednego metra kwadratowego przy zam\\u00f3wieniu odpowiedniej (podanej w przedzia\\u0142ach) ilo\\u015bci metr\\u00f3w kwadratowych, dzia\\u0142a gdy jest jedna kartka, nie dzia\\u0142a dla produkt\\u00f3w wielostronicowych)<\\/li><li><b>Metry kwadratowe dla stron<\\/b> - Program wylicza ile metr\\u00f3w kwadratowych jest potrzebne do wydrukowania danej pracy, bior\\u0105c pod uwag\\u0119 obj\\u0119to\\u015b\\u0107 i spad, cena zale\\u017cy od powierzchni brutto stron, ilo\\u015bci stron i nak\\u0142adu, w przypadku tej opcji wpisa\\u0142em:&nbsp;<br><u>1 m\\u00b2 <\\/u>- 10 z\\u0142, <u>10 m\\u00b2<\\/u> - 8 z\\u0142, <u>100 m\\u00b2<\\/u> - 7 z\\u0142 (cena dotyczy jednego metra kwadratowego przy zam\\u00f3wieniu odpowiedniej (podanej w przedzia\\u0142ach) ilo\\u015bci metr\\u00f3w kwadratowych, dzia\\u0142a dla produkt\\u00f3w wielostronicowych)<\\/li><li><b>Cena procentowa<\\/b> - funkcja mno\\u017cy przez podany wsp\\u00f3\\u0142czynnik procentowy inne rodzaje cennik\\u00f3w przypisane do danej opcji cechy. Cena jednostkowa 1 to 100%.&nbsp;<\\/li><li><b>Pakiet<\\/b> - funkcja umo\\u017cliwia podzia\\u0142 zam\\u00f3wienia na mniejsze cz\\u0119\\u015bci o zdefiniowanej ilo\\u015bci o okre\\u015blonej warto\\u015bci, mo\\u017ce s\\u0142u\\u017cy\\u0107 np do wyliczenie kompletowania, banderolowania, pakowania w foli\\u0119 termokurczliw\\u0105 itp. Funkcjonalno\\u015b\\u0107 dzia\\u0142a, dla cechy, kt\\u00f3ra jest zdefiniowana jako Definiowana ilo\\u015b\\u0107 operacji na opcji (- tak zdefiniowana cecha w\\u0142\\u0105cza spiner) w ten spos\\u00f3b pozwalamy klientowi okre\\u015bli\\u0107 spos\\u00f3b pakowania produktu w okre\\u015blonych przez niego ilo\\u015bciach i doliczy\\u0107 odpowiedni\\u0105 warto\\u015b\\u0107 (cen\\u0119 pakietu).W przypadku gdy ustawimy ograniczenia dla cechy umo\\u017cliwiaj\\u0105ce zdefiniowanie przez klienta pakietu o wy\\u017cszej ilo\\u015bci ni\\u017c nak\\u0142ad, w\\u00f3wczas zostanie doliczony jeden pakiet.W przypadku gdy ilo\\u015b\\u0107 pakiet\\u00f3w wyliczana z r\\u00f3wnania (nak\\u0142ad\\/(ilo\\u015b\\u0107 sztuk w pakiecie)) jest u\\u0142amkiem, wynik dzielenia zamieniamy na liczb\\u0119 naturaln\\u0105.<\\/li><li><b>Paczka<\\/b> - dzia\\u0142anie metody polega na okre\\u015bleniu ile razy zdefiniowana warto\\u015b\\u0107 ma by\\u0107 doliczona do warto\\u015bci zam\\u00f3wienia. Funkcjonalno\\u015b\\u0107 dzia\\u0142a, dla cechy, kt\\u00f3ra jest zdefiniowana jako Definiowana ilo\\u015b\\u0107 operacji na opcji (- tak zdefiniowana cecha w\\u0142\\u0105cza spiner)<\\/li><li><b>Sztuki produktu - cena dla nak\\u0142adu<\\/b> - Program liczy cen\\u0119 sztuki produktu na podstawie warto\\u015bci dla nak\\u0142adu, r\\u00f3\\u017cnica pomi\\u0119dzy metod\\u0105 <u>sztuki produktu - cena dla jednostki<\\/u> a <u>sztuki produktu - cena dla nak\\u0142adu<\\/u> jest taka, \\u017ce nawet przy du\\u017cym spadku warto\\u015bci w przedzia\\u0142ach cena mniejszej ilo\\u015bci sztuk nie b\\u0119dzie wy\\u017csza ni\\u017c cena wi\\u0119kszej ilo\\u015bci. Cena nie zale\\u017cy od formatu ani obj\\u0119to\\u015bci<\\/li><\\/ol>\"}},\"descType\":1,\"isOpen\":false,\"visible\":0,\"countFormats\":0,\"formats\":[]},{\"ID\":78,\"typeID\":80,\"descID\":77,\"order\":0,\"langs\":{\"pl\":{\"name\":\"miniatura\",\"description\":null}},\"descType\":6,\"isOpen\":false,\"visible\":0,\"countFormats\":0,\"formats\":[],\"files\":[{\"ID\":415,\"descID\":77,\"fileID\":72,\"domainID\":4,\"path\":\"0\\/IMG_6731_5.JPG\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/0\\/IMG_6731_5.JPG\",\"urlCrop\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/thumbs\\/0\\/IMG_6731_5.JPG\"}]},{\"ID\":165,\"typeID\":80,\"descID\":137,\"order\":1,\"langs\":{\"pl\":{\"name\":\"galeria\",\"description\":null}},\"descType\":5,\"isOpen\":false,\"visible\":0,\"countFormats\":0,\"formats\":[],\"files\":[{\"ID\":416,\"descID\":137,\"fileID\":74,\"domainID\":4,\"path\":\"0\\/IMG_6739_1.JPG\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/0\\/IMG_6739_1.JPG\",\"urlCrop\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/thumbs\\/0\\/IMG_6739_1.JPG\"},{\"ID\":417,\"descID\":137,\"fileID\":73,\"domainID\":4,\"path\":\"0\\/IMG_6738.JPG\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/0\\/IMG_6738.JPG\",\"urlCrop\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/thumbs\\/0\\/IMG_6738.JPG\"}]}])\n                     $httpBackend.whenPOST(/ps_groups\\/\\/ps_types\\/\\/ps_calculate\\/calculatePublic/,undefined,headers=>{\n                         return headers.hasOwnProperty('x-http-method-override')\n                     }).respond(200, {\"volumes\":[{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":1,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"39,33\",\"basePrice\":\"39,33\",\"weight\":0.01,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"48,38\",\"baseGrossPrice\":\"48,38\",\"oldPrice\":3933.4700000000003,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}},\"volume\":1,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":2,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"48,22\",\"basePrice\":\"48,22\",\"weight\":0.01,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"59,32\",\"baseGrossPrice\":\"59,32\",\"oldPrice\":4822.358888888889,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}},\"volume\":2,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":5,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"78,40\",\"basePrice\":\"78,40\",\"weight\":0.01,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"96,44\",\"baseGrossPrice\":\"96,44\",\"oldPrice\":7840.2844444444445,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}},\"volume\":5,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":10,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"89,32\",\"basePrice\":\"99,25\",\"weight\":0.02,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":10,\"priceBrutto\":\"109,87\",\"baseGrossPrice\":\"122,08\",\"oldPrice\":9924.876666666667,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":{\"1\":1002.4125433333335,\"2\":1091.7364333333335,\"10\":942.8632833333334},\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},\"notSelectedPrintTypes\":[{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}]},\"volume\":10,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":20,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"142,65\",\"basePrice\":\"158,50\",\"weight\":0.03,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":10,\"priceBrutto\":\"175,46\",\"baseGrossPrice\":\"194,95\",\"oldPrice\":15849.616666666667,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":{\"1\":1600.8112833333334,\"2\":1743.4578333333336,\"10\":1505.7135833333332},\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}},\"volume\":20,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":50,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"235,90\",\"basePrice\":\"262,11\",\"weight\":0.08,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":10,\"priceBrutto\":\"290,15\",\"baseGrossPrice\":\"322,39\",\"oldPrice\":26210.666666666668,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":{\"1\":2647.2773333333334,\"2\":2883.1733333333336,\"10\":2490.0133333333333},\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},\"notSelectedPrintTypes\":[{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}]},\"volume\":50,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":100,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"235,78\",\"basePrice\":\"235,78\",\"weight\":0.16,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"290,00\",\"baseGrossPrice\":\"290,00\",\"oldPrice\":23577.600000000002,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},\"notSelectedPrintTypes\":[{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}]},\"volume\":100,\"custom\":false}],\"realisationTimes\":[{\"ID\":1,\"name\":\"Standard\",\"days\":5,\"pricePercentage\":1,\"active\":1,\"order\":0,\"color\":\"#2e7522\",\"names\":{\"en\":\"Standard\",\"pl\":\"Standard\",\"ru\":\"\\u0441\\u0442\\u0430\\u043d\\u0434\\u0430\\u0440\\u0442\"},\"date\":\"2022-12-30\",\"volumes\":[{\"price\":\"39,73\",\"priceBrutto\":\"48,87\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"48,71\",\"priceBrutto\":\"59,91\",\"basePrice\":\"48,22\",\"baseGrossPrice\":\"59,32\",\"volume\":2,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"79,19\",\"priceBrutto\":\"97,40\",\"basePrice\":\"78,40\",\"baseGrossPrice\":\"96,44\",\"volume\":5,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"90,22\",\"priceBrutto\":\"110,97\",\"basePrice\":\"99,25\",\"baseGrossPrice\":\"122,08\",\"volume\":10,\"date\":null,\"active\":true,\"weight\":0.02,\"custom\":false,\"oldPrice\":\"100,24\",\"oldPriceBrutto\":\"123,30\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"144,07\",\"priceBrutto\":\"177,21\",\"basePrice\":\"158,50\",\"baseGrossPrice\":\"194,95\",\"volume\":20,\"date\":null,\"active\":true,\"weight\":0.03,\"custom\":false,\"oldPrice\":\"160,08\",\"oldPriceBrutto\":\"196,90\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"238,25\",\"priceBrutto\":\"293,05\",\"basePrice\":\"262,11\",\"baseGrossPrice\":\"322,39\",\"volume\":50,\"date\":null,\"active\":true,\"weight\":0.08,\"custom\":false,\"oldPrice\":\"264,73\",\"oldPriceBrutto\":\"325,62\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"238,13\",\"priceBrutto\":\"292,90\",\"basePrice\":\"235,78\",\"baseGrossPrice\":\"290,00\",\"volume\":100,\"date\":null,\"active\":true,\"weight\":0.16,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0}]},{\"ID\":2,\"name\":\"Ekspresowy\",\"days\":2,\"pricePercentage\":10,\"active\":1,\"order\":1,\"color\":\"#ad2525\",\"names\":{\"en\":\"Express\",\"pl\":\"Ekspresowy\",\"ru\":\"\\u044d\\u043a\\u0441\\u043f\\u0440\\u0435\\u0441\\u0441\"},\"date\":\"2022-12-27\",\"volumes\":[{\"price\":\"43,27\",\"priceBrutto\":\"53,22\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"53,05\",\"priceBrutto\":\"65,25\",\"basePrice\":\"48,22\",\"baseGrossPrice\":\"59,32\",\"volume\":2,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"86,24\",\"priceBrutto\":\"106,08\",\"basePrice\":\"78,40\",\"baseGrossPrice\":\"96,44\",\"volume\":5,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"98,26\",\"priceBrutto\":\"120,86\",\"basePrice\":\"99,25\",\"baseGrossPrice\":\"122,08\",\"volume\":10,\"date\":null,\"active\":true,\"weight\":0.02,\"custom\":false,\"oldPrice\":\"109,17\",\"oldPriceBrutto\":\"134,28\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"156,91\",\"priceBrutto\":\"193,00\",\"basePrice\":\"158,50\",\"baseGrossPrice\":\"194,95\",\"volume\":20,\"date\":null,\"active\":true,\"weight\":0.03,\"custom\":false,\"oldPrice\":\"174,35\",\"oldPriceBrutto\":\"214,45\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"259,49\",\"priceBrutto\":\"319,17\",\"basePrice\":\"262,11\",\"baseGrossPrice\":\"322,39\",\"volume\":50,\"date\":null,\"active\":true,\"weight\":0.08,\"custom\":false,\"oldPrice\":\"288,32\",\"oldPriceBrutto\":\"354,63\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"259,35\",\"priceBrutto\":\"319,00\",\"basePrice\":\"235,78\",\"baseGrossPrice\":\"290,00\",\"volume\":100,\"date\":null,\"active\":true,\"weight\":0.16,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0}]},{\"ID\":10,\"name\":\"Ekonomiczny\",\"days\":11,\"pricePercentage\":-5,\"active\":1,\"order\":2,\"color\":\"#ad9831\",\"names\":{\"en\":\"Economic\",\"pl\":\"Ekonomiczny\",\"ru\":\"\\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u0439\"},\"date\":\"2023-01-10\",\"volumes\":[{\"price\":\"37,37\",\"priceBrutto\":\"45,96\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"45,81\",\"priceBrutto\":\"56,35\",\"basePrice\":\"48,22\",\"baseGrossPrice\":\"59,32\",\"volume\":2,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"74,48\",\"priceBrutto\":\"91,61\",\"basePrice\":\"78,40\",\"baseGrossPrice\":\"96,44\",\"volume\":5,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"84,86\",\"priceBrutto\":\"104,37\",\"basePrice\":\"99,25\",\"baseGrossPrice\":\"122,08\",\"volume\":10,\"date\":null,\"active\":true,\"weight\":0.02,\"custom\":false,\"oldPrice\":\"94,29\",\"oldPriceBrutto\":\"115,97\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"135,51\",\"priceBrutto\":\"166,68\",\"basePrice\":\"158,50\",\"baseGrossPrice\":\"194,95\",\"volume\":20,\"date\":null,\"active\":true,\"weight\":0.03,\"custom\":false,\"oldPrice\":\"150,57\",\"oldPriceBrutto\":\"185,20\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"224,10\",\"priceBrutto\":\"275,64\",\"basePrice\":\"262,11\",\"baseGrossPrice\":\"322,39\",\"volume\":50,\"date\":null,\"active\":true,\"weight\":0.08,\"custom\":false,\"oldPrice\":\"249,00\",\"oldPriceBrutto\":\"306,27\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"223,99\",\"priceBrutto\":\"275,50\",\"basePrice\":\"235,78\",\"baseGrossPrice\":\"290,00\",\"volume\":100,\"date\":null,\"active\":true,\"weight\":0.16,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0}]}],\"response\":true,\"customVolume\":{\"custom\":false},\"volumeInfo\":{\"custom\":true,\"maxVolume\":10000},\"technologies\":[{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}]})\n                    $httpBackend.whenPOST(/ps_groups\\/\\/ps_types\\/\\/ps_calculate\\/calculatePublic/).respond(200, {\"products\":[{\"groupID\":49,\"typeID\":80,\"formatID\":181,\"formatWidth\":100,\"formatHeight\":100,\"pages\":1,\"attributes\":{\"1\":{\"controllerID\":11,\"attrPages\":null,\"attrID\":1,\"optID\":150,\"all\":{\"volume\":1,\"sheets\":31,\"sheetsAfterCut\":31,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":null,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[],\"devices\":[],\"marginsParts\":{\"\":{\"value\":0,\"type\":\"nature\"}}}},\"2\":{\"controllerID\":23,\"attrPages\":null,\"attrID\":2,\"optID\":399,\"paperPriceKG\":{\"weightKg\":0.19334700000000002,\"priceForKg\":10000,\"price\":1933.4700000000003,\"expenseForKg\":0,\"expense\":0},\"all\":{\"volume\":1,\"sheets\":31,\"sheetsAfterCut\":31,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":null,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[],\"devices\":[],\"marginsParts\":{\"1\":{\"value\":0,\"type\":\"nature\"}}}},\"56\":{\"controllerID\":2,\"attrPages\":null,\"attrID\":56,\"optID\":375,\"all\":{\"volume\":1,\"sheets\":1,\"sheetsAfterCut\":1,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":null,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[\"sheet\"],\"devices\":[],\"marginsParts\":{\"\":{\"value\":0,\"type\":\"nature\"}}}},\"57\":{\"controllerID\":2,\"attrPages\":1,\"attrID\":57,\"optID\":413,\"all\":{\"volume\":1,\"sheets\":1,\"sheetsAfterCut\":1,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":1,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[\"allPages\"],\"devices\":[],\"marginsParts\":{\"\":{\"value\":0,\"type\":\"nature\"}}}},\"71\":{\"controllerID\":11,\"attrPages\":null,\"attrID\":71,\"optID\":527,\"all\":{\"volume\":1,\"sheets\":1,\"sheetsAfterCut\":1,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":null,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[],\"devices\":[],\"marginsParts\":{\"\":{\"value\":0,\"type\":\"nature\"}}}}},\"printTypeID\":11,\"workspaceID\":23,\"thickness\":0.05,\"usePerSheet\":4,\"pageRanges\":{\"minimumPages\":1,\"maximumPages\":1000,\"minimumWarning\":[],\"maximumWarning\":[]}}],\"info\":null,\"response\":true,\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":1,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"39,33\",\"basePrice\":\"39,33\",\"weight\":0.01,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"48,38\",\"baseGrossPrice\":\"48,38\",\"oldPrice\":3933.4700000000003,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},\"currency\":{\"ID\":24,\"domainID\":4,\"code\":\"PLN\",\"course\":100,\"active\":1}},\"realisationTimes\":{\"80\":{\"1\":{\"ID\":1,\"name\":\"Standard\",\"days\":5,\"pricePercentage\":1,\"active\":1,\"order\":0,\"color\":\"#2e7522\",\"names\":{\"en\":\"Standard\",\"pl\":\"Standard\",\"ru\":\"\\u0441\\u0442\\u0430\\u043d\\u0434\\u0430\\u0440\\u0442\"},\"date\":\"2022-12-30\",\"volumes\":[{\"price\":\"39,73\",\"priceBrutto\":\"48,87\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false}]},\"2\":{\"ID\":2,\"name\":\"Ekspresowy\",\"days\":2,\"pricePercentage\":10,\"active\":1,\"order\":1,\"color\":\"#ad2525\",\"names\":{\"en\":\"Express\",\"pl\":\"Ekspresowy\",\"ru\":\"\\u044d\\u043a\\u0441\\u043f\\u0440\\u0435\\u0441\\u0441\"},\"date\":\"2022-12-27\",\"volumes\":[{\"price\":\"43,27\",\"priceBrutto\":\"53,22\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false}]},\"10\":{\"ID\":10,\"name\":\"Ekonomiczny\",\"days\":11,\"pricePercentage\":-5,\"active\":1,\"order\":2,\"color\":\"#ad9831\",\"names\":{\"en\":\"Economic\",\"pl\":\"Ekonomiczny\",\"ru\":\"\\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u0439\"},\"date\":\"2023-01-10\",\"volumes\":[{\"price\":\"37,37\",\"priceBrutto\":\"45,96\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false}]}}},\"correctCalculation\":true,\"errors\":[]})\n                    $rootScope.logged=true\n                    $rootScope.currentLang={code:'pl'}\n                    $rootScope.customBreadcrumbs={group:'bla'}\n                    $stateParams.typeurl='Przykladowy-produkt-produkt-prosty'\n                    $stateParams.groupurl='Przykladowa-grupa-produktow'\n                    $stateParams.categoryurl='promocje'\n                },\n                controller: 'category.CalcCtrl'\n            })\n\n        }","start":17,"end":107,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["$stateProvider.state","$httpBackend.whenGET","backedResponses","$httpBackend.whenPOST","headers.hasOwnProperty"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/demo/routes.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/filters/MenuTypesFilter.js:3-55:filter:menutypes","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/filters/MenuTypesFilter.js","module":null,"name":"menutypes","kind":"filter","nodeType":"Function","dependenciesDI":["$rootScope"],"antiPatterns":[],"text":"angular.module('dpClient.app').filter('menutypes', function ( $rootScope ) {\n    function checkChilds(childs) {\n        var filtered = [];\n        _.each(childs, function (child) {\n            if (!_.isUndefined(child.groups) && !_.isNull(child.groups) && !_.isEmpty(child.groups)) {\n                filtered = _.union(filtered, checkGroups(child.groups));\n            }\n            if (!_.isUndefined(child.types) && !_.isNull(child.types) && !_.isEmpty(child.types)) {\n                filtered = _.union(filtered, child.types);\n            }\n        });\n        return filtered;\n    }\n\n    function checkGroups(groups) {\n        var filtered = [];\n        _.each(groups, function (group) {\n            if (!_.isNull(group) && !_.isUndefined(group.types) && !_.isEmpty(group.types)) {\n                filtered = _.union(filtered, group.types);\n            }\n        });\n        return filtered;\n    }\n\n    return function (items) {\n        if (_.isUndefined(items) || _.isEmpty(items)) {\n            return [];\n        }\n        _.each(items, function (item) {\n            var filtered = [];\n            if (!_.isUndefined(item.childs) && !_.isNull(item.childs) && !_.isEmpty(item.childs)) {\n                filtered = _.union(filtered, checkChilds(item.childs));\n            }\n            if (!_.isUndefined(item.groups) && !_.isNull(item.groups) && !_.isEmpty(item.groups)) {\n                filtered = _.union(filtered, checkGroups(item.groups));\n            }\n            if (!_.isUndefined(item.types) && !_.isNull(item.types) && !_.isEmpty(item.types)) {\n                filtered = _.union(filtered, item.types);\n            }\n            filtered = _.sortBy(_.uniq(filtered, function (item) {\n                return item.ID;\n            }), function( item ) {\n                if(item.names != undefined && $rootScope.currentLang != undefined) {\n                    return item.names[$rootScope.currentLang.code];\n                }\n                return item.name;\n            });\n            item.allTypes = filtered;\n        });\n        return items;\n\n    };\n});","start":3,"end":55,"route":null,"symbol":"menutypes","metadata":{"calls_functions":["angular.module","_.each","_.isUndefined","_.isNull","_.isEmpty","_.union","checkGroups","checkChilds","_.sortBy","_.uniq"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":23,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/routes/main.js:4-6:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/routes/main.js","module":null,"name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$locationProvider","$stateProvider","$urlRouterProvider"],"antiPatterns":[],"text":"        function($locationProvider, $stateProvider ) {\n\n        }","start":4,"end":6,"route":null,"symbol":"anonymous","metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/SliderCtrl.js:2-52:controller:SliderCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/SliderCtrl.js","module":null,"name":"SliderCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","SettingService"],"antiPatterns":[],"text":"    .controller('SliderCtrl', function ($scope, $rootScope, SettingService) {\n\n        $scope.slides = [];\n        $scope.sliderText = '';\n\n        $rootScope.$on('Slider:data', function (event, data) {\n\n            $scope.slides = [];\n            $scope.sliderOptions = {\n                sliderAutoSlide: 3,\n                sliderTransition: 'slide'\n            };\n\n            var tmp = {};\n            if (!_.isEmpty(data)) {\n\n                var Setting = new SettingService('bannerSlider');\n\n                Setting.getPublicSettings().then(function(settingsData) {\n                    if( settingsData.sliderAutoSlide ) {\n                        $scope.sliderOptions.sliderAutoSlide = settingsData.sliderAutoSlide.value;\n                    }\n                    if( settingsData.sliderTransition ) {\n                        $scope.sliderOptions.sliderTransition = settingsData.sliderTransition.value;\n                    }\n\n                    $scope.sliderText = 'rn-carousel rn-carousel-index=\"sliderIndex\" rn-carousel-controls rn-carousel-auto-slide=\"' + $scope.sliderOptions.sliderAutoSlide + '\"' +\n                        ' rn-carousel-pause-on-hover rn-carousel-buffered rn-carousel-transition=\"' + $scope.sliderOptions.sliderTransition + '\" rn-carousel-controls-allow-loop';\n\n                });\n\n                _.each(data, function (oneSlider) {\n\n                    if (!_.isEmpty(oneSlider.files)) {\n                        _.each(oneSlider.files, function (oneFile) {\n\n                            tmp = {name: 'Image' + oneFile.fileID, 'url': oneFile.url, link: oneFile.link};\n                            $scope.slides.push(tmp);\n\n                        });\n                    }\n                });\n\n            } else {\n                $scope.slides = [];\n            }\n\n            $scope.sliderHeight = {'height': '210px'};\n        });\n\n    });","start":2,"end":52,"route":null,"symbol":"SliderCtrl","metadata":{"calls_functions":["angular.module","$rootScope.$on","_.isEmpty","Setting.getPublicSettings","_.each","$scope.slides.push"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":5,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AddressService.js:2-174:factory:AddressService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AddressService.js","module":null,"name":"AddressService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$config","$http"],"antiPatterns":[],"text":"    .factory('AddressService', function ($rootScope, $q, $config, $http) {\n\n        var AddressService = {};\n\n        AddressService.getResource = function () {\n            return ['address', 'addressPublic'].join('/')\n        };\n\n        AddressService.getAll = function (addresses) {\n\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource + '/' + addresses.join(',')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AddressService.getForUser = function () {\n            var def = $q.defer();\n\n            var resource = ['address', 'getUserAddresses'].join('/');\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AddressService.setForUser = function (addresses) {\n            var def = $q.defer();\n\n            var sendData = {'addresses': addresses};\n\n            var resource = ['address', 'setAddressToUser'].join('/');\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + resource,\n                data: sendData\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AddressService.addAddress = function (data) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AddressService.saveAddressToSession = function (addressID) {\n\n            var def = $q.defer();\n\n            var params = {'addressID': addressID};\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'addresses/add',\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                },\n                data: $.param(params)\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AddressService.getAddressesFromSession = function () {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.AUTH_URL + 'addresses',\n                params: {\n                    domainName: location.hostname\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AddressService.getDefaultAddress = function () {\n            var def = $q.defer();\n            var _this = this;\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + _this.resource + '/' + 'getDefault' + '?type=1'\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AddressService.updateProductAddresses = function (orderID, productID, productAddresses) {\n\n            var def = $q.defer();\n\n            var params = {\n                orderID: orderID,\n                productID: productID,\n                productAddresses: productAddresses\n            };\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'product/addresses',\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                },\n                data: $.param(params)\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return AddressService;\n\n    });","start":2,"end":174,"route":null,"symbol":"AddressService","metadata":{"calls_functions":["angular.module","$q.defer","$http","addresses.join","def.resolve","def.reject","$.param"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/{...}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.AUTH_URL}addresses/add","method":"POST","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.AUTH_URL}addresses","method":"GET","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.API_URL}${{obj}.resource}/getDefault?type=1","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.AUTH_URL}product/addresses","method":"POST","dataKeys":[],"paramKeys":["domainName"]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AddressWidgetService.js:2-70:factory:AddressWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AddressWidgetService.js","module":null,"name":"AddressWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["TemplateRootService","CountriesService","$modal","AddressService"],"antiPatterns":[],"text":"    .factory('AddressWidgetService', function (TemplateRootService, CountriesService, $modal, AddressService) {\n\n        function AddressWidgetService(json) {\n            angular.extend(this, json);\n        }\n\n        function addressesEdit(applicationScope) {\n\n            TemplateRootService.getTemplateUrl(31).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: applicationScope,\n                    size: 'lg',\n                    resolve: {\n                        countries: function () {\n                            return CountriesService.getAll().then(function (data) {\n                                return data;\n                            });\n                        }\n                    },\n                    controller: function ($scope, $modalInstance, countries) {\n\n                        $scope.countries = countries;\n                        $scope.form = {};\n\n                        $scope.addAddress = function () {\n                            $scope.form.saving = true;\n                            $scope.form.type = 1;\n                            AddressService.addAddress($scope.form).then(function (data) {\n\n                                if (data.response === true) {\n                                    $scope.form = {};\n                                    $scope.form.saving = false;\n                                    $scope.addresses.push(data.item);\n                                    AddressService.saveAddressToSession(data.addressID).then(function (data) {\n                                        if (data.response) {\n                                            Notification.success($filter('translate')('saved'));\n                                        }\n                                    });\n                                }\n\n\n                            });\n\n                        };\n\n                        $scope.cancel = function () {\n                            $modalInstance.close();\n                        }\n\n                        $scope.isCountryCode = function () {\n                            var country = _.find($scope.countries, {code: $scope.form.countryCode});\n                            return country && String(country.areaCode).length > 0;\n                        }\n\n                        $scope.updateAreaCode = function () {\n                            var country = _.find($scope.countries, {code: $scope.form.countryCode});\n                            $scope.form.areaCode = country.areaCode;\n                        }\n                    }\n                });\n            });\n        }\n\n        return {\n            addressesEdit: addressesEdit\n        };\n\n    });","start":2,"end":70,"route":null,"symbol":"AddressWidgetService","metadata":{"calls_functions":["angular.module","angular.extend","TemplateRootService.getTemplateUrl","$modal.open","CountriesService.getAll","AddressService.addAddress","$scope.addresses.push","AddressService.saveAddressToSession","Notification.success","$filter","$modalInstance.close","_.find","String"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":4,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AttributeFiltersService.js:2-115:factory:AttributeFiltersService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AttributeFiltersService.js","module":null,"name":"AttributeFiltersService","kind":"service","nodeType":"Function","dependenciesDI":["$config","$q","$http"],"antiPatterns":[],"text":"    .factory('AttributeFiltersService', function ($config, $q, $http) {\n\n        var AttributeFiltersService = {};\n        AttributeFiltersService.getAttributeFilters = function (attrID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['attributeFilters', attrID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AttributeFiltersService.getProductsUsingOptions = function (attrID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['productsUsingOptions', attrID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AttributeFiltersService.getOptions = function (attrID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['attributeOptions', attrID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AttributeFiltersService.getOption = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + 'attributeOption',\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AttributeFiltersService.getRelativePapers = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + 'getRelativePapers',\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AttributeFiltersService.search = function (attrID, filter) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['attributeFilters', attrID].join('/'),\n                data: filter\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AttributeFiltersService.downloadPDF = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['attributeOptionPDF', data.optID].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return AttributeFiltersService;\n\n    });","start":2,"end":115,"route":null,"symbol":"AttributeFiltersService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}attributeFilters/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}productsUsingOptions/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}attributeOptions/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}attributeOption","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}getRelativePapers","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}attributeFilters/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}attributeOptionPDF/${{obj}.optID}","method":"POST","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AuthService.js:8-162:factory:AuthDataService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AuthService.js","module":null,"name":"AuthDataService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$cookieStore","$cookies","localStorageService","$log","$q","$timeout","$config"],"antiPatterns":[],"text":"    .factory('AuthDataService', function ($rootScope, $cookieStore, $cookies, localStorageService, $log, $q, $timeout,\n                                          $config) {\n\n        var AuthDataService = {};\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        AuthDataService.setUserData = function (data) {\n\n            var def = $q.defer();\n\n            $rootScope.username = data.user.firstname;\n            localStorageService.set('user', data.user);\n            this.setAccessToken(data.token || data[accessTokenName]);\n\n            var expectedToken = this.getAccessToken();\n            if( data.token === expectedToken) {\n                def.resolve(true);\n            }else{\n                def.reject(false);\n            }\n            return def.promise;\n        };\n\n        AuthDataService.destroyUserData = function () {\n            delete $rootScope.username;\n            this.deleteAccessToken();\n            localStorageService.remove('user');\n            return true;\n        };\n\n        AuthDataService.logout = function () {\n            return this.destroyUserData();\n        };\n\n        AuthDataService.getCurrentUser = function () {\n            return localStorageService.get('user');\n        };\n\n        AuthDataService.getAccessToken = function () {\n\n            function getCookie(cname) {\n                var name = cname + \"=\";\n                var decodedCookie = decodeURIComponent(document.cookie);\n                var ca = decodedCookie.split(';');\n                for (var i = 0; i < ca.length; i++) {\n                    var c = ca[i];\n                    while (c.charAt(0) == ' ') {\n                        c = c.substring(1);\n                    }\n                    if (c.indexOf(name) == 0) {\n                        return c.substring(name.length, c.length);\n                    }\n                }\n                return \"\";\n            }\n\n            return getCookie(accessTokenName);\n        };\n\n        AuthDataService.setAccessToken = function (accessToken) {\n            var domainName = $rootScope.domainHost;\n            if ($rootScope.domainHost == 'localhost') {\n                domainName = 'localhost';\n            }\n\n            var expiration_date = new Date();\n            expiration_date.setFullYear(expiration_date.getFullYear() + 1);\n\n            document.cookie = accessTokenName + \"=\" + accessToken + \"; domain=\" + domainName + \"; path=/; expires=\" + expiration_date.toUTCString();\n        };\n\n        AuthDataService.deleteAccessToken = function () {\n\n            var domainName = $rootScope.domainHost;\n            if ($rootScope.domainHost == 'localhost') {\n                domainName = 'localhost';\n            }\n\n            document.cookie = accessTokenName + \"=\" + \"; domain=\" + domainName + \"; path=/\" + \";expires=-1\";\n        };\n\n        AuthDataService.isLoggedIn = function () {\n            var token = this.getAccessToken();\n            if (token) {\n                var currentUser = this.getCurrentUser();\n                if (_.isObject(currentUser) && !_.isEmpty(currentUser)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n        //TODO leftovers from googlemaps\n        AuthDataService.checkGoogle = function () {\n\n            var def = $q.defer();\n            try {\n                gapi.load('auth2', function () {\n                    auth2 = gapi.auth2.init({\n                        client_id: '345059472892-1fae8hutprcgcg3gk0i1dvdconjarcr0.apps.googleusercontent.com',\n                        fetch_basic_profile: true,\n                        scope: 'profile',\n                        onInit: function () {\n\n\n                        }\n                    });\n\n                    auth2.then(\n                        function () {\n                            var userAuth = auth2.currentUser.get();\n                        }\n                    );\n\n                });\n            }catch(e){\n            }\n            return def.promise;\n\n        };\n\n        AuthDataService.signOutFromGoogle = function () {\n\n        };\n\n        AuthDataService.signInWithGoogle = function () {\n\n            gapi.load('auth2', function () {\n\n                auth2 = gapi.auth2.init({\n                    client_id: '345059472892-1fae8hutprcgcg3gk0i1dvdconjarcr0.apps.googleusercontent.com',\n                    fetch_basic_profile: true,\n                    scope: 'profile'\n                });\n\n                auth2.then(\n                    //ok\n                    function () {\n\n\n                    }\n                );\n\n            });\n\n        };\n\n        AuthDataService.checkLogedInOutsideServices = function () {\n\n            this.checkGoogle();\n\n        };\n\n        return AuthDataService;\n    });","start":8,"end":162,"route":null,"symbol":"AuthDataService","metadata":{"calls_functions":["angular.module","$q.defer","localStorageService.set","def.resolve","def.reject","localStorageService.remove","localStorageService.get","decodeURIComponent","decodedCookie.split","c.charAt","c.substring","c.indexOf","getCookie","expiration_date.setFullYear","expiration_date.getFullYear","expiration_date.toUTCString","_.isObject","_.isEmpty","gapi.load","gapi.auth2.init","auth2.then","auth2.currentUser.get"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":20,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AuthService.js:165-598:factory:AuthService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/AuthService.js","module":"digitalprint.services","name":"AuthService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$config","$http","AuthDataService","UserService"],"antiPatterns":[],"text":"    .factory('AuthService', function ($rootScope, $q, $config, $http, AuthDataService, UserService) {\n        var AuthService = {};\n        AuthService = _.merge(AuthService, AuthDataService);\n\n        AuthService.loginWithFacebook = function (credentials) {\n\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'login',\n                data: $.param(credentials),\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n\n                _this.setUserData(data).then(function (confirm) {\n                    $rootScope.logged = true;\n                    def.resolve(data);\n                });\n\n            }).error(function (data) {\n\n                UserService.addSimple({\n                    user: credentials.email,\n                    name: credentials.name,\n                    lastname: credentials.lastName\n                }).then(\n                    function (data) {\n\n                        $http({\n                            method: 'POST',\n                            url: $config.AUTH_URL + 'login',\n                            data: $.param(credentials),\n                            params: {\n                                domainName: location.hostname\n                            },\n                            headers: {\n                                \"Content-Type\": \"application/x-www-form-urlencoded\"\n                            }\n                        }).success(function (data) {\n\n                            _this.setUserData(data).then(function (confirm) {\n                                $rootScope.logged = true;\n                                def.resolve(data);\n                            });\n\n                        });\n\n                    },\n                    function (data) {\n\n                        AuthService.logOutWithFacebook().then(\n                            function () {\n                                $state.go('home');\n                            },function () {\n                                $state.go('home');\n                            }\n                        );\n                        def.reject(data);\n\n                    }\n                );\n\n            });\n\n            return def.promise;\n\n        };\n\n\n        AuthService.logOutWithFacebook = function () {\n\n            var _this = this;\n            var def = $q.defer();\n            if((typeof FB)!='undefined'){\n                FB.getLoginStatus(function (response) {\n\n                    if (response.status == 'connected') {\n\n                        FB.logout(function (res) {\n\n                            def.resolve();\n\n                        });\n\n                    } else {\n\n                        def.reject('Nie był zalogowany');\n\n                    }\n\n                });\n            }else{\n                def.reject('FB not exists');\n            }\n\n\n            return def.promise;\n\n        };\n\n        AuthService.logOutWithGoogle = function () {\n            //TODO\n            /*\n\n            gapi.load('auth2', function () {\n\n                auth2 = gapi.auth2.init({\n                    client_id: '345059472892-1fae8hutprcgcg3gk0i1dvdconjarcr0.apps.googleusercontent.com',\n                    fetch_basic_profile: true,\n                    scope: 'profile'\n                });\n\n                auth2.then(\n                    function () {\n\n                        if (auth2.isSignedIn.get()) {\n\n                            auth2.signOut();\n\n                        }\n\n                    }\n                );\n\n            });*/\n\n\n        };\n\n\n        AuthService.loginWithGoogle = function (credentials) {\n\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'login',\n                data: $.param(credentials),\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n\n                _this.setUserData(data).then(function (confirm) {\n                    $rootScope.logged = true;\n                    def.resolve(data);\n                });\n\n            }).error(function (data) {\n\n                UserService.addSimple({\n                    user: credentials.email,\n                    name: credentials.name,\n                    lastname: credentials.lastName\n                }).then(\n                    //ok\n                    function (data) {\n\n                        $http({\n                            method: 'POST',\n                            url: $config.AUTH_URL + 'login',\n                            data: $.param(credentials),\n                            params: {\n                                domainName: location.hostname\n                            },\n                            headers: {\n                                \"Content-Type\": \"application/x-www-form-urlencoded\"\n                            }\n                        }).success(function (data) {\n\n                            _this.setUserData(data).then(function (confirm) {\n\n                                    $rootScope.logged = true;\n                                    def.resolve(data);\n                                },\n                                function (err) {\n\n                                });\n\n                        }).error(function (data) {\n\n\n                        });\n\n                    },\n\n                    //FAIL\n                    function (data) {\n\n                        gapi.load('auth2', function () {\n\n                            auth2 = gapi.auth2.init({\n                                client_id: '345059472892-1fae8hutprcgcg3gk0i1dvdconjarcr0.apps.googleusercontent.com',\n                                fetch_basic_profile: true,\n                                scope: 'profile'\n                            });\n\n                            auth2.then(\n                                function () {\n\n                                    if (auth2.isSignedIn.get()) {\n\n                                        auth2.signOut().then(\n                                            // ok\n                                            function () {\n\n\n                                            }\n                                        );\n                                    }\n                                }\n                            );\n                        });\n\n                        def.reject(data);\n                    }\n                );\n\n            });\n\n            return def.promise;\n\n        };\n\n        AuthService.login = function (credentials) {\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'login',\n                data: $.param(credentials),\n                params: {\n                    domainName: $rootScope.domainHost\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                _this.setUserData(data).then(function (confirmResult) {\n                    if(confirmResult){\n                        def.resolve(data);\n                    }\n                    else{\n                        def.reject(confirmResult);\n                    }\n                });\n\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AuthService.logout = function () {\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.AUTH_URL + ['logout'].join('/'),\n                params: {\n                    domainName: location.hostname\n                }\n            }).success(function (data) {\n                AuthService.logOutWithGoogle();\n                AuthService.logOutWithFacebook();\n                AuthDataService.destroyUserData();\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n            return def.promise;\n        };\n\n        AuthService.check = function () {\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['auth', 'check'].join('/')\n            }).success(function (data) {\n                if (data.response) {\n                    _this.setUserData(data).then(function (confirm) {\n                        def.resolve(data);\n                    });\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AuthService.addToCart = function (params) {\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'cart/add',\n                data: $.param(params),\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AuthService.getSessionCarts = function () {\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.AUTH_URL + 'cart/get',\n                params: {\n                    domainName: location.hostname\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AuthService.sendSMData = function (data) {\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'socialLogin',\n                data: $.param(data),\n                params: {\n                    domainName: $rootScope.domainHost\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                _this.setUserData(data).then(function (confirm) {\n                    def.resolve(data);\n                });\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AuthService.cleanSession = function (params) {\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.AUTH_URL + 'cleanSession',\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AuthService.updateDefaultAddress = function (param) {\n            var _this = this;\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'cart/updateDefaultAddress',\n                params: {\n                    domainName: location.hostname\n                },\n                data: $.param(param),\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AuthService.readCookie = function (name) {\n            var nameEQ = name + \"=\";\n            var ca = document.cookie.split(';');\n            for (var i = 0; i < ca.length; i++) {\n                var c = ca[i];\n                while (c.charAt(0) == ' ') c = c.substring(1, c.length);\n                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n            }\n            return null;\n        };\n\n        return AuthService;\n    });","start":165,"end":598,"route":null,"symbol":"AuthService","metadata":{"calls_functions":["angular.module","_.merge","$q.defer","$http","$.param","_this.setUserData","def.resolve","UserService.addSimple","AuthService.logOutWithFacebook","$state.go","def.reject","FB.getLoginStatus","FB.logout","gapi.load","gapi.auth2.init","auth2.then","auth2.isSignedIn.get","auth2.signOut","AuthService.logOutWithGoogle","AuthDataService.destroyUserData","document.cookie.split","c.charAt","c.substring","c.indexOf"],"api_endpoints":[{"url":"${{obj}.AUTH_URL}login","method":"POST","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.AUTH_URL}logout","method":"GET","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.API_URL}auth/check","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.AUTH_URL}cart/add","method":"POST","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.AUTH_URL}cart/get","method":"GET","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.AUTH_URL}socialLogin","method":"POST","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.AUTH_URL}cleanSession","method":"GET","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.AUTH_URL}cart/updateDefaultAddress","method":"POST","dataKeys":[],"paramKeys":["domainName"]}],"ui_routes":[],"cyclomatic_complexity":20,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CacheService.js:4-66:factory:CacheService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CacheService.js","module":null,"name":"CacheService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$cacheFactory","$config"],"antiPatterns":[],"text":"    .factory('CacheService', function ($q, $http, $cacheFactory, $config) {\n\n        var CacheService = function (collection) {\n            this.collection = collection;\n            this.cache = new $cacheFactory(collection);\n        };\n\n        CacheService.prototype.doRequest = function (defer, options, method) {\n            var def = $q.defer();\n            var _this = this;\n\n            var url = (_.isString(defer)) ? defer : defer.getRestangularUrl();\n            var cache = this.cache.get(url);\n\n            options = options || {};\n\n            var onSuccess = function (url, data) {\n                _this.cache.put(url, data);\n                def.resolve(data);\n            };\n\n            var onError = function (data) {\n                def.reject(data);\n            };\n\n            if (options.cache == false || !!!cache) {\n\n                if (_.isString(defer)) {\n\n                    $http({\n                        method: 'GET',\n                        url: $config.API_URL + defer\n                    }).success(function (data) {\n                        onSuccess(defer, data);\n                    }).error(onError);\n\n                } else {\n                    defer[method || 'getList']().then(function (data) {\n                        onSuccess(url, data)\n                    }, onError);\n                }\n\n            } else {\n                def.resolve(cache);\n            }\n\n            return def.promise;\n        };\n\n        CacheService.prototype.getList = function (restangularPromise, options) {\n            return this.doRequest(restangularPromise, options, 'getList');\n        };\n\n        CacheService.prototype.get = function (restangularPromise, options) {\n            return this.doRequest(restangularPromise, options, 'get');\n        };\n\n        CacheService.prototype.removeAll = function () {\n            this.cache.removeAll();\n        };\n\n        return CacheService;\n    });","start":4,"end":66,"route":null,"symbol":"CacheService","metadata":{"calls_functions":["angular.module","$q.defer","_.isString","defer.getRestangularUrl","_this.cache.put","def.resolve","def.reject","$http","onSuccess"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":7,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CalcFileService.js:2-217:service:CalcFileService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CalcFileService.js","module":null,"name":"CalcFileService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$http","$config"],"antiPatterns":[],"text":"    .service('CalcFileService', function ($q, Restangular, $http, $config) {\n\n        var CalcFileService = {};\n\n        var resource = ['dp_products', 'calcFilesUploader'].join('/');\n\n        CalcFileService.getUrl = function (typeID) {\n            return $config.API_URL + ['dp_products', typeID, 'calcFilesUploader'].join('/');\n        };\n\n\n        CalcFileService.getAllByType = function (typeID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: this.getUrl(typeID)\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.removeFile = function (typeID, fileID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: this.getUrl(typeID) + '/' + fileID\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n\n        CalcFileService.getBySetID = function (setID) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['dp_products', setID, 'calcFilesUploaderSet'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.createGuestSet = function (typeID) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['dp_products', typeID, 'calcFilesUploaderGuestSet'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.setImageBW = function (fileID) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'setImageBW', fileID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.setImageSepia = function (fileID) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'setImageSepia', fileID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.setCollectionToBW = function (setID) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'setCollectionToBW', setID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.setCollectionToSepia = function (setID) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'setCollectionToSepia', setID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.removeCollectionFilters = function (setID) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'removeCollectionFilters', setID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.cropImage = function (fileID, data) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'cropImage', fileID].join('/'),\n                data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.restoreImage = function (fileID) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'restoreImage', fileID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.copyImage = function (fileID) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'copyImage', fileID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.changeQty = function (fileID, data) {\n            var def = $q.defer();\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + ['calcFilesUploader', 'changeQty', fileID].join('/'),\n                data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalcFileService.editImage = function (fileID, data) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['calcFilesUploader', 'editImage', fileID].join('/'),\n                data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CalcFileService;\n\n    });","start":2,"end":217,"route":null,"symbol":"CalcFileService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}dp_products/${{node.name}}/calcFilesUploaderSet","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_products/${{node.name}}/calcFilesUploaderGuestSet","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/setImageBW/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/setImageSepia/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/setCollectionToBW/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/setCollectionToSepia/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/removeCollectionFilters/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/cropImage/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/restoreImage/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/copyImage/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/changeQty/${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calcFilesUploader/editImage/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CalcSimplifyWidgetService.js:2-206:factory:CalcSimplifyWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CalcSimplifyWidgetService.js","module":null,"name":"CalcSimplifyWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["$q"],"antiPatterns":[],"text":"    .factory('CalcSimplifyWidgetService', function ($q) {\n\n        function checkFormatExclusions(product,format) {\n\n            var def = $q.defer();\n\n            if (!product.currentFormat) {\n                def.reject('no product.currentFormat')\n                return def.promise;\n            }\n            product.formatExcluded = [];\n\n            _.each(product.attributes, function (attribute, attributeIndex) {\n\n                if( !attribute.options && (product.attributes.length - 1) === attributeIndex ) {\n                    def.resolve(true);\n                }\n\n                _.each(attribute.options, function (option, optionIndex) {\n\n                    if (option && option.formats) {\n                        if (!_.includes(option.formats, product.currentFormat.ID)) {\n                            product.formatExcluded.push(option.ID);\n                            if (product.selectedOptions[attribute.attrID] === option.ID) {\n                                delete product.selectedOptions[attribute.attrID];\n                            }\n                        }\n                    }\n\n                    if( (product.attributes.length - 1) === attributeIndex && (attribute.options.length - 1) === optionIndex ) {\n                        def.resolve(true)\n                    }\n                });\n            });\n\n            return def.promise;\n\n        }\n\n        function removeUnActiveOptions(product) {\n\n            var def = $q.defer();\n\n            var index = 0;\n            _.each(product.attributeMap, function (attrID) {\n\n                var attributeIndex = _.findIndex(product.attributes, {attrID: attrID});\n\n                if (product.selectedOptions[attrID] === undefined) {\n\n                    if( (product.attributeMap.length-1) > index ) {\n                        def.resolve(true)\n                    }\n\n                } else {\n\n                    if(attributeIndex > -1) {\n                        if( product.attributes[attributeIndex].filteredOptions.length === 0 ) {\n                            delete product.selectedOptions[attrID];\n                        }\n                    }\n\n                    if( (product.attributeMap.length-1) > index ) {\n                        def.resolve(true)\n                    }\n\n                }\n\n                index++;\n            });\n\n            return def.promise;\n        }\n\n        function markEmptyOptions(product) {\n\n            var emptyOptions = [];\n            _.each(product.selectedOptions, function (optID, attrID) {\n                var idx = _.findIndex(product.attributes, {attrID: parseInt(attrID)});\n                if (idx > -1 && product.attributes[idx].filteredOptions.length === 0) {\n                    emptyOptions.push(optID);\n                }\n            })\n\n            return emptyOptions\n        }\n\n        function removeEmptyOptionFromSelected(product, newProduct) {\n\n            var def = $q.defer();\n            var emptyOptions=markEmptyOptions(product)\n            _.each(product.selectedOptions, function (optID, attrID) {\n                if (!optID) {\n                    console.log('Lack of optID: ', optID);\n                    console.log('attrID is:', attrID);\n                }else if (!_.includes(emptyOptions, optID)) {\n                    newProduct.options.push({\n                        attrID: parseInt(attrID),\n                        optID: optID\n                    });\n                }\n            })\n        }\n\n        function prepareProductPromise(scope, newItem) {\n\n            var def = $q.defer();\n\n            newItem.products = [];\n            _.each(scope.complexProducts, function (complexProduct, index) {\n\n                var product = complexProduct.selectedProduct.data;\n\n                var newProduct = {};\n\n                newProduct.groupID = product.info.groupID;\n                newProduct.typeID = product.info.typeID;\n                newProduct.name = product.info.typeName;\n\n                if (!product.currentFormat) {\n                    console.error('Formats must be assign!');\n                }\n\n                newProduct.formatID = product.currentFormat.ID;\n\n                if (!product.currentFormat.custom) {\n\n                    newProduct.width = product.currentFormat.width;\n                    newProduct.height = product.currentFormat.height;\n                } else {\n                    newProduct.width = product.currentFormat.customWidth + product.currentFormat.slope * 2;\n                    newProduct.height = product.currentFormat.customHeight + product.currentFormat.slope * 2;\n                }\n\n                if (product.currentPages) {\n                    newProduct.pages = product.currentPages;\n                } else {\n                    newProduct.pages = 2;\n                }\n                newProduct.options = [];\n\n                removeEmptyOptionFromSelected(product, newProduct);\n\n                newProduct.attrPages = product.attrPages;\n\n                if (product.info.noCalculate !== true) {\n                    newItem.products.push(newProduct);\n                }\n\n                if ((scope.complexProducts.length - 1) === index) {\n                    def.resolve(newItem);\n                }\n\n\n            });\n\n            return def.promise;\n        }\n\n        const showSumPrice = ($scope) =>{\n\n            if (angular.isDefined($scope.calculation)) {\n                let price = _.parseFloat($scope.calculation.priceTotal)\n\n                if ($scope.calculation.deliveryPrice) {\n                    price += _.parseFloat($scope.calculation.deliveryPrice)\n                }\n\n                $scope.net_per_pcs = (price / $scope.calculation.volume).toFixed(2).replace('.', ',');\n\n                return price.toFixed(2).replace('.', ',')\n\n            } else {\n                return ''\n            }\n        }\n\n        const showSumGrossPrice = ($scope) =>{\n\n            if (angular.isDefined($scope.calculation)) {\n                let price = _.parseFloat($scope.calculation.priceTotalBrutto)\n\n                if ($scope.calculation.deliveryGrossPrice) {\n                    price += _.parseFloat($scope.calculation.deliveryGrossPrice)\n                }\n\n                $scope.gross_per_pcs = (price / $scope.calculation.volume).toFixed(2).replace('.', ',');\n\n                return price.toFixed(2).replace('.', ',')\n\n            } else {\n                return ''\n            }\n        }\n\n        return {\n            removeEmptyOptionFromSelected,\n            checkFormatExclusions,\n            removeUnActiveOptions,\n            prepareProductPromise,\n            showSumPrice,\n            showSumGrossPrice\n        };\n\n    });","start":2,"end":206,"route":null,"symbol":"CalcSimplifyWidgetService","metadata":{"calls_functions":["angular.module","$q.defer","def.reject","_.each","def.resolve","_.includes","product.formatExcluded.push","_.findIndex","parseInt","emptyOptions.push","markEmptyOptions","console.log","newProduct.options.push","console.error","removeEmptyOptionFromSelected","newItem.products.push","angular.isDefined","_.parseFloat","price.toFixed"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":28,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CalculateDataService.js:2-45:factory:CalculateDataService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CalculateDataService.js","module":null,"name":"CalculateDataService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('CalculateDataService', function ($q, $http, $config) {\n\n        var CalculateDataService = function (typeID) {\n            this.typeID = typeID;\n        };\n\n        CalculateDataService.prototype.getResource = function () {\n            return ['calculate', this.typeID].join('/')\n        };\n\n        CalculateDataService.prototype.getData = function () {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + this.getResource()\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalculateDataService.prototype.printOffer = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + ['calculate', 'printOffer'].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CalculateDataService;\n    });","start":2,"end":45,"route":null,"symbol":"CalculateDataService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}{...}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}calculate/printOffer","method":"PATCH","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CalculationService.js:2-96:factory:CalculationService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CalculationService.js","module":null,"name":"CalculationService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('CalculationService', function ($q, $http, $config) {\n\n        var CalculationService = function (groupID, typeID) {\n            this.groupID = groupID;\n            this.typeID = typeID;\n        };\n\n        CalculationService.prototype.getResource = function () {\n            return ['ps_groups', this.groupID, 'ps_types', this.typeID, 'ps_calculate', 'calculatePublic'].join('/')\n        };\n\n        CalculationService.prototype.getVolumes = function (data) {\n\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'PATCH',\n                data: data,\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalculationService.prototype.calculate = function (data) {\n\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'POST',\n                data: data,\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalculationService.prototype.saveCalculation = function (data) {\n\n            var def = $q.defer();\n\n            var resource = ['ps_groups', this.groupID, 'ps_types', this.typeID, 'ps_calculate', 'saveCalculationPublic'].join('/');\n\n            $http({\n                method: 'POST',\n                data: data,\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                if (data.response){\n                    def.resolve(data);\n                }else{\n                    def.reject(data);\n                }\n\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CalculationService.prototype.updateName = function (data) {\n\n            var def = $q.defer();\n\n            var resource = ['ps_groups', this.groupID, 'ps_types', this.typeID, 'ps_calculate', 'updateName', data.productID].join('/');\n\n            $http({\n                method: 'PATCH',\n                data: data,\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CalculationService;\n\n    });","start":2,"end":96,"route":null,"symbol":"CalculationService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CanvasService.js:5-90:factory:CanvasService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CanvasService.js","module":null,"name":"CanvasService","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .factory('CanvasService', function(){\n\n        var CanvasService = {};\n        var canvas;\n        var context;\n        var stage;\n        var bitmap;\n        var container;\n        var mask;\n        var filters = {};\n\n        CanvasService.setCanvas = function(newCanvas){\n            canvas = newCanvas;\n        };\n\n        CanvasService.setContext = function(newContext){\n            context = newContext;\n        };\n\n        CanvasService.getCanvas = function(){\n            return canvas;\n        };\n\n        CanvasService.getContext = function(){\n            return context;\n        };\n\n        CanvasService.setStage = function(newStage) {\n            stage = newStage;\n        };\n\n        CanvasService.getStage = function() {\n            return stage;\n        };\n\n        CanvasService.setBitmap = function(newBitamp) {\n            bitmap = newBitamp;\n        };\n\n        CanvasService.getBitmap = function() {\n            return bitmap;\n        };\n\n        CanvasService.setContainer = function(newContainer) {\n            container = newContainer;\n        };\n\n        CanvasService.getContainer = function() {\n            return container;\n        };\n\n        CanvasService.setMask = function(newMask) {\n            mask = newMask;\n        };\n\n        CanvasService.getMask = function() {\n            return mask;\n        };\n\n        CanvasService.setFilter = function(name, value, sliderValue) {\n            filters[name] = {};\n            filters[name].value = value;\n            if( sliderValue !== undefined ) {\n                filters[name].sliderValue = sliderValue;\n            }\n        };\n\n        CanvasService.updateBitmapFilter = function () {\n\n            bitmap.filters = [];\n\n            _.each(filters, function(one) {\n                bitmap.filters.push(one.value);\n            });\n        };\n\n        CanvasService.getFilter = function(name) {\n            return filters[name];\n        };\n\n        CanvasService.getFilters = function() {\n            return filters;\n        };\n\n        return CanvasService;\n    });","start":5,"end":90,"route":null,"symbol":"CanvasService","metadata":{"calls_functions":["angular.module","_.each","bitmap.filters.push"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartService.js:2-102:service:CartService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartService.js","module":null,"name":"CartService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$http","$config"],"antiPatterns":[],"text":"    .service('CartService', function ($q, Restangular, $http, $config) {\n\n        var CartService = {};\n\n        var resource = 'carts';\n\n        CartService.getAll = function () {\n            var def = $q.defer();\n\n            Restangular.all('carts').getList().then(function (data) {\n                def.resolve(data.plain());\n            });\n\n            return def.promise;\n        };\n\n        CartService.update = function (id, data) {\n            var def = $q.defer();\n\n            Restangular.all('carts', id).doPOST(data).then(function (data) {\n\n                if (data.response) {\n                    def.resolve(data.plain());\n                } else {\n                    def.reject(data.plain());\n                }\n\n            });\n\n            return def.promise;\n        };\n\n        CartService.patch = function (id, data) {\n            var def = $q.defer();\n\n            Restangular.one('carts', id).patch(data).then(function (data) {\n\n                if (data.response == true) {\n                    def.resolve(data.plain());\n                } else {\n                    def.reject(data.plain());\n                }\n\n            });\n\n            return def.promise;\n        };\n\n        CartService.messages = function (cartID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, cartID, 'cart_messages'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CartService.addMessage = function (cartID, message) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, cartID, 'cart_messages'].join('/'),\n                data: {content: message}\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data.item);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CartService.stats = function (params) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'stats'].join('/'),\n                params: params\n            }).success(function (data) {\n                def.resolve(data);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CartService;\n    });","start":2,"end":102,"route":null,"symbol":"CartService","metadata":{"calls_functions":["angular.module","$q.defer","Restangular.all","def.resolve","data.plain","def.reject","Restangular.one","$http"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}/cart_messages","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}/cart_messages","method":"PATCH","dataKeys":["content"],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/stats","method":"GET","dataKeys":[],"paramKeys":["..."]}],"ui_routes":[],"cyclomatic_complexity":4,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["cart"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartWidgetService.js:2-2340:factory:CartWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartWidgetService.js","module":null,"name":"CartWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$modal","TemplateRootService","DpProductService","PsGroupService","CalculateDataService","$timeout","DeliveryWidgetService","CalculationService","DeliveryService","AuthService","$filter","Notification","$config","CountService","CalcSimplifyWidgetService","$cookieStore","MainWidgetService","$cookies","DpCartsDataService","$state"],"antiPatterns":[],"text":"    .factory('CartWidgetService', function ($rootScope, $q, $modal, TemplateRootService, DpProductService,\n                                            PsGroupService, CalculateDataService, $timeout, DeliveryWidgetService,\n                                            CalculationService, DeliveryService, AuthService, $filter, Notification,\n                                            $config, CountService, CalcSimplifyWidgetService, $cookieStore,\n                                            MainWidgetService, $cookies, DpCartsDataService, $state) {\n\n        var deletedAttrs;\n\n        function copyProduct(scope, product, isVolumeChangeOnly, isOrderAgain, isEditOnly)\n        {\n            isVolumeChangeOnly = isVolumeChangeOnly ?? false\n            isEditOnly = isEditOnly ?? false\n            isOrderAgain = isOrderAgain ?? false\n            // 115 - copy-product-modal.html\n            TemplateRootService.getTemplateUrl(115).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        $scope.isVolumeChangeOnly = isVolumeChangeOnly;\n                        $scope.isOrderAgain = isOrderAgain;\n                        $scope.isEditOnly = isEditOnly;\n\n                        var stopSelectAttr = null;\n                        var stopSelect = null;\n\n                        $scope.volumes = [];\n                        $scope.complexProducts = [];\n                        $scope.productItem = {};\n                        $scope.emptyProduct = true;\n                        $scope.productItem.amount = product.amount;\n                        $scope.productItem.volume = product.volume;\n                        $scope.productItem.addresses = _.clone(product.addresses, true);\n                        $scope.productItem.realisationTime = product.realizationTimeID;\n                        $scope.customVolume = {};\n                        $scope.technologies = [];\n                        $scope.rememberVolume = {};\n                        $scope.summaryThickness = {};\n                        $scope.loadVolumes = false;\n                        $scope.productAddresses = [];\n                        $scope.deliveries = [];\n                        $scope.filteredDeliveries = [];\n                        $scope.activeVolume = {};\n                        $scope.currentGroupID = null;\n                        $scope.currentTypeID = null;\n                        $scope.copyInProgress = false;\n                        $rootScope.$on('delivery',function(e, productAddresses){\n                            $scope.productAddresses=productAddresses;\n                        })\n\n                        getData(product.typeID).then( function(data) {\n\n                            if (angular.isDefined($cookies['customVolumes'])) {\n                                var cookieCustomVolumes = angular.fromJson($cookies['customVolumes']);\n                                if (angular.isDefined(cookieCustomVolumes[product.typeID])) {\n                                    $scope.customVolume = cookieCustomVolumes[product.typeID];\n                                }\n                            }\n\n                            $scope.type = data.type;\n                            $scope.type.formats = data.formats[data.type.typeID];\n\n                            $scope.currentGroupID = data.type.groupID;\n                            $scope.currentTypeID = data.type.ID;\n                            $scope.type = data;\n\n                            selectComplexProduct($scope, data, product).then( function() {\n\n                                selectDefaultFormats($scope).then(function () {\n\n                                    _.each($scope.complexProducts, function(oneComplex) {\n\n                                        _.each(oneComplex.products, function() {\n\n                                            setExclusionsAsync($scope, oneComplex.selectedProduct.data).then(function (exclusionEnd) {\n\n                                                if (exclusionEnd) {\n\n                                                    setOptions(product, oneComplex.selectedProduct.data).then( function() {\n                                                        $scope.getVolumes(product, $scope.productItem.amount);\n\n                                                        setFormats($scope, product, oneComplex.selectedProduct.data).then( function() {\n                                                        });\n                                                    });\n\n                                                }\n                                            });\n\n                                        });\n                                    });\n\n                                }, function (data) {\n                                    console.log(data);\n                                });\n\n                            });\n\n                        });\n\n                        $scope.selectFormat = function(selectProduct, format, noReload) {\n\n                            selectProduct.currentFormat = format;\n\n                            if (!!format.custom ) {\n                                if( !selectProduct.currentFormat.customWidth ) {\n                                    selectProduct.currentFormat.customWidth = format.minWidth - format.slope * 2;\n                                }\n                                if( !selectProduct.currentFormat.customHeight  ) {\n                                    selectProduct.currentFormat.customHeight = format.minHeight - format.slope * 2;\n                                }\n                            }\n\n                            $scope.checkRelatedFormats(selectProduct, format);\n\n                            $scope.filterRelatedFormats();\n\n                            $scope.selectDefaultFormats().then(function () {\n\n                                CalcSimplifyWidgetService.checkFormatExclusions(selectProduct).then(function() {\n\n                                    setExclusionsAsync($scope, selectProduct).then(function (exclusionEnd) {\n\n                                        if (exclusionEnd) {\n                                            $scope.selectDefaultOptions(selectProduct);\n                                            if( noReload === undefined || noReload === false ) {\n                                                $scope.getVolumes(selectProduct, $scope.productItem.amount);\n                                            }\n                                        }\n                                    });\n                                });\n\n                            }, function (data) {\n                                console.log(data);\n                            });\n\n                        };\n\n                        $scope.selectCustomFormat = function (complexProduct) {\n\n                            var stopSelect;\n\n                            complexProduct.selectedProduct.data.currentFormat.customHeight = Number(complexProduct.selectedProduct.data.currentFormat.customHeight);\n                            complexProduct.selectedProduct.data.currentFormat.customWidth = Number(complexProduct.selectedProduct.data.currentFormat.customWidth);\n\n                            if (angular.isDefined(stopSelect)) {\n                                $timeout.cancel(stopSelect);\n                                stopSelect = undefined;\n                            }\n\n                            stopSelect = $timeout(function () {\n\n                                var minHeight = complexProduct.selectedProduct.data.currentFormat.minHeight - complexProduct.selectedProduct.data.currentFormat.slope * 2;\n                                var minWidth = complexProduct.selectedProduct.data.currentFormat.minWidth - complexProduct.selectedProduct.data.currentFormat.slope * 2;\n\n                                var maxHeight = complexProduct.selectedProduct.data.currentFormat.maxHeight - complexProduct.selectedProduct.data.currentFormat.slope * 2;\n                                var maxWidth = complexProduct.selectedProduct.data.currentFormat.maxWidth - complexProduct.selectedProduct.data.currentFormat.slope * 2;\n\n                                if (complexProduct.selectedProduct.data.currentFormat.customHeight > maxHeight) {\n                                    Notification.info($filter('translate')('value_greater_than_maximum') + ' ' + maxHeight);\n                                    complexProduct.selectedProduct.data.currentFormat.customHeight = maxHeight;\n                                }\n\n                                if (complexProduct.selectedProduct.data.currentFormat.customHeight < minHeight) {\n                                    Notification.info($filter('translate')('value_lower_than_minimum') + ' ' + minHeight);\n                                    complexProduct.selectedProduct.data.currentFormat.customHeight = minHeight;\n                                }\n\n                                if (complexProduct.selectedProduct.data.currentFormat.customWidth > maxWidth) {\n                                    Notification.info($filter('translate')('value_greater_than_maximum') + ' ' + maxWidth);\n                                    complexProduct.selectedProduct.data.currentFormat.customWidth = maxWidth;\n                                }\n\n                                if (complexProduct.selectedProduct.data.currentFormat.customWidth < minWidth) {\n                                    Notification.info($filter('translate')('value_lower_than_minimum') + ' ' + minWidth);\n                                    complexProduct.selectedProduct.data.currentFormat.customWidth = minWidth;\n                                }\n\n                                $scope.getVolumes(product, $scope.productItem.amount);\n\n                            }, 1500);\n                        };\n\n                        $scope.getVolumes = function (selectedProduct, amount) {\n\n                            $scope.loadVolumes = true;\n\n                            getPreparedProduct($scope, product, amount).then(function (preparedProduct) {\n\n                                preparedProduct.customVolumes = $scope.customVolume.volumes;\n\n                                const CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n\n                                CalculateService.getVolumes(preparedProduct).then(function (data) {\n\n                                    if( data.technologies && $scope.technologies.length === 0 ) {\n                                        $scope.technologies = data.technologies;\n                                    }\n\n                                    data.volumes.filter(function (element) {\n                                        return element.active === true;\n                                    });\n\n                                    $scope.showVolumes(data);\n\n                                    /**\n                                     * @param {Object} data.volumeInfo\n                                     */\n                                    if (angular.isDefined(data.volumeInfo)) {\n                                        $scope.customVolume.custom = data.volumeInfo.custom;\n                                        $scope.customVolume.maxVolume = data.volumeInfo.maxVolume;\n                                    }\n\n                                    $scope.getMinVolume();\n\n                                }, function (data) {\n                                    console.log(data);\n                                    Notification.error($filter('translate')('error'));\n                                });\n                            });\n\n                        };\n\n                        $scope.showVolumes = function (data) {\n\n                            $scope.volumes = data.volumes;\n                            $scope.realisationTimes = data.realisationTimes;\n\n                            if (angular.isDefined($scope.rememberVolume.volume)) {\n                                $scope.calculate($scope.productItem.amount, $scope.rememberVolume.volume.volume);\n                            } else {\n                                if (angular.isDefined($scope.volumes[0])) {\n                                    $scope.loadVolumes = false;\n                                    $scope.calculate($scope.productItem.amount, $scope.volumes[0].volume);\n                                } else {\n                                    console.log('volumes: ', $scope.volumes);\n                                }\n                            }\n\n                        };\n\n                        $scope.getMinVolume = function () {\n\n                            if( $scope.volumes.length === 0 ) {\n                                return;\n                            }\n\n                            $scope.customVolume.minVolume = $scope.volumes[0].volume;\n\n                            if (!angular.isDefined($scope.customVolume.newVolume)) {\n                                $scope.customVolume.newVolume = $scope.volumes[0].volume;\n                            }\n                        };\n\n                        $scope.selectDefaultOptions = function (product) {\n\n                            _.each(product.attributes, function (item) {\n\n                                if (!product.selectedOptions[item.attrID]) {\n\n                                    var tmp;\n                                    _.each(item.options, function (option) {\n\n                                        if (!_.includes(product.excludedOptions, option.ID)) {\n                                            tmp = option;\n                                            return false;\n                                        }\n                                    });\n\n                                    var defaultOption = _.find(item.options, {default: 1});\n\n                                    if (defaultOption && !_.includes(product.excludedOptions, defaultOption.ID)) {\n                                        tmp = defaultOption;\n                                    }\n\n                                    $scope.selectOption(product, item.attrID, tmp, true);\n\n                                }\n                            });\n\n                        };\n\n                        $scope.selectOption = function (selectedProductData, attrID, item, noReload) {\n\n                            var itemExist = true;\n\n                            if (item === undefined) {\n                                itemExist = false;\n                                var optID = selectedProductData.selectedOptions[attrID];\n\n                                item = getOption(selectedProductData, optID);\n\n                                if (item === undefined) {\n                                    return false;\n                                }\n                            }\n\n                            selectedProductData.selectedOptions[attrID] = parseInt(item.ID);\n\n                            setRangePages(selectedProductData, attrID);\n\n                            if (selectedProductData.thickness.minAttr === attrID) {\n                                selectedProductData.thickness.min = null;\n                                selectedProductData.thickness.minAttr = null;\n                            }\n\n                            if (selectedProductData.thickness.maxAttr === attrID) {\n                                selectedProductData.thickness.max = null;\n                                selectedProductData.thickness.maxAttr = null;\n                            }\n\n                            /**\n                             * @param {Object} item\n                             * @param {number|null} item.minThickness\n                             * @param {number|null} item.maxThickness\n                             * @param {number} item.sizePage\n                             */\n                            if (Number(item.minThickness) > 0 && ( Number(item.minThickness) > selectedProductData.thickness.min || item.minThickness === null)) {\n                                selectedProductData.thickness.min = item.minThickness;\n                                selectedProductData.thickness.minAttr = attrID;\n                            }\n\n                            if (Number(item.maxThickness) > 0 && ( Number(item.maxThickness) < selectedProductData.thickness.max || selectedProductData.thickness.max === null)) {\n\n                                selectedProductData.thickness.max = item.maxThickness;\n                                selectedProductData.thickness.maxAttr = attrID;\n                            }\n\n                            selectedProductData.thickness.values[attrID] = item.sizePage;\n\n                            if (selectedProductData.pages.length) {\n                                $scope.calcProductThickness(selectedProductData);\n                                $scope.getMinimumThickness(selectedProductData);\n                                $scope.getMaximumThickness(selectedProductData);\n                            }\n\n                            setExclusionsAsync($scope, selectedProductData).then(function (exclusionEnd) {\n\n                                if (exclusionEnd) {\n                                    $scope.selectDefaultOptions(selectedProductData);\n                                    if (!itemExist) {\n                                        selectedProductData.typeID = selectedProductData.info.typeID;\n                                        selectedProductData.groupID = selectedProductData.info.groupID;\n                                        selectedProductData.taxID = $scope.productItem.taxID;\n                                        selectedProductData.name = $scope.productItem.name;\n                                        selectedProductData.realizationTimeID = $scope.productItem.realizationTimeID;\n\n                                        if( noReload === undefined || noReload === false) {\n                                            $scope.getVolumes(selectedProductData, $scope.productItem.amount);\n                                        }\n                                    }\n                                }\n\n                            });\n\n\n                        };\n\n                        $scope.calcProductThickness = function (product) {\n\n                            var sheets = product.currentPages / 2;\n\n                            // condition concerns minimal and maximal number of pages it is given for every single option\n                            if (!_.keys(product.thickness.values).length) {\n                                product.thickness.current = null;\n                                return true;\n                            }\n                            /**\n                             * @param {number} product.pages[].doublePage\n                             */\n                            var doublePage = !!product.pages[0].doublePage;\n\n                            if (doublePage) {\n                                sheets /= 2;\n                            }\n\n                            var value = 0;\n                            var keyThickness = _.keys(product.thickness.values);\n                            var tmpAttrID = null;\n                            _.each(_.values(product.thickness.values), function (one, index) {\n                                tmpAttrID = keyThickness[index];\n                                if (Number(one) > 0 && _.has(product.selectedOptions, tmpAttrID)) {\n                                    value += one;\n                                }\n                            });\n\n                            product.thickness.current = sheets * value;\n\n                            // show thickness in summary od product\n                            $scope.summaryThickness[product.typeID] = product.thickness.current;\n\n                            return true;\n                        };\n\n                        $scope.getMinimumThickness = function (type) {\n\n                            if (!_.keys(type.thickness.values).length || !type.thickness.min) {\n\n                                var minPages = getMinPages(type);\n\n                                if (minPages > type.pages[0].minPages) {\n                                    return minPages;\n                                }\n\n                                return type.pages[0].minPages || 0;\n                            }\n\n                            var value = 0;\n                            _.each(_.values(type.thickness.values), function (one) {\n                                if (Number(one) > 0) {\n                                    value += one;\n                                }\n                            });\n\n                            var sheets = type.thickness.min / value;\n                            var pages = Math.ceil(sheets) * 2;\n                            var doublePage = !!type.pages[0].doublePage;\n                            if (doublePage) {\n                                pages *= 2;\n                            }\n\n                            if (!!type.pages[0].step) {\n                                var modulo = pages % type.pages[0].step;\n                                if (modulo) {\n                                    pages += type.pages[0].step - modulo;\n                                }\n                            }\n\n                            if (type.currentPages < pages) {\n                                // show that pages was change\n                                $scope.selectPages(type, pages);\n                            }\n\n                            return pages;\n                        };\n\n                        $scope.getMaximumThickness = function (product) {\n\n                            if (!_.keys(product.thickness.values).length || !product.thickness.max) {\n                                return product.pages[0].maxPages || 9999999;\n                            }\n\n                            var value = 0;\n                            _.each(_.values(product.thickness.values), function (one) {\n                                if (Number(one) > 0) {\n                                    value += one;\n                                }\n                            });\n\n                            var sheets = product.thickness.max / value;\n                            var pages = Math.floor(sheets) * 2;\n                            var doublePage = !!product.pages[0].doublePage;\n                            if (doublePage) {\n                                pages *= 2;\n                            }\n\n                            if (!!product.pages[0].step) {\n                                var modulo = pages % product.pages[0].step;\n                                if (modulo) {\n                                    pages -= modulo;\n                                }\n                            }\n\n                            if (product.currentPages > pages) {\n                                $scope.selectPages(product, pages);\n                            }\n\n                            return pages;\n                        };\n\n                        $scope.filterByThickness = function (product) {\n\n                            var exclusions = {};\n\n                            _.each(product.attributes, function (attribute) {\n\n                                exclusions[attribute.attrID] = [];\n                                var idx;\n                                _.each(attribute.options, function (option) {\n\n                                    if (angular.isDefined(option.maxThickness) && Number(option.maxThickness) > 0) {\n\n                                        if (product.thickness.current > option.maxThickness) {\n\n                                            idx = product.excludedOptions.indexOf(option.ID);\n                                            if (idx === -1) {\n                                                exclusions[attribute.attrID].push(option.ID);\n                                            }\n\n                                        }\n                                    }\n\n                                    if (angular.isDefined(option.minThickness) && Number(option.minThickness) > 0) {\n\n                                        if (product.thickness.current < option.minThickness) {\n\n                                            idx = product.excludedOptions.indexOf(option.ID);\n                                            if (idx === -1) {\n                                                exclusions[attribute.attrID].push(option.ID);\n                                            }\n\n                                        }\n\n                                    }\n\n                                });\n\n                            });\n\n                            return exclusions;\n                        };\n\n                        $scope.filterByOptionsPages = function (product) {\n\n                            var exclusions = {};\n\n                            _.each(product.attributes, function (attribute) {\n\n                                exclusions[attribute.attrID] = [];\n\n                                _.each(attribute.options, function (option) {\n\n                                    /**\n                                     * @param {number} option.maxPages\n                                     */\n\n                                    if (product.currentPages && angular.isDefined(option.maxPages) && Number(option.maxPages) > 0) {\n\n                                        if (product.currentPages > option.maxPages) {\n\n                                            idx = product.excludedOptions.indexOf(option.ID);\n                                            if (idx === -1) {\n                                                exclusions[attribute.attrID].push(option.ID);\n                                            }\n\n                                        }\n                                    }\n\n                                    if (product.currentPages && angular.isDefined(option.minPages) && Number(option.minPages) > 0) {\n\n                                        if (product.currentPages < option.minPages) {\n\n                                            var idx = product.excludedOptions.indexOf(option.ID);\n\n                                            if (idx === -1) {\n                                                exclusions[attribute.attrID].push(option.ID);\n                                            }\n\n                                        }\n\n                                    }\n\n                                });\n\n                            });\n\n                            return exclusions;\n                        };\n\n                        $scope.countAttrNotExcludedOptions = function (product, attr) {\n\n                            var count = 0;\n                            _.each(attr.options, function (option) {\n\n                                if (!_.includes(product.excludedOptions, option.ID)) {\n                                    count++;\n                                }\n\n                            });\n                            return count;\n                        };\n\n                        $scope.calculate = function (amount, volume) {\n\n                            $scope.calculation = {};\n\n                            $scope.calculationInfo = [];\n\n                            getPreparedProduct($scope, product, amount, volume).then(function (preparedProduct) {\n\n                                const CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                                CalculateService.calculate(preparedProduct).then(function (data) {\n                                    $scope.showCalculation(data);\n\n                                    if( $scope.deliveries.length > 0 ) {\n                                        $scope.productAddresses[0].deliveryID = $scope.deliveries[0].ID;\n                                        $scope.productAddresses[0].index = 0;\n                                        $scope.productAddresses[0].ID = 1;\n\n                                        var address = $scope.productAddresses[0];\n                                        address.weight = data.weight;\n                                        address.volume = volume;\n                                        address.amount = amount;\n                                        address.allVolume = volume * amount;\n\n                                        excludeDeliveries();\n\n                                        if ($rootScope.logged !== false) {\n                                            DeliveryWidgetService.getPkgWeightCalc(\n                                                address,\n                                                $scope\n                                            );\n                                        } else {\n                                             DeliveryWidgetService.getPkgWeightLite(\n                                                address,\n                                                DeliveryWidgetService.getVolume($scope, address),\n                                                $scope\n                                            );\n                                        }\n                                    }\n\n                                }, function (data) {\n                                    console.error(data);\n                                    Notification.error($filter('translate')('error'));\n                                });\n\n                            });\n\n                        };\n\n                        $scope.checkRelatedFormats = function (product, format) {\n\n                            if (!format.relatedFormats) {\n                                return true;\n                            }\n                            $scope.relatedFormats = [];\n                            _.each(format.relatedFormats, function (item) {\n                                $scope.relatedFormats.push({ID: item.formatID, typeID: item.typeID});\n                            });\n\n                        };\n\n                        $scope.checkEmptyChoice = function (complexProduct, attributeID) {\n\n                            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attributeID)});\n\n                            if (attrIdx > -1) {\n                                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                                var optionID = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n\n                                var optIdx = _.findIndex(attribute.filteredOptions, {ID: parseInt(optionID)});\n                                if (optIdx > -1) {\n                                    var option = attribute.filteredOptions[optIdx];\n                                    return option.emptyChoice;\n                                }\n\n                                return false;\n                            }\n\n                            return false;\n                        };\n\n                        $scope.showAttribute = function (complexProduct, attrID) {\n                            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n                            var attrName;\n                            if (attrIdx > -1) {\n                                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                                var optID = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n\n                                var optIdx = _.findIndex(attribute.filteredOptions, {ID: parseInt(optID)});\n                                if (optIdx > -1) {\n                                    var option = attribute.filteredOptions[optIdx];\n\n                                    if (option.invisible === 1) {\n                                        return '';\n                                    }\n\n                                } else {\n                                    return '';\n                                }\n\n                                if (attribute.names[$rootScope.currentLang.code].name !== undefined) {\n                                    attrName = attribute.names[$rootScope.currentLang.code].name\n                                } else {\n                                    attrName = attribute.attrName;\n                                }\n\n                                return attrName;\n\n                            }\n                            return '';\n                        };\n\n                        $scope.showOption = function (complexProduct, attrID) {\n                            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n                            var optionName;\n                            if (attrIdx > -1) {\n                                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                                var optID = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n\n                                var optIdx = _.findIndex(attribute.filteredOptions, {ID: parseInt(optID)});\n                                if (optIdx > -1) {\n                                    var option = attribute.filteredOptions[optIdx];\n\n                                    if (option.invisible === 1) {\n                                        return '';\n                                    }\n\n                                    if (option.names[$rootScope.currentLang.code].name !== undefined) {\n                                        optionName = option.names[$rootScope.currentLang.code].name;\n                                    } else {\n                                        optionName = option.name;\n                                    }\n\n                                    return optionName;\n                                }\n                            }\n                            return '';\n                        };\n\n                        $scope.showCalculation = function (data) {\n\n                            $scope.calculation = data.calculation;\n                            $rootScope.$emit('calculation', $scope.calculation)\n                            $scope.calculationInfo = data.info;\n                            $scope.prepareUrl();\n\n                            if (!_.isEmpty($scope.rememberVolume)) {\n\n                                var idxRT = _.findIndex($scope.realisationTimes, {ID: $scope.rememberVolume.realisationTime.ID});\n                                if (idxRT !== -1) {\n                                    var idxVol = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: $scope.rememberVolume.volume.volume});\n                                    if (idxVol !== -1) {\n\n                                        $scope.checkVolume($scope.rememberVolume.realisationTime, $scope.realisationTimes[idxRT].volumes[idxVol]);\n                                    } else {\n                                        // return to 0 index because volume is excluded\n                                        $scope.checkVolume($scope.realisationTimes[0], $scope.realisationTimes[0].volumes[0]);\n                                    }\n\n                                } else {\n                                    $scope.checkVolume($scope.rememberVolume.realisationTime, $scope.rememberVolume.volume);\n                                }\n\n\n                            } else {\n\n                                var sortRealisationTimes = _.sortBy($scope.realisationTimes, 'order');\n\n                                if( $scope.productItem.volume === undefined ) {\n                                    var activeVolume = getActiveVolume(sortRealisationTimes[0].volumes, 0);\n                                    $scope.checkVolume(sortRealisationTimes[0], activeVolume);\n                                    $scope.productItem.volume = activeVolume.volume;\n                                } else {\n                                    var sortRealisationTimes = _.sortBy($scope.realisationTimes, 'order');\n                                    var actualRealisationTime = _.find(sortRealisationTimes, {ID: $scope.productItem.realisationTime});\n                                    var activeVolume = getActiveVolumeByVolume(actualRealisationTime.volumes, $scope.productItem.volume);\n                                    $scope.checkVolume(actualRealisationTime, activeVolume);\n                                    $scope.productItem.volume = activeVolume.volume;\n                                }\n\n                            }\n\n                        };\n\n                        $scope.prepareUrl = function () {\n\n                            if ($scope.complexProducts.length === 1 && $scope.calculation.amount > 0) {\n\n                                getPreparedProduct($scope, product, $scope.calculation.amount).then(function (preparedProduct) {\n                                    var returnedProduct = preparedProduct.products[0];\n\n                                    /**\n                                     * @param {string} $config.EDITOR_URL\n                                     */\n\n                                    $scope.editorUrl = $config.EDITOR_URL + '?' + 'typeID=' + returnedProduct.typeID +\n                                        '&formatID=' + returnedProduct.formatID + '&pages=' + returnedProduct.pages;\n\n                                    _.each(returnedProduct.options, function (opt) {\n                                        $scope.editorUrl += '&' + opt.attrID + '=' + opt.optID;\n                                    });\n                                });\n\n                            }\n                        };\n\n                        $scope.checkVolume = function (realisationTime, volume) {\n\n                            _.each($scope.realisationTimes, function (val) {\n                                val.overwriteDate = null;\n                            });\n\n                            var idxRT = _.findIndex($scope.realisationTimes, {ID: realisationTime.ID});\n\n                            if (idxRT !== -1) {\n\n                                $scope.rememberVolume.realisationTime = $scope.realisationTimes[idxRT];\n\n                                $scope.realisationTimes[idxRT].overwriteDate = volume.date;\n\n                                var idxV = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: volume.volume});\n                                if (idxV !== -1) {\n\n                                    $scope.rememberVolume.volume = volume;\n\n                                    $scope.activeVolume.rtID = $scope.realisationTimes[idxRT].ID;\n                                    $scope.activeVolume.volume = $scope.calculation.volume = $scope.realisationTimes[idxRT].volumes[idxV].volume;\n\n                                    $scope.calculation.priceTotal = $scope.realisationTimes[idxRT].volumes[idxV].price;\n\n                                    /**\n                                     * @param {number} $scope.realisationTimes[].volumes[].priceBrutto\n                                     */\n                                    $scope.calculation.priceTotalBrutto = $scope.realisationTimes[idxRT].volumes[idxV].priceBrutto;\n                                    $scope.calculation.weight = $scope.realisationTimes[idxRT].volumes[idxV].weight;\n                                    if ($scope.realisationTimes[idxRT].overwriteDate) {\n                                        $scope.calculation.realisationTime = $scope.realisationTimes[idxRT].overwriteDate;\n                                    } else {\n                                        $scope.calculation.realisationTime = $scope.realisationTimes[idxRT].date;\n                                    }\n\n                                    _.each($scope.realisationTimes[idxRT].volumes, function (actVolume) {\n\n\n                                        var idxVol = _.findIndex($scope.volumes, {volume: actVolume.volume});\n\n                                        if (idxVol !== -1) {\n                                            $scope.volumes[idxVol].active = actVolume.active;\n                                        }\n\n                                    });\n\n                                    $scope.productItem.volume = volume.volume;\n\n                                    _.each($scope.realisationTimes, function (realisationTime, rIndex) {\n                                        var idxVol = _.findIndex(realisationTime.volumes, {volume: volume.volume});\n                                        if (idxVol !== -1) {\n                                            $scope.realisationTimes[rIndex].active = realisationTime.volumes[idxVol].active;\n                                        }\n                                    });\n\n                                    $scope.productItem.realisationTime = realisationTime.ID;\n\n                                    $scope.loadVolumes = false;\n                                    $scope.getTotalThickness();\n                                }\n                            } else {\n                                $scope.rememberVolume = {};\n                            }\n\n                        };\n\n                        $scope.getTotalThickness = function () {\n\n                            var tmp = 0;\n                            _.each($scope.summaryThickness, function (th) {\n                                tmp += th;\n                            });\n                            return tmp.toFixed(2);\n\n                        };\n\n                        $scope.changeRealisationTime = function () {\n\n                            var idxRT = _.findIndex($scope.realisationTimes, {ID: $scope.productItem.realisationTime});\n\n                            if (idxRT !== -1) {\n\n                                var volume = $scope.productItem.volume;\n\n                                var idx = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: volume});\n                                if (idx !== -1) {\n                                    $scope.checkVolume($scope.realisationTimes[idxRT], $scope.realisationTimes[idxRT].volumes[idx]);\n                                }\n\n                            }\n\n                        };\n\n                        $scope.showSumPrice = function () {\n                            var price = 0;\n                            var net_per_pcs = 0;\n\n                            if(!isOrderAgain){\n                                $scope.allDeliveryPrice();\n                            }\n\n                            if (angular.isDefined($scope.calculation)) {\n\n                                var tmpDeliveryPrice;\n                                var i = 0;\n                                if ($scope.productAddresses !== undefined) {\n                                    for (i === 0; i < $scope.productAddresses.length; i++) {\n                                        tmpDeliveryPrice = 0;\n\n                                        var tmp_price = $scope.productAddresses[i].price.toString();\n                                        tmpDeliveryPrice += parseFloat(tmp_price.replace(',', '.'));\n\n                                        price += Number(tmpDeliveryPrice);\n                                        if ($scope.calculation.volume !== undefined) {\n                                            net_per_pcs = price / $scope.calculation.volume;\n                                        }\n                                    }\n                                }\n\n                                var tmpPriceTotal;\n                                if ($scope.calculation.priceTotal !== undefined) {\n\n                                    if (typeof($scope.calculation.priceTotal) === 'string') {\n                                        tmpPriceTotal = $scope.calculation.priceTotal.replace(',', '.');\n                                    } else {\n                                        tmpPriceTotal = $scope.calculation.priceTotal;\n                                    }\n\n                                    price += parseFloat(tmpPriceTotal);\n                                    if ($scope.calculation.volume !== undefined) {\n                                        net_per_pcs = price / $scope.calculation.volume;\n                                    }\n                                }\n                            }\n\n                            $scope.net_per_pcs = net_per_pcs.toFixed(2).replace('.', ',');\n\n                            return price.toFixed(2).replace('.', ',');\n                        };\n\n                        $scope.showSumGrossPrice = function () {\n\n                            var price = 0;\n                            var gross_per_pcs = 0;\n\n                            if(!isOrderAgain){\n                                $scope.allDeliveryPrice();\n                            }\n\n                            if (angular.isDefined($scope.calculation)) {\n\n                                var tmpDeliveryPrice;\n                                var tax;\n                                var deliveryIdx;\n\n                                var i = 0;\n                                if ($scope.productAddresses !== undefined) {\n                                    for (i = 0; i < $scope.productAddresses.length; i++) {\n                                        tmpDeliveryPrice = 0;\n                                        var tmp_price = $scope.productAddresses[i].price.toString();\n                                        tmpDeliveryPrice += parseFloat(tmp_price.replace(',', '.'));\n\n                                        deliveryIdx = _.findIndex($scope.deliveries, {ID: $scope.productAddresses[i].deliveryID});\n                                        if (deliveryIdx > -1) {\n                                            tax = Number($scope.deliveries[deliveryIdx].price.tax / 100) + 1;\n\n                                            price += Number(tmpDeliveryPrice) * tax;\n                                        }\n\n                                        if ($scope.calculation.volume !== undefined) {\n                                            gross_per_pcs = price / $scope.calculation.volume;\n                                        }\n                                    }\n                                }\n\n                                var tmpPriceTotal;\n                                if ($scope.calculation.priceTotalBrutto !== undefined) {\n                                    if (typeof($scope.calculation.priceTotalBrutto) === 'string') {\n                                        tmpPriceTotal = $scope.calculation.priceTotalBrutto.replace(',', '.');\n                                    } else {\n                                        tmpPriceTotal = $scope.calculation.priceTotalBrutto;\n                                    }\n\n                                    price += parseFloat(tmpPriceTotal);\n                                    if ($scope.calculation.volume !== undefined) {\n                                        gross_per_pcs = price / $scope.calculation.volume;\n                                    }\n                                }\n\n                            }\n\n                            $scope.gross_per_pcs = gross_per_pcs.toFixed(2).replace('.', ',');\n                            return price.toFixed(2).replace('.', ',');\n                        };\n\n                        $scope.changeAmount = function () {\n\n                            if( $scope.productItem.amount === '' ) {\n                                $scope.productItem.amount = 1;\n                            }\n                            if( typeof $scope.productItem.amount === 'string' ) {\n                                if( isNaN(parseInt($scope.productItem.amount)) ) {\n                                    $scope.productItem.amount = 1;\n                                } else {\n                                    $scope.productItem.amount = parseInt($scope.productItem.amount);\n                                }\n                            }\n                            if( $scope.productItem.amount < 1 ) {\n                                $scope.productItem.amount = 1;\n                            }\n                            $scope.getVolumes(product, $scope.productItem.amount);\n                        };\n\n                        $scope.filterRelatedFormats = function () {\n\n                            _.each($scope.complexProducts.slice(1), function (oneProduct) {\n                                if (oneProduct.selectedProduct) {\n                                    oneProduct.selectedProduct.data.relatedFormats = filterFormats(oneProduct.selectedProduct.data.formats, $scope.relatedFormats);\n                                }\n                            });\n\n                        };\n\n                        $scope.selectDefaultFormats = function () {\n\n                            var def = $q.defer();\n                            var formatChange = false;\n\n                            _.each($scope.complexProducts.slice(1), function (oneProduct) {\n\n                                if (!oneProduct.selectedProduct) {\n                                    return true;\n                                }\n\n                                var product = oneProduct.selectedProduct.data;\n\n                                var currentFormat = product.currentFormat;\n\n                                var find = -1;\n                                if (!!currentFormat) {\n                                    find = _.findIndex($scope.relatedFormats, {ID: currentFormat.ID, typeID: product.info.typeID});\n                                }\n\n                                if (find === -1) {\n\n                                    if (!angular.isDefined(product.relatedFormats) || product.relatedFormats.length === 0) {\n                                        product.currentFormat = null;\n                                        return true;\n                                    } else {\n                                        var searchFormat = filterFormats(product.formats, $scope.relatedFormats)[0];\n\n                                        if (searchFormat) {\n                                            product.currentFormat = searchFormat;\n                                            if (!!searchFormat.custom) {\n                                                product.currentFormat.customWidth = searchFormat.minWidth - searchFormat.slope * 2;\n                                                product.currentFormat.customHeight = searchFormat.minHeight - searchFormat.slope * 2;\n                                            }\n                                        }\n                                    }\n\n                                    if (!product.currentFormat) {\n                                        def.reject({'info': 'select another format'});\n                                        Notification.error($filter('translate')('not_related_format_for_product') + ' - ' + product.info.typeName);\n                                    }\n\n                                } else {\n                                    var idx = _.findIndex(product.relatedFormats, {ID: currentFormat.ID});\n                                    if (idx > -1) {\n                                        product.currentFormat = product.relatedFormats[idx];\n                                    }\n                                }\n\n                                CalcSimplifyWidgetService.checkFormatExclusions(product).then(function() {\n\n                                    setExclusionsAsync($scope, product).then(function (exclusionEnd) {\n\n                                        if (exclusionEnd) {\n                                            $scope.selectDefaultOptions(product);\n                                        }\n                                    });\n                                });\n\n                            });\n\n                            if (!formatChange) {\n                                def.resolve();\n                            } else {\n                                console.log('Format zmieniony ale czemu tu doszło :o')\n                            }\n\n                            return def.promise;\n                        };\n\n                        $scope.releaseSpinner = function (complexProduct, attrID, direct) {\n\n                            if (complexProduct.selectedProduct.data.attrPages[attrID] <= 0 && direct === 0) {\n                                return;\n                            }\n\n                            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n\n                            if (attrIdx > -1) {\n                                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                                var step = attribute.step;\n\n                                var maxPages = attribute.maxPages;\n                                if (maxPages === null) {\n                                    maxPages = complexProduct.selectedProduct.data.currentPages;\n                                }\n\n                                if ((complexProduct.selectedProduct.data.attrPages[attrID] + step) > maxPages && direct === 1) {\n                                    Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                                    return;\n                                }\n\n                                if ((complexProduct.selectedProduct.data.attrPages[attrID] - step) < attribute.minPages && direct === 0) {\n                                    Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + attribute.minPages);\n                                    return;\n                                }\n                            }\n\n                            if (direct) {\n                                complexProduct.selectedProduct.data.attrPages[attrID] += step;\n                            } else {\n                                complexProduct.selectedProduct.data.attrPages[attrID] -= step;\n                            }\n\n                            $scope.selectAttrPages(complexProduct, attrID);\n                        };\n\n                        $scope.selectAttrPages = function (complexProduct, attrID) {\n\n                            if (angular.isDefined(stopSelectAttr)) {\n                                $timeout.cancel(stopSelectAttr);\n                            }\n\n                            stopSelectAttr = $timeout(function () {\n\n                                if (complexProduct.selectedProduct.data.attrPages[attrID] <= 0) {\n                                    complexProduct.selectedProduct.data.attrPages[attrID] = 0;\n                                }\n\n                                var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n\n                                if (attrIdx > -1) {\n                                    var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                                    var maxPages = attribute.maxPages;\n                                    if (maxPages === null) {\n                                        maxPages = complexProduct.selectedProduct.data.currentPages;\n                                    }\n\n                                    if (complexProduct.selectedProduct.data.attrPages[attrID] > maxPages) {\n                                        Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                                        complexProduct.selectedProduct.data.attrPages[attrID] = maxPages;\n                                        return;\n                                    }\n\n                                    if (complexProduct.selectedProduct.data.attrPages[attrID] < attribute.minPages) {\n                                        Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + attribute.minPages);\n                                        complexProduct.selectedProduct.data.attrPages[attrID] = attribute.minPages;\n                                        return;\n                                    }\n                                }\n\n\n                                $scope.getVolumes($scope.productItem.amount);\n                            }, 1500);\n\n                        };\n\n                        $scope.spinCustomWidth = function (complexProduct, direct) {\n\n                            if (direct) {\n                                complexProduct.selectedProduct.data.currentFormat.customWidth = complexProduct.selectedProduct.data.currentFormat.customWidth + 1;\n                            } else {\n                                complexProduct.selectedProduct.data.currentFormat.customWidth = complexProduct.selectedProduct.data.currentFormat.customWidth - 1;\n                            }\n\n                            $scope.selectCustomFormat(complexProduct);\n\n                        };\n\n                        $scope.spinCustomHeight = function (complexProduct, direct) {\n\n                            if (direct) {\n                                complexProduct.selectedProduct.data.currentFormat.customHeight = complexProduct.selectedProduct.data.currentFormat.customHeight + 1;\n                            } else {\n                                complexProduct.selectedProduct.data.currentFormat.customHeight = complexProduct.selectedProduct.data.currentFormat.customHeight - 1;\n                            }\n\n                            $scope.selectCustomFormat(complexProduct);\n\n                        };\n\n                        $scope.spinPage = function (complexProduct, direct) {\n\n                            var min = $scope.getMinimumThickness(complexProduct.selectedProduct.data);\n                            var max = $scope.getMaximumThickness(complexProduct.selectedProduct.data);\n\n                            if (complexProduct.selectedProduct.data.currentPages <= min && direct === 0) {\n                                return;\n                            }\n                            if (complexProduct.selectedProduct.data.currentPages >= max && direct === 1) {\n                                Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + max);\n                                return;\n                            }\n                            if (direct) {\n                                complexProduct.selectedProduct.data.currentPages = complexProduct.selectedProduct.data.currentPages + complexProduct.selectedProduct.data.pages[0].step;\n                            } else {\n                                complexProduct.selectedProduct.data.currentPages = complexProduct.selectedProduct.data.currentPages - complexProduct.selectedProduct.data.pages[0].step;\n                            }\n\n\n                            $scope.selectPages(complexProduct.selectedProduct.data, complexProduct.selectedProduct.data.currentPages);\n                        };\n\n                        $scope.selectPages = function (product, pages) {\n\n                            pages = Number(pages);\n\n                            if (product.pages[0].pages) {\n\n                                product.currentPages = pages;\n\n                                $scope.calcProductThickness(product);\n                                setExclusionsAsync($scope, product).then(function (exclusionEnd) {\n                                    if (exclusionEnd) {\n                                        _.each(product.attrPages, function (oneAttrPage, attrID) {\n                                            if (product.currentPages < oneAttrPage) {\n                                                product.attrPages[attrID] = product.currentPages;\n                                            }\n                                        });\n\n                                        $scope.getVolumes($scope.productItem.amount);\n                                    }\n                                });\n\n                            } else {\n                                if (product.pages[0].step !== null) {\n                                    var step = Number(product.pages[0].step);\n                                }\n\n                                if (angular.isDefined(stopSelect)) {\n                                    $timeout.cancel(stopSelect);\n                                    stopSelect = undefined;\n                                }\n\n                                stopSelect = $timeout(function () {\n                                    var maxPages = $scope.getMaximumThickness(product);\n                                    var minPages = $scope.getMinimumThickness(product);\n\n                                    if( parseInt(product.pages[0].maxPages) > 0 &&  maxPages > parseInt(product.pages[0].maxPages)  ) {\n                                        maxPages = parseInt(product.pages[0].maxPages);\n                                    }\n\n                                    if( product.pages[0].minPages !== null &&  minPages < parseInt(product.pages[0].minPages)  ) {\n                                        minPages = parseInt(product.pages[0].minPages);\n                                    }\n\n                                    if (product.pages[0].step !== null) {\n                                        if (pages % step !== 0) {\n                                            if ((pages % step) > (step / 2)) {\n                                                pages = pages + (step - (pages % step));\n                                            } else {\n                                                pages -= pages % step;\n                                            }\n                                        }\n                                    }\n\n                                    if (pages > maxPages) {\n                                        Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                                        product.currentPages = maxPages;\n                                        pages = maxPages;\n                                    } else if (pages < minPages) {\n                                        Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + minPages);\n                                        product.currentPages = minPages;\n                                        pages = minPages;\n                                    } else if (pages === undefined) {\n                                        Notification.info($filter('translate')('range_of_pages') + ' ' + minPages + ' - ' + maxPages);\n                                    } else {\n                                        product.currentPages = pages;\n                                    }\n\n                                    $scope.calcProductThickness(product);\n\n                                    setExclusionsAsync($scope, product).then(function (exclusionEnd) {\n\n                                        if (exclusionEnd) {\n                                            _.each(product.attrPages, function (oneAttrPage, attrID) {\n                                                if (product.currentPages < oneAttrPage) {\n                                                    product.attrPages[attrID] = product.currentPages;\n                                                }\n                                            });\n\n                                            if (pages <= maxPages && pages >= minPages && pages !== undefined) {\n                                                $scope.getVolumes($scope.productItem.amount);\n                                            }\n                                        }\n\n                                    });\n\n                                }, 1500);\n                            }\n                        };\n\n                        $scope.confirmCopy = function () {\n\n                            $scope.copyInProgress = true;\n\n                            getPreparedProduct($scope, product, $scope.productItem.amount, $scope.productItem.volume).then(function (preparedProduct) {\n                                preparedProduct.copyFromID = product.productID;\n\n                                const CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                                CalculateService.saveCalculation(preparedProduct).then(function (data) {\n\n                                    if( data.orderID ) {\n                                        $rootScope.orderID = data.orderID;\n                                    }\n                                    data.volume = preparedProduct.volume;\n\n                                        copyAddressesToNewProduct(product, data).then(function(data) {\n                                            var addData = data;\n                                            if ($rootScope.logged) {\n                                                addData.userID = $rootScope.user.userID;\n\n                                                DpCartsDataService.add(addData).then(function (response) {\n                                                    $rootScope.$emit('Cart:copied', true);\n\n                                                    $modalInstance.close();\n                                                }, function () {\n                                                    Notification.error($filter('translate')('error'));\n                                                });\n                                            }else{\n\n                                                AuthService.addToCart(data).then(function (cartsData) {\n                                                    $rootScope.carts = cartsData.carts;\n                                                    $rootScope.$emit('Cart:copied', true);\n                                                    $modalInstance.close();\n                                                });\n                                            }\n\n                                        });\n\n                                }, function () {\n                                    Notification.error($filter('translate')('error'));\n                                });\n\n\n\n                            });\n                        };\n                        $scope.confirmEdit = function () {\n\n                            $scope.copyInProgress = true;\n\n                            getPreparedProduct($scope, null, $scope.productItem.amount, $scope.productItem.volume).then(function (preparedProduct) {\n                                preparedProduct.copyFromID = product.productID;\n\n                                const CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                                CalculateService.saveCalculation(preparedProduct).then(function (savedProduct) {\n                                    copyAddressesToNewProduct(product, savedProduct).then(function(savedProduct) {\n                                        if ($rootScope.logged) {\n                                            savedProduct.userID = $rootScope.user.userID;\n\n                                            DpCartsDataService.add(savedProduct).then(function (response) {\n                                                deleteProduct($scope.$parent, product).then(function() {\n                                                    $modalInstance.close();\n                                                    $rootScope.$emit('Cart:copied', true);\n                                                });\n\n                                            }, function () {\n                                                Notification.error($filter('translate')('error'));\n                                            });\n                                        }else{\n\n                                            AuthService.addToCart(savedProduct).then(function (cartsData) {\n                                                $rootScope.carts = cartsData.carts;\n                                                deleteProduct($scope.$parent, product).then(function() {\n                                                    $rootScope.$emit('Cart:copied', true);\n                                                    $modalInstance.close();\n                                                });\n\n                                            });\n                                        }\n\n                                    });\n                                }, function () {\n                                    Notification.error($filter('translate')('error'));\n                                });\n\n\n\n                            });\n                        };\n                        $scope.confirmChangeVolume = function () {\n\n                            $scope.copyInProgress = true;\n\n                            getPreparedProduct($scope, product, $scope.productItem.amount, $scope.productItem.volume).then(function (preparedProduct) {\n                                preparedProduct.copyFromID = product.productID;\n\n                                const CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                                CalculateService.saveCalculation(preparedProduct).then(function (savedProduct) {\n\n                                    if( savedProduct.orderID ) {\n                                        $rootScope.orderID = savedProduct.orderID;\n                                    }\n                                    savedProduct.volume = preparedProduct.volume;\n\n                                        copyAddressesToNewProduct(product, savedProduct).then(function(savedProduct) {\n                                            if ($rootScope.logged) {\n                                                savedProduct.userID = $rootScope.user.userID;\n\n                                                DpCartsDataService.add(savedProduct).then(function (response) {\n                                                    deleteProduct($scope.$parent, product).then(function() {\n                                                        $modalInstance.close();\n                                                        $rootScope.$emit('Cart:copied', true);\n                                                    });\n\n                                                }, function () {\n                                                    Notification.error($filter('translate')('error'));\n                                                });\n                                            }else{\n\n                                                AuthService.addToCart(savedProduct).then(function (cartsData) {\n                                                    $rootScope.carts = cartsData.carts;\n                                                    deleteProduct($scope.$parent, product).then(function() {\n                                                        $rootScope.$emit('Cart:copied', true);\n                                                        $modalInstance.close();\n                                                    });\n\n                                                });\n                                            }\n\n                                        });\n\n                                }, function () {\n                                    Notification.error($filter('translate')('error'));\n                                });\n\n\n\n                            });\n                        };\n                        $scope.confirmOrderAgain = function () {\n\n                            $scope.copyInProgress = true;\n\n                            getPreparedProduct($scope, product, $scope.productItem.amount, $scope.productItem.volume).then(function (preparedProduct) {\n                                preparedProduct.copyFromID = product.productID;\n\n                                const CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                                CalculateService.saveCalculation(preparedProduct).then(function (savedCalculation) {\n\n                                    if( savedCalculation.orderID ) {\n                                        $rootScope.orderID = savedCalculation.orderID;\n                                    }\n                                    savedCalculation.volume = preparedProduct.volume;\n\n                                    copyAddressesToNewProduct(product, savedCalculation).then(function(data) {\n                                        var addData = data;\n                                        if ($rootScope.logged) {\n                                            addData.userID = $rootScope.user.userID;\n\n                                            DpCartsDataService.add(addData).then(function (response) {\n                                                $rootScope.$emit('Cart:copied', true);\n                                                $modalInstance.close();\n                                            }, function () {\n                                                Notification.error($filter('translate')('error'));\n                                            });\n                                        }else{\n\n                                            AuthService.addToCart(data).then(function (cartsData) {\n                                                $rootScope.carts = cartsData.carts;\n                                                $rootScope.$emit('Cart:copied', true);\n                                                $modalInstance.close();\n                                            });\n                                        }\n\n                                    });\n\n                                }, function () {\n                                    Notification.error($filter('translate')('error'));\n                                });\n\n\n\n                            });\n                        };\n\n                        $scope.changeVolume = function () {\n\n                            var volume = $scope.productItem.volume;\n                            var idx;\n\n                            if (!_.isEmpty($scope.rememberVolume)) {\n\n                                idx = _.findIndex($scope.rememberVolume.realisationTime.volumes, {volume: volume});\n\n                                if (idx !== -1) {\n                                    $scope.checkVolume($scope.rememberVolume.realisationTime, $scope.rememberVolume.realisationTime.volumes[idx]);\n                                } else {\n                                    idx = _.findIndex($scope.realisationTimes[0].volumes, {volume: volume});\n                                    if (idx !== -1) {\n                                        $scope.checkVolume($scope.realisationTimes[0], $scope.realisationTimes[0].volumes[idx]);\n                                    }\n                                }\n\n                            } else {\n\n                                idx = _.findIndex($scope.realisationTimes[0].volumes, {volume: volume});\n                                if (idx !== -1) {\n                                    $scope.checkVolume($scope.realisationTimes[0], $scope.realisationTimes[0].volumes[idx]);\n                                }\n\n                            }\n\n                            if (!isVolumeChangeOnly && typeof $scope.scrollbarVolume.update === 'function') {\n                                $scope.scrollbarVolume.update(\"scrollTo\", \"#row-volume-\" + $scope.productItem.volume);\n                            }\n\n                        };\n\n                        $scope.selectOptionImage = function (complexProductData, item, attribute) {\n                            complexProductData.selectedOptions[attribute.attrID] = item.ID;\n                            $scope.selectOption(complexProductData, attribute.attrID);\n                        };\n\n                        $scope.addVolume = function () {\n\n                            if (parseInt($scope.customVolume.maxVolume) < parseInt($scope.customVolume.newVolume)) {\n                                $scope.customVolume.newVolume = $scope.customVolume.maxVolume;\n                                Notification.error($filter('translate')('to_high_volume') + ' - ' + $scope.customVolume.maxVolume);\n                                return;\n                            }\n\n                            if (parseInt($scope.customVolume.minVolume) > parseInt($scope.customVolume.newVolume)) {\n                                $scope.customVolume.newVolume = $scope.customVolume.minVolume;\n                                Notification.error($filter('translate')('to_low_volume') + ' - ' + $scope.customVolume.minVolume);\n                                return;\n                            }\n\n                            if ($scope.customVolume.newVolume === undefined) {\n                                $scope.customVolume.newVolume = $scope.customVolume.minVolume;\n                                Notification.error($filter('translate')('incorrect_volume'));\n                                return;\n                            }\n\n                            var newVolume = {'volume': $scope.customVolume.newVolume, 'active': true};\n                            if (!angular.isDefined($scope.customVolume.volumes)) {\n                                $scope.customVolume.volumes = [];\n                            }\n\n                            var idxV = _.findIndex($scope.volumes, {volume: $scope.customVolume.newVolume});\n                            var idxCV = _.findIndex($scope.customVolume.volumes, {volume: $scope.customVolume.newVolume});\n\n                            if (idxV === -1 && idxCV === -1) {\n\n                                $scope.customVolume.volumes.push(newVolume);\n                                $scope.rememberVolume.volume = newVolume;\n                                $scope.getVolumes($scope.productItem.amount);\n\n                                var customVolumesFromCookie = MainWidgetService.getCookie('customVolumes');\n\n                                if( customVolumesFromCookie.length > 0 ) {\n                                    var cookieCustomVolumes = angular.fromJson(customVolumesFromCookie);\n                                }\n\n                                if (!cookieCustomVolumes) {\n                                    cookieCustomVolumes = {};\n                                }\n\n                                cookieCustomVolumes[$scope.currentTypeID] = $scope.customVolume;\n\n                                console.log( angular.toJson(cookieCustomVolumes) );\n\n                                MainWidgetService.setCookie('customVolumes', angular.toJson(cookieCustomVolumes), 7);\n\n                            } else {\n                                Notification.error($filter('translate')('volume_exist'));\n                            }\n                        };\n\n                    }\n                });\n            });\n        }\n\n        function copyAddressesToNewProduct(product, savedProduct) {\n            var def = $q.defer();\n\n            savedProduct.productAddresses = [];\n            var newAddressItem;\n            var volumeSum = 0;\n            var volumeDiff = 0;\n            var actualVolume = 0;\n            _.each(product.addresses, function(oneAddress, index) {\n                newAddressItem = {};\n                volumeSum += oneAddress.volume;\n                newAddressItem.deliveryID = oneAddress.deliveryID;\n                newAddressItem.volume = oneAddress.volume;\n                newAddressItem.allVolume = oneAddress.allVolume;\n                newAddressItem.senderID = oneAddress.senderID;\n                newAddressItem.addressID = oneAddress.addressID;\n                newAddressItem.commonDeliveryID = oneAddress.commonDeliveryID;\n                newAddressItem.commonRealisationTime = oneAddress.commonRealisationTime;\n                if( oneAddress.join === undefined ) {\n                    newAddressItem.join = false;\n                } else {\n                    newAddressItem.join = oneAddress.join;\n                }\n                if( savedProduct.newVolumesProductAddresses[index] > 0 ) {\n                    newAddressItem.volume = newAddressItem.allVolume = savedProduct.newVolumesProductAddresses[index];\n                }\n                savedProduct.productAddresses.push(newAddressItem);\n                if( (product.addresses.length - 1) === index) {\n                    def.resolve(savedProduct);\n                }\n            });\n\n            return def.promise;\n        }\n\n        var getActiveVolume = function (volumes, index) {\n\n            var actVolume = volumes[index];\n\n            if (actVolume) {\n                if (actVolume.active === false) {\n                    return getActiveVolume(volumes, (index + 1));\n                } else {\n                    return actVolume;\n                }\n            } else {\n                console.error('Problem with realization time!');\n            }\n        };\n\n        var getActiveVolumeByVolume = function (volumes, volume) {\n\n            var volumeIndex = _.findIndex(volumes, {volume: volume});\n\n            if (volumeIndex > -1) {\n                if (volumes[volumeIndex].active === false) {\n                    return getActiveVolume(volumes, (volumeIndex + 1));\n                } else {\n                    return volumes[volumeIndex];\n                }\n            } else {\n                console.error('Problem with realization time!');\n            }\n        };\n\n        function selectDefaultFormats(scope) {\n\n            var def = $q.defer();\n            var productData;\n\n            _.each(scope.complexProducts, function (oneProduct, complexIndex) {\n\n                if (!oneProduct.selectedProduct) {\n                    return true;\n                }\n\n                if( complexIndex === 0 ) {\n                    _.each(oneProduct.selectedProduct.data.attributes, function(attribute, index) {\n                        setRangePages(oneProduct.selectedProduct.data, attribute.attrID);\n                    });\n                }\n\n                productData = oneProduct.selectedProduct.data;\n\n                if( !productData.currentFormat ) {\n                    productData.currentFormat = _.first(productData.formats);\n                }\n\n                if( complexIndex > 0 ) {\n                    filterRelatedFormats(scope, oneProduct);\n                }\n\n                CalcSimplifyWidgetService.checkFormatExclusions(productData).then(function() {\n\n                    setExclusionsAsync(scope, productData).then(function (exclusionEnd) {\n\n                        if (exclusionEnd) {\n                            scope.selectDefaultOptions(productData);\n\n                            if ((scope.complexProducts.length - 1) === complexIndex) {\n                                def.resolve(true);\n                            }\n\n                        }\n                    });\n                });\n\n            });\n\n            return def.promise;\n        }\n\n        function setOptions(product, oneProduct) {\n            var def = $q.defer();\n\n            var index = _.findIndex(product.calcProducts, {typeID: oneProduct.info.typeID});\n\n            if( index > -1 ) {\n                _.each(product.calcProducts[index].attributes, function(attribute, attributeIndex) {\n                    if( attribute ) {\n                        oneProduct.selectedOptions[attribute.attrID] = attribute.optID;\n                    }\n                    if( (product.calcProducts[index].attributes.length - 1) === attributeIndex ) {\n                        def.resolve(true);\n                    }\n                });\n            }\n\n\n            return def.promise;\n        }\n\n        function setFormats(scope, product, oneProduct) {\n            var def = $q.defer();\n\n            var index = _.findIndex(product.calcProducts, {typeID: oneProduct.info.typeID});\n\n            if(index > -1) {\n                var indexFormat = _.findIndex(oneProduct.formats, {ID: product.calcProducts[index].formatID});\n\n                if( indexFormat > -1 ) {\n                    if( product.calcProducts[index].customFormat ) {\n                        oneProduct.formats[indexFormat].custom = 1;\n                        oneProduct.formats[indexFormat].customWidth = product.calcProducts[index].formatWidth;\n                        oneProduct.formats[indexFormat].customHeight = product.calcProducts[index].formatHeight;\n                    }\n                    scope.selectFormat(oneProduct, oneProduct.formats[indexFormat], true);\n                }\n            }\n\n            def.resolve(true);\n\n            return def.promise;\n        }\n\n        var getMinPages = function (type) {\n\n            /**\n             * @param {Array} type.minOptionPages\n             */\n\n            if (_.size(type.minOptionPages)) {\n                return _.min(_.values(type.minOptionPages));\n            }\n\n            return false;\n        };\n\n        var getOption = function (product, optID) {\n\n            var item = undefined;\n            _.each(product.attributes, function (attribute) {\n                var idx = _.findIndex(attribute.options, {ID: optID});\n\n                if (idx > -1) {\n                    item = attribute.options[idx];\n                    return false;\n                }\n\n            });\n\n            return item;\n        };\n\n        var setRangePages = function (product, attrID) {\n\n            var idx = _.findIndex(product.attributes, {attrID: attrID});\n            if (idx > -1) {\n                if (product.attributes[idx].minPages !== null) {\n                    if (!product.attrPages[attrID]) {\n                        product.attrPages[attrID] = product.attributes[idx].minPages;\n                    }\n                }\n            } else {\n                console.error('Some functions may not work well.');\n            }\n        };\n\n        function setExclusionsAsync(scope, product) {\n\n            var def = $q.defer();\n\n            product.excludedOptions = _.clone(product.formatExcluded);\n\n            // filtered options set by clone\n            _.each(product.attributes, function (attribute) {\n                attribute.filteredOptions = _.clone(attribute.options, true);\n            });\n\n            var optID = {};\n            var activeAttrID;\n            _.each(product.attributeMap, function (attrID) {\n\n                activeAttrID = attrID;\n                optID = product.selectedOptions[attrID];\n\n                if (optID) {\n                    var item = {};\n\n                    if (_.isObject(optID)) {\n                        item = optID;\n                    } else {\n                        item = getOption(product, optID);\n                    }\n\n                    var tmpExclusions = {};\n\n                    var exclusionsThickness = scope.filterByThickness(product);\n                    var exclusionsThicknessPages = scope.filterByOptionsPages(product);\n\n                    /**\n                     * @param {Object} item\n                     * @param {Array} item.exclusions\n                     */\n                    if (item.exclusions) {\n                        tmpExclusions = _.merge({}, item.exclusions, exclusionsThickness, exclusionsThicknessPages);\n                    }\n\n                    if (tmpExclusions) {\n\n                        setOptionExclusionsAsync(product, activeAttrID, tmpExclusions).then(function (isEnd) {\n                            if (isEnd) {\n                                checkAttrSelectAsync(product).then(function (isAttrSelectEnd) {\n                                    if (isAttrSelectEnd) {\n                                        if (_.last(product.attributeMap) === activeAttrID) {\n                                            def.resolve(true);\n                                        }\n                                    }\n                                });\n                            } else {\n                                if (_.last(product.attributeMap) === activeAttrID) {\n                                    def.resolve(true);\n                                }\n                            }\n                        });\n\n                    } else {\n                        if (_.last(product.attributeMap) === activeAttrID) {\n                            def.resolve(true);\n                        }\n                    }\n                } else {\n\n                    if (_.last(product.attributeMap) === activeAttrID) {\n                        def.resolve(true);\n                    }\n                }\n            });\n\n            if( product.attributeMap.length === 0 ) {\n                def.resolve(false);\n            }\n\n            return def.promise;\n\n        }\n\n        function checkAttrSelectAsync(product) {\n            var def = $q.defer();\n\n            var firstFilteredOption = null;\n\n            _.each(product.attributes, function (attribute) {\n                if (_.includes(deletedAttrs, attribute.attrID)) {\n                    if (product.selectedOptions[attribute.attrID]) {\n                        firstFilteredOption = _.first(attribute.filteredOptions);\n                        if (firstFilteredOption) {\n                            product.selectedOptions[attribute.attrID] = firstFilteredOption.ID;\n                        }\n                    } else {\n\n                        attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                            return !_.includes(product.excludedOptions, opt.ID);\n                        });\n\n                        firstFilteredOption = _.first(attribute.filteredOptions);\n                        if (firstFilteredOption) {\n                            product.selectedOptions[attribute.attrID] = firstFilteredOption.ID;\n                        }\n\n                    }\n                }\n\n                if (_.last(product.attributeMap) === attribute.attrID) {\n                    def.resolve(true);\n                }\n\n            });\n\n            return def.promise;\n        }\n\n        function setOptionExclusionsAsync(product, attrID, exclusions) {\n\n            var def = $q.defer();\n\n            deletedAttrs = [];\n\n            var attribute = _.find(product.attributes, {attrID: attrID});\n\n            var allExclude = [];\n            _.each(exclusions, function (exc) {\n\n                _.each(exc, function (optID) {\n\n                    allExclude.push(optID);\n\n                    product.excludedOptions.push(optID);\n\n                    _.each(product.selectedOptions, function (selectedOptID) {\n\n                        if (_.includes(allExclude, selectedOptID)) {\n                            getAttributeFromOption(product, selectedOptID).then(function (actAttrID) {\n                                if (actAttrID > 0 && _.indexOf(deletedAttrs, actAttrID) === -1) {\n                                    delete product.selectedOptions[actAttrID];\n                                    deletedAttrs.push(actAttrID);\n                                }\n                            });\n\n                        }\n\n                    });\n\n                });\n            });\n\n            attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                return !_.includes(product.excludedOptions, opt.ID);\n            });\n\n            def.resolve(true);\n\n            return def.promise;\n        }\n\n        function getPreparedProduct(scope, selectedProduct, amount, volume) {\n\n            var def = $q.defer();\n\n            var newItem = {};\n\n            newItem.amount = amount;\n            if (!(volume === undefined)) newItem.volume = volume;\n\n            var rIdx = -1;\n\n            if( selectedProduct !== null ) {\n                newItem.groupID = selectedProduct.groupID;\n                newItem.typeID = selectedProduct.typeID;\n                newItem.taxID = selectedProduct.taxID;\n                newItem.name = selectedProduct.name;\n                newItem.realizationTimeID = selectedProduct.realizationTimeID;\n                newItem.productAddresses = selectedProduct.addresses;\n                rIdx = _.findIndex(scope.realisationTimes, {ID: selectedProduct.realizationTimeID});\n            } else {\n                newItem.groupID = scope.currentGroupID;\n                newItem.typeID = scope.currentTypeID;\n                newItem.taxID = scope.productItem.taxID;\n                newItem.name = scope.productItem.name;\n                newItem.realizationTimeID = scope.productItem.realisationTime;\n                rIdx = _.findIndex(scope.realisationTimes, {ID: newItem.realizationTimeID});\n            }\n\n            if( scope.selectedTechnology ) {\n                newItem.selectedTechnology = scope.selectedTechnology;\n            }\n\n            if (rIdx > -1) {\n                if (scope.realisationTimes[rIdx].overwriteDate !== undefined && scope.realisationTimes[rIdx].overwriteDate !== null) {\n                    newItem.realizationDate = scope.realisationTimes[rIdx].overwriteDate;\n                } else {\n                    newItem.realizationDate = scope.realisationTimes[rIdx].date;\n                }\n            }\n\n            DeliveryWidgetService.reducePostData(scope.productAddresses).then(function(productAddresses) {\n\n                newItem.productAddresses = productAddresses;\n\n                if (scope.calculation !== undefined) {\n                    newItem.weight = scope.calculation.weight;\n                }\n\n                newItem.currency = $rootScope.currentCurrency.code;\n\n                CalcSimplifyWidgetService.prepareProductPromise(scope, newItem).then(function (newItemPrepared) {\n                    if(newItemPrepared) {\n                        def.resolve(newItemPrepared);\n                    }\n                });\n\n            });\n\n            return def.promise;\n\n        }\n\n        function selectComplexProduct(scope, data, originalProduct) {\n\n            var def = $q.defer();\n\n            var emptyProducts = 0;\n\n            scope.complexProducts = data.complex;\n\n            _.each(scope.complexProducts, function(oneComplex, complexIndex) {\n                _.each(oneComplex.products, function(product, productIndex) {\n\n                    initSelectedProduct(oneComplex, product);\n\n                    var originalCalcProduct = _.find(originalProduct.calcProducts, {\n                        typeID: oneComplex.selectedProduct.typeID\n                    });\n\n                    addSelectedProductFormats(oneComplex, data.formats[product.typeID]);\n\n                    var attributesData = data.selectOptions[product.typeID];\n\n                    if (attributesData.length === 0) {\n                        emptyProducts++;\n                    }\n\n                    if (emptyProducts === data.complex.length) {\n                        scope.emptyProduct = true;\n                    }\n\n                    addSelectProductCustomFormat(oneComplex, attributesData);\n\n                    addSelectProductCustomPageInfo(oneComplex, attributesData);\n\n                    addSelectProductMaps(oneComplex, attributesData);\n\n                    oneComplex.selectedProduct.data.attributes = attributesData;\n\n                    oneComplex.selectedProduct.data.pages = data.pages[product.typeID];\n\n                    if( originalCalcProduct !== undefined ) {\n                        addSelectProductCurrentPages(oneComplex, originalProduct);\n\n                        addSelectProductAttrPages(oneComplex, originalProduct);\n                    }\n\n                    oneComplex.selectedProduct.data.relatedFormats = _.clone(oneComplex.selectedProduct.data.formats);\n\n                    if( (scope.complexProducts.length - 1) == complexIndex &&\n                        (oneComplex.products.length - 1) == productIndex ) {\n                        def.resolve(true);\n                    }\n\n                });\n            });\n\n            return def.promise;\n        }\n\n        function filterRelatedFormats(scope, oneComplex) {\n\n            changeRelatedFormats(scope, oneComplex).then( function(result) {\n\n                oneComplex.selectedProduct.data.relatedFormats = result;\n\n                var index = _.findIndex(oneComplex.selectedProduct.data.relatedFormats, {ID: oneComplex.selectedProduct.data.currentFormat.ID});\n\n                if( index === -1 ) {\n                    oneComplex.selectedProduct.data.currentFormat = _.first(oneComplex.selectedProduct.data.relatedFormats);\n                }\n\n                var format = oneComplex.selectedProduct.data.currentFormat;\n\n                if (!!format.custom) {\n                    oneComplex.selectedProduct.data.currentFormat.customWidth = format.minWidth - format.slope * 2;\n                    oneComplex.selectedProduct.data.currentFormat.customHeight = format.minHeight - format.slope * 2;\n                }\n            });\n        }\n\n        function changeRelatedFormats(scope, oneComplex) {\n            var def = $q.defer();\n\n            var result = [];\n\n            _.each(scope.complexProducts[0].selectedProduct.data.currentFormat.relatedFormats, function(oneRelatedFormat, relatedFormatIndex) {\n\n                var index = _.findIndex(oneComplex.selectedProduct.data.formats, {ID: oneRelatedFormat.formatID});\n\n                if(index > -1) {\n                    result.push(oneComplex.selectedProduct.data.formats[index]);\n                }\n\n                if( (scope.complexProducts[0].selectedProduct.data.relatedFormats.length - 1) === relatedFormatIndex ) {\n                    def.resolve(result);\n                }\n            });\n\n            return def.promise;\n        }\n\n        function init() {\n\n        }\n\n        function getData(typeID) {\n            var def = $q.defer();\n\n            var CalculateData = new CalculateDataService(typeID);\n\n            CalculateData.getData().then( function(data) {\n                def.resolve(data);\n            }, function(error) {\n                def.reject(error);\n            });\n\n            return def.promise;\n        }\n\n        function getTaxes() {\n\n            var def = $q.defer();\n            TaxService.getForProduct($scope.currentGroupID, $scope.currentTypeID).then(function (data) {\n                def.resolve(data);\n            });\n            return def.promise;\n        }\n\n        function prepareProductPromise(scope, newItem) {\n\n            var def = $q.defer();\n\n            newItem.products = [];\n\n            _.each(scope.complexProducts, function (complexProduct, index) {\n\n                var selectedProductData = complexProduct.selectedProduct.data;\n\n                var newProduct = {};\n\n                newProduct.groupID = selectedProductData.info.groupID;\n                newProduct.typeID = selectedProductData.info.typeID;\n                newProduct.name = selectedProductData.info.typeName;\n\n                if (!selectedProductData.currentFormat) {\n                    console.error('Formats must be assign!');\n                }\n\n                newProduct.formatID = selectedProductData.currentFormat.ID;\n\n                if (!complexProduct.selectedProduct.data.currentFormat.custom) {\n                    newProduct.width = selectedProductData.currentFormat.width;\n                    newProduct.height = selectedProductData.currentFormat.height;\n                } else {\n                    newProduct.width = selectedProductData.currentFormat.customWidth + selectedProductData.currentFormat.slope * 2;\n                    newProduct.height = selectedProductData.currentFormat.customHeight + selectedProductData.currentFormat.slope * 2;\n                }\n\n                if (selectedProductData.currentPages) {\n                    newProduct.pages = selectedProductData.currentPages;\n                } else {\n                    newProduct.pages = 2;\n                }\n                newProduct.options = [];\n                _.each(selectedProductData.selectedOptions, function (optID, attrID) {\n                    if (!optID) {\n                        console.log('Lack of optID: ', optID);\n                        console.log('attrID is:', attrID);\n                    } else {\n                        newProduct.options.push({\n                            attrID: parseInt(attrID),\n                            optID: optID\n                        });\n                    }\n\n                });\n\n                newProduct.attrPages = selectedProductData.attrPages;\n\n                newItem.products.push(newProduct);\n\n                if ((scope.complexProducts.length - 1) === index) {\n                    $timeout(function() {\n                        def.resolve(newItem);\n                    }, 1000);\n                }\n\n            });\n\n            return def.promise;\n        }\n\n        function getAttributeFromOption(product, optionID) {\n\n            var def = $q.defer();\n\n            _.each(product.optionMap, function (options, attrID) {\n                if (_.includes(options, optionID)) {\n                    def.resolve(parseInt(attrID));\n                }\n            });\n\n            return def.promise;\n        }\n\n        function filterFormats(input, ids) {\n\n            var result = [];\n\n            _.each(input, function (item) {\n                var idx = _.findIndex(ids, {ID: item.ID});\n                if (idx > -1) {\n                    result.push(item);\n                }\n            });\n            return result;\n\n        }\n\n        function initSelectedProduct(complexProduct, baseProduct) {\n\n            var copyBaseProduct = _.clone(baseProduct);\n            var copyProductInfo = _.clone(baseProduct);\n\n            complexProduct.selectedProduct = copyBaseProduct;\n            complexProduct.selectedProduct.data = {\n                info: copyProductInfo,\n                selectedOptions: {},\n                attrPages: {},\n                attributes: {},\n                attributeMap: [],\n                optionMap: {},\n                currentFormat: false,\n                currentPages: false,\n                excludedOptions: [],\n                formatExcluded: [],\n                thickness: {\n                    values: {},\n                    min: null,\n                    max: null,\n                    current: null\n                }\n            };\n        }\n\n        function addSelectedProductFormats(complexProduct, formats) {\n            complexProduct.selectedProduct.data.formats = formats;\n        }\n\n        function addSelectProductCustomFormat(complexProduct, attributesData) {\n            var customFormatIndex = _.findIndex(attributesData, {attrID: -1});\n            if (customFormatIndex > -1) {\n                complexProduct.selectedProduct.data.customFormatInfo = attributesData[customFormatIndex];\n                attributesData.splice(1, customFormatIndex);\n            }\n        }\n\n        function addSelectProductCustomPageInfo(complexProduct, attributesData) {\n            var customPageIndex = _.findIndex(attributesData, {attrID: -2});\n            if (customPageIndex > -1) {\n                complexProduct.selectedProduct.data.customPageInfo = attributesData[customPageIndex];\n                attributesData.splice(1, customPageIndex);\n            }\n        }\n\n        function addSelectProductMaps(complexProduct, attributesData) {\n            _.each(attributesData, function (attr) {\n                complexProduct.selectedProduct.data.attributeMap.push(attr.attrID);\n                complexProduct.selectedProduct.data.optionMap[attr.attrID] = [];\n                _.each(attr.options, function (opt) {\n                    complexProduct.selectedProduct.data.optionMap[attr.attrID].push(opt.ID);\n                });\n            });\n        }\n\n        function addSelectProductCurrentPages(complexProduct, originalProduct) {\n            if ( !complexProduct.selectedProduct.data.currentPages ) {\n                var originalCalcProduct = _.find(originalProduct.calcProducts, {\n                    typeID: complexProduct.selectedProduct.typeID\n                });\n\n                if( originalCalcProduct.pages ) {\n                    complexProduct.selectedProduct.data.currentPages = originalCalcProduct.pages;\n                } else if( _.first(complexProduct.selectedProduct.data.pages) ) {\n                    complexProduct.selectedProduct.data.currentPages = _.first(complexProduct.selectedProduct.data.pages).minPages;\n                } else {\n                    complexProduct.selectedProduct.data.currentPages = 2;\n                }\n            }\n        }\n\n        function addSelectProductAttrPages(complexProduct, originalProduct) {\n            var calcProduct = _.find(originalProduct.calcProducts, {typeID: complexProduct.selectedProduct.typeID});\n            _.each(calcProduct.attributes, function(attribute) {\n                if( attribute.attrPages > 0  ) {\n                    complexProduct.selectedProduct.data.attrPages[attribute.attrID] = attribute.attrPages;\n                }\n            });\n        }\n\n        function deleteProduct(scope, product) {\n            var def = $q.defer();\n            DpProductService.delete(product).then(function (data) {\n                const onAll = () => {\n                    $rootScope.$emit('cartRequired');\n                    def.resolve(true);\n                }\n                if (data.response === true) {\n                    if (product.inEditor) {\n                        DpProductService.deleteFromMongo(product).then(function (result) {\n                            onAll()\n                        }, function (err) {\n                            def.reject(err);\n                        });\n                    } else {\n                        onAll()\n                    }\n                } else {\n                    def.reject(false);\n                }\n            }, function (err) {\n                def.reject(false);\n            });\n\n            return def.promise;\n        }\n\n        function deleteProductFromJoinedDelivery(scope, productID) {\n            var def = $q.defer();\n\n            _.each(scope.addressToJoin, function(oneJoinedDelivery, addressID) {\n                var idx = _.findIndex(oneJoinedDelivery, {productID: productID});\n                if( idx > -1 ) {\n                    scope.addressToJoin[addressID].splice(idx, 1);\n\n                    if(scope.addressToJoin[addressID].length < 2) {\n                        delete scope.addressToJoin[addressID];\n                        def.resolve(true);\n                    }\n                } else {\n                    def.resolve(false);\n                }\n            });\n\n            return def.promise;\n        }\n\n        return {\n            copyProduct: copyProduct,\n            deleteProduct: deleteProduct\n        };\n    });","start":2,"end":2340,"route":null,"symbol":"CartWidgetService","metadata":{"calls_functions":["angular.module","TemplateRootService.getTemplateUrl","$modal.open","_.clone","$rootScope.$on","getData","angular.isDefined","angular.fromJson","selectComplexProduct","selectDefaultFormats","_.each","setExclusionsAsync","setOptions","$scope.getVolumes","setFormats","console.log","$scope.checkRelatedFormats","$scope.filterRelatedFormats","$scope.selectDefaultFormats","CalcSimplifyWidgetService.checkFormatExclusions","$scope.selectDefaultOptions","Number","$timeout.cancel","$timeout","Notification.info","$filter","getPreparedProduct","CalculateService.getVolumes","data.volumes.filter","$scope.showVolumes","$scope.getMinVolume","Notification.error","$scope.calculate","_.includes","_.find","$scope.selectOption","getOption","parseInt","setRangePages","$scope.calcProductThickness","$scope.getMinimumThickness","$scope.getMaximumThickness","_.keys","_.values","_.has","getMinPages","Math.ceil","$scope.selectPages","Math.floor","product.excludedOptions.indexOf","CalculateService.calculate","$scope.showCalculation","excludeDeliveries","DeliveryWidgetService.getPkgWeightCalc","DeliveryWidgetService.getPkgWeightLite","DeliveryWidgetService.getVolume","console.error","$scope.relatedFormats.push","_.findIndex","$rootScope.$emit","$scope.prepareUrl","_.isEmpty","$scope.checkVolume","_.sortBy","getActiveVolume","getActiveVolumeByVolume","$scope.getTotalThickness","tmp.toFixed","$scope.allDeliveryPrice","$scope.productAddresses.i.price.toString","parseFloat","tmp_price.replace","$scope.calculation.priceTotal.replace","net_per_pcs.toFixed","price.toFixed","$scope.calculation.priceTotalBrutto.replace","gross_per_pcs.toFixed","isNaN","$scope.complexProducts.slice","filterFormats","$q.defer","def.reject","def.resolve","$scope.selectAttrPages","$scope.selectCustomFormat","CalculateService.saveCalculation","copyAddressesToNewProduct","DpCartsDataService.add","$modalInstance.close","AuthService.addToCart","deleteProduct","$scope.scrollbarVolume.update","$scope.customVolume.volumes.push","MainWidgetService.getCookie","angular.toJson","MainWidgetService.setCookie","savedProduct.productAddresses.push","_.first","filterRelatedFormats","scope.selectDefaultOptions","scope.selectFormat","_.size","_.min","_.isObject","scope.filterByThickness","scope.filterByOptionsPages","_.merge","setOptionExclusionsAsync","checkAttrSelectAsync","_.last","_.filter","allExclude.push","product.excludedOptions.push","getAttributeFromOption","_.indexOf","deletedAttrs.push","DeliveryWidgetService.reducePostData","CalcSimplifyWidgetService.prepareProductPromise","initSelectedProduct","addSelectedProductFormats","addSelectProductCustomFormat","addSelectProductCustomPageInfo","addSelectProductMaps","addSelectProductCurrentPages","addSelectProductAttrPages","changeRelatedFormats","result.push","CalculateData.getData","TaxService.getForProduct","newProduct.options.push","newItem.products.push","attributesData.splice","complexProduct.selectedProduct.data.attributeMap.push","DpProductService.delete","DpProductService.deleteFromMongo","onAll","scope.addressToJoin.addressID.splice"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":280,"eventfulness":{"watchers":0,"emits":10,"broadcasts":0},"summary_en":null,"business_tags":["cart"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartWidgetService.js:202-204:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartWidgetService.js","module":"digitalprint.services","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["element"],"antiPatterns":[],"text":"                                    data.volumes.filter(function (element) {\n                                        return element.active === true;\n                                    });","start":202,"end":204,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["$modal.open","data.volumes.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":280,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartWidgetService.js:1864-1866:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartWidgetService.js","module":"digitalprint.services","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["opt"],"antiPatterns":[],"text":"                        attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                            return !_.includes(product.excludedOptions, opt.ID);\n                        });","start":1864,"end":1866,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.each","_.includes","_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":280,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartWidgetService.js:1919-1921:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CartWidgetService.js","module":"digitalprint.services","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["opt"],"antiPatterns":[],"text":"            attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                return !_.includes(product.excludedOptions, opt.ID);\n            });","start":1919,"end":1921,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter","_.includes"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":280,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CategoryDescriptionService.js:4-24:service:CategoryDescriptionService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CategoryDescriptionService.js","module":null,"name":"CategoryDescriptionService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","Restangular","$cacheFactory"],"antiPatterns":[],"text":"    .service('CategoryDescriptionService', function ($q, $http, $config, Restangular, $cacheFactory) {\n\n        var CategoryDescriptionService = {};\n\n        CategoryDescriptionService.getAll = function (list) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'categoriesDescriptions/categoriesDescriptionsPublic?list=' + list\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CategoryDescriptionService;\n\n    });","start":4,"end":24,"route":null,"symbol":"CategoryDescriptionService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}categoriesDescriptions/categoriesDescriptionsPublic?list=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/ClientZoneWidgetService.js:8-640:factory:ClientZoneWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/ClientZoneWidgetService.js","module":null,"name":"ClientZoneWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["DpOrderService","DpOrderStatusService","ProductFileService","DeliveryService","AddressService","AuthService","$rootScope","$q","PaymentService","SettingService","TemplateRootService","$modal","socket","AuthDataService","OrderMessageService","Notification","$config","$filter"],"antiPatterns":[],"text":"    .factory('ClientZoneWidgetService', function (DpOrderService, DpOrderStatusService, ProductFileService,\n                                                  DeliveryService, AddressService, AuthService, $rootScope, $q,\n                                                  PaymentService, SettingService, TemplateRootService, $modal,\n                                                  socket, AuthDataService, OrderMessageService, Notification, $config,\n                                                  $filter) {\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        function ClientZoneWidgetService(json) {\n            angular.extend(this, json);\n        }\n\n        var pagingSettings = {\n            currentPage: 1,\n            pageSize: 10\n        };\n\n        var pegeSizeSelect = [10, 30, 50];\n\n        var globalParams = {};\n\n        function addParam(key, value) {\n            globalParams[key] = value;\n        }\n\n        function clearParams() {\n            globalParams = {};\n        }\n\n        function getCommonData(statuses) {\n            var def = $q.defer();\n\n            var commonData = {};\n            getDeliveries().then(function (deliveries) {\n                commonData.deliveries = deliveries;\n                getAddress().then(function (allAddress) {\n                    commonData.addresses = allAddress.addresses;\n                    commonData.senders = allAddress.senders;\n                    var params = {};\n                    params = _.extend(params, globalParams);\n                    countOrders(params).then(function (counted) {\n                        if (counted.count > 0) {\n                            commonData.count = counted.count;\n                        }\n                        params.limit = getPagingSettings().pageSize;\n                        params.offset = 0;\n                        getOrders(statuses, params).then(function (ordersData) {\n                            _.each(ordersData, function(singleOrder) {\n                                var dateOnly = singleOrder.created.split(' ')[0];\n                                var date = dateOnly.split('-');\n                                singleOrder.simpleCreateDate = date[2]+'-'+date[1]+'-'+date[0];\n                            });\n                            commonData.orders = ordersData;\n                            def.resolve(commonData);\n                        });\n                    });\n                });\n            });\n\n            return def.promise;\n        }\n\n        function getPageSizeSelect() {\n            return pegeSizeSelect;\n        }\n\n        function getPagingSettings() {\n            return pagingSettings;\n        }\n\n        function getOrders(statuses, params) {\n            var _this = this;\n            var def = $q.defer();\n\n            DpOrderService.getMyZone(params).then(function (data) {\n\n                getReclamationSettings().then(function (endOfReclamationTime) {\n\n                    _.each(data, function (order) {\n                        order.reclamationOnTime = compareDate(order.ended, endOfReclamationTime.date);\n                    });\n\n                    def.resolve(data);\n\n                });\n\n            });\n\n            return def.promise;\n        }\n\n        function getStatuses() {\n            var def = $q.defer();\n\n            DpOrderStatusService.getAll().then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        }\n\n        function countOrders(params) {\n            var def = $q.defer();\n\n            DpOrderService.getMyZoneCount(params).then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        }\n\n        function getDeliveries() {\n            var def = $q.defer();\n\n            DeliveryService.getAll().then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        }\n\n        function getAddress() {\n            var def = $q.defer();\n\n            if ($rootScope.logged) {\n\n                AddressService.getForUser().then(function (data) {\n                    def.resolve(data);\n                });\n\n            } else {\n                AddressService.getAddressesFromSession().then(function (addresses) {\n                    AddressService.getAll(addresses).then(function (data) {\n                        def.resolve(data);\n                    });\n                });\n            }\n\n            return def.promise;\n        }\n\n        function getFiles(productID) {\n            var def = $q.defer();\n            ProductFileService.getAll(productID).then(function (files) {\n                def.resolve(files);\n            });\n            return def.promise;\n        }\n\n        function getAggregateOrders(ordersData) {\n            var def = $q.defer();\n            var orders = [];\n            _.each(ordersData, function (order, index) {\n                orders.push(order.ID);\n                if (index + 1 === ordersData.length) {\n                    def.resolve(orders);\n                }\n            });\n            return def.promise;\n        }\n\n        function getAllFiles(ordersData) {\n            var def = $q.defer();\n\n            this.getAggregateOrders(ordersData).then(function (orders) {\n                ProductFileService.getByList(orders).then(function (data) {\n                    def.resolve(data);\n                });\n            });\n\n            return def.promise;\n        }\n\n        function removeFile(product, file) {\n            var fileIdx = _.findIndex(product.fileList, {ID: file.ID});\n            if (fileIdx > -1) {\n                var toRemove = _.clone(product.fileList[fileIdx]);\n                product.fileList.splice(fileIdx, 1);\n                if (product.lastFile && toRemove.ID === product.lastFile.ID) {\n                    product.lastFile = _.last(_.sortBy(product.fileList, function (o) {\n                        return o.created;\n                    }));\n                }\n            }\n            return product;\n        }\n\n        function mergeFiles(ordersData) {\n            var _this = this;\n\n            _this.getAllFiles(ordersData).then(function (data) {\n\n                _.each(ordersData, function (order) {\n                    if( order.products ) {\n                        order.filesAlert = order.products.length;\n                        order.waitForAccept = order.products.length;\n                    }\n\n                    order.filesRejected = 0;\n                    order.reportsToAccept = 0;\n\n                    _.each(order.products, function (product) {\n                        if( product.accept === 1 ) {\n                            order.waitForAccept--;\n                        } else if( product.accept === -1 ) {\n                            order.filesRejected++;\n                        }\n                        product.fileList = [];\n                        product.lastFile = {};\n\n                        if (data.files[parseInt(product.productID)] !== undefined) {\n                            product.fileList = data.files[parseInt(product.productID)];\n                            order.filesAlert--;\n                        } else {\n                            product.noFiles = true;\n                        }\n                        product.reportFiles=[];\n                        order.acceptCanceled = order.acceptCanceled || product.acceptCanceled;\n                        if (data.reportFiles[parseInt(product.productID)] !== undefined) {\n                            product.reportFiles = data.reportFiles[parseInt(product.productID)];\n                            order.reportsToAccept += _.reduce(product.reportFiles, function (total, n) {\n                                return total + (n.accept === 0 ? 1 : 0);\n                            }, 0);\n                        }\n\n\n                    });\n\n                });\n            });\n\n            return ordersData;\n        }\n\n        function getPayments() {\n            var def = $q.defer();\n\n            PaymentService.getAll().then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        }\n\n        function payment(params, orderID) {\n            var def = $q.defer();\n\n            DpOrderService.payment(params, orderID).then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        }\n\n        function addDeliveryToOrder(order) {\n\n            order.deliveryPrice = 0;\n            order.deliveryGrossPrice = 0;\n\n            _.each(order.products, function (product) {\n\n                if (typeof product.deliveryPrice === 'string') {\n                    product.deliveryPrice = product.deliveryPrice.replace(',', '.');\n                }\n                order.deliveryPrice += parseFloat(product.deliveryPrice);\n                if (typeof product.deliveryPriceGross === 'string') {\n                    product.deliveryPriceGross = product.deliveryPriceGross.replace(',', '.');\n                }\n                order.deliveryGrossPrice += parseFloat(product.deliveryPriceGross);\n\n            });\n\n            return order;\n\n        }\n\n        function getDeliveryPrice(order) {\n\n            var deliveryPrice = 0;\n            var deliveryGrossPrice = 0;\n\n            order = addDeliveryToOrder(order);\n\n\n            if (order.sumPrice !== undefined) {\n                var tmpPrice = order.sumPrice;\n                var tmpDeliveryPrice = order.deliveryPrice;\n\n                if (typeof(tmpPrice) === 'string') {\n                    tmpPrice = tmpPrice.replace(',', '.');\n                }\n                if (typeof tmpDeliveryPrice === 'string') {\n                    tmpDeliveryPrice = tmpDeliveryPrice.replace(',', '.');\n                }\n                tmpPrice = parseFloat(tmpPrice) + parseFloat(tmpDeliveryPrice);\n            }\n\n            if (order.sumGrossPrice !== undefined) {\n                var tmpGrossPrice = order.sumGrossPrice;\n                var tmpDeliveryGrossPrice = order.deliveryGrossPrice;\n\n                if (typeof(tmpGrossPrice) === 'string') {\n                    tmpGrossPrice = tmpGrossPrice.replace(',', '.');\n                }\n                if (typeof tmpDeliveryGrossPrice === 'string') {\n                    tmpDeliveryGrossPrice = tmpDeliveryGrossPrice.replace(',', '.');\n                }\n                tmpGrossPrice = parseFloat(tmpGrossPrice) + parseFloat(tmpDeliveryGrossPrice);\n            }\n\n            order.totalPrice = tmpPrice.toFixed(2).replace('.', ',');\n            order.totalGrossPrice = tmpGrossPrice.toFixed(2).replace('.', ',');\n\n            order.deliveryPrice = parseFloat(tmpDeliveryPrice).toFixed(2).replace('.', ',');\n            order.deliveryGrossPrice = parseFloat(tmpDeliveryGrossPrice).toFixed(2).replace('.', ',');\n\n            return order;\n        }\n\n        function preparePrice(price) {\n            var tmpPrice = price;\n            if (typeof(tmpPrice) === 'string') {\n                tmpPrice = tmpPrice.replace(',', '.');\n            }\n            tmpPrice = parseFloat(tmpPrice);\n\n            return tmpPrice.toFixed(2).replace('.', ',');\n        }\n\n        function getProjects(sort, pagingSettings) {\n\n            var sortBy = _.first(_.keys(sort));\n            var order = _.first(_.values(sort));\n\n            var def = $q.defer();\n\n            var url = $config.API_URL_EDITOR + 'getMyProjects?sortBy=' + sortBy +\n                '&order=' + order + '&page=' + pagingSettings.currentPage + '&display=' + pagingSettings.pageSize;\n\n            var header = {};\n            header[accessTokenName] = AuthService.readCookie(accessTokenName);\n\n            $.ajax({\n                url: url,\n                type: 'GET',\n                headers: header,\n                crossDomain: true,\n                withCredentials: true\n            }).done(function (data) {\n                def.resolve(data);\n            }).fail(function (data) {\n                console.log(data);\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        }\n\n        function getReclamationSettings() {\n            var Setting = new SettingService('reclamation');\n\n            var def = $q.defer();\n\n            Setting.getDateByWorkingDays().then(function (data) {\n                def.resolve(data);\n            });\n            return def.promise;\n        }\n\n        function addDaysToDate(days, currentDate) {\n            var currentDateObj = new Date(currentDate);\n            currentDateObj.setDate(currentDateObj.getDate() + days);\n            return currentDateObj;\n        }\n\n        function compareDate(date1, date2) {\n            if (!date1) {\n                return false;\n            }\n            var dateOne = new Date(date1);\n            var dateTwo = new Date(date2);\n            return dateOne > dateTwo;\n        }\n\n        function getOrderMessages(scope, orderID) {\n            OrderMessageService.getMessages(orderID).then(function (data) {\n                scope.messages = data;\n            });\n        }\n\n        function orderMessages(scope, order, type) {\n            TemplateRootService.getTemplateUrl(103).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: scope,\n                    size: 'lg',\n                    controller: function ($scope) {\n\n                        $scope.order = order;\n                        $scope.messages = [];\n\n                        $scope.typeOfResource = type;\n\n                        socket.emit('onOrder', {'orderID': order.ID});\n\n                        order.unreadMessages = 0;\n\n                        getOrderMessages($scope, order.ID);\n\n                        $scope.send = function () {\n\n                            socket.emit('order.addMessage', {\n                                'orderID': order.ID,\n                                'message': this.form.message,\n                                'accessToken': AuthDataService.getAccessToken(),\n                                'companyID': $rootScope.companyID\n                            });\n\n                        };\n\n                        socket.on('order.messageSaved', function (data) {\n                            if (data.ID !== undefined) {\n                                if ($scope.form && data.isAdmin === 0) {\n                                    $scope.form.message = '';\n                                }\n                                getOrderMessages($scope, order.ID);\n                            }\n                        });\n                    }\n                });\n            });\n        }\n\n        function orderMessageInfo(scope) {\n            socket.on('connect', function () {\n                console.log('Client has connected to the server!');\n            });\n\n            socket.emit('onOrdersPanel', {'userID': $rootScope.user.userID});\n\n            socket.on('order.newMessage', function (newMessage) {\n                var orderIdx = _.findIndex(scope.orders, {ID: newMessage.orderID});\n                if (orderIdx > -1) {\n                    if (scope.orders[orderIdx].unreadMessages === undefined) {\n                        scope.orders[orderIdx].unreadMessages = 1;\n                    } else {\n                        scope.orders[orderIdx].unreadMessages++;\n                    }\n                }\n            });\n        }\n\n        function offerMessageInfo(scope) {\n            socket.on('connect', function () {\n                console.log('Client has connected to the server!');\n            });\n\n            socket.emit('onOrdersPanel', {'userID': $rootScope.user.userID});\n\n            socket.on('order.newMessage', function (newMessage) {\n                var orderIdx = _.findIndex(scope.offers, {ID: newMessage.orderID});\n                if (orderIdx > -1) {\n                    if (scope.offers[orderIdx].unreadMessages === undefined) {\n                        scope.offers[orderIdx].unreadMessages = 1;\n                    } else {\n                        scope.offers[orderIdx].unreadMessages++;\n                    }\n                }\n            });\n        }\n\n        function doPayment($scope, order) {\n            TemplateRootService.getTemplateUrl(72).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    backdrop: true,\n                    keyboard: false,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        order = getDeliveryPrice(order);\n\n                        _.each(order.products, function (product) {\n                            product.price = preparePrice(product.price);\n                            product.grossPrice = preparePrice(product.grossPrice);\n                        });\n\n                        $scope.order = order;\n                        $scope.payments = [];\n                        $scope.preventPayment = false;\n                        $scope.paymentsOffset = 0;\n\n                        getPayments(order.ID).then(function (paymentsData) {\n                            $scope.paymentsOffset = (4 % paymentsData.length) * 3;\n                            $scope.payments = paymentsData;\n\n                            $scope.selectedPayment = _.find(paymentsData, {ID: order.paymentID});\n                        });\n\n                        $scope.paymentConfirm = function (paymentID) {\n                            $scope.preventPayment = true;\n\n                            var paymentIdx = _.findIndex($scope.payments, {ID: paymentID});\n\n                            if( paymentIdx > -1 ) {\n                                var paymentType = $scope.payments[paymentIdx];\n\n                                if( paymentType.limitExceeded ) {\n                                    $scope.preventPayment = false;\n                                    Notification.error($filter('translate')('credit_limit_exceeded') + ' - ' +\n                                        paymentType.creditLimit + '/' +  paymentType.unpaidValue + ' ' + paymentType.baseCurrency );\n                                    return;\n                                }\n                            }\n\n                            payment({paymentID: paymentID}, order.ID).then(function (paymentResponse) {\n\n                                if (_.isEmpty(paymentResponse.payment)) {\n                                    $scope.preventPayment = false;\n                                }\n\n                                if (paymentResponse.response === false && paymentResponse.paid === true) {\n                                    order.paid = 1;\n                                    Notification.info($filter('translate')('order_already_paid'));\n                                    $modalInstance.close();\n                                } else if (paymentResponse.response === true && !_.isEmpty(paymentResponse.payment)) {\n                                    if (paymentResponse.payment.status.statusCode === \"SUCCESS\") {\n                                        window.location.href = paymentResponse.payment.redirectUri;\n                                    }\n                                    if (paymentResponse.payment.status === 'NEW' && paymentResponse.payment.operator === 'tinkoff' ) {\n                                        window.location.href = paymentResponse.payment.url;\n                                    }\n                                    if ( paymentResponse.payment.status === 'NEW' && paymentResponse.payment.operator === 'sberbank' ) {\n                                        window.location.href = paymentResponse.payment.formUrl;\n                                    }\n                                    if ( paymentResponse.payment.status === 'CREATED' && paymentResponse.payment.operator === 'sberbank' ) {\n                                        Notification.info($filter('translate')(paymentResponse.paymentInfo));\n                                    }\n                                } else if (paymentResponse.response === true && paymentResponse.paymentChanged === true) {\n                                    Notification.info($filter('translate')('payment_method_changed'));\n                                    order.paymentID = paymentID;\n                                    $scope.selectedPayment = _.find($scope.payments, {ID: order.paymentID});\n                                } else if (paymentResponse.response === false) {\n                                    Notification.error($filter('translate')(paymentResponse.info));\n                                }\n\n                            });\n                        }\n\n                    }\n                });\n            });\n        }\n        function acceptReport(product, file, $scope){\n            ProductFileService.acceptReport(product.productID, file.ID).then(function (response) {\n                if (response.response) {\n                    if(response.reportAccepted){\n                        Notification.info($filter('translate')('report_accepted') + ' ' + file.name);\n                    }\n                    if(response.productAccepted){\n                        Notification.info($filter('translate')('product_accepted'));\n                    }\n                    $scope.getNextPage($scope.pagingSettings.currentPage);\n                }else{\n                    Notification.info($filter('translate')('error'));\n                }\n            });\n        }\n\n        function rejectReport(product, file, $scope) {\n            $modal.open({\n                scope: $scope,\n                backdrop: true,\n                controller: function ($scope, $modalInstance) {\n                    $scope.send = function () {\n                        ProductFileService.rejectReport(product.productID, file.ID, $scope.comment).then(function (response) {\n                            if (response.response) {\n                                Notification.info($filter('translate')('report_rejected') + ' ' + file.name);\n                                $modalInstance.close();\n                                $scope.getNextPage($scope.pagingSettings.currentPage);\n                            }\n                        });\n\n                    }\n                },\n                template: '<div class=\"modal-header\">\\n' +\n                    '    <h4 class=\"modal-title\">{{\"give_reason_of_rejection\" |translate }}</h4>\\n' +\n                    '</div>\\n' +\n                    '<div class=\"modal-body\">\\n' +\n                    '    <div class=\"row\">\\n' +\n                    '        <textarea ng-model=\"comment\" class=\"form-control\" placeholder=\"{{ \\'comment\\' | translate }}\"/>\\n' +\n                    '    </div>\\n' +\n                    '</div>\\n' +\n                    '<div class=\"modal-footer\">\\n' +\n                    '    <button class=\"btn btn-default\" ng-click=\"$dismiss()\">{{ \\'cancel\\' | translate }}</button>\\n' +\n                    '    <button class=\"btn btn-success\" ng-click=\"send()\"><i class=\"fa fa-check\"></i> {{ \\'submit\\' | translate }}</button>\\n' +\n                    '</div>'\n            })\n\n        }\n\n        return {\n            getProjects: getProjects,\n            getPageSizeSelect: getPageSizeSelect,\n            getPagingSettings: getPagingSettings,\n            getOrders: getOrders,\n            getStatuses: getStatuses,\n            countOrders: countOrders,\n            getDeliveries: getDeliveries,\n            getAddress: getAddress,\n            getCommonData: getCommonData,\n            addParam: addParam,\n            clearParams: clearParams,\n            getFiles: getFiles,\n            getAggregateOrders: getAggregateOrders,\n            getAllFiles: getAllFiles,\n            removeFile: removeFile,\n            mergeFiles: mergeFiles,\n            getPayments: getPayments,\n            payment: payment,\n            getDeliveryPrice: getDeliveryPrice,\n            preparePrice: preparePrice,\n            getReclamationSettings: getReclamationSettings,\n            orderMessages: orderMessages,\n            orderMessageInfo: orderMessageInfo,\n            offerMessageInfo: offerMessageInfo,\n            doPayment: doPayment,\n            acceptReport: acceptReport,\n            rejectReport: rejectReport\n        };\n    });","start":8,"end":640,"route":null,"symbol":"ClientZoneWidgetService","metadata":{"calls_functions":["angular.module","angular.extend","$q.defer","getDeliveries","getAddress","_.extend","countOrders","getPagingSettings","getOrders","_.each","singleOrder.created.split","dateOnly.split","def.resolve","DpOrderService.getMyZone","getReclamationSettings","compareDate","DpOrderStatusService.getAll","DpOrderService.getMyZoneCount","DeliveryService.getAll","AddressService.getForUser","AddressService.getAddressesFromSession","AddressService.getAll","ProductFileService.getAll","orders.push","ProductFileService.getByList","_.findIndex","_.clone","product.fileList.splice","_.last","_.sortBy","_this.getAllFiles","parseInt","_.reduce","PaymentService.getAll","DpOrderService.payment","product.deliveryPrice.replace","parseFloat","product.deliveryPriceGross.replace","addDeliveryToOrder","tmpPrice.replace","tmpDeliveryPrice.replace","tmpGrossPrice.replace","tmpDeliveryGrossPrice.replace","tmpPrice.toFixed","tmpGrossPrice.toFixed","_.first","_.keys","_.values","AuthService.readCookie","$.ajax","console.log","def.reject","Setting.getDateByWorkingDays","currentDateObj.setDate","currentDateObj.getDate","OrderMessageService.getMessages","TemplateRootService.getTemplateUrl","$modal.open","socket.emit","getOrderMessages","AuthDataService.getAccessToken","socket.on","getDeliveryPrice","preparePrice","getPayments","_.find","Notification.error","$filter","payment","_.isEmpty","Notification.info","$modalInstance.close","ProductFileService.acceptReport","$scope.getNextPage","ProductFileService.rejectReport"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":52,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CommonService.js:4-25:factory:CommonService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CommonService.js","module":null,"name":"CommonService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('CommonService', function ($q, $http, $config) {\n\n        var CommonService = {};\n\n        CommonService.getAll = function () {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'dp_ModelIconsExtensions'\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CommonService;\n    });","start":4,"end":25,"route":null,"symbol":"CommonService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}dp_ModelIconsExtensions","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CountService.js:2-44:factory:CountService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CountService.js","module":null,"name":"CountService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('CountService', function ($q, $http, $config) {\n\n        var CountService = {};\n\n        var resource = 'dp_calculate';\n\n        CountService.reCalculateCart = function (data) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                data: data,\n                url: $config.API_URL + [resource, 'cartReCalculate'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CountService.restorePricesCart = function (data) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                data: data,\n                url: $config.API_URL + [resource, 'cartRestorePrices'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CountService;\n\n    });","start":2,"end":44,"route":null,"symbol":"CountService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/cartReCalculate","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/cartRestorePrices","method":"PATCH","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CountriesService.js:5-33:factory:CountriesService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CountriesService.js","module":null,"name":"CountriesService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$config","$http"],"antiPatterns":[],"text":"    .factory('CountriesService', function ($rootScope, $q, $config, $http) {\n\n        var CountriesService = {};\n\n        CountriesService.getResource = function () {\n            return ['dp_countries'].join('/')\n        };\n\n        CountriesService.getAll = function () {\n\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CountriesService;\n\n    });","start":5,"end":33,"route":null,"symbol":"CountriesService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CouponService.js:5-37:service:CouponService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CouponService.js","module":null,"name":"CouponService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$http","$config"],"antiPatterns":[],"text":"    .service('CouponService', function ($rootScope, $q, $http, $config) {\n\n        var CouponService = {};\n\n        function getResource() {\n            return ['dp_coupons'];\n        }\n\n        CouponService.check = function (coupon, orderID) {\n            var def = $q.defer();\n\n            var resource = getResource();\n            resource.push('check');\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource.join('/'),\n                data: {\n                    'coupon': coupon,\n                    'orderID': orderID\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CouponService;\n\n    });","start":5,"end":37,"route":null,"symbol":"CouponService","metadata":{"calls_functions":["angular.module","$q.defer","getResource","resource.push","$http","resource.join","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}{...}","method":"POST","dataKeys":["coupon","orderID"],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CurrencyRootService.js:2-98:factory:CurrencyRootService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CurrencyRootService.js","module":null,"name":"CurrencyRootService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('CurrencyRootService', function ($rootScope, $q, $http, $config, $cacheFactory) {\n\n        var CurrencyRootService = {};\n\n        var resource = 'currencyroot';\n\n        var cache = $cacheFactory(resource);\n\n        var getAllDef = null;\n\n        CurrencyRootService.getAll = function (force) {\n            if (_.isNull(getAllDef) || force || getAllDef.promise.$$state.status === 1) {\n                getAllDef = $q.defer();\n            } else {\n                return getAllDef.promise;\n            }\n\n            if (cache.get('collection') && !force) {\n                getAllDef.resolve(cache.get('collection'));\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + resource\n                }).success(function (data) {\n                    cache.put('collection', data);\n                    $rootScope.$emit('CurrencyRoot.getAll', data);\n                    getAllDef.resolve(data);\n                }).error(function (data) {\n                    getAllDef.reject(data);\n                });\n            }\n\n            return getAllDef.promise;\n        };\n\n        CurrencyRootService.create = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.ID) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CurrencyRootService.update = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CurrencyRootService.remove = function (id) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [resource, id].join(\"/\")\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CurrencyRootService;\n    });","start":2,"end":98,"route":null,"symbol":"CurrencyRootService","metadata":{"calls_functions":["angular.module","$cacheFactory","_.isNull","$q.defer","cache.get","getAllDef.resolve","$http","cache.put","$rootScope.$emit","getAllDef.reject","cache.remove","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":9,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CurrencyService.js:2-98:factory:CurrencyService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CurrencyService.js","module":null,"name":"CurrencyService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('CurrencyService', function ($rootScope, $q, $http, $config, $cacheFactory) {\n\n        var CurrencyService = {};\n\n        var resource = 'currency';\n\n        var cache = $cacheFactory(resource);\n\n        var getAllDef = null;\n\n        CurrencyService.getAll = function (force) {\n            if (_.isNull(getAllDef) || force || getAllDef.promise.$$state.status === 1) {\n                getAllDef = $q.defer();\n            } else {\n                return getAllDef.promise;\n            }\n\n            if (cache.get('collection') && !force) {\n                getAllDef.resolve(cache.get('collection'));\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + resource\n                }).success(function (data) {\n                    cache.put('collection', data);\n                    $rootScope.$emit('Currency.getAll', data);\n                    getAllDef.resolve(data);\n                }).error(function (data) {\n                    getAllDef.reject(data);\n                });\n            }\n\n            return getAllDef.promise;\n        };\n\n        CurrencyService.create = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.ID) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CurrencyService.update = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        CurrencyService.remove = function (id) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [resource, id].join(\"/\")\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CurrencyService;\n    });","start":2,"end":98,"route":null,"symbol":"CurrencyService","metadata":{"calls_functions":["angular.module","$cacheFactory","_.isNull","$q.defer","cache.get","getAllDef.resolve","$http","cache.put","$rootScope.$emit","getAllDef.reject","cache.remove","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":9,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CustomProductService.js:2-30:service:CustomProductService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/CustomProductService.js","module":null,"name":"CustomProductService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .service('CustomProductService', function ($q, $http, $config) {\n\n        var resource = 'dp_customProducts';\n\n        var CustomProductService = {};\n\n        CustomProductService.getUploadUrl = function (customProductID) {\n            return $config.API_URL + [resource, 'files', customProductID].join('/');\n        };\n\n        CustomProductService.add = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return CustomProductService;\n\n    });","start":2,"end":30,"route":null,"symbol":"CustomProductService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DeliveryService.js:2-48:factory:DeliveryService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DeliveryService.js","module":null,"name":"DeliveryService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('DeliveryService', function ($q, $http, $config, $cacheFactory) {\n\n        var DeliveryService = {};\n\n        DeliveryService.getResource = function () {\n            return ['deliveries', 'deliveriesPublic'].join('/')\n        };\n\n        DeliveryService.getAll = function (currencyCode) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, currencyCode].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DeliveryService.findParcelShops = function (addressID, deliveryID, courierID) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            var urlParams = '?deliveryID=' + deliveryID + '&courierID=' + courierID + '&addressID=' + addressID;\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'deliveries/findParcelsPublic' + urlParams\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return DeliveryService;\n\n    });","start":2,"end":48,"route":null,"symbol":"DeliveryService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}deliveries/findParcelsPublic${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DeliveryWidgetService.js:5-1220:factory:DeliveryWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DeliveryWidgetService.js","module":null,"name":"DeliveryWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","DeliveryService","AddressService","$filter"],"antiPatterns":[],"text":"    .factory('DeliveryWidgetService', function ($rootScope, $q, DeliveryService, AddressService, $filter) {\n\n        function DeliveryWidgetService(json) {\n            angular.extend(this, json);\n        }\n\n        /**\n         * @param product\n         * @param address\n         * @param deliveries\n         * @returns {*}\n         */\n        function getPkgWeight(product, address, deliveries, allVolume) {\n\n            var currencyIndex = _.findIndex($rootScope.currencies, {'code': product.currency});\n\n            var course = 1;\n            if (currencyIndex > -1) {\n                course = $rootScope.currencies[currencyIndex].course;\n                if (typeof course === 'string') {\n                    course = course.replace(',', '.');\n                }\n                course = Number(course).toFixed(2);\n            }\n\n            var volume = allVolume ?? address.allVolume;\n\n            var deliveryID = address.deliveryID;\n            var idx = _.findIndex(deliveries, {ID: deliveryID});\n\n            var productVolume = product.volume;\n            if (product.amount > 1) {\n                productVolume *= product.amount;\n            }\n            var productWeight = product.weight;\n\n            var productUnitWeight = productWeight / productVolume;\n            var aweight = productUnitWeight * volume;\n\n            if (idx > -1) {\n                var unit_qty = 0;\n                var weight = 0;\n                var unitPrice = 0;\n                var unitPriceGross = 0;\n                var no_of_pkgs = 0;\n                var grossweight = 0;\n\n                var _div;\n                var _rem;\n\n                if (angular.isDefined(deliveries[idx].price)) {\n\n                    unit_qty = parseFloat(deliveries[idx].price.UnitQty);\n                    weight = parseFloat(deliveries[idx].price.weight);\n                    unitPrice = parseFloat(deliveries[idx].price.price);\n                    unitPriceGross = parseFloat(deliveries[idx].price.priceGross);\n\n                    if (volume <= unit_qty && aweight <= weight) {\n                        no_of_pkgs = 1;\n                    } else if (volume > unit_qty && aweight <= weight) {\n                        _div = Math.floor(volume / unit_qty);\n                        _rem = volume % unit_qty;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n                        no_of_pkgs += _div;\n                    } else if (volume <= unit_qty && aweight > weight) {\n                        _div = Math.floor(aweight / weight);\n                        _rem = aweight % weight;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n                        no_of_pkgs += _div;\n                    } else if (volume > unit_qty && aweight > weight) {\n\n                        _div = Math.floor(volume / unit_qty);\n                        _rem = volume % unit_qty;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n\n                        var new_weight = aweight / _div;\n\n                        if (new_weight <= weight) {\n                            no_of_pkgs = _div;\n                        } else {\n\n                            _div = Math.floor(aweight / weight);\n                            _rem = aweight % weight;\n                            if (_rem > 0) {\n                                _div++;\n                            }\n                            no_of_pkgs = _div;\n                        }\n                    }\n\n                    grossweight = aweight;\n\n                    if (checkWeightFreeRange(productWeight,\n                            deliveries[idx].price.FS_WeightStart,\n                            deliveries[idx].price.FS_WeightEnd) ||\n                        checkPriceFreeRange(course, product.price,\n                            deliveries[idx].price.FS_ValStart,\n                            deliveries[idx].price.FS_ValEnd)) {\n                        address.price = 0;\n                        address.priceGross = 0;\n                    } else {\n                        address.price = (no_of_pkgs * unitPrice).toFixed(2) / course;\n                        address.priceGross = (no_of_pkgs * unitPriceGross).toFixed(2) / course;\n                    }\n\n                } else {\n                    address.grossweight = 0;\n                    address.no_of_pkgs = 0;\n                }\n\n                address.no_of_pkgs = no_of_pkgs;\n                address.grossweight = grossweight.toFixed(2).replace('.', ',');\n                address.price = address.price.toFixed(2).replace('.', ',');\n                address.priceGross = address.priceGross.toFixed(2).replace('.', ',');\n                return address;\n            }\n        }\n\n        function getCourse(product) {\n            var currencyIndex = _.findIndex($rootScope.currencies, {'code': product.currency});\n\n            var course = 1;\n            if (currencyIndex > -1) {\n                course = $rootScope.currencies[currencyIndex].course;\n                if (typeof course === 'string') {\n                    course = course.replace(',', '.');\n                }\n                course = Number(course).toFixed(2);\n            }\n            return course;\n        }\n\n        /**\n         *\n         * @param product\n         * @param deliveryID\n         * @param deliveries\n         * @returns {{}}\n         */\n        function getAddressPackaging(calculations, deliveryID, volume, deliveries) {\n            const address = {};\n\n            const delivery = _.find(deliveries, {ID: deliveryID});\n            if (delivery === undefined) {\n                throw new Error('Missing delivery')\n            }\n\n            const packageUnitQty = parseFloat(delivery.price.UnitQty);\n            const packageUnitWeight = parseFloat(delivery.price.weight);\n            const packageUnitPrice = parseFloat(delivery.price.price);\n            const packageUnitPriceGross = parseFloat(delivery.price.priceGross);\n            let productsWeight = 0\n            let productsPrice = 0\n            let course//TODO course is from cart.order.currency\n            let packagesCount = 0\n            let packagesPrice = 0\n            /**\n             * Reminders\n             * @type {number}\n             */\n            let remUnit = 0;\n            let remWeight = 0;\n\n            calculations.forEach(calc => {\n                course = getCourse(calc)\n                let productVolume = volume ?? calc.volume;\n                if (calc.amount > 1) {\n                    productVolume *= calc.amount;\n                }\n\n                const productWeight = calc.weight;\n\n                const productUnitWeight = productWeight / productVolume;\n                let allWeight = productUnitWeight * productVolume;\n                productsWeight += allWeight\n                productsPrice += _.parseFloat(calc.price)\n                if (allWeight > packageUnitWeight) {\n                    const packagesRequired = (remWeight + allWeight) / packageUnitWeight\n                    const fullPackages = Math.ceil(packagesRequired)\n                    remWeight = packagesRequired - fullPackages\n                    packagesCount += fullPackages\n                } else {\n                    const packagesRequired = (remUnit + productVolume) / packageUnitQty\n                    const fullPackages = Math.floor(packagesRequired)\n                    remUnit = packagesRequired - fullPackages\n                    packagesCount += fullPackages\n                }\n            })\n            if (remUnit > 0) {\n                packagesCount += 1\n            }\n            if (remWeight > 0) {\n                packagesCount += 1\n            }\n\n            if (checkWeightFreeRange(productsWeight,\n                    delivery.price.FS_WeightStart,\n                    delivery.price.FS_WeightEnd) ||\n                checkPriceFreeRange(course, productsPrice,\n                    delivery.price.FS_ValStart,\n                    delivery.price.FS_ValEnd)) {\n                address.price = address.priceGross = 0;\n\n            } else {\n                address.price = packagesCount * packageUnitPrice;\n                address.priceGross = packagesCount * packageUnitPriceGross;\n            }\n\n            address.no_of_pkgs = packagesCount;\n            address.grossweight = productsWeight.toFixed(2).replace('.', ',');\n            address.price = address.price.toFixed(2).replace('.', ',');\n            address.priceGross = address.priceGross.toFixed(2).replace('.', ',');\n            return address;\n        }\n\n        /**\n         *\n         * @param product\n         * @param address\n         * @param deliveries\n         * @returns {*}\n         */\n        function getPkgWeightMyZone(product, address, deliveries) {\n\n            var volume = address.allVolume;\n\n            var deliveryID = address.deliveryID;\n            var idx = _.findIndex(deliveries, {ID: deliveryID});\n\n            var productVolume = product.volume;\n            if (product.amount > 1) {\n                productVolume *= product.amount;\n            }\n            var productWeight = product.weight;\n\n            var productUnitWeight = productWeight / productVolume;\n            var aweight = productUnitWeight * volume;\n\n            if (idx > -1) {\n                var unit_qty = 0;\n                var weight = 0;\n                var unitPrice = 0;\n                var unitPriceGross = 0;\n                var no_of_pkgs = 0;\n                var grossweight = 0;\n\n                var _div;\n                var _rem;\n\n                if (angular.isDefined(deliveries[idx].price)) {\n\n                    unit_qty = parseFloat(deliveries[idx].price.UnitQty);\n                    weight = parseFloat(deliveries[idx].price.weight);\n\n                    if (volume <= unit_qty && aweight <= weight) {\n                        no_of_pkgs = 1;\n                    } else if (volume > unit_qty && aweight <= weight) {\n                        _div = Math.floor(volume / unit_qty);\n                        _rem = volume % unit_qty;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n                        no_of_pkgs += _div;\n                    } else if (volume <= unit_qty && aweight > weight) {\n                        _div = Math.floor(aweight / weight);\n                        _rem = aweight % weight;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n                        no_of_pkgs += _div;\n                    } else if (volume > unit_qty && aweight > weight) {\n\n                        _div = Math.floor(volume / unit_qty);\n                        _rem = volume % unit_qty;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n\n                        var new_weight = aweight / _div;\n\n                        if (new_weight <= weight) {\n                            no_of_pkgs = _div;\n                        } else {\n\n                            _div = Math.floor(aweight / weight);\n                            _rem = aweight % weight;\n                            if (_rem > 0) {\n                                _div++;\n                            }\n                            no_of_pkgs = _div;\n                        }\n                    }\n\n                    grossweight = aweight;\n\n                } else {\n                    address.grossweight = 0;\n                    address.no_of_pkgs = 0;\n                }\n\n                address.no_of_pkgs = no_of_pkgs;\n                address.grossweight = grossweight.toFixed(2).replace('.', ',');\n                return address;\n            }\n        }\n\n        /**\n         *\n         * @param address\n         * @param scope\n         */\n        function getPkgWeightCalc(address, scope) {\n\n            var course = 1;\n            if ($rootScope.currentCurrency) {\n                course = $rootScope.currentCurrency.course;\n                if (typeof course === 'string') {\n                    course = course.replace(',', '.');\n                }\n                course = Number(course).toFixed(2);\n            }\n\n            var deliveryID = address.deliveryID;\n            var idx = _.findIndex(scope.filteredDeliveries, {ID: deliveryID});\n\n            var vol = scope.calculation.volume * scope.calculation.amount;\n            var productWeight = scope.calculation.weight;\n\n            if (productWeight === undefined) {\n                return;\n            }\n\n            var unitWeight = productWeight / vol;\n            var totalWeight = unitWeight * address.allVolume;\n\n            var _div;\n            var _rem;\n\n            if (idx > -1) {\n                var maxPerPackage = 0;\n                var weight = 0;\n                var unitPrice = 0;\n                var unitPriceGross = 0;\n                var numberOfPackages = 0;\n                var grossWeight = 0;\n\n                if (angular.isDefined(scope.filteredDeliveries[idx].price)) {\n\n                    maxPerPackage = parseFloat(scope.filteredDeliveries[idx].price.UnitQty);\n                    weight = parseFloat(scope.filteredDeliveries[idx].price.weight);\n                    unitPrice = parseFloat(scope.filteredDeliveries[idx].price.price);\n                    unitPriceGross = parseFloat(scope.filteredDeliveries[idx].price.priceGross);\n\n                    if (address.allVolume <= maxPerPackage && totalWeight <= weight) {\n                        numberOfPackages = 1;\n                    } else if (address.allVolume > maxPerPackage && totalWeight <= weight) {\n                        _div = Math.floor(address.allVolume / maxPerPackage);\n                        _rem = address.allVolume % maxPerPackage;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n                        numberOfPackages += _div;\n                    } else if (address.allVolume <= maxPerPackage && totalWeight > weight) {\n                        _div = Math.floor(totalWeight / weight);\n                        _rem = totalWeight % weight;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n                        numberOfPackages += _div;\n                    } else if (address.allVolume > maxPerPackage && totalWeight > weight) {\n\n                        _div = Math.floor(address.allVolume / maxPerPackage);\n                        _rem = address.allVolume % maxPerPackage;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n\n                        var new_weight = totalWeight / _div;\n\n                        if (new_weight <= weight) {\n                            numberOfPackages = _div;\n                        } else {\n\n                            _div = Math.floor(totalWeight / weight);\n                            _rem = totalWeight % weight;\n                            if (_rem > 0) {\n                                _div++;\n                            }\n                            numberOfPackages = _div;\n                        }\n                    }\n\n                    grossWeight = totalWeight;\n\n                    if (checkWeightFreeRange(totalWeight,\n                            scope.filteredDeliveries[idx].price.FS_WeightStart,\n                            scope.filteredDeliveries[idx].price.FS_WeightEnd) ||\n                        checkPriceFreeRange(course, scope.calculation.priceTotal,\n                            scope.filteredDeliveries[idx].price.FS_ValStart,\n                            scope.filteredDeliveries[idx].price.FS_ValEnd)) {\n                        address.price = 0;\n                        address.priceGross = 0;\n                    } else {\n                        address.price = numberOfPackages * unitPrice;\n                        address.priceGross = numberOfPackages * unitPriceGross;\n                    }\n\n                } else {\n                    address.grossweight = 0;\n                    address.no_of_pkgs = 0;\n                }\n\n                address.no_of_pkgs = numberOfPackages;\n                address.grossweight = grossWeight.toFixed(2).replace('.', ',');\n                address.price = address.price.toFixed(2).replace('.', ',');\n                address.priceGross = address.priceGross.toFixed(2).replace('.', ',');\n            }\n        }\n\n        function countAllProducts(products) {\n            return _.reduce(products, (total, item) => {\n                return total + item.allVolume\n            }, 0);\n        }\n\n        /**\n         * @param scope\n         * @param address\n         * @returns Number\n         */\n        function getVolume(scope, address, products) {\n            var vol;\n            if (typeof address === 'undefined') {\n                vol = scope.calculation.volume;\n                if (scope.calculation.amount > 1) {\n                    vol *= scope.calculation.amount;\n                }\n            } else if (products == undefined) {\n                vol = address.allVolume;\n            } else {\n                vol = countAllProducts(products)\n            }\n            return vol;\n        }\n\n        /**\n         *\n         * @param address\n         * @param volume\n         * @param scope\n         */\n        function getPkgWeightLite(address, volume, scope) {\n            var course = 1;\n            if ($rootScope.currentCurrency) {\n                course = $rootScope.currentCurrency.course;\n                if (typeof course === 'string') {\n                    course = course.replace(',', '.');\n                }\n                course = Number(course).toFixed(2);\n            }\n\n            var productWeight = scope.calculation.weight;\n\n            if (productWeight === undefined) {\n                return;\n            }\n\n            //TODO: COMPARE WEIGHT FROM MANAGER TO WEIGHT FROM CALC\n            //TODO: ENSURE MAX PRODUCT UNITS IS NOT EXCEEDED\n\n            var maxPerPackage = 0;\n            var weight = 0;\n            var unitPrice = 0;\n            var unitPriceGross = 0;\n            var numberOfPackages = 0;\n\n            var idx = _.findIndex(scope.filteredDeliveries, {ID: address.deliveryID});\n\n            var _div;\n            var _rem;\n\n            if (angular.isDefined(scope.filteredDeliveries[idx]) &&\n                angular.isDefined(scope.filteredDeliveries[idx].price)) {\n\n                /**\n                 * @param {number} scope.filteredDeliveries[].price.UnitQty\n                 */\n                maxPerPackage = parseFloat(scope.filteredDeliveries[idx].price.UnitQty);\n                weight = parseFloat(scope.filteredDeliveries[idx].price.weight);\n                unitPrice = parseFloat(scope.filteredDeliveries[idx].price.price);\n                unitPriceGross = parseFloat(scope.filteredDeliveries[idx].price.priceGross);\n\n                if (volume <= maxPerPackage && productWeight <= weight) {\n                    numberOfPackages = 1;\n                } else if (volume > maxPerPackage && productWeight <= weight) {\n                    _div = Math.floor(volume / maxPerPackage);\n                    _rem = volume % maxPerPackage;\n                    if (_rem > 0) {\n                        _div++;\n                    }\n                    numberOfPackages += _div;\n                } else if (volume <= maxPerPackage && productWeight > weight) {\n                    _div = Math.floor(productWeight / weight);\n                    _rem = productWeight % weight;\n                    if (_rem > 0) {\n                        _div++;\n                    }\n                    numberOfPackages += _div;\n                } else if (volume > maxPerPackage && productWeight > weight) {\n\n                    _div = Math.floor(volume / maxPerPackage);\n                    _rem = volume % maxPerPackage;\n                    if (_rem > 0) {\n                        _div++;\n                    }\n\n                    var newWeight = productWeight / _div;\n\n                    if (newWeight <= weight) {\n                        numberOfPackages = _div;\n                    } else {\n                        _div = Math.floor(productWeight / weight);\n                        _rem = productWeight % weight;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n                        numberOfPackages = _div;\n                    }\n                }\n\n                if (checkWeightFreeRange(productWeight,\n                        scope.filteredDeliveries[idx].price.FS_WeightStart,\n                        scope.filteredDeliveries[idx].price.FS_WeightEnd) ||\n                    checkPriceFreeRange(course, scope.calculation.priceTotal,\n                        scope.filteredDeliveries[idx].price.FS_ValStart,\n                        scope.filteredDeliveries[idx].price.FS_ValEnd)) {\n                    address.price = 0;\n                    address.priceGross = 0;\n                } else {\n                    address.price = numberOfPackages * unitPrice;\n                    address.priceGross = numberOfPackages * unitPriceGross;\n                }\n\n            } else {\n                address.grossweight = 0;\n                address.no_of_pkgs = 0;\n            }\n\n            address.no_of_pkgs = numberOfPackages;\n            address.grossweight = productWeight.toFixed(2).replace('.', ',');\n            address.price = address.price.toFixed(2).replace('.', ',');\n            address.priceGross = address.priceGross.toFixed(2).replace('.', ',');\n        }\n\n        function getJoinWeight(scope, deliveryID) {\n            var parentScope = scope.$parent;\n\n            var idx = _.findIndex(parentScope.deliveries, {ID: deliveryID});\n            if (idx > -1) {\n                var activeDelivery = parentScope.deliveries[idx];\n            } else {\n                return;\n            }\n\n            var maxPerPackage = parseFloat(activeDelivery.price.UnitQty);\n            var weight = parseFloat(activeDelivery.price.weight);\n            var unitPrice = parseFloat(activeDelivery.price.price);\n            var unitPriceGross = parseFloat(activeDelivery.price.priceGross);\n            var numberOfPackages = 0;\n            var result = {};\n\n            if (angular.isDefined(activeDelivery.price)) {\n\n                result.selectedDelivery = activeDelivery;\n\n                var prdIndex;\n                var overallWeight = 0;\n                var overallVolume = 0;\n                var tmpVolume;\n                _.each(scope.activeAddressToJoin, function (oneAddress) {\n                    tmpVolume = 0;\n                    prdIndex = _.findIndex(parentScope.cart.products, {productID: oneAddress.productID});\n                    overallWeight += parentScope.cart.products[prdIndex].weight;\n                    tmpVolume = parentScope.cart.products[prdIndex].volume;\n                    if (parentScope.cart.products[prdIndex].amount > 1) {\n                        tmpVolume *= parentScope.cart.products[prdIndex].amount;\n                    }\n                    overallVolume += tmpVolume;\n                });\n\n                result.overallWeight = overallWeight.toFixed(2).replace('.', ',');\n                result.overallVolume = overallVolume;\n\n                var _div;\n                var _rem;\n\n                if (overallVolume <= maxPerPackage && overallWeight <= weight) {\n                    numberOfPackages = 1;\n                } else if (overallVolume > maxPerPackage && overallWeight <= weight) {\n                    _div = Math.floor(overallVolume / maxPerPackage);\n                    _rem = overallVolume % maxPerPackage;\n                    if (_rem > 0) {\n                        _div++;\n                    }\n                    numberOfPackages += _div;\n                } else if (overallVolume <= maxPerPackage && overallWeight > weight) {\n                    _div = Math.floor(overallWeight / weight);\n                    _rem = overallWeight % weight;\n                    if (_rem > 0) {\n                        _div++;\n                    }\n                    numberOfPackages += _div;\n                } else if (overallVolume > maxPerPackage && overallWeight > weight) {\n\n                    _div = Math.floor(overallVolume / maxPerPackage);\n                    _rem = overallVolume % maxPerPackage;\n                    if (_rem > 0) {\n                        _div++;\n                    }\n\n                    var newWeight = overallWeight / _div;\n\n                    if (newWeight <= weight) {\n                        numberOfPackages = _div;\n                    } else {\n                        _div = Math.floor(overallWeight / weight);\n                        _rem = overallWeight % weight;\n                        if (_rem > 0) {\n                            _div++;\n                        }\n                        numberOfPackages = _div;\n                    }\n                }\n\n                result.numberOfPackages = numberOfPackages;\n                result.price = (numberOfPackages * unitPrice).toFixed(2).replace('.', ',');\n                result.priceGross = (numberOfPackages * unitPriceGross).toFixed(2).replace('.', ',');\n            }\n\n            return result;\n        }\n\n        function checkWeightFreeRange(weight, weightMin, weightMax) {\n\n            if (weightMin === null && weightMax === null) {\n                return false;\n            }\n\n            if (weightMin > 0 && weightMax === null) {\n                if (parseFloat(weightMin) <= weight) {\n                    return true;\n                }\n            }\n\n            if (weightMin === null && weightMax > 0) {\n                if (parseFloat(weightMax) >= weight) {\n                    return true;\n                }\n            }\n\n            if (parseFloat(weightMin) <= weight &&\n                parseFloat(weightMax) >= weight) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function checkPriceFreeRange(course, price, priceMin, priceMax) {\n\n            price = parseFloat(price);\n            priceMin = parseFloat(priceMin) / course;\n            priceMax = parseFloat(priceMax) / course;\n\n            if (priceMin === null && priceMax === null) {\n                return false;\n            }\n\n            if (priceMin > 0 && priceMax === null) {\n                if (priceMin <= price) {\n                    return true;\n                }\n            }\n\n            if (priceMin === null && priceMax > 0) {\n                if (priceMax >= price) {\n                    return true;\n                }\n            }\n\n            if (priceMin <= price &&\n                priceMax >= price) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function checkExclusions(scope, address) {\n            if (!scope.calculation) {\n                return;\n            }\n            var course = 1;\n            if ($rootScope.currentCurrency) {\n                course = $rootScope.currentCurrency.course;\n                if (typeof course === 'string') {\n                    course = course.replace(',', '.');\n                }\n                course = Number(course).toFixed(2);\n            }\n\n            var excluded = [];\n            _.each(scope.filteredDeliveries, function (delivery) {\n                if (checkPriceExclusionRange(\n                    course,\n                    scope.calculation.priceTotal,\n                    delivery.price.EX_ValStart,\n                    delivery.price.EX_ValEnd\n                )) {\n                    console.log('excluded delivery 2', delivery, course, scope.calculation.priceTotal)\n                    excluded.push(delivery.ID);\n                } else if (checkWeightExclusionRange(\n                    scope.calculation.weight,\n                    delivery.price.EX_WeightStart,\n                    delivery.price.EX_WeightEnd)) {\n                    excluded.push(delivery.ID);\n                    console.log('excluded delivery 2a', delivery, scope.calculation.weight)\n                }\n            });\n\n            address.deliveries = [];\n            var selectedExcluded = false;\n\n            _.each(scope.filteredDeliveries, function (delivery) {\n\n                if (delivery !== undefined) {\n                    if (_.indexOf(excluded, delivery.ID) === -1) {\n                        address.deliveries.push(delivery);\n                    } else {\n\n                        var filteredIndex = _.findIndex(address.deliveries, {ID: delivery.ID});\n                        if (filteredIndex > -1) {\n                            address.deliveries.splice(filteredIndex, 1);\n                        }\n\n                        if (address.deliveryID === delivery.ID) {\n                            selectedExcluded = true;\n                        }\n                    }\n                }\n\n            });\n\n            if (selectedExcluded) {\n                address.deliveryID = _.first(address.deliveries).ID;\n            }\n        }\n\n        function checkExclusionsInCart(product, address) {\n\n            var course = 1;\n            if ($rootScope.currentCurrency) {\n                course = $rootScope.currentCurrency.course;\n                if (typeof course === 'string') {\n                    course = course.replace(',', '.');\n                }\n                course = Number(course).toFixed(2);\n            }\n\n            var productPrice = _.clone(product.grossPrice);\n            if (typeof product.grossPrice === 'string') {\n                productPrice = product.grossPrice.replace(',', '.');\n            }\n            productPrice = Number(productPrice).toFixed(2);\n\n            var excluded = [];\n            _.each(product.filteredDeliveries, function (delivery) {\n                if (checkPriceExclusionRange(\n                    course,\n                    productPrice,\n                    delivery.price.EX_ValStart,\n                    delivery.price.EX_ValEnd\n                )) {\n                    excluded.push(delivery.ID);\n                    console.log('excluded delivery', delivery, course, productPrice)\n                } else if (checkWeightExclusionRange(\n                    address.grossweight,\n                    delivery.price.EX_WeightStart,\n                    delivery.price.EX_WeightEnd)) {\n                    excluded.push(delivery.ID);\n                    console.log('excluded delivery a', delivery, address.grossweight)\n                }\n            });\n\n            address.deliveries = [];\n            var selectedExcluded = false;\n\n            _.each(product.filteredDeliveries, function (delivery) {\n\n                if (delivery !== undefined) {\n\n                    if (_.indexOf(excluded, delivery.ID) === -1) {\n                        address.deliveries.push(delivery);\n                    } else {\n\n                        var filteredIndex = _.findIndex(address.deliveries, {ID: delivery.ID});\n                        if (filteredIndex > -1) {\n                            address.deliveries.splice(filteredIndex, 1);\n                        }\n\n                        if (address.deliveryID === delivery.ID) {\n                            selectedExcluded = true;\n                        }\n                    }\n                }\n\n            });\n\n            if (selectedExcluded) {\n                address.deliveryID = _.first(address.deliveries).ID;\n            }\n        }\n\n        function checkExclusionsCart(scope, product, address) {\n\n            var course = 1;\n            if ($rootScope.currentCurrency) {\n                course = $rootScope.currentCurrency.course;\n                if (typeof course === 'string') {\n                    course = course.replace(',', '.');\n                }\n                course = Number(course).toFixed(2);\n            }\n\n            var excluded = [];\n\n            _.each(scope.filteredDeliveries, function (delivery) {\n\n                if (checkPriceExclusionRange(\n                    course,\n                    product.price,\n                    delivery.price.EX_ValStart,\n                    delivery.price.EX_ValEnd\n                )) {\n                    excluded.push(delivery.ID);\n                    console.log('excluded delivery 3', delivery, course, product.price)\n                } else if (checkWeightExclusionRange(\n                    address.grossweight,\n                    delivery.price.EX_WeightStart,\n                    delivery.price.EX_WeightEnd)) {\n                    excluded.push(delivery.ID);\n                    console.log('excluded delivery 3a', delivery, address.grossweight)\n                }\n            });\n\n\n            var selectedExcluded = false;\n\n            var counter = 0;\n\n            if (excluded.length > 0) {\n                _.each(excluded, function (excludeDeliveryID) {\n\n                    var filteredIndex = _.findIndex(scope.filteredDeliveries, {ID: excludeDeliveryID});\n\n                    counter++;\n                    if (filteredIndex > -1) {\n\n                        if (address.deliveryID === excludeDeliveryID) {\n                            selectedExcluded = true;\n                        }\n\n                        scope.filteredDeliveries.splice(filteredIndex, 1);\n\n                        if (counter === excluded.length) {\n                            address.deliveries = scope.filteredDeliveries;\n                        }\n                    }\n\n                });\n            }\n\n            if (selectedExcluded) {\n                address.deliveryID = _.first(scope.filteredDeliveries).ID;\n            }\n        }\n\n        function checkWeightExclusionRange(weight, weightMin, weightMax) {\n\n            if (typeof weight === 'string') {\n                weight = weight.replace(',', '.');\n            }\n            weight = parseFloat(weight);\n            if (weightMin !== null) {\n                weightMin = parseFloat(weightMin);\n            }\n            if (weightMax !== null) {\n                weightMax = parseFloat(weightMax);\n            }\n\n            if (weight === 0) {\n                return false;\n            }\n\n            if (weightMin === null && weightMax === null) {\n                return false;\n            }\n\n            if (weightMin > 0 && weightMax === null) {\n                if (weightMin <= weight) {\n                    return true;\n                }\n            }\n\n            if (weightMin === null && weightMax > 0) {\n                if (weightMax >= weight) {\n                    return true;\n                }\n            }\n\n            if (weightMin <= weight &&\n                weightMax >= weight) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function checkPriceExclusionRange(course, price, priceMin, priceMax) {\n            if (typeof price === 'string') {\n                price = price.replace(',', '.');\n            }\n            price = parseFloat(price);\n            if (priceMin !== null) {\n                priceMin = parseFloat(priceMin) / course;\n            }\n            if (priceMax !== null) {\n                priceMax = parseFloat(priceMax) / course;\n            }\n\n            if (priceMin === null && priceMax === null) {\n                return false;\n            }\n\n            if (priceMin > 0 && priceMax === null) {\n                if (priceMin <= price) {\n                    return true;\n                }\n            }\n\n            if (priceMin === null && priceMax > 0) {\n                if (priceMax >= price) {\n                    return true;\n                }\n            }\n\n            if (priceMin <= price &&\n                priceMax >= price) {\n                return true;\n            }\n\n            return false;\n        }\n\n        function reducePostData(productAddresses) {\n            var cloned = _.clone(productAddresses, true);\n\n            var def = $q.defer();\n\n            if (cloned.length === 0) {\n                def.resolve([]);\n            }\n\n            _.each(cloned, function (one, index) {\n                delete one.deliveries;\n                delete one.details;\n                delete one.senders;\n                delete one.deliveryNames;\n                delete one.senderName;\n                delete one.parcelShops;\n                delete one.collectionPoints;\n                if (index === cloned.length - 1) {\n                    def.resolve(cloned);\n                }\n            });\n\n            return def.promise;\n        }\n\n        function filterDeliveries(scope, product) {\n\n            var def = $q.defer();\n\n            var filteredDeliveries = scope.deliveries;\n\n            var counter = 0;\n            var counterCompare = 0;\n\n            _.each(product.calcProducts, function (oneProduct) {\n\n                counterCompare += oneProduct.attributes.length;\n                _.each(oneProduct.attributes, function (attribute) {\n\n                    if (attribute.excludeDeliveries && attribute.excludeDeliveries.length > 0) {\n\n                        _.each(attribute.excludeDeliveries, function (deliveryID) {\n\n                            var deliveryIndex = _.findIndex(filteredDeliveries, {ID: deliveryID});\n\n                            if (deliveryIndex > -1) {\n\n                                filteredDeliveries.splice(deliveryIndex, 1);\n                            }\n\n                        });\n                        counter++;\n                        if (counter === counterCompare) {\n                            def.resolve(filteredDeliveries);\n                        }\n                    } else {\n                        counter++;\n                        if (counter === counterCompare) {\n                            def.resolve(filteredDeliveries);\n                        }\n                    }\n                });\n            });\n\n            return def.promise;\n        }\n\n        /**\n         * Excluding deliveries based on 3 rules\n         * @param deliveries\n         * @param products\n         * @returns {*}\n         */\n        const filterDeliveries2 = (deliveries, products) => {\n            if (!deliveries) {\n                return deliveries\n            }\n            const excludedByAttributeIds = products\n                .reduce((all, product) => {\n                    const calcProducts = product.calcProducts ? product.calcProducts : (product.selectedProduct?[product.selectedProduct]:product.products)\n                    if(!calcProducts){\n                        return all;\n                    }\n                    const excluded = calcProducts.reduce((all, calcP) => {\n                        const attrs = calcP.attributes ? calcP.attributes : calcP.data.attributes\n                        all = attrs.reduce((all, attr) => {\n                            return attr.excludeDeliveries ? all.concat(attr.excludeDeliveries) : all\n                        }, [])\n                        return all\n                    }, all)\n                    all = all.concat(excluded)\n                    return all\n                }, []);\n\n            const excludedByPriceOrWeight = products\n                .reduce((all, product) => {\n                    const course = getCourse(product)\n                    const excluded = deliveries.filter(delivery => {\n                        return checkPriceExclusionRange(\n                            course,\n                            product.priceGross,\n                            delivery.price.EX_ValStart,\n                            delivery.price.EX_ValEnd\n                        ) || checkWeightExclusionRange(\n                            product.weight,\n                            delivery.price.EX_WeightStart,\n                            delivery.price.EX_WeightEnd)\n                    })\n                        .map(delivery => delivery.ID)\n                    all = all.concat(excluded)\n                    return all\n                }, []);\n            const ecludedIds = excludedByAttributeIds.concat(excludedByPriceOrWeight)\n            deliveries = deliveries.filter(delivery => {\n                return ecludedIds.indexOf(delivery.ID) == -1\n            })\n            return _.clone(deliveries, true)\n        }\n\n        function findParcelShops(addressID, deliveryID, courierID, address) {\n\n            var def = $q.defer();\n\n            DeliveryService.findParcelShops(addressID, deliveryID, courierID).then(function (data) {\n                if (data.length > 0) {\n                    address.parcelShops = data;\n                    def.resolve(true);\n                } else {\n                    address.parcelShops = [];\n                    def.resolve(false);\n                }\n            }, function (error) {\n                def.reject(error);\n            });\n\n            return def.promise;\n        }\n\n        function checkParcelShopSelected(productAddresses) {\n            var def = $q.defer();\n\n            _.each(productAddresses, function (oneAddress, index) {\n                if (oneAddress.hasParcelShops && !oneAddress.parcelShopID) {\n                    def.resolve(false);\n                }\n                if (index >= (productAddresses.length - 1)) {\n                    def.resolve(true);\n                }\n            });\n\n            return def.promise;\n        }\n\n        function checkCollectionPoints(scope, deliveryID) {\n\n            var parentScope = scope.$parent;\n\n            var idx = _.findIndex(parentScope.deliveries, {ID: deliveryID});\n            if (idx > -1) {\n                var activeDelivery = parentScope.deliveries[idx];\n            } else {\n                return;\n            }\n\n            if (activeDelivery.collectionPoints !== undefined && activeDelivery.collectionPoints.length > 0) {\n                return activeDelivery.collectionPoints;\n            }\n        }\n\n        function getOption(product, optID) {\n\n            var item = undefined;\n            _.each(product.attributes, function (attribute) {\n                var idx = _.findIndex(attribute.options, {ID: optID});\n\n                if (idx > -1) {\n                    item = attribute.options[idx];\n                    return false;\n                }\n\n            });\n\n            return item;\n        }\n\n        function checkMatchAddress(carts, productAddresses) {\n\n            var def = $q.defer();\n\n            if (productAddresses.length > 1) {\n                def.resolve(false);\n            }\n\n            carts.pop();\n\n            var addressID = productAddresses[0].addressID;\n            var cartLen = carts.length;\n\n            if (cartLen === 0) {\n                def.resolve(false);\n            }\n\n            _.each(carts, function (cart, index) {\n                if (cart.ProductAddresses.length === 1 && cart.ProductAddresses[0].addressID === addressID && cart.ProductAddresses[0].join === true) {\n                    def.resolve(cart);\n                }\n\n                if (cartLen === index + 1) {\n                    def.resolve(false);\n                }\n            });\n\n            return def.promise;\n\n        }\n\n        function addToJoinedDelivery(addressID, currency) {\n            var def = $q.defer();\n            DpOrderService.addToJoinedDelivery(addressID, currency).then(function (data) {\n                def.resolve(data);\n            });\n            return def.promise;\n        }\n\n        return {\n            getPkgWeight,\n            getAddressPackaging,\n            getVolume,\n            getPkgWeightLite,\n            getPkgWeightCalc,\n            getJoinWeight,\n            getPkgWeightMyZone,\n            checkExclusions,\n            checkExclusionsCart,\n            reducePostData,\n            filterDeliveries,\n            filterDeliveries2,\n            findParcelShops,\n            checkParcelShopSelected,\n            checkCollectionPoints,\n            checkExclusionsInCart,\n            getOption,\n            checkMatchAddress,\n            addToJoinedDelivery\n        };\n    });","start":5,"end":1220,"route":null,"symbol":"DeliveryWidgetService","metadata":{"calls_functions":["angular.module","angular.extend","_.findIndex","course.replace","Number","angular.isDefined","parseFloat","Math.floor","checkWeightFreeRange","checkPriceFreeRange","grossweight.toFixed","address.price.toFixed","address.priceGross.toFixed","_.find","calculations.forEach","getCourse","_.parseFloat","Math.ceil","productsWeight.toFixed","grossWeight.toFixed","_.reduce","countAllProducts","productWeight.toFixed","_.each","overallWeight.toFixed","checkPriceExclusionRange","console.log","excluded.push","checkWeightExclusionRange","_.indexOf","address.deliveries.push","address.deliveries.splice","_.first","_.clone","product.grossPrice.replace","scope.filteredDeliveries.splice","weight.replace","price.replace","$q.defer","def.resolve","filteredDeliveries.splice","products.reduce","calcProducts.reduce","attrs.reduce","all.concat","deliveries.filter","excludedByAttributeIds.concat","ecludedIds.indexOf","DeliveryService.findParcelShops","def.reject","carts.pop","DpOrderService.addToJoinedDelivery"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":209,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DeliveryWidgetService.js:1072-1082:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DeliveryWidgetService.js","module":"digitalprint.services","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["delivery"],"antiPatterns":[],"text":"                    const excluded = deliveries.filter(delivery => {\n                        return checkPriceExclusionRange(\n                            course,\n                            product.priceGross,\n                            delivery.price.EX_ValStart,\n                            delivery.price.EX_ValEnd\n                        ) || checkWeightExclusionRange(\n                            product.weight,\n                            delivery.price.EX_WeightStart,\n                            delivery.price.EX_WeightEnd)\n                    })","start":1072,"end":1082,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["products.reduce","deliveries.filter","checkPriceExclusionRange","checkWeightExclusionRange"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":209,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DeliveryWidgetService.js:1088-1090:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DeliveryWidgetService.js","module":"digitalprint.services","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["delivery"],"antiPatterns":[],"text":"            deliveries = deliveries.filter(delivery => {\n                return ecludedIds.indexOf(delivery.ID) == -1\n            })","start":1088,"end":1090,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["deliveries.filter","ecludedIds.indexOf"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":209,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DomWidgetService.js:4-85:factory:DomWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DomWidgetService.js","module":null,"name":"DomWidgetService","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .factory('DomWidgetService', function () {\n\n        const DomWidgetService = {};\n\n        function pinElementWhenScroll(mainSelector, positionSelector, widthSelector) {\n            const wrap = document.querySelector(mainSelector);\n            const configWrap = document.querySelector(widthSelector);\n            const panelHeading = document.querySelector(positionSelector);\n\n            // Sprawdzenie krytycznych elementów\n            if (!wrap || !panelHeading) {\n                console.warn('Brakuje jednego lub więcej elementów DOM krytycznych:', {\n                    wrap: wrap,\n                    panelHeading: panelHeading\n                });\n                return;\n            }\n\n            // Ustawienie wrapWidth z alternatywą, gdy configWrap nie istnieje\n            let wrapWidth = configWrap ? configWrap.clientWidth : wrap.clientWidth;\n            const position = getPosition(panelHeading);\n\n            $(window).on(\"scroll\", function() {\n                if (!wrap) return;\n\n                if (this.scrollY > position.y) {\n                    addClass(wrap, \"fix-panel\");\n                    wrap.style.width = wrapWidth + 'px';\n                } else {\n                    removeClass(wrap, \"fix-panel\");\n                    wrap.style.width = 'auto';\n                }\n            });\n\n            $(window).on('resize', function () {\n                if (!wrap) return;\n\n                // Ponowne sprawdzenie configWrap przy zmianie rozmiaru\n                wrapWidth = configWrap ? configWrap.clientWidth : wrap.clientWidth;\n                if (this.scrollY > position.y) {\n                    wrap.style.width = wrapWidth + 'px';\n                }\n            });\n        }\n\n        function getPosition(element) {\n            let xPosition = 0;\n            let yPosition = 0;\n\n            // Sprawdzenie, czy element istnieje\n            if (!element) {\n                return { x: xPosition, y: yPosition };\n            }\n\n            while (element) {\n                xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);\n                yPosition += (element.offsetTop - element.scrollTop + element.clientTop);\n                element = element.offsetParent;\n            }\n\n            return { x: xPosition, y: yPosition };\n        }\n\n        function hasClass(element, existClass) {\n            return !!element.className.match(new RegExp('(\\\\s|^)' + existClass + '(\\\\s|$)'));\n        }\n\n        function addClass(element, newClass) {\n            if (!hasClass(element, newClass)) element.className += \" \" + newClass;\n        }\n\n        function removeClass(element, existClass) {\n            if (hasClass(element, existClass)) {\n                const reg = new RegExp('(\\\\s|^)' + existClass + '(\\\\s|$)');\n                element.className = element.className.replace(reg, ' ');\n            }\n        }\n\n        return {\n            pinElementWhenScroll: pinElementWhenScroll\n        };\n    });","start":4,"end":85,"route":null,"symbol":"DomWidgetService","metadata":{"calls_functions":["angular.module","document.querySelector","console.warn","getPosition","$","addClass","removeClass","element.className.match","hasClass","element.className.replace"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":13,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DomainService.js:2-101:service:DomainService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DomainService.js","module":null,"name":"DomainService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$config","$http","localStorageService","$cacheFactory"],"antiPatterns":[],"text":"    .service('DomainService', function ($rootScope, $q, $config, $http, localStorageService, $cacheFactory) {\n\n        var DomainService = {};\n\n        var resource = 'domains';\n        var cache = $cacheFactory(resource);\n\n        var getAllDef = null;\n\n        DomainService.getAll = function (force) {\n            if (_.isNull(getAllDef) || force || getAllDef.promise.$$state.status === 1) {\n                getAllDef = $q.defer();\n            } else {\n                return getAllDef.promise;\n            }\n\n            if (cache.get('collection') && !force) {\n                getAllDef.resolve(cache.get('collection'));\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + resource\n                }).success(function (data) {\n                    getAllDef.resolve(data);\n                }).error(function (data) {\n                    getAllDef.reject(data);\n                });\n            }\n\n            return getAllDef.promise;\n        };\n\n        DomainService.editDomain = function (domain) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + resource,\n                data: domain\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    $rootScope.$emit('Domain:editSuccess');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DomainService.getCurrentDomain = function () {\n            var def = $q.defer();\n\n            this.getAll().then(function (data) {\n\n                var result = _.find(data, {\n                    selected: 1\n                });\n\n                if (!!result) {\n                    localStorageService.set('domainID', result.ID);\n                    $rootScope.currentDomain = result;\n                    def.resolve(result);\n                } else {\n                    def.reject();\n                }\n\n            });\n\n            return def.promise;\n        };\n\n        DomainService.getDomain = function (id) {\n            var def = $q.defer();\n\n            this.getAll().then(function (data) {\n                var domain = _.find(data, {ID: id});\n                def.resolve(domain);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DomainService.setDomain = function (id) {\n            this.getDomain(id).then(function (data) {\n                localStorageService.set('domainID', id);\n\n                $rootScope.currentDomain = data;\n            });\n\n        };\n\n        return DomainService;\n    });","start":2,"end":101,"route":null,"symbol":"DomainService","metadata":{"calls_functions":["angular.module","$cacheFactory","_.isNull","$q.defer","cache.get","getAllDef.resolve","$http","getAllDef.reject","cache.remove","$rootScope.$emit","def.resolve","def.reject","_.find","localStorageService.set"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":8,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpAddressService.js:2-108:factory:DpAddressService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpAddressService.js","module":null,"name":"DpAddressService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('DpAddressService', function($q, $http, $config){\n\n    var DpAddressService = {};\n\n    var resource = 'dp_addresses';\n\n    DpAddressService.getDefaultAddress = function( type ) {\n        var def = $q.defer();\n\n        $http({\n            method: 'GET',\n            url: $config.API_URL + resource + '/' + 'getAddress' + '/' + type\n        }).success(function(data) {\n            def.resolve(data);\n        }).error(function(data) {\n            def.reject(data);\n        });\n\n        return def.promise;\n    };\n\n    DpAddressService.editUserAddress = function( data, addressID ) {\n        var def = $q.defer();\n\n        if( addressID === undefined ) {\n            addressID = '';\n        }\n\n        data = _.extend({}, data);\n\n        $http({\n            method: 'PATCH',\n            url: $config.API_URL + resource + '/' + 'updateAddress' + '/' + addressID,\n            data: data\n        }).success(function(data) {\n            def.resolve(data);\n        }).error(function(data) {\n            def.reject(data);\n        });\n\n        return def.promise;\n    };\n\n    DpAddressService.getAddresses = function( type ) {\n        var def = $q.defer();\n\n        $http({\n            method: 'GET',\n            url: $config.API_URL + resource + '/' + 'getAddresses' + '/' + type\n        }).success(function(data) {\n            def.resolve(data);\n        }).error(function(data) {\n            def.reject(data);\n        });\n\n        return def.promise;\n    };\n\n    DpAddressService.addAddress = function( data, type ) {\n        var def = $q.defer();\n\n        data = _.toPlainObject(data);\n        $http({\n            method: 'POST',\n            url: $config.API_URL + resource + '/' + 'addAddress' + '/' + type,\n            data: data\n        }).success(function(data) {\n            def.resolve(data);\n        }).error(function(data) {\n            def.reject(data);\n        });\n\n        return def.promise;\n    };\n\n    DpAddressService.emptyAddress = function () {\n        var def = $q.defer();\n\n        $http({\n            method: 'GET',\n            url: $config.API_URL + resource + '/' + 'emptyAddress'\n        }).success(function (data) {\n            def.resolve(data);\n        }).error(function (data) {\n            def.reject(data);\n        });\n\n        return def.promise;\n    };\n\n    DpAddressService.remove = function (addressID) {\n        var def = $q.defer();\n\n        $http({\n            method: 'DELETE',\n            url: $config.API_URL + resource + '/' + addressID\n        }).success(function (data) {\n            def.resolve(data);\n        }).error(function (data) {\n            def.reject(data);\n        });\n\n        return def.promise;\n    };\n\n    return DpAddressService;\n});","start":2,"end":108,"route":null,"symbol":"DpAddressService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject","_.extend","_.toPlainObject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/getAddress/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/updateAddress/${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getAddresses/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/addAddress/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/emptyAddress","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpCartsDataService.js:2-69:factory:DpCartsDataService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpCartsDataService.js","module":null,"name":"DpCartsDataService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('DpCartsDataService', function ($q, $http, $config) {\n\n        var DpCartsDataService = {};\n\n        var resource = 'dp_carts_data';\n\n        DpCartsDataService.get = function (id) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, id].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCartsDataService.add = function (carts) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource].join('/'),\n                data: carts\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCartsDataService.update = function (data) {\n            var def = $q.defer();\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'updateAddresses'].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCartsDataService.updateCart = function (data) {\n            var def = $q.defer();\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'updateAddresses'].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return DpCartsDataService;\n\n    });","start":2,"end":69,"route":null,"symbol":"DpCartsDataService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/updateAddresses","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/updateAddresses","method":"PATCH","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpCategoryService.js:2-138:service:DpCategoryService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpCategoryService.js","module":null,"name":"DpCategoryService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$http","$config"],"antiPatterns":[],"text":"    .service('DpCategoryService', function ($q, Restangular, $http, $config) {\n\n        var DpCategoryService = {};\n\n        var resource = 'dp_categories';\n\n        DpCategoryService.getContains = function (categoryUrl) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getContains', categoryUrl].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n                console.log(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCategoryService.forView = function () {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'forViewPublic', 1].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCategoryService.getOneForView = function (categoryUrl) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'oneForView', categoryUrl].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCategoryService.manyForView = function (categories) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'manyForView', categories.join(',')].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n                console.log(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCategoryService.getCategoryTree = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getCategoryTree'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n                console.log(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCategoryService.getChilds = function (categoryUrl) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getChilds', categoryUrl].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n                console.log(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCategoryService.getGroups = function (categoryUrl) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getGroups'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpCategoryService.getFirstByType = function (typeID) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getFirstByType', typeID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return DpCategoryService;\n\n    });","start":2,"end":138,"route":null,"symbol":"DpCategoryService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject","console.log","categories.join"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/getContains/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/forViewPublic/{...}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/oneForView/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/manyForView/{...}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getCategoryTree","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getChilds/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getGroups","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getFirstByType/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpOrderService.js:2-364:factory:DpOrderService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpOrderService.js","module":null,"name":"DpOrderService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('DpOrderService', function ($q, $http, $config) {\n\n        var DpOrderService = {};\n\n        var resource = 'dp_orders';\n\n        DpOrderService.getAll = function () {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.get = function (id) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, id].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.edit = function (id, data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + [resource, id].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.sellerNotReady = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'sellerNotReady'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.getCart = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getCart'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.setUser = function (orderID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'setUser', orderID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.saveCart = function (orderID, sendData) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'saveCart', orderID].join('/'),\n                data: sendData\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.getMyZone = function (params) {\n            var def = $q.defer();\n\n            if (params === undefined) {\n                params = {};\n            }\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'myZone'].join('/'),\n                params: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.getMyZoneCount = function (params) {\n            var def = $q.defer();\n\n            if (params === undefined) {\n                params = {};\n            }\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'myZoneCount'].join('/'),\n                params: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.sendPaymentSuccess = function (data, orderID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'paymentSuccess', orderID].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.sendPaymentStatus = function (orderID, urlParams) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'paymentStatus', orderID].join('/'),\n                params: urlParams\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.payment = function (data, orderID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'payment', orderID].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.updatePrice = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'updatePrice'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.recalculateDelivery = function (params) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'recalculateDelivery'].join('/'),\n                data: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.addToJoinedDelivery = function (addressID, currency) {\n            var def = $q.defer();\n\n            var params = {addressID: addressID, currency: currency};\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'addToJoinedDelivery'].join('/'),\n                data: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.changeAddresses = function (orderID, productID, productAddresses) {\n            var def = $q.defer();\n\n            var params = {\n                orderID: orderID,\n                productID: productID,\n                productAddresses: productAddresses\n            };\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'changeAddresses', orderID].join('/'),\n                data: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.getMyZoneOffers = function (params) {\n            var def = $q.defer();\n\n            if (params === undefined) {\n                params = {};\n            }\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'myZoneOffers'].join('/'),\n                params: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpOrderService.acceptOffer = function(data) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'acceptOffer'].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject()\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        DpOrderService.rejectOffer = function(data) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'rejectOffer'].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject()\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        DpOrderService.changeMultiOffer = function(data) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'changeMultiOffer'].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject()\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n\n        return DpOrderService;\n\n    });","start":2,"end":364,"route":null,"symbol":"DpOrderService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/sellerNotReady","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getCart","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/setUser/${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/saveCart/${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/myZone","method":"GET","dataKeys":[],"paramKeys":["..."]},{"url":"${{obj}.API_URL}${{node.name}}/myZoneCount","method":"GET","dataKeys":[],"paramKeys":["..."]},{"url":"${{obj}.API_URL}${{node.name}}/paymentSuccess/${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/paymentStatus/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":["..."]},{"url":"${{obj}.API_URL}${{node.name}}/payment/${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/updatePrice","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/recalculateDelivery","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/addToJoinedDelivery","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/changeAddresses/${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/myZoneOffers","method":"GET","dataKeys":[],"paramKeys":["..."]},{"url":"${{obj}.API_URL}${{node.name}}/acceptOffer","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/rejectOffer","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/changeMultiOffer","method":"POST","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":7,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpOrderStatusService.js:5-28:service:DpOrderStatusService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpOrderStatusService.js","module":null,"name":"DpOrderStatusService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$http","$config"],"antiPatterns":[],"text":"    .service('DpOrderStatusService', function ($rootScope, $q, $http, $config) {\n\n        var DpStatusService = {};\n\n        var resource = 'dp_statuses';\n\n        DpStatusService.getAll = function ( active ) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'forClient'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n\n            return def.promise;\n        };\n\n        return DpStatusService;\n    });","start":5,"end":28,"route":null,"symbol":"DpOrderStatusService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/forClient","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpProductService.js:2-117:factory:DpProductService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DpProductService.js","module":null,"name":"DpProductService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('DpProductService', function ($q, $http, $config) {\n\n        var DpProductService = {};\n\n        var resource = 'dp_products';\n\n        DpProductService.getAll = function () {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpProductService.baseInfo = function (id) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'baseInfo', id].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpProductService.delete = function (product) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + resource + '/' + 'deletePublic' + '/' + product.productID\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpProductService.deleteFromMongo = function (product) {\n\n            var def = $q.defer();\n            var preparedData = {\n                'productID': product.productID,\n                'orderID': product.orderID,\n                'calcID': product.calcID\n            };\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'cart/delete',\n                data: $.param(preparedData),\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpProductService.getByOrder = function (orderID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getByOrder', orderID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        DpProductService.restoreAccept = function (productID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, 'restoreAccept', productID].join('/'),\n                data: {\n                    accept: 0\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return DpProductService;\n\n    });","start":2,"end":117,"route":null,"symbol":"DpProductService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject","$.param"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/baseInfo/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/deletePublic/${{obj}.productID}","method":"DELETE","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.AUTH_URL}cart/delete","method":"POST","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.API_URL}${{node.name}}/getByOrder/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/restoreAccept/${{node.name}}","method":"PATCH","dataKeys":["accept"],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DynamicCssService.js:2-28:factory:DynamicCssService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/DynamicCssService.js","module":null,"name":"DynamicCssService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$document","$config"],"antiPatterns":[],"text":"    .factory('DynamicCssService', function($rootScope, $document, $config) {\n\n        var DynamicCssService = {};\n\n        DynamicCssService.loadDomainCSS = function(domainID, companyID) {\n            var staticUrl = $config.STATIC_URL || 'http://localtest.me/static/';\n            var cssLink = $document[0].createElement('link');\n\n            cssLink.rel = 'stylesheet';\n            cssLink.type = 'text/css';\n            cssLink.href = staticUrl + companyID + '/styles/' + domainID + '/main.css';\n\n            // Remove any existing domain-specific CSS\n            var existingLink = $document[0].querySelector('#dynamic-css');\n            if (existingLink) {\n                existingLink.parentNode.removeChild(existingLink);\n            }\n\n            // Set an ID for easier management\n            cssLink.id = 'dynamic-css';\n\n            // Append the new CSS file to the head\n            $document[0].getElementsByTagName('head')[0].appendChild(cssLink);\n        };\n\n        return DynamicCssService;\n    });","start":2,"end":28,"route":null,"symbol":"DynamicCssService","metadata":{"calls_functions":["angular.module","existingLink.parentNode.removeChild"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/EditorProjectService.js:5-94:factory:EditorProjectService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/EditorProjectService.js","module":null,"name":"EditorProjectService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","AuthService","$http","$config"],"antiPatterns":[],"text":"    .factory('EditorProjectService', function ($q, $rootScope, AuthService, $http, $config) {\n\n        var EditorProjectService = {};\n\n        var url = $config.API_URL_EDITOR;\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        var header = {};\n        header[accessTokenName] = AuthService.readCookie(accessTokenName);\n\n        EditorProjectService.getProjectPrev = function (projectID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'jpgPreview?projectID=' + projectID\n            }).success(function(data) {\n                def.resolve(data);\n            }).error(function(data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        EditorProjectService.shareMyProject = function(email, projectID) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + ['shareMyProject', projectID].join('/'),\n                type: 'POST',\n                headers: header,\n                data: {\n                    emails: [email]\n                },\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        EditorProjectService.shareMyProjectByFb = function(projectID) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + ['getsharedProjectFromFB', projectID].join('/'),\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        EditorProjectService.getProjectsData = function(projects) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + ['getProjectsData'].join('/'),\n                type: 'POST',\n                headers: header,\n                data: {\n                    projects: projects\n                },\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        return EditorProjectService;\n\n    });","start":5,"end":94,"route":null,"symbol":"EditorProjectService","metadata":{"calls_functions":["angular.module","AuthService.readCookie","$q.defer","$http","def.resolve","def.reject","$.ajax"],"api_endpoints":[{"url":"${{obj}.API_URL}jpgPreview?projectID=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/HomepageBannerService.js:4-29:factory:HomepageBannerService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/HomepageBannerService.js","module":null,"name":"HomepageBannerService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","Restangular"],"antiPatterns":[],"text":"    .factory('HomepageBannerService', function ($q, $http, $config, Restangular) {\n        var HomePageBannerService = {};\n\n        function getResource() {\n            return 'homePageBanner';\n        }\n\n        var resource = getResource();\n\n        HomePageBannerService.getAll = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource + '/homePageBannerPublic'\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return HomePageBannerService;\n    });","start":4,"end":29,"route":null,"symbol":"HomepageBannerService","metadata":{"calls_functions":["angular.module","getResource","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/homePageBannerPublic","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/InvoiceService.js:7-35:factory:InvoiceService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/InvoiceService.js","module":null,"name":"InvoiceService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('InvoiceService', function ($q, $http, $config) {\n\n        var InvoiceService = {};\n\n        var resource = getResource();\n\n        function getResource() {\n            return 'dp_invoices';\n        }\n\n        InvoiceService.getForUser = function (orderID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getForUser',orderID].join(\"/\"),\n                responseType: 'arraybuffer',\n                dataType:'blob'\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return InvoiceService;\n    });","start":7,"end":35,"route":null,"symbol":"InvoiceService","metadata":{"calls_functions":["angular.module","getResource","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/getForUser/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LangRootService.js:2-94:service:LangRootService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LangRootService.js","module":null,"name":"LangRootService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .service('LangRootService', function ($q, $http, $config) {\n\n        var LangRootService = {};\n\n        var resource = 'langroot';\n\n        LangRootService.getAll = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        LangRootService.getEmpty = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'showEmpty'].join(\"/\")\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        LangRootService.create = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        LangRootService.update = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        LangRootService.remove = function (id) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [resource, id].join(\"/\")\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return LangRootService;\n    });","start":2,"end":94,"route":null,"symbol":"LangRootService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/showEmpty","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LangService.js:2-91:factory:LangService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LangService.js","module":null,"name":"LangService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$config","$http","CacheService"],"antiPatterns":[],"text":"  .factory('LangService', function($rootScope, $q, $config, $http, CacheService){\n\n    var LangService = {};\n\n    var cacheResolve = new CacheService('lang');\n\n    var resource = 'lang';\n\n    LangService.getAll = function() {\n      var def = $q.defer();\n\n      cacheResolve.doRequest(resource).then(function(data){\n        def.resolve(data);\n      }, function(data){\n        def.reject(data);\n      });\n\n      return def.promise;\n    }\n\n    LangService.getEmpty = function() {\n      var def = $q.defer();\n\n      $http({\n        method: 'GET',\n        url: $config.API_URL + [resource, 'showEmpty'].join(\"/\")\n      }).success(function(data) {\n        if(data.response) {\n          def.resolve(data);\n        } else {\n          def.reject(data);\n        }\n      });\n\n      return def.promise;\n    }\n\n    LangService.getLang = function(langCode){\n      var def = $q.defer();\n\n      cacheResolve.doRequest([resource, langCode].join('/')).then(function(data){\n        if(data.response) {\n          def.resolve(data.response);\n        } else {\n          def.reject(data);\n        }\n      }, function(data){\n        def.reject(data);\n      });\n\n      return def.promise;\n    }\n\n    LangService.edit = function(lang) {\n      var def = $q.defer();\n\n      $http({\n        method: 'PUT',\n        url: $config.API_URL + resource,\n        data: lang\n      }).success(function(data) {\n        if(data.response) {\n          def.resolve(data);\n        } else {\n          def.reject(data);\n        }\n      });\n\n      return def.promise;\n    }\n\n    LangService.remove = function(id) {\n      var def = $q.defer();\n\n      $http({\n        method: 'DELETE',\n        url: $config.API_URL + [resource, id].join('/')\n      }).success(function(data) {\n        if(data.response) {\n          def.resolve(data);\n        } else {\n          def.reject(data);\n        }\n      });\n\n      return def.promise;\n    };\n\n    return LangService;\n  });","start":2,"end":91,"route":null,"symbol":"LangService","metadata":{"calls_functions":["angular.module","$q.defer","cacheResolve.doRequest","def.resolve","def.reject","$http"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/showEmpty","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":5,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LangSettingsRootService.js:2-98:factory:LangSettingsRootService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LangSettingsRootService.js","module":null,"name":"LangSettingsRootService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('LangSettingsRootService', function ($rootScope, $q, $http, $config, $cacheFactory) {\n\n        var LangSettingsRootService = {};\n\n        var resource = 'langsettingsroot';\n\n        var cache = $cacheFactory(resource);\n\n        var getAllDef = null;\n\n        LangSettingsRootService.getAll = function (force) {\n            if (_.isNull(getAllDef) || force || getAllDef.promise.$$state.status === 1) {\n                getAllDef = $q.defer();\n            } else {\n                return getAllDef.promise;\n            }\n\n            if (cache.get('collection') && !force) {\n                getAllDef.resolve(cache.get('collection'));\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + resource\n                }).success(function (data) {\n                    cache.put('collection', data);\n                    $rootScope.$emit('LangSettingsRoot.getAll', data);\n                    getAllDef.resolve(data);\n                }).error(function (data) {\n                    getAllDef.reject(data);\n                });\n            }\n\n            return getAllDef.promise;\n        };\n\n        LangSettingsRootService.create = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data.item);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        LangSettingsRootService.update = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        LangSettingsRootService.remove = function (id) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [resource, id].join(\"/\")\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return LangSettingsRootService;\n    });","start":2,"end":98,"route":null,"symbol":"LangSettingsRootService","metadata":{"calls_functions":["angular.module","$cacheFactory","_.isNull","$q.defer","cache.get","getAllDef.resolve","$http","cache.put","$rootScope.$emit","getAllDef.reject","cache.remove","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":9,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LangSettingsService.js:2-101:factory:LangSettingsService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LangSettingsService.js","module":null,"name":"LangSettingsService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('LangSettingsService', function ($rootScope, $q, $http, $config, $cacheFactory) {\n\n        var LangSettingsService = {};\n\n        var resource = 'langsettings';\n\n        var cache = $cacheFactory(resource);\n\n        var getAllDef = null;\n\n        LangSettingsService.getAll = function (force) {\n            if (_.isNull(getAllDef) || force || getAllDef.promise.$$state.status === 1) {\n                getAllDef = $q.defer();\n            } else {\n                return getAllDef.promise;\n            }\n            // var def = $q.defer();\n\n            if (cache.get('collection') && !force) {\n                var data=cache.get('collection')\n                $rootScope.$emit('LangSettings.getAll', data);\n                getAllDef.resolve(data);\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + resource\n                }).success(function (data) {\n                    cache.put('collection', data);\n                    $rootScope.$emit('LangSettings.getAll', data);\n                    getAllDef.resolve(data);\n                }).error(function (data) {\n                    getAllDef.reject(data);\n                });\n            }\n\n            return getAllDef.promise;\n        };\n\n        LangSettingsService.create = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.ID) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        LangSettingsService.update = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        LangSettingsService.remove = function (id) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [resource, id].join(\"/\")\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return LangSettingsService;\n    });","start":2,"end":101,"route":null,"symbol":"LangSettingsService","metadata":{"calls_functions":["angular.module","$cacheFactory","_.isNull","$q.defer","cache.get","$rootScope.$emit","getAllDef.resolve","$http","cache.put","getAllDef.reject","cache.remove","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":9,"eventfulness":{"watchers":0,"emits":2,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LoadingService.js:2-29:factory:LoadingService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LoadingService.js","module":null,"name":"LoadingService","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .factory('LoadingService', function () {\n\n        var loadingCount = 0;\n        var errorCount = 0;\n        return {\n            isLoading: function () {\n                return loadingCount > 0;\n            },\n            requested: function () {\n                loadingCount++\n            },\n            responsed: function (status) {\n                if (status != 200 && status != 401) {\n                    errorCount++\n                }\n                loadingCount--\n            },\n            countError: function () {\n                errorCount++\n            },\n            count: function () {\n                return loadingCount\n            },\n            errorCount: function () {\n                return errorCount\n            }\n        };\n    });","start":2,"end":29,"route":null,"symbol":"LoadingService","metadata":{"calls_functions":["angular.module"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LoginWidgetService.js:6-292:factory:LoginWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LoginWidgetService.js","module":null,"name":"LoginWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["AuthService","$rootScope","DpAddressService","AddressService","Notification","UserService","$cookieStore","$filter","$state","$q","DpCartsDataService","DeliveryWidgetService"],"antiPatterns":[],"text":"    .factory( 'LoginWidgetService', function ( AuthService, $rootScope, DpAddressService, AddressService, Notification,\n                                               UserService, $cookieStore, $filter, $state, $q, DpCartsDataService, DeliveryWidgetService  ) {\n\n        /**\n         * @param scope\n         * @param credentials\n         * @param backTo\n         */\n        function login( credentials, backTo ) {\n\n            if( _.isEmpty(credentials) ) {\n                Notification.error($filter('translate')('unexpected_error'));\n                return;\n            }\n\n            AuthService.login(credentials).then(function (data) {\n                console.log('AuthService.login response', data)\n                /**\n                 * @param {Object} data.user\n                 * @param {number} data.user.super\n                 */\n\n                if( data.user ) {\n                    $rootScope.user = data.user;\n                }\n\n                if( data.user !== undefined && data.user.super ) {\n\n                    var startPoint = 'client-zone-orders';\n                    if($rootScope.myZoneStartPoint) {\n                        startPoint = $rootScope.myZoneStartPoint;\n                    }\n\n                    $state.go(startPoint).then(function () {\n                        $rootScope.logged = true;\n                        Notification.success($filter('translate')('login_success'));\n                    });\n                } else {\n                    DpAddressService.getDefaultAddress(1).then(function (defaultAddress) {\n\n                        if (defaultAddress.response) {\n                            var params = {addressID: defaultAddress.address.ID};\n\n                            AuthService.updateDefaultAddress(params).then(function () {\n\n                                selectCurrency( data.user.userID ).then( function () {\n\n                                    $rootScope.logged = true;\n                                    $rootScope.$emit('CreditLimit:reload', true);\n\n                                    var startPoint = 'client-zone-orders';\n                                    if($rootScope.myZoneStartPoint) {\n                                        startPoint = $rootScope.myZoneStartPoint;\n                                    }\n\n                                    if( backTo !== undefined && backTo.state !== undefined ){\n                                        $state.go(backTo.state, backTo.params).then(function () {\n                                            Notification.success($filter('translate')('login_success'));\n                                        });\n                                    } else {\n                                        $state.go(startPoint).then(function () {\n                                            Notification.success($filter('translate')('login_success'));\n                                        });\n                                    }\n\n                                });\n\n                            });\n\n                        } else {\n                            Notification.error($filter('translate')(data.error));\n                        }\n                    });\n                }\n\n            }, function (data) {\n                $rootScope.logged = false;\n\n                /**\n                 * @param {Object} data\n                 * @param {number} data.httpCode\n                 */\n\n                if (data.httpCode === 400) {\n                    Notification.error($filter('translate')('wrong_mail_password'));\n                } else {\n                    Notification.error($filter('translate')(data.error));\n                }\n            });\n        }\n\n        function getAddress() {\n            var def = $q.defer();\n\n            if( $rootScope.logged ){\n\n                AddressService.getForUser().then( function(data) {\n                    def.resolve(data);\n                });\n\n            } else {\n                AddressService.getAddressesFromSession().then( function(addresses) {\n                    AddressService.getAll( addresses ).then( function(data) {\n                        def.resolve(data);\n                    });\n                });\n            }\n\n            return def.promise;\n        }\n\n        /**\n         * @param userID\n         */\n        function selectCurrency( userID ) {\n            var def = $q.defer();\n\n            UserService.getCurrency(userID).then(function( data ) {\n                /**\n                 * @param {Object} data\n                 * @param {string} data.currencyCode\n                 */\n\n                if( data.response == false ) {\n                    def.resolve(false);\n                    return;\n                }\n\n                if( $rootScope.currentCurrency.code !== data.currencyCode ) {\n                    var idx = _.findIndex($rootScope.currencies, {code: data.currencyCode});\n                    if (idx > -1) {\n                        $rootScope.currentCurrency = $rootScope.currencies[idx];\n                    }\n                    if( data.currencyCode !== undefined ) {\n                        $cookieStore.put('currency', data.currencyCode);\n                    }\n\n                    $rootScope.$emit('Currency.changed', $rootScope.currentCurrency);\n\n                    def.resolve(true);\n\n                } else {\n                    def.resolve(false);\n                }\n            });\n\n            return def.promise;\n        }\n\n        function loginInCart( scope, credentials, onetime ) {\n\n            var def = $q.defer();\n\n            if( onetime === undefined ) {\n                onetime = false;\n            }\n\n            if( _.isEmpty(credentials) ) {\n                Notification.error($filter('translate')('unexpected_error'));\n                return;\n            }\n\n            AuthService.getSessionCarts().then( function(cartData) {\n\n                credentials.orderID = cartData.orderID;\n                credentials.carts = [];\n\n                if( cartData ) {\n                    _.each(cartData.carts, function(oneCart) {\n\n                        /**\n                         * @param {Object} oneCart\n                         * @param {number} oneCart._id\n                         */\n\n                        credentials.carts.push(oneCart._id)\n                    })\n                }\n\n                AuthService.login(credentials).then(function(data) {\n                    $rootScope.logged = true;\n\n                    $rootScope.$emit('CreditLimit:reload', true);\n\n                    if( onetime ) {\n                        $rootScope.oneTimeUser = true;\n                    }\n\n                    if( data.user !== undefined && data.user.super ) {\n                        Notification.success($filter('translate')('login_success'));\n                    } else {\n                        DpAddressService.getDefaultAddress(1).then( function(defaultAddress) {\n\n                            if(defaultAddress.response) {\n\n                                getAddress().then( function( allAddress ) {\n\n                                    scope.addresses = allAddress.addresses;\n                                    scope.senders = allAddress.senders;\n\n                                    _.each(scope.cart.products, function (product) {\n                                        console.log(product);\n                                        var patchData = {};\n                                        patchData.userID = data.user.userID;\n                                        patchData.calcID = product.calcID;\n                                        DpCartsDataService.updateCart(patchData).then(function (result){\n                                            if(result.response === true){\n                                                Notification.success($filter('translate')('successfully_changed_cart'));\n                                            }\n                                        });\n                                        _.each(product.addresses, function (address) {\n\n                                            address.senderID = allAddress.senders[0].type;\n                                            address.addressID = defaultAddress.address.ID;\n                                        });\n                                        updateProductAddress(product);\n                                    });\n\n                                    var params = {addressID: defaultAddress.address.ID};\n\n                                    AuthService.updateDefaultAddress(params).then(function (updateData) {\n                                        def.resolve(true);\n\n                                        if( onetime ) {\n                                            Notification.success($filter('translate')('you_can_order_now'));\n                                        } else {\n                                            Notification.success( $filter('translate')('login_success') );\n                                        }\n\n                                    });\n\n                                });\n                            } else {\n                                def.reject(false);\n                            }\n                        });\n                    }\n\n\n                }, function(data) {\n                    $rootScope.logged = false;\n                    if (data.httpCode === 400) {\n                        Notification.error($filter('translate')('wrong_mail_password'));\n                    } else {\n                        Notification.error(\"Error \" + data.error);\n                    }\n                    def.reject(false);\n                });\n\n            });\n\n            return def.promise;\n        }\n\n        function updateProductAddress(product) {\n\n            DeliveryWidgetService.reducePostData(product.addresses).then(function (productAddresses) {\n\n                AddressService.updateProductAddresses(product.orderID, product.productID, productAddresses).then(function (savedData) {\n                    if (savedData.response === true) {\n                        var patchData = {};\n                        patchData.orderID = product.orderID;\n                        patchData.productID = product.productID;\n                        patchData.productAddresses = product.addresses;\n                        DpCartsDataService.update(patchData).then(function (patchResponse) {\n                            if (patchResponse.response === true) {\n                                getCartData();\n\n                            } else {\n                                Notification.error($filter('translate')('error'));\n                            }\n                        });\n                    } else {\n                        Notification.error($filter('translate')('error'));\n                    }\n                });\n\n            });\n\n        }\n\n        return {\n            login: login,\n            loginInCart: loginInCart\n        };\n\n    });","start":6,"end":292,"route":null,"symbol":"LoginWidgetService","metadata":{"calls_functions":["angular.module","_.isEmpty","Notification.error","$filter","AuthService.login","console.log","$state.go","Notification.success","DpAddressService.getDefaultAddress","AuthService.updateDefaultAddress","selectCurrency","$rootScope.$emit","$q.defer","AddressService.getForUser","def.resolve","AddressService.getAddressesFromSession","AddressService.getAll","UserService.getCurrency","_.findIndex","$cookieStore.put","AuthService.getSessionCarts","_.each","credentials.carts.push","getAddress","DpCartsDataService.updateCart","updateProductAddress","def.reject","DeliveryWidgetService.reducePostData","AddressService.updateProductAddresses","DpCartsDataService.update","getCartData"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":28,"eventfulness":{"watchers":0,"emits":3,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LogoutService.js:2-33:factory:LogoutService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/LogoutService.js","module":null,"name":"LogoutService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","localStorageService","Notification","TokenService","AuthDataService","AuthService","$filter","$q"],"antiPatterns":[],"text":"  .factory('LogoutService', function($rootScope, localStorageService, Notification, TokenService, AuthDataService, AuthService, $filter, $q){\n\n      var LogoutService = {};\n\n      LogoutService.destroyUserData = function () {\n          delete $rootScope.username;\n          AuthDataService.deleteAccessToken();\n          localStorageService.remove('user');\n          return true;\n      };\n\n      LogoutService.logout = function () {\n          return this.destroyUserData();\n      };\n\n      LogoutService.init = function () {\n\n          var def = $q.defer();\n\n          AuthDataService.logout();\n          Notification.info($filter('translate')('you_are_loggedout'));\n          TokenService.getNonUserToken().then(function (data) {\n              AuthService.setAccessToken(data.token);\n              def.resolve(true);\n          });\n\n          return def.promise;\n      };\n\n      return LogoutService;\n\n  });","start":2,"end":33,"route":null,"symbol":"LogoutService","metadata":{"calls_functions":["angular.module","AuthDataService.deleteAccessToken","localStorageService.remove","$q.defer","AuthDataService.logout","Notification.info","$filter","TokenService.getNonUserToken","AuthService.setAccessToken","def.resolve"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/MainWidgetService.js:5-238:factory:MainWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/MainWidgetService.js","module":null,"name":"MainWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","DpCategoryService","SettingService","PaymentService","$filter","$config","$http"],"antiPatterns":[],"text":"    .factory( 'MainWidgetService', function (  $rootScope, $q, DpCategoryService, SettingService, PaymentService,\n                                               $filter, $config, $http ) {\n\n        function getMegaMenu() {\n            var def = $q.defer();\n\n            DpCategoryService.getCategoryTree().then( function(categories) {\n\n                if( _.size(categories) > 0 ) {\n                    def.resolve(categories);\n                } else {\n                    def.reject(false);\n                }\n\n            });\n\n            return def.promise;\n        }\n\n        function getCreditLimit() {\n            var def = $q.defer();\n\n            PaymentService.getCreditLimit().then( function(data) {\n\n                def.resolve(data);\n\n            });\n\n            return def.promise;\n        }\n\n        function getSkinName() {\n            var def = $q.defer();\n\n            var Setting = new SettingService('general');\n\n            Setting.getSkinName().then( function(response) {\n\n                def.resolve(response.skinName);\n\n            });\n\n            return def.promise;\n        }\n\n        function getForms() {\n\n            var def = $q.defer();\n            var Setting = new SettingService('forms');\n\n            Setting.getPublicSettings().then( function(response) {\n\n                def.resolve(response);\n\n            });\n\n            return def.promise;\n        }\n\n        function formatSizeUnits (bytes) {\n\n            if (bytes >= 1073741824) {\n                bytes = (bytes / 1073741824).toFixed(2) + ' GB';\n            }\n            else if (bytes >= 1048576) {\n                bytes = (bytes / 1048576).toFixed(2) + ' MB';\n            }\n            else if (bytes >= 1024) {\n                bytes = (bytes / 1024).toFixed(2) + ' KB';\n            }\n            else if (bytes > 1) {\n                bytes = bytes + ' bytes';\n            }\n            else if (bytes === 1) {\n                bytes = bytes + ' byte';\n            }\n            else {\n                bytes = '0 byte';\n            }\n            return bytes;\n        }\n\n        function handleGoTop () {\n            var offset = 300;\n            var duration = 500;\n\n            if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\n                $(window).bind(\"touchend touchcancel touchleave\", function(e){\n                    if ($(this).scrollTop() > offset) {\n                        $('.scroll-to-top').fadeIn(duration);\n                    } else {\n                        $('.scroll-to-top').fadeOut(duration);\n                    }\n                });\n            } else {\n                $(window).scroll(function() {\n                    if ($(this).scrollTop() > offset) {\n                        $('.scroll-to-top').fadeIn(duration);\n                    } else {\n                        $('.scroll-to-top').fadeOut(duration);\n                    }\n                });\n            }\n        }\n\n        function getCreditLimitInfo() {\n\n            if( $rootScope.logged ){\n                getCreditLimit().then(function(data) {\n                    if( data.response ) {\n\n\n                        var languages = {};\n                        languages.days = $filter('translate')('days');\n                        languages.deferredPayment = $filter('translate')('deferral_of_payments');\n                        languages.creditLimit = $filter('translate')('credit_limit');\n                        if(data.limitExceeded) {\n                            languages.creditLimit = $filter('translate')('credit_limit_exceeded');\n                        }\n\n                        data.tooltipInfo = languages.deferredPayment + '<br>'\n                            + data.deferredDays + ' ' + languages.days + '<br>'\n                            + languages.creditLimit + '<br>' + data.creditLimit\n                            + '/' + data.unpaidValue + ' ' + data.baseCurrency;\n                        $rootScope.creditLimit = data;\n                    } else {\n                        $rootScope.creditLimit = false;\n                    }\n                });\n            } else {\n                $rootScope.creditLimit = false;\n            }\n        }\n\n        function getCookie(cname) {\n            var name = cname + \"=\";\n            var decodedCookie = decodeURIComponent(document.cookie);\n            var ca = decodedCookie.split(';');\n            for (var i = 0; i < ca.length; i++) {\n                var c = ca[i];\n                while (c.charAt(0) == ' ') {\n                    c = c.substring(1);\n                }\n                if (c.indexOf(name) == 0) {\n                    return c.substring(name.length, c.length);\n                }\n            }\n            return \"\";\n        }\n\n        function setCookie(name, value, days) {\n            var domainName = $rootScope.domainHost;\n            if ($rootScope.domainHost == 'localhost') {\n                domainName = 'localhost';\n            }\n\n            var expiration_date = new Date();\n            expiration_date.setTime(expiration_date.getTime()+(days*24*60*60*1000));\n\n            console.log( name + \"=\" + value + \"; domain=\" + domainName + \"; path=/; expires=\" + expiration_date.toUTCString() );\n\n            document.cookie = name + \"=\" + value + \"; domain=\" + domainName + \"; path=/; expires=\" + expiration_date.toUTCString();\n        }\n\n        function includeTemplateVariables(scope, templateName, groupID, typeID, categoryID, all) {\n            var def = $q.defer();\n\n            var resource = 'templateVariables/getVariables';\n            var params=['templateName='+templateName];\n            if(groupID!=undefined){\n                params.push('groupID='+groupID);\n            }\n           if(typeID!=undefined){\n               params.push('typeID='+typeID);\n            }\n            if(categoryID!=undefined){\n                params.push('categoryID='+categoryID);\n            }\n            if(all!=undefined){\n                params.push('all='+all);\n            }\n            if(params.length>0){\n                resource+='?'+params.join('&');\n            }\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            def.promise.then(function (resp) {\n                resp.response.map(function (variable) {\n                    scope[variable.name] = variable.value;\n                })\n            }, function (data) {\n                console.log('load variables fail', data)\n            });\n            return def.promise;\n        }\n\n        function getTemplateVariable(scope, collection, itemType,id,variableName,defaultValue){\n            var selectedCollection=scope[collection];\n            if(selectedCollection){\n                for(var i = 0; i<selectedCollection.length;i++){\n                    if(selectedCollection[i].name===variableName && selectedCollection[i][itemType+'ID'] ==id){\n                        return selectedCollection[i].value;\n                    }\n\n                }\n            }\n                return defaultValue;\n        }\n\n\n        return {\n            getMegaMenu: getMegaMenu,\n            getSkinName: getSkinName,\n            getForms: getForms,\n            formatSizeUnits: formatSizeUnits,\n            handleGoTop: handleGoTop,\n            getCreditLimitInfo: getCreditLimitInfo,\n            getCookie: getCookie,\n            setCookie: setCookie,\n            includeTemplateVariables: includeTemplateVariables,\n            getTemplateVariable: getTemplateVariable\n        };\n    });","start":5,"end":238,"route":null,"symbol":"MainWidgetService","metadata":{"calls_functions":["angular.module","$q.defer","DpCategoryService.getCategoryTree","_.size","def.resolve","def.reject","PaymentService.getCreditLimit","Setting.getSkinName","Setting.getPublicSettings","navigator.userAgent.match","$","getCreditLimit","$filter","decodeURIComponent","decodedCookie.split","c.charAt","c.substring","c.indexOf","expiration_date.setTime","expiration_date.getTime","console.log","expiration_date.toUTCString","params.push","params.join","$http","def.promise.then","resp.response.map"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":27,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/MenuTypesService.js:2-88:factory:MenuTypesService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/MenuTypesService.js","module":null,"name":"MenuTypesService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope"],"antiPatterns":[],"text":"    .factory( 'MenuTypesService', function (  $rootScope ) {\n\n        function checkChilds(childs) {\n            var filtered = [];\n            _.each(childs, function (child) {\n                if (!_.isUndefined(child.groups) && !_.isNull(child.groups) && !_.isEmpty(child.groups)) {\n                    filtered = _.union(filtered, checkGroups(child.groups));\n                }\n                if (!_.isUndefined(child.types) && !_.isNull(child.types) && !_.isEmpty(child.types)) {\n                    filtered = _.union(filtered, child.types);\n                }\n            });\n            return filtered;\n        }\n\n        function checkGroups(groups) {\n            var filtered = [];\n            _.each(groups, function (group) {\n                if (!_.isNull(group) && !_.isUndefined(group.types) && !_.isEmpty(group.types)) {\n                    filtered = _.union(filtered, group.types);\n                }\n            });\n            return filtered;\n        }\n\n        function removeDuplicates(originalArray, prop) {\n            var newArray = [];\n            var lookupObject  = {};\n\n            for(var i in originalArray) {\n                lookupObject[originalArray[i][prop]] = originalArray[i];\n            }\n\n            for(i in lookupObject) {\n                newArray.push(lookupObject[i]);\n            }\n            return newArray;\n        }\n\n        function checkMainCategory (items) {\n            var types = [];\n            if (_.isUndefined(items) || _.isEmpty(items)) {\n                return [];\n            }\n            _.each(items, function (item) {\n                var filtered = [];\n                if (!_.isUndefined(item.childs) && !_.isNull(item.childs) && !_.isEmpty(item.childs)) {\n                    filtered = _.union(filtered, checkChilds(item.childs));\n                }\n                if (!_.isUndefined(item.groups) && !_.isNull(item.groups) && !_.isEmpty(item.groups)) {\n                    filtered = _.union(filtered, checkGroups(item.groups));\n                }\n                if (!_.isUndefined(item.types) && !_.isNull(item.types) && !_.isEmpty(item.types)) {\n                    filtered = _.union(filtered, item.types);\n                }\n                filtered = _.sortBy(_.uniq(filtered, function (item) {\n                    return item.ID;\n                }), function( item ) {\n                    if(item.names != undefined && $rootScope.currentLang != undefined) {\n                        return item.names[$rootScope.currentLang.code];\n                    }\n                    return item.name;\n                });\n                types.push.apply(types, filtered);\n            });\n            types = removeDuplicates(types, \"ID\");\n            return types.sort(function(a, b){\n                if(a.name < b.name) return -1;\n                if(a.name > b.name) return 1;\n                return 0;\n            });\n        }\n\n        function getAllTypes (categories) {\n            var allTypes = [];\n            if( categories.length > 0 ) {\n\n                allTypes.push.apply(allTypes, checkMainCategory(categories));\n\n            }\n            return allTypes;\n        }\n\n        return {\n            getAllTypes: getAllTypes\n        };\n    });","start":2,"end":88,"route":null,"symbol":"MenuTypesService","metadata":{"calls_functions":["angular.module","_.each","_.isUndefined","_.isNull","_.isEmpty","_.union","checkGroups","newArray.push","checkChilds","_.sortBy","_.uniq","types.push.apply","removeDuplicates","types.sort","allTypes.push.apply","checkMainCategory"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":28,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/NewsService.js:5-32:service:NewsService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/NewsService.js","module":null,"name":"NewsService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$http","$config"],"antiPatterns":[],"text":"    .service('NewsService', function ($q, Restangular, $http, $config) {\n\n        var NewsService = {};\n\n        NewsService.getResource = function () {\n            return 'dp_news'\n        };\n\n        NewsService.getRss = function (data) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'rss'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return NewsService;\n\n    });","start":5,"end":32,"route":null,"symbol":"NewsService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/rss","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/OrderMessagesService.js:5-44:service:OrderMessageService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/OrderMessagesService.js","module":null,"name":"OrderMessageService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .service('OrderMessageService', function ($q, $http, $config) {\n\n        var OrderMessageService = {};\n\n        var resource = 'dp_orders_messages';\n\n\n        OrderMessageService.getMessages = function(orderID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'myZone', orderID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        OrderMessageService.countMessages = function() {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'countAll'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return OrderMessageService;\n\n    });","start":5,"end":44,"route":null,"symbol":"OrderMessageService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/myZone/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/countAll","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["order"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PaymentService.js:2-47:service:PaymentService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PaymentService.js","module":null,"name":"PaymentService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$http","$config"],"antiPatterns":[],"text":"    .service('PaymentService', function ($q, Restangular, $http, $config) {\n\n        var PaymentService = {};\n\n        PaymentService.getResource = function () {\n            return ['payments', 'paymentsPublic']\n        };\n\n        PaymentService.getAll = function (orderID) {\n            var def = $q.defer();\n            \n            var resource = this.getResource();\n            resource.push(orderID);\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource.join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        PaymentService.getCreditLimit = function () {\n            var def = $q.defer();\n\n            var resource = ['payments', 'creditLimit'];\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource.join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return PaymentService;\n\n    });","start":2,"end":47,"route":null,"symbol":"PaymentService","metadata":{"calls_functions":["angular.module","$q.defer","resource.push","$http","resource.join","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}{...}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["payment"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PhotoFolderService.js:7-774:factory:PhotoFolderService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PhotoFolderService.js","module":null,"name":"PhotoFolderService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$http","$config","AuthService"],"antiPatterns":[],"text":"    .factory('PhotoFolderService', function($rootScope, $q, $http, $config, AuthService){\n\n        var PhotoFolderService = {};\n\n        var url =  $config.API_URL_EDITOR;\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        var header = {};\n        header[accessTokenName] = AuthService.readCookie(accessTokenName);\n\n        PhotoFolderService.movePhoto = function( data, fromFolderID, photo ){\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/photo/move/' + photo._id,\n                type: 'POST',\n                headers: header,\n                data: {\n                        'targetFolder': data.selectedFolder._id,\n                        'from' : fromFolderID\n                },\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.copyPhoto = function( data, photo ){\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/photo-copy/' + photo._id,\n                type: 'POST',\n                headers: header,\n                data: {\n                    'targetFolder': data.selectedFolder._id\n                },\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.createPhotobook = function( folder ){\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/make-book/' + folder._id,\n                type: 'POST',\n                headers: header,\n                data: {\n                    typeID: 44,\n                    pages: 16,\n                    formatID: 148,\n                    folderID: folder._id,\n                    attributes: {\n                            \"i1\":34,\n                            \"i2\":19,\n                            \"i3\":40,\n                            \"i4\":74,\n                            \"i9\":119,\n                            \"i26\":242\n                    }\n                    /*?typeID=44&pages=16&formatID=141&1=34&2=19&3=40&4=74&9=119&26=242*/\n                },\n                crossDomain: true,\n                withCredentials : true\n\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.emailShare = function (email, folder) {\n\n            var def = $q.defer();\n\n            var domain = location.protocol+'//'+$rootScope.domainHost;\n            if( location.port.length > 0 ) {\n                domain += ':'+location.port;\n            }\n\n\n            $.ajax({\n                url: url + 'folder/email-share/' + folder._id,\n                type: 'POST',\n                headers: header,\n                data: {\n                    'email': email,\n                    'host': domain,\n                    'lang': $rootScope.currentLang.code\n                },\n                crossDomain: true,\n                withCredentials: true\n\n            }).done(function (data) {\n                def.resolve(data);\n            }).fail(function (data) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.emailSharePhoto = function (email, photo) {\n\n            var def = $q.defer();\n\n            var domain = location.protocol+'//'+$rootScope.domainHost;\n            if( location.port.length > 0 ) {\n                domain += ':'+location.port;\n            }\n\n            $.ajax({\n                url: url + 'folder/image/email-share/' + photo._id,\n                type: 'POST',\n                headers: header,\n                data: {\n                    'email': email,\n                    'host': domain,\n                    'lang': $rootScope.currentLang.code\n                },\n                crossDomain: true,\n                withCredentials: true\n\n            }).done(function (data, textStatus, xhr) {\n                def.resolve(xhr.status);\n            }).fail(function (data) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.facebookShare = function (folder) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/facebook-share/' + folder._id,\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                withCredentials: true\n\n            }).done(function (data) {\n                def.resolve(data);\n            }).fail(function (data) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.facebookSharePhoto = function (photo) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/image/facebook-share/' + photo._id,\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                withCredentials: true\n\n            }).done(function (data, textStatus, xhr) {\n                def.resolve(xhr.status);\n            }).fail(function (data) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.saveFolderPosition = function( position, folder ){\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/location/' + folder._id,\n                type: 'POST',\n                headers: header,\n                data: {\n                        'location': position\n                },\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.savePosition = function( position, photo ){\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/photo-location/' + photo._id,\n                type: 'POST',\n                headers: header,\n                data: {\n                        'location': position\n                },\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n\n        };\n\n        PhotoFolderService.getAll = function (sort, pagingSettings) {\n            var def = $q.defer();\n\n            var sortBy =_.first(_.keys(sort));\n            var order = _.first(_.values(sort));\n\n            console.log(sortBy, order);\n\n            $.ajax({\n                url: url + 'folder?sortBy=' + sortBy + '&order=' + order + '&page=' +\n                pagingSettings.currentPage + '&display='+ pagingSettings.pageSize,\n                type: 'GET',\n                headers: header,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.add = function (name, description) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/',\n                type: 'PUT',\n                headers: header,\n                crossDomain: true,\n                data: {\n                    parent: null,\n                    folderName: name,\n                    description: description,\n                    date: Date.now()\n                }\n            }).done(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.edit = function (folder) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/',\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                data: {\n                    folderId: folder._id,\n                    folderName: folder.folderName,\n                    description: folder.description\n                }\n            }).done(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.delete = function (folder) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/',\n                type: 'DELETE',\n                headers: header,\n                crossDomain: true,\n                data: {folderId: folder._id}\n            }).done(function( data ) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getPhotos = function(folderId, sort, pagingSettings) {\n\n            var sortBy = _.first(_.keys(sort));\n            var order = _.first(_.values(sort));\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/' + folderId + '?sortBy='+ sortBy +\n                '&order=' + order + '&page=' + pagingSettings.currentPage + '&display=' + pagingSettings.pageSize,\n                type: 'GET',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.deletePhoto = function(folderId, photoId) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/'+ folderId +'/projectImage/' + photoId,\n                type: 'DELETE',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getSharedByEmail = function(folderId, password) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/shared-by-mail/' + folderId,\n                type: 'POST',\n                data: {\n                    password: password\n                },\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getSharedByFacebook = function(folderId) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/shared-by-facebook/' + folderId,\n                type: 'GET',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getPhotoSharedByFacebook = function(photoId) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/image/shared-by-facebook/' + photoId,\n                type: 'GET',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getPhotoSharedByEmail = function(photoId, password) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/image/shared-by-mail/' + photoId,\n                type: 'POST',\n                data: {\n                    password: password\n                },\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getMasks = function() {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['dp_views', 'masks'].join('/')\n            }).success(function(data){\n                def.resolve(data);\n            }).error(function(data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.savePhoto = function( photoId, fileData, thumbSize, minSize, mainSize ) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'userUploadEdited/projectImage',\n                type: 'POST',\n                data: {\n                    image64: fileData,\n                    projectImage: photoId,\n                    thumbSize: thumbSize,\n                    minSize: minSize,\n                    mainSize: mainSize\n                },\n                headers: header,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.addTag = function( imageID, tag ) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/image-tag/' + imageID + '/' + tag,\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.removeTag = function( imageID, tag ) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/delete-image-tag/' + imageID + '/' + tag,\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.findPhoto = function( name ) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/findImage/' + name,\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.voteFolder = function(folderId, vote) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/' + folderId +'/vote/' + vote,\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.votePhoto = function(photoId, vote) {\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'folder/image-vote/' + photoId +'/' + vote,\n                type: 'POST',\n                headers: header,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getImageFolder = function(imageID) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'imagefolderParent/' + imageID,\n                type: 'GET',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getImageByAuthor = function(name) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'get-image-by-autor/' + name,\n                type: 'GET',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getImageByPlace = function(name) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'get-image-by-place/' + name,\n                type: 'GET',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getImageByPeoples = function(name) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'get-image-by-peoples/' + name,\n                type: 'GET',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getImageByRating = function(min, max) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'get-image-by-rating',\n                type: 'POST',\n                data: {\n                    min: min,\n                    max: max\n                },\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.setImageAuthor = function(author, imageID) {\n            var def = $q.defer();\n\n            var data = {autor: author};\n\n            $.ajax({\n                url: url + 'set-image-autor/' + imageID,\n                type: 'POST',\n                headers: header,\n                data: data,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.setImagePlace = function(place, imageID) {\n            var def = $q.defer();\n\n            var data = {place: place};\n\n            $.ajax({\n                url: url + 'set-image-place/' + imageID,\n                type: 'POST',\n                headers: header,\n                data: data,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.setImagePeoples = function(peoples, imageID) {\n            var def = $q.defer();\n\n            var data = {peoples: peoples};\n\n            $.ajax({\n                url: url + 'add-peoples-to-image/' + imageID,\n                type: 'POST',\n                headers: header,\n                data: data,\n                crossDomain: true,\n                withCredentials : true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getImageByExtension = function(id, extension) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'get-image-in-extension/' + id + '/' + extension,\n                type: 'GET',\n                headers: header,\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getProjectsForTypes = function(formats) {\n\n            var def = $q.defer();\n\n            $.ajax({\n                url: url + 'getProjectsForTypes',\n                type: 'GET',\n                headers: header,\n                /*data: {\n                    formats: formats\n                }*/\n                crossDomain: true\n            }).done(function( data ) {\n                def.resolve(data);\n            }).fail(function( data ) {\n                def.reject(data.status);\n            });\n\n            return def.promise;\n        };\n\n        PhotoFolderService.getUrlImageByExtension = function(id, extension) {\n            return url + 'get-image-in-extension/' + id + '/' + extension;\n        };\n\n        return PhotoFolderService;\n\n    });","start":7,"end":774,"route":null,"symbol":"PhotoFolderService","metadata":{"calls_functions":["angular.module","AuthService.readCookie","$q.defer","$.ajax","def.resolve","def.reject","_.first","_.keys","_.values","console.log","Date.now","$http"],"api_endpoints":[{"url":"${{obj}.API_URL}dp_views/masks","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/ProductFileService.js:2-178:service:ProductFileService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/ProductFileService.js","module":null,"name":"ProductFileService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$http","$config"],"antiPatterns":[],"text":"    .service('ProductFileService', function ($q, Restangular, $http, $config) {\n\n        var ProductFileService = {};\n\n        ProductFileService.getUrl = function (productID) {\n            return $config.API_URL + ['dp_products', productID, 'productFiles'].join('/');\n        };\n\n        ProductFileService.getUploadUrl = function (productID, attrID) {\n            return $config.API_URL + ['dp_products', productID, 'productFiles', attrID].join('/');\n        };\n\n        ProductFileService.fixFileDimensions= (productID, fileID) => {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: ProductFileService.getUploadUrl(productID, fileID)\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.saveFileProps= (productID, fileID, data) => {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['dp_products', productID, 'productFiles', 'saveFileProps', fileID].join('/') ,\n                data\n\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.saveProductProps= (productID, sendToFix) => {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['dp_products', productID, 'productFiles', 'saveProductProps'].join('/') ,\n                data:{sendToFix}\n\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.acceptFile= (productID, fileID) => {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: ProductFileService.getUploadUrl(productID, fileID)\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.getAll = function (productID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: this.getUrl(productID)\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.getByList = function(orders){\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['productFiles', 'productListFiles', orders.join(',')].join('/')\n            }).success(function(data) {\n                def.resolve(data);\n            }).error(function(data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.removeFile = function (productID, fileID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: this.getUrl(productID) + '/' + fileID\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.makeMiniature = function(fileID){\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['productFiles', 'makeMiniature', fileID].join('/')\n            }).success(function(data) {\n                def.resolve(data);\n            }).error(function(data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.acceptReport = function (productID, fileID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + ['dp_products', productID, 'productFiles', fileID, 'productReportFiles'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.rejectReport = function (productID, fileID, comment) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + ['dp_products', productID, 'productFiles', fileID, 'productReportFiles'].join('/'),\n                data: {comment:comment},\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ProductFileService.getReportsUploadUrl = function (productID, fileID) {\n            return $config.API_URL + ['dp_products', productID, 'productFiles', fileID, 'productReportFiles'].join('/');\n        };\n\n        return ProductFileService;\n\n    });","start":2,"end":178,"route":null,"symbol":"ProductFileService","metadata":{"calls_functions":["angular.module","$q.defer","$http","ProductFileService.getUploadUrl","def.resolve","def.reject","orders.join"],"api_endpoints":[{"url":"${{obj}.API_URL}dp_products/${{node.name}}/productFiles/saveFileProps/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_products/${{node.name}}/productFiles/saveProductProps","method":"POST","dataKeys":["sendToFix"],"paramKeys":[]},{"url":"${{obj}.API_URL}productFiles/productListFiles/{...}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}productFiles/makeMiniature/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_products/${{node.name}}/productFiles/${{node.name}}/productReportFiles","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}dp_products/${{node.name}}/productFiles/${{node.name}}/productReportFiles","method":"DELETE","dataKeys":["comment"],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsAttributeService.js:4-139:factory:PsAttributeService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsAttributeService.js","module":null,"name":"PsAttributeService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","Restangular","$cacheFactory"],"antiPatterns":[],"text":"    .factory('PsAttributeService', function ($q, $http, $config, Restangular, $cacheFactory) {\n\n        var cache = $cacheFactory('ps_product_options');\n\n        var AttributeService = function (groupID, typeID) {\n            this.groupID = groupID;\n            this.typeID = typeID;\n            this.resource = 'ps_groups/' + groupID + '/ps_types/' + typeID + '/ps_product_options';\n            this.resourceFullOptions = 'ps_groups/' + groupID + '/ps_types/selectedOptions/' + typeID;\n            this.resourceFullOptionsPublic = 'ps_groups/' + groupID + '/ps_types/selectedOptionsPublic/' + typeID;\n        };\n\n        // pobiera wszystkie wybrane\n        AttributeService.prototype.getAll = function (force) {\n            var def = $q.defer();\n            var _this = this;\n\n            if (cache.get(this.resource) && !force) {\n                def.resolve(cache.get(this.resource));\n            } else {\n                Restangular.all(_this.resource).getList().then(function (data) {\n                    cache.put(_this.resource, data.plain());\n                    def.resolve(data.plain());\n                }, function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        AttributeService.prototype.getFullOptions = function (force) {\n            var def = $q.defer();\n            var _this = this;\n\n            if (cache.get(this.resourceFullOptions) && !force) {\n                def.resolve(cache.get(this.resourceFullOptions));\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + _this.resourceFullOptions\n                }).success(function (data) {\n                    cache.put(_this.resourceFullOptions, data);\n                    def.resolve(data);\n                }).error(function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        AttributeService.prototype.getFullOptionsPublic = function (force) {\n            var def = $q.defer();\n            var _this = this;\n\n            if (cache.get(this.resourceFullOptionsPublic) && !force) {\n                def.resolve(cache.get(this.resourceFullOptionsPublic));\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + _this.resourceFullOptionsPublic\n                }).success(function (data) {\n                    cache.put(_this.resourceFullOptionsPublic, data);\n                    def.resolve(data);\n                }).error(function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        AttributeService.prototype.saveOption = function (item) {\n            var def = $q.defer();\n            var _this = this;\n            Restangular.all(_this.resource).patch(item).then(function (data) {\n                if (data.response) {\n                    cache.remove(_this.resource);\n                    cache.remove(_this.resourceFullOptions);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(datA);\n            });\n\n            return def.promise;\n        };\n\n        AttributeService.prototype.setInvisible = function (attrID, optID, value) {\n            var def = $q.defer();\n            var _this = this;\n            Restangular.all(_this.resource).patch({\n                attrID: attrID,\n                optID: optID,\n                action: 'setInvisible',\n                invisible: value\n            }).then(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        AttributeService.prototype.setFormats = function (attrID, optID, formats) {\n            var def = $q.defer();\n            var _this = this;\n            Restangular.all(_this.resource).patch({\n                attrID: attrID,\n                optID: optID,\n                action: 'formats',\n                formats: formats\n            }).then(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return AttributeService;\n\n    });","start":4,"end":139,"route":null,"symbol":"PsAttributeService","metadata":{"calls_functions":["angular.module","$cacheFactory","$q.defer","cache.get","def.resolve","Restangular.all","cache.put","data.plain","def.reject","$http","cache.remove"],"api_endpoints":[{"url":"${{obj}.API_URL}${{obj}.resourceFullOptions}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{obj}.resourceFullOptionsPublic}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":10,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsCalculateServie.js:4-48:factory:PsCalculateService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsCalculateServie.js","module":null,"name":"PsCalculateService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('PsCalculateService', function ($q, $http, $config, $cacheFactory) {\n\n        var cache = $cacheFactory('ps_calculate');\n\n        var CalculateService = function (groupID, typeID) {\n            this.groupID = groupID;\n            this.typeID = typeID;\n            this.resource = `ps_groups/${groupID}/ps_types/${typeID}/ps_calculate`;\n        };\n\n        CalculateService.prototype.request = function (method, endpoint, data) {\n            var def = $q.defer();\n            var url = `${$config.API_URL}${this.resource}${endpoint ? '/' + endpoint : ''}`;\n\n            $http({\n                method: method,\n                url: url,\n                data: data\n            }).then(function (response) {\n                if (response.data.response) {\n                    def.resolve(response.data);\n                } else {\n                    def.reject(response.data);\n                }\n            }, function (error) {\n                def.reject(error.data);\n            });\n\n            return def.promise;\n        };\n\n        CalculateService.prototype.calculate = function (item) {\n            return this.request('POST', '', item);\n        };\n\n        CalculateService.prototype.getVolumes = function (item) {\n            return this.request('PATCH', '', item);\n        };\n\n        CalculateService.prototype.saveCalculation = function (preparedProduct) {\n            return this.request('POST', 'saveCalculation', preparedProduct);\n        };\n\n        return CalculateService;\n    });","start":4,"end":48,"route":null,"symbol":"PsCalculateService","metadata":{"calls_functions":["angular.module","$cacheFactory","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsComplexService.js:4-212:factory:PsComplexService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsComplexService.js","module":null,"name":"PsComplexService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('PsComplexService', function ($q, $http, $config, $cacheFactory) {\n\n        var cache = $cacheFactory('ps_complex');\n\n        var ComplexService = function (groupID, typeID) {\n            this.groupID = groupID;\n            this.typeID = typeID;\n        };\n\n        ComplexService.prototype.getResource = function () {\n            return 'ps_groups/' + this.groupID + '/ps_types/' + this.typeID + '/ps_complex';\n        };\n\n        ComplexService.prototype.getAll = function () {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ComplexService.prototype.getAllPublic = function () {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource + '/complexPublic'\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ComplexService.prototype.add = function (baseID, typeID, complexGroupID) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: {\n                    baseID: baseID,\n                    typeID: typeID,\n                    complexGroupID: complexGroupID\n                }\n            }).success(function (data) {\n                if (data.ID) {\n                    cache.remove(resource);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ComplexService.prototype.edit = function (item) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + resource,\n                data: item\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove(resource);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        ComplexService.prototype.remove = function (id) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [resource, id].join(\"/\")\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove(resource);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        ComplexService.prototype.addGroup = function (complexID, name) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'group', complexID].join('/'),\n                data: {name: name}\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove(resource);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ComplexService.prototype.editGroup = function (groupID, name) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + [resource, 'group'].join('/'),\n                data: {ID: groupID, name: name}\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove(resource);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ComplexService.prototype.relatedFormat = function (baseFormatID) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'relatedFormat', baseFormatID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ComplexService.prototype.saveRelatedFormat = function (baseFormatID, formats) {\n            var def = $q.defer();\n\n            var resource = this.getResource();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'relatedFormat', baseFormatID].join('/'),\n                data: {formats: formats}\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove(resource);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return ComplexService;\n    });","start":4,"end":212,"route":null,"symbol":"PsComplexService","metadata":{"calls_functions":["angular.module","$cacheFactory","$q.defer","$http","def.resolve","def.reject","cache.remove"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/complexPublic","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":["baseID","typeID","complexGroupID"],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/group/${{node.name}}","method":"POST","dataKeys":["name"],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/group","method":"PUT","dataKeys":["ID","name"],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/relatedFormat/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/relatedFormat/${{node.name}}","method":"POST","dataKeys":["formats"],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":7,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsFormatService.js:4-52:factory:PsFormatService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsFormatService.js","module":null,"name":"PsFormatService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$cacheFactory"],"antiPatterns":[],"text":"    .factory('PsFormatService', function ($q, Restangular, $cacheFactory) {\n\n        var cache = $cacheFactory('ps_formats');\n\n        var FormatService = function (groupID, typeID) {\n            this.groupID = groupID;\n            this.typeID = typeID;\n        };\n\n        FormatService.prototype.getResource = function () {\n            return 'ps_groups/' + this.groupID + '/ps_types/' + this.typeID + '/ps_formats';\n        };\n\n        FormatService.prototype.getPublic = function (complexID, force) {\n            var def = $q.defer();\n            var _this = this;\n\n            var resource = this.getResource() + '/formatsPublic/' + complexID;\n\n            if (cache.get(resource) && !force) {\n                def.resolve(cache.get(resource));\n            } else {\n                Restangular.all(resource).getList().then(function (data) {\n                    cache.put(resource, data.plain());\n                    def.resolve(data.plain());\n                }, function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        FormatService.prototype.getCustomNames = function () {\n            var def = $q.defer();\n\n            var resource = 'ps_formats';\n\n            Restangular.all(resource).one('customName', this.typeID).get().then(function (data) {\n                def.resolve(data.plain());\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return FormatService;\n    });","start":4,"end":52,"route":null,"symbol":"PsFormatService","metadata":{"calls_functions":["angular.module","$cacheFactory","$q.defer","cache.get","def.resolve","Restangular.all","cache.put","data.plain","def.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsGroupDescriptionService.js:4-24:service:PsGroupDescriptionService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsGroupDescriptionService.js","module":null,"name":"PsGroupDescriptionService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","Restangular","$cacheFactory"],"antiPatterns":[],"text":"    .service('PsGroupDescriptionService', function ($q, $http, $config, Restangular, $cacheFactory) {\n\n        var PsGroupDescriptionService = {};\n\n        PsGroupDescriptionService.getAll = function (groupUrl) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'ps_groupDescriptions/groupDescriptionsPublic?groupUrl=' + groupUrl\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return PsGroupDescriptionService;\n\n    });","start":4,"end":24,"route":null,"symbol":"PsGroupDescriptionService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}ps_groupDescriptions/groupDescriptionsPublic?groupUrl=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsGroupService.js:4-176:service:PsGroupService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsGroupService.js","module":null,"name":"PsGroupService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","Restangular","CacheService"],"antiPatterns":[],"text":"    .service('PsGroupService', function ($q, $http, $config, Restangular, CacheService) {\n\n        // var cache = $cacheFactory('ps_groups');\n\n        var GroupService = {};\n\n        var cacheResolve = new CacheService('ps_groups');\n\n        GroupService.getAll = function (params, options) {\n            var def = $q.defer();\n            options = options || {};\n\n            var restangularPromise = Restangular.all('ps_groups', params);\n\n            cacheResolve.getList(restangularPromise, options).then(function (data) {\n                def.resolve(data);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.get = function (id) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'ps_groups/' + id\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.getOneForView = function (url) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'ps_groups/getOneForView/' + url\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.add = function (item) {\n            var def = $q.defer();\n\n            Restangular.all('ps_groups').doPOST(item).then(function (data) {\n                if (data.ID) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.edit = function (item) {\n            var def = $q.defer();\n\n            Restangular.all('ps_groups').customPUT(item).then(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.remove = function (item) {\n            var def = $q.defer();\n\n            Restangular.all('ps_groups').one(item.ID + '').remove().then(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.getRealizationTimes = function (groupID, force) {\n            var def = $q.defer();\n\n            var resource = 'ps_groups/' + groupID + '/ps_rt_details';\n\n            Restangular.all(resource).getList().then(function (data) {\n                if (data) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.setRealizationTime = function (groupID, item) {\n            var def = $q.defer();\n\n            var resource = 'ps_groups/' + groupID + '/ps_rt_details';\n\n            Restangular.all(resource).patch(item).then(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.removeRealizationTime = function (groupID, item) {\n            var def = $q.defer();\n\n            if (!item.details) {\n                def.reject();\n            }\n\n            var resource = 'ps_groups/' + groupID + '/ps_rt_details';\n\n            Restangular.all(resource).one(item.details.ID + '').remove().then(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        GroupService.getOneByID = function (ID) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'ps_groups/getOneByID/' + ID\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return GroupService;\n    });","start":4,"end":176,"route":null,"symbol":"PsGroupService","metadata":{"calls_functions":["angular.module","$q.defer","Restangular.all","cacheResolve.getList","def.resolve","def.reject","$http"],"api_endpoints":[{"url":"${{obj}.API_URL}ps_groups/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}ps_groups/getOneForView/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}ps_groups/getOneByID/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":9,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsPageService.js:4-50:factory:PsPageService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsPageService.js","module":null,"name":"PsPageService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$cacheFactory"],"antiPatterns":[],"text":"    .factory('PsPageService', function ($q, Restangular, $cacheFactory) {\n\n        var cache = $cacheFactory('ps_pages');\n\n        var PageService = function (groupID, typeID) {\n            this.groupID = groupID;\n            this.typeID = typeID;\n            this.resource = 'ps_groups/' + groupID + '/ps_types/' + typeID + '/ps_pages';\n            this.resourcePublic = 'ps_groups/' + groupID + '/ps_types/' + typeID + '/ps_pages/pagesPublic';\n        };\n\n        PageService.prototype.getPublic = function (force) {\n            var def = $q.defer();\n            var _this = this;\n\n            if (cache.get(this.resource) && !force) {\n                def.resolve(cache.get(this.resource));\n            } else {\n                Restangular.all(_this.resourcePublic).getList().then(function (data) {\n                    cache.put(_this.resource, data.plain());\n                    def.resolve(data.plain());\n                }, function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        PageService.prototype.getCustomNames = function () {\n            var def = $q.defer();\n\n            var resource = 'ps_pages';\n\n            Restangular.all(resource).one('customName', this.typeID).get().then(function (data) {\n                def.resolve(data.plain());\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n\n        return PageService;\n\n    });","start":4,"end":50,"route":null,"symbol":"PsPageService","metadata":{"calls_functions":["angular.module","$cacheFactory","$q.defer","cache.get","def.resolve","Restangular.all","cache.put","data.plain","def.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsTooltipService.js:4-54:factory:PsTooltipService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsTooltipService.js","module":null,"name":"PsTooltipService","kind":"service","nodeType":"Function","dependenciesDI":["$q","Restangular","$cacheFactory"],"antiPatterns":[],"text":"    .factory('PsTooltipService', function ($q, Restangular, $cacheFactory) {\n\n        var cache = $cacheFactory('ps_tooltips');\n\n        var TooltipService = function (groupID, typeID) {\n            this.groupID = groupID;\n            this.typeID = typeID;\n            this.resource = 'ps_groups/' + groupID + '/ps_types/' + typeID + '/ps_tooltips';\n        };\n\n        TooltipService.prototype.getAll = function (force) {\n            var def = $q.defer();\n            var _this = this;\n\n            if (cache.get(this.resource) && !force) {\n                def.resolve(cache.get(this.resource));\n            } else {\n                Restangular.all(_this.resource).get('').then(function (data) {\n                    cache.put(_this.resource, data.plain());\n                    def.resolve(data.plain());\n                }, function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        TooltipService.prototype.save = function (attrID, tooltips) {\n            var def = $q.defer();\n            var _this = this;\n            Restangular.all(_this.resource).patch({\n                attrID: attrID,\n                tooltip: tooltips\n            }).then(function (data) {\n                if (data.response) {\n                    cache.remove(_this.resource);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(datA);\n            });\n\n            return def.promise;\n        };\n\n        return TooltipService;\n\n    });","start":4,"end":54,"route":null,"symbol":"PsTooltipService","metadata":{"calls_functions":["angular.module","$cacheFactory","$q.defer","cache.get","def.resolve","Restangular.all","cache.put","data.plain","def.reject","cache.remove"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":4,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsTypeDescriptionService.js:4-23:service:PsTypeDescriptionService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsTypeDescriptionService.js","module":null,"name":"PsTypeDescriptionService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .service('PsTypeDescriptionService', function ($q, $http, $config ) {\n\n        var TypeDescriptionService = {};\n\n        TypeDescriptionService.getAll = function (groupID, typeID) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'ps_typeDescriptions/typeDescriptionsPublic?groupID=' + groupID + '&typeID=' + typeID\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return TypeDescriptionService;\n    });","start":4,"end":23,"route":null,"symbol":"PsTypeDescriptionService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}ps_typeDescriptions/typeDescriptionsPublic?groupID=${{node.name}}&typeID=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsTypeService.js:4-243:service:PsTypeService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/PsTypeService.js","module":null,"name":"PsTypeService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","Restangular","$cacheFactory"],"antiPatterns":[],"text":"    .service('PsTypeService', function ($q, $http, $config, Restangular, $cacheFactory) {\n\n        var cache = $cacheFactory('ps_types');\n\n        var TypeService = {};\n\n        TypeService.getAll = function (groupID, force) {\n            var def = $q.defer();\n\n            if (cache.get('collection' + groupID) && !force) {\n                def.resolve(cache.get('collection' + groupID));\n            } else {\n                Restangular.all('ps_groups/' + groupID + '/ps_types').getList().then(function (data) {\n                    cache.put('collection' + groupID, data.plain()); // nie zwracamy plain bo potrzebujemy obiekt do put\n                    def.resolve(data.plain());\n                }, function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        TypeService.forView = function (groupUrl, force) {\n            var def = $q.defer();\n\n            if (cache.get('collection' + groupUrl) && !force) {\n                def.resolve(cache.get('collection' + groupUrl));\n            } else {\n                Restangular.all('ps_groups/' + groupUrl + '/ps_types/forView').getList().then(function (data) {\n                    cache.put('collection' + groupUrl, data.plain());\n                    def.resolve(data.plain());\n                }, function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        TypeService.getOneForView = function (groupUrl, typeUrl) {\n            var def = $q.defer();\n\n            if( groupUrl === undefined ) {\n                groupUrl = '';\n            }\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'ps_groups/' + groupUrl + '/ps_types/oneForView/' + typeUrl\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.add = function (groupID, item) {\n            var def = $q.defer();\n\n            Restangular.all('ps_groups/' + groupID + '/ps_types').doPOST(item).then(function (data) {\n                if (data.ID) {\n                    cache.remove('collection' + groupID);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.edit = function (groupID, item) {\n            var def = $q.defer();\n\n            Restangular.all('ps_groups/' + groupID + '/ps_types').customPUT(item).then(function (data) {\n                if (data.response) {\n                    cache.remove('collection' + groupID);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        TypeService.remove = function (groupID, item) {\n            var def = $q.defer();\n            var data;\n\n            Restangular.all('ps_groups/' + groupID + '/ps_types').one(item.ID + '').remove().then(function (data) {\n                if (data.response) {\n                    cache.remove('collection' + groupID); //usuwamy cache za każdym add, remove\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        TypeService.sort = function (groupID, sort) {\n            var def = $q.defer();\n\n            Restangular.all('ps_groups/' + groupID + '/ps_types').one('sort').patch(sort).then(function (data) {\n                if (data.response) {\n                    cache.remove('collection' + groupID);\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.getRealizationTimes = function (groupID, typeID, force) {\n            var def = $q.defer();\n\n            var resource = 'ps_groups/' + groupID + '/ps_types/' + typeID + '/ps_rt_details';\n\n            Restangular.all(resource).getList().then(function (data) {\n                if (data) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.setRealizationTime = function (groupID, typeID, item) {\n            var def = $q.defer();\n\n            var resource = 'ps_groups/' + groupID + '/ps_types/' + typeID + '/ps_rt_details';\n\n            Restangular.all(resource).patch(item).then(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.removeRealizationTime = function (groupID, typeID, item) {\n            var def = $q.defer();\n\n            if (!item.details) {\n                def.reject();\n            }\n\n            var resource = 'ps_groups/' + groupID + '/ps_types/' + typeID + '/ps_rt_details';\n\n            Restangular.all(resource).one(item.details.ID + '').remove().then(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.getTypesData = function (typesList) {\n            var def = $q.defer();\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + 'ps_types/getTypesData',\n                data: {\n                    types: typesList\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.search = function (text) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'ps_types/search/' + text\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.getOneByID = function (groupID, typeID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'ps_groups/' + groupID + '/ps_types/oneByID/' + typeID\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TypeService.cacheRemove = function (groupID) {\n            cache.remove('collection' + groupID);\n        };\n\n        return TypeService;\n    });","start":4,"end":243,"route":null,"symbol":"PsTypeService","metadata":{"calls_functions":["angular.module","$cacheFactory","$q.defer","cache.get","def.resolve","Restangular.all","cache.put","data.plain","def.reject","$http","cache.remove"],"api_endpoints":[{"url":"${{obj}.API_URL}ps_groups/${{node.name}}/ps_types/oneForView/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}ps_types/getTypesData","method":"PATCH","dataKeys":["types"],"paramKeys":[]},{"url":"${{obj}.API_URL}ps_types/search/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}ps_groups/${{node.name}}/ps_types/oneByID/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":14,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/RealizationTimeService.js:2-103:service:RealizationTimeService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/RealizationTimeService.js","module":null,"name":"RealizationTimeService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","Restangular","$cacheFactory"],"antiPatterns":[],"text":"    .service('RealizationTimeService', function ($q, $http, $config, Restangular, $cacheFactory) {\n\n        var cache = $cacheFactory('ps_realizationTimes');\n\n        var RealizationTimeService = {};\n\n        RealizationTimeService.getAll = function (force) {\n            var def = $q.defer();\n\n            if (cache.get('collection') && !force) {\n                def.resolve(cache.get('collection'));\n            } else {\n                Restangular.all('ps_realizationTimes').getList().then(function (data) {\n                    if (data) {\n                        cache.put('collection', data.plain());\n                        def.resolve(data.plain());\n                    } else {\n                        def.reject(data);\n                    }\n                }, function (data) {\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n        };\n\n        RealizationTimeService.edit = function (item) {\n            var def = $q.defer();\n\n            Restangular.all('ps_realizationTimes').customPUT(item).then(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        RealizationTimeService.add = function (item) {\n            var def = $q.defer();\n\n            Restangular.all('ps_realizationTimes').doPOST(item).then(function (data) {\n                if (data.ID) {\n                    cache.remove('collection');\n                    def.resolve(data.plain());\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        RealizationTimeService.sort = function (sort) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + ['ps_realizationTimes', 'sort'].join('/'),\n                data: sort\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        RealizationTimeService.remove = function (item) {\n            var def = $q.defer();\n\n            Restangular.all('ps_realizationTimes').one(item.ID + '').remove().then(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data.plain());\n                } else {\n                    def.reject(data);\n                }\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return RealizationTimeService;\n\n    });","start":2,"end":103,"route":null,"symbol":"RealizationTimeService","metadata":{"calls_functions":["angular.module","$cacheFactory","$q.defer","cache.get","def.resolve","Restangular.all","cache.put","data.plain","def.reject","cache.remove","$http"],"api_endpoints":[{"url":"${{obj}.API_URL}ps_realizationTimes/sort","method":"PATCH","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":8,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/ReclamationService.js:6-136:service:ReclamationService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/ReclamationService.js","module":null,"name":"ReclamationService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .service('ReclamationService', function ($q, $http, $config) {\n\n        var ReclamationService = {};\n\n        var faultsResource = 'dp_reclamation_faults';\n        var resource = 'dp_reclamations';\n        var messagesResource = 'dp_reclamations_messages';\n\n        ReclamationService.getFaults = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + faultsResource\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ReclamationService.getUploadUrl = function (reclamationID) {\n            return $config.API_URL + [resource, 'files', reclamationID].join('/');\n        };\n\n        ReclamationService.add = function (data, orderID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, orderID].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ReclamationService.findByOrder = function (orderID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'findByOrder', orderID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ReclamationService.getAll = function (params) {\n            var def = $q.defer();\n\n            if (params === undefined) {\n                params = {};\n            }\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'myZone'].join('/'),\n                params: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ReclamationService.getMyZoneCount = function (params) {\n            var def = $q.defer();\n\n            if (params === undefined) {\n                params = {};\n            }\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'myZoneCount'].join('/'),\n                params: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ReclamationService.getMessages = function(reclamationID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [messagesResource, 'myZone', reclamationID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        ReclamationService.getFiles = function (reclamationID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL +  [resource, 'getFiles', reclamationID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return ReclamationService;\n\n    });","start":6,"end":136,"route":null,"symbol":"ReclamationService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/findByOrder/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/myZone","method":"GET","dataKeys":[],"paramKeys":["..."]},{"url":"${{obj}.API_URL}${{node.name}}/myZoneCount","method":"GET","dataKeys":[],"paramKeys":["..."]},{"url":"${{obj}.API_URL}${{node.name}}/myZone/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getFiles/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/SettingService.js:2-113:service:SettingService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/SettingService.js","module":null,"name":"SettingService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$config","$http","localStorageService","$cacheFactory"],"antiPatterns":[],"text":"    .service('SettingService', function ($rootScope, $q, $config, $http, localStorageService, $cacheFactory) {\n\n        var resource;\n\n        var SettingService = function (module) {\n            this.module = module;\n            resource = ['settings', this.module].join('/');\n        };\n\n        SettingService.prototype.setModule = function(module) {\n            this.module = module;\n        };\n\n        SettingService.prototype.getPublicSettings = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['settings', 'getPublicSettings', this.module].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        SettingService.prototype.getSkinName = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['settings', 'getSkinName'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        SettingService.prototype.sendMessage = function(key, data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['settings', 'sendMessage', key].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        SettingService.prototype.signToNewsletter = function(email) {\n            var def = $q.defer();\n\n            var data = {email: email};\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['settings', 'newsletter'].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        SettingService.prototype.confirmNewsletter = function(token) {\n            var def = $q.defer();\n\n            var data = {token: token};\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + ['settings', 'confirmNewsletter'].join('/'),\n                data: data\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        SettingService.prototype.getDateByWorkingDays = function() {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['settings', 'getDateByWorkingDays'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return SettingService;\n    });","start":2,"end":113,"route":null,"symbol":"SettingService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}settings/getPublicSettings/${{obj}.module}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}settings/getSkinName","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}settings/sendMessage/${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}settings/newsletter","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}settings/confirmNewsletter","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}settings/getDateByWorkingDays","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/SocialWidgetService.js:5-180:factory:SocialWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/SocialWidgetService.js","module":null,"name":"SocialWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["AuthService","$state","$rootScope"],"antiPatterns":[],"text":"    .factory( 'SocialWidgetService', function ( AuthService, $state, $rootScope ) {\n\n        function DeliveryWidgetService( json ) {\n            angular.extend( this, json );\n        }\n\n        function loginGoogle() {\n            gapi.load('auth2', function () {\n\n                auth2 = gapi.auth2.init({\n                    client_id: '345059472892-1fae8hutprcgcg3gk0i1dvdconjarcr0.apps.googleusercontent.com',\n                    fetch_basic_profile: true,\n                    scope: 'profile'\n                });\n                console.log('AUTH2.a');\n                console.log(auth2);\n\n                auth2.then(\n\n                    function(){\n\n                        if( !auth2.isSignedIn.get() ){\n                            console.log('AUTH2.b');\n                            console.log(auth2);\n\n                            auth2.signIn().then(\n\n                                //ok\n                                function( user ){\n                                    console.log('AUTH2.c');\n                                    console.log(auth2);\n\n                                    var id_token = user.getAuthResponse().id_token;\n                                    var email = user.getBasicProfile().getEmail();\n                                    var name = user.getBasicProfile().getGivenName();\n                                    var lastName = user.getBasicProfile().getFamilyName();\n\n                                    var data = {\n                                        id_token: id_token,\n                                        email: email,\n                                        service: 'google',\n                                        name: name,\n                                        lastName: lastName\n                                    };\n\n                                    AuthService.loginWithGoogle( data ).then(\n\n                                        //ok\n                                        function( data ){\n                                            $rootScope.$emit('CreditLimit:reload', true);\n                                            $state.go('home');\n                                        },\n\n                                        // fial\n                                        function( data ){\n\n                                        }\n\n                                    );\n\n                                }\n\n                            );\n\n                        }else {\n\n                            auth2.signIn().then(\n                                \n                                //ok\n                                function( user ){\n                                    console.log('AUTH2.e');\n                                    console.log(auth2);\n                                    var id_token = user.getAuthResponse().id_token;\n                                    var email = user.getBasicProfile().getEmail();\n                                    var name = user.getBasicProfile().getGivenName();\n                                    var lastName = user.getBasicProfile().getFamilyName();\n\n                                    var data = {\n                                        id_token: id_token,\n                                        email: email,\n                                        service: 'google',\n                                        name: name,\n                                        lastName: lastName\n                                    };\n\n                                    AuthService.loginWithGoogle( data ).then(\n                                        function( data ){\n                                            $rootScope.$emit('CreditLimit:reload', true);\n                                            $state.go('home');\n                                        },\n                                        function( data ){\n\n\n\n                                        }\n                                    );\n\n                                }\n\n                            );\n\n                        }\n\n\n                    }\n\n                );\n\n            });\n        }\n\n        function loginFacebook() {\n\n            FB.getLoginStatus(function(response) {\n\n                if( response.status != 'connected' ){\n\n                    FB.login( function( response ){\n\n                        FB.api('/me?fields=name,email', function( response ){\n\n                            var data = {\n                                service: 'google',\n                                email: response.email,\n                                name: response.name.split(' ')[0],\n                                lastName: response.name.split(' ')[1]\n                            };\n\n                            AuthService.loginWithFacebook( data ).then(\n                                function( data ){\n                                    $rootScope.$emit('CreditLimit:reload', true);\n                                    $state.go('home');\n                                },\n                                function( data ){\n\n                                }\n                            );\n\n                        }, {scope: 'email'});\n\n                    }, {scope: 'email'});\n\n                }else {\n\n                    FB.api('/me?fields=name,email', function( response ){\n\n                        var data = {\n                            service: 'google',\n                            email: response.email,\n                            name: response.name.split(' ')[0],\n                            lastName: response.name.split(' ')[1],\n                        };\n\n                        AuthService.loginWithFacebook( data ).then(\n                            function( data ){\n                                $rootScope.$emit('CreditLimit:reload', true);\n                                $state.go('home');\n                            },\n                            function( data ){\n\n                            }\n                        );\n\n                    }, {scope: 'email'});\n\n                }\n\n            });\n\n        }\n\n        return {\n            loginGoogle: loginGoogle,\n            loginFacebook: loginFacebook\n        };\n    });","start":5,"end":180,"route":null,"symbol":"SocialWidgetService","metadata":{"calls_functions":["angular.module","angular.extend","gapi.load","gapi.auth2.init","console.log","auth2.then","auth2.isSignedIn.get","auth2.signIn","user.getAuthResponse","user.getBasicProfile","AuthService.loginWithGoogle","$rootScope.$emit","$state.go","FB.getLoginStatus","FB.login","FB.api","response.name.split","AuthService.loginWithFacebook"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":4,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/StaticContentService.js:7-35:factory:StaticContentService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/StaticContentService.js","module":null,"name":"StaticContentService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('StaticContentService', function($q, $http, $config) {\n\n        var StaticContentService = {};\n        var resource = getResource();\n\n        function getResource() {\n            return ['dp_static_contents'];\n        }\n\n        StaticContentService.getContent = function(key) {\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getContent', key].join('/')\n            }).success(function(data) {\n                def.resolve(data);\n            }).error(function(data) {\n                def.reject(data);\n                console.log(data);\n            });\n\n            return def.promise;\n        };\n\n        return StaticContentService;\n\n    });","start":7,"end":35,"route":null,"symbol":"StaticContentService","metadata":{"calls_functions":["angular.module","getResource","$q.defer","$http","def.resolve","def.reject","console.log"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/getContent/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/SubCategoryDescriptionService.js:4-23:service:SubCategoryDescriptionService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/SubCategoryDescriptionService.js","module":null,"name":"SubCategoryDescriptionService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .service('SubCategoryDescriptionService', function ($q, $http, $config) {\n\n        var SubCategoryDescriptionService = {};\n\n        SubCategoryDescriptionService.getAll = function (subcategoryURL) {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + 'subcategoriesDescriptions/subcategoriesDescriptionsPublic?categoryURL=' + subcategoryURL\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return SubCategoryDescriptionService;\n    });","start":4,"end":23,"route":null,"symbol":"SubCategoryDescriptionService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}subcategoriesDescriptions/subcategoriesDescriptionsPublic?categoryURL=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TaxService.js:2-119:factory:TaxService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TaxService.js","module":null,"name":"TaxService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('TaxService', function ($rootScope, $q, $http, $config, $cacheFactory) {\n\n        var TaxService = {};\n\n        var resource = 'tax';\n\n        var cache = $cacheFactory(resource);\n\n        var getAllDef = null;\n\n        TaxService.getAll = function (force) {\n            if (_.isNull(getAllDef) || force || getAllDef.promise.$$state.status === 1) {\n                getAllDef = $q.defer();\n            } else {\n                return getAllDef.promise;\n            }\n\n            if (cache.get('collection') && !force) {\n                getAllDef.resolve(cache.get('collection'));\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + resource\n                }).success(function (data) {\n                    cache.put('collection', data);\n                    $rootScope.$emit('Tax.getAll', data);\n                    getAllDef.resolve(data);\n                }).error(function (data) {\n                    getAllDef.reject(data);\n                });\n            }\n\n            return getAllDef.promise;\n        };\n\n        TaxService.create = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.ID) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TaxService.update = function (lang) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + resource,\n                data: lang\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TaxService.remove = function (id) {\n            var def = $q.defer();\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [resource, id].join(\"/\")\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TaxService.getForProduct = function (groupID, typeID) {\n            var def = $q.defer();\n\n            var params = '?groupID=' + groupID;\n\n            if (typeID != undefined) {\n                params += '&typeID=' + typeID;\n            }\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource + '/taxForProduct' + params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return TaxService;\n    });","start":2,"end":119,"route":null,"symbol":"TaxService","metadata":{"calls_functions":["angular.module","$cacheFactory","_.isNull","$q.defer","cache.get","getAllDef.resolve","$http","cache.put","$rootScope.$emit","getAllDef.reject","cache.remove","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/taxForProduct${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":10,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TemplateRootService.js:2-25:service:TemplateRootService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TemplateRootService.js","module":null,"name":"TemplateRootService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .service('TemplateRootService', function ($q, $http, $config) {\n\n        var TemplateRootService = {};\n\n        var resource = 'templates';\n\n        TemplateRootService.getTemplateUrl = function (templateID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getUrl', templateID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return TemplateRootService;\n\n    });","start":2,"end":25,"route":null,"symbol":"TemplateRootService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/getUrl/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TextWidgetService.js:5-72:factory:TextWidgetService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TextWidgetService.js","module":null,"name":"TextWidgetService","kind":"service","nodeType":"Function","dependenciesDI":["$q"],"antiPatterns":[],"text":"    .factory( 'TextWidgetService', function ($q) {\n\n        function TextWidgetService( json ) {\n            angular.extend( this, json );\n        }\n\n        function findWord(html, lines) {\n\n            var plainText = (new DOMParser).parseFromString(html, \"text/html\") .\n                documentElement . textContent;\n            var splitText = plainText.split(' ');\n\n            var chars = 0;\n            for(var i=0;i<splitText.length;i++) {\n                chars += splitText[i].length;\n                if( chars >= lines ) {\n                    return splitText[i];\n                }\n            }\n            return false;\n        }\n\n        function findParagraph(html, word) {\n            var paragraphs = (new DOMParser).parseFromString(html, \"text/html\") . querySelectorAll('p');\n\n            if( paragraphs.length === 1 ) {\n                return false;\n            }\n\n            var text = '';\n            for(var i=0;i<paragraphs.length;i++) {\n                if( paragraphs[i].nextElementSibling ) {\n                    text = paragraphs[i].nextElementSibling.innerHTML.replace(/<[^>]*>/g, \"\");\n                    if( text.indexOf(word) !== -1 ) {\n                        return i;\n                    }\n                }\n            }\n\n            if( typeof word === 'string' && word.length > 0 ) {\n                return 0;\n            }\n            return false;\n        }\n\n        function getLess(html, paragraph) {\n            var paragraphs = (new DOMParser).parseFromString(html, \"text/html\") . querySelectorAll('p');\n\n            var template = '';\n\n            for(var i=0;i<paragraphs.length;i++) {\n\n                template += paragraphs[i].innerHTML;\n\n                if( paragraph === i ) {\n                    return template;\n                }\n            }\n\n            return false;\n        }\n\n        return {\n            findWord: findWord,\n            findParagraph: findParagraph,\n            getLess: getLess\n        };\n    });","start":5,"end":72,"route":null,"symbol":"TextWidgetService","metadata":{"calls_functions":["angular.module","angular.extend","plainText.split","paragraphs.i.nextElementSibling.innerHTML.replace","text.indexOf"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TokenService.js:2-100:factory:TokenService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TokenService.js","module":null,"name":"TokenService","kind":"service","nodeType":"Function","dependenciesDI":["$rootScope","$q","$config","$injector"],"antiPatterns":[],"text":"    .factory('TokenService', function ($rootScope, $q, $config, $injector) {\n        var TokenService = {};\n\n        TokenService.check = function () {\n            var _this = this;\n            var def = $q.defer();\n\n            var $http = $injector.get(\"$http\");\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + ['auth', 'check'].join('/')\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TokenService.getNonUserToken = function () {\n            var _this = this;\n            var def = $q.defer();\n\n            var $http = $injector.get(\"$http\");\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'getNonUserToken',\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TokenService.getFromCart = function () {\n            var _this = this;\n            var def = $q.defer();\n\n            var $http = $injector.get(\"$http\");\n\n            $http({\n                method: 'GET',\n                url: $config.AUTH_URL + 'cart/get',\n                params: {\n                    domainName: location.hostname\n                },\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        TokenService.joinAddresses = function (params) {\n            var def = $q.defer();\n\n            var $http = $injector.get(\"$http\");\n\n            $http({\n                method: 'POST',\n                url: $config.AUTH_URL + 'cart/joinAddresses',\n                params: {\n                    domainName: location.hostname\n                },\n                data: $.param(params),\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded\"\n                }\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return TokenService;\n    });","start":2,"end":100,"route":null,"symbol":"TokenService","metadata":{"calls_functions":["angular.module","$q.defer","$injector.get","$http","def.resolve","def.reject","$.param"],"api_endpoints":[{"url":"${{obj}.API_URL}auth/check","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.AUTH_URL}getNonUserToken","method":"POST","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.AUTH_URL}cart/get","method":"GET","dataKeys":[],"paramKeys":["domainName"]},{"url":"${{obj}.AUTH_URL}cart/joinAddresses","method":"POST","dataKeys":[],"paramKeys":["domainName"]}],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TypePatternService.js:4-42:factory:TypePatternService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/TypePatternService.js","module":null,"name":"TypePatternService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .factory('TypePatternService', function ($q, $http, $config) {\n\n        var TypePatternService = {};\n\n        var resource = getResource();\n\n        function getResource() {\n            return 'ps_patterns';\n\n        }\n\n        TypePatternService.getUploadUrl = function () {\n            return $config.API_URL + [resource].join('/');\n        };\n\n        TypePatternService.getList = function (typeID, descID) {\n\n            var params = {\n                'typeID': typeID,\n                'descID': descID\n            };\n\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'patternsPublic'].join('/'),\n                params: params\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return TypePatternService;\n    });","start":4,"end":42,"route":null,"symbol":"TypePatternService","metadata":{"calls_functions":["angular.module","getResource","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}/patternsPublic","method":"GET","dataKeys":[],"paramKeys":["..."]}],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/UserAddressService.js:2-112:service:UserAddressService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/UserAddressService.js","module":null,"name":"UserAddressService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":"    .service('UserAddressService', function ($q, $http, $config) {\n\n        /**\n         * @deprecated\n         * @TODO check and remove\n         * @param userID\n         * @constructor\n         */\n\n        var UserAddressService = function (userID) {\n            this.userID = userID;\n            this.resource = ['users', this.userID, 'address'].join('/');\n        };\n\n        UserAddressService.prototype.getAllAddresses = function () {\n            var def = $q.defer();\n            var _this = this;\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + _this.resource + '?type=1'\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserAddressService.prototype.getAllAddressesVat = function () {\n            var def = $q.defer();\n            var _this = this;\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + _this.resource + '?type=2'\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserAddressService.prototype.createAddress = function (data) {\n            var def = $q.defer();\n            var _this = this;\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + _this.resource,\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserAddressService.prototype.edit = function (data) {\n            var def = $q.defer();\n            var _this = this;\n\n            $http({\n                method: 'PUT',\n                url: $config.API_URL + _this.resource,\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserAddressService.prototype.remove = function (data) {\n            var def = $q.defer();\n            var _this = this;\n\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [_this.resource, data.ID].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return UserAddressService;\n    });","start":2,"end":112,"route":null,"symbol":"UserAddressService","metadata":{"calls_functions":["angular.module","$q.defer","$http","def.resolve","def.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}${{obj}.resource}?type=1","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{obj}.resource}?type=2","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{obj}.resource}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{obj}.resource}","method":"PUT","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{obj}.resource}/${{obj}.ID}","method":"DELETE","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":4,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["user"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/UserService.js:2-496:factory:UserService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/UserService.js","module":null,"name":"UserService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config","$cacheFactory"],"antiPatterns":[],"text":"    .factory('UserService', function ($q, $http, $config, $cacheFactory) {\n\n        var UserService = {};\n\n        var resource = 'users';\n\n        var cache = $cacheFactory(resource);\n\n        var getAllDef = null;\n\n        UserService.getAll = function (force) {\n            if (_.isNull(getAllDef) || force || getAllDef.promise.$$state.status === 1) {\n                getAllDef = $q.defer();\n            } else {\n                return getAllDef.promise;\n            }\n\n            if (cache.get('collection') && !force) {\n                getAllDef.resolve(cache.get('collection'));\n            } else {\n                $http({\n                    method: 'GET',\n                    url: $config.API_URL + resource\n                }).success(function (data) {\n                    cache.put('collection', data);\n                    getAllDef.resolve(data);\n                }).error(function (data) {\n                    getAllDef.reject(data);\n                });\n            }\n\n            return getAllDef.promise;\n        };\n\n        UserService.add = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + resource,\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.addSimple = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + 'users/userSimpleRegister',\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.get = function (uID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + resource + '?ID=' + uID\n            }).success(function (data) {\n                if (data.length === 1) {\n                    def.resolve(data[0]);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.remove = function (uID) {\n            var def = $q.defer();\n            $http({\n                method: 'DELETE',\n                url: $config.API_URL + [resource, uID].join('/')\n            }).success(function (data) {\n                def.resolve(data[0]);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.add = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'special'].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.editUser = function (user) {\n            var def = $q.defer();\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + resource,\n                data: user\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        UserService.editUserOptions = function (userID, data) {\n            var def = $q.defer();\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + [resource, userID, 'userOptions'].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n\n        UserService.getRoles = function (user) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, user.ID, 'userRoles'].join('/')\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data.items);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        UserService.setRoles = function (user, items) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, user.ID, 'userRoles'].join('/'),\n                data: items\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.getGroups = function (user) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, user.ID, 'userGroups'].join('/')\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data.items);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.setGroups = function (user, items) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, user.ID, 'userGroups'].join('/'),\n                data: items\n            }).success(function (data) {\n                if (data.response) {\n                    cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.userRegister = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'userRegister'].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.passForget = function (email) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'passForget'].join('/'),\n                data: {\n                    email: email\n                }\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        // MyAccount -> Ftp Account\n\n        UserService.generateNewFtp = function () {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'changeFtpPass'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        UserService.getUserFtp = function () {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getUserFtpData'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n        // End of MyAccount -> Ftp account\n\n        // My Account -> User data\n        UserService.getLoggedUserData = function () {\n            var def = $q.defer();\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getLoggedUserData'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        UserService.userDataChange = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'changeUserData'].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n        // End of My Account -> Use data\n\n        UserService.changeMail = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'POST',\n                url: $config.API_URL + [resource, 'changeMail'].join('/'),\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    // cache.remove('collection');\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.getMyAccount = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getMyAccount'].join('/')\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.checkOneTimeUser = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'checkOneTimeUser'].join('/')\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.changePass = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                url: $config.API_URL + resource + '/' + 'changePass',\n                data: data\n            }).success(function (data) {\n                if (data.response) {\n                    def.resolve(data);\n                } else {\n                    def.reject(data);\n                }\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n\n        };\n\n        UserService.getCurrency = function (userID) {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'getCurrency', userID].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.getImportantData = function () {\n            var def = $q.defer();\n\n            $http({\n                method: 'GET',\n                url: $config.API_URL + [resource, 'importantData'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        UserService.editImportantData = function (data) {\n            var def = $q.defer();\n\n            $http({\n                method: 'PATCH',\n                data: data,\n                url: $config.API_URL + [resource, 'importantData'].join('/')\n            }).success(function (data) {\n                def.resolve(data);\n            }).error(function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        return UserService;\n\n    });","start":2,"end":496,"route":null,"symbol":"UserService","metadata":{"calls_functions":["angular.module","$cacheFactory","_.isNull","$q.defer","cache.get","getAllDef.resolve","$http","cache.put","getAllDef.reject","def.resolve","def.reject","cache.remove"],"api_endpoints":[{"url":"${{obj}.API_URL}${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}users/userSimpleRegister","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}?ID=${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}","method":"DELETE","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/special","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{node.name}}/userOptions","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{obj}.ID}/userRoles","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{obj}.ID}/userRoles","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{obj}.ID}/userGroups","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/${{obj}.ID}/userGroups","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/userRegister","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/passForget","method":"POST","dataKeys":["email"],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/changeFtpPass","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getUserFtpData","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getLoggedUserData","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/changeUserData","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/changeMail","method":"POST","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getMyAccount","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/checkOneTimeUser","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/changePass","method":"PATCH","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/getCurrency/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/importantData","method":"GET","dataKeys":[],"paramKeys":[]},{"url":"${{obj}.API_URL}${{node.name}}/importantData","method":"PATCH","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":23,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["user"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/socket.js:4-39:service:socketService","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/services/socket.js","module":null,"name":"socketService","kind":"service","nodeType":"Function","dependenciesDI":["$q","$config","socketFactory","$rootScope"],"antiPatterns":[],"text":"    .service('socketService', function ($q, $config, socketFactory, $rootScope) {\n\n        var host = $config.SOCKET_URL;\n\n        var socketService = function (port) {\n            var ioSocket = io.connect([host, port].join(':'));\n            this.mySocket = socketFactory({\n                ioSocket: ioSocket,\n                prefix: ''\n            });\n        };\n\n        socketService.prototype.emit = function (eventName, data) {\n            return this.mySocket.emit(eventName, data);\n        };\n\n        socketService.prototype.broadcastEmit = function (eventName, data) {\n            return this.mySocket.broadcast.emit(eventName, data);\n        };\n\n        socketService.prototype.remove = function (eventName) {\n            return this.mySocket.removeListener(eventName);\n        };\n\n        socketService.prototype.on = function (eventName, callback) {\n            var _this = this;\n            return this.mySocket.on(eventName, function () {\n                var args = arguments;\n                $rootScope.$apply(function () {\n                    callback.apply(_this.mySocket, args);\n                });\n            });\n        };\n\n        return socketService;\n    });","start":4,"end":39,"route":null,"symbol":"socketService","metadata":{"calls_functions":["angular.module","io.connect","socketFactory","$rootScope.$apply","callback.apply"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:242-255:factory:translateRouting","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":"dpClient.filters","name":"translateRouting","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","$http","$config"],"antiPatterns":[],"text":".factory('translateRouting', function ($q, $rootScope, $http, $config) {\n    return {\n        request: function (actualState, stateParams, lang) {\n            let params = { ...stateParams, lang };\n            return $http({\n                url: $config.API_URL + ['routes', 'translateState', actualState].join('/'),\n                method: 'GET',\n                params: params\n            })\n            .then(res => res.data)\n            .catch(err => $q.reject(new Error(err)));\n        }\n    };\n});","start":242,"end":255,"route":null,"symbol":"translateRouting","metadata":{"calls_functions":["$http","$q.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/translateState/${{node.name}}","method":"GET","dataKeys":[],"paramKeys":["..."]}],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:230-241:factory:getDomains","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":"dpClient.filters","name":"getDomains","kind":"service","nodeType":"Function","dependenciesDI":["$q","$http","$config"],"antiPatterns":[],"text":".factory('getDomains', function ($q, $http, $config) {\n    return {\n        request: function () {\n            return $http({\n                url: $config.API_URL + 'domains',\n                method: 'GET'\n            })\n            .then(res => res.data)\n            .catch(err => $q.reject(new Error(err)));\n        }\n    };\n})","start":230,"end":241,"route":null,"symbol":"getDomains","metadata":{"calls_functions":["$http","$q.reject"],"api_endpoints":[{"url":"${{obj}.API_URL}domains","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:153-229:factory:routes","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":"dpClient.filters","name":"routes","kind":"service","nodeType":"Function","dependenciesDI":["$http","$config","$q","$rootScope","$cookieStore","$stateProvider"],"antiPatterns":[],"text":".factory('routes', function ($http, $config, $q, $rootScope, $cookieStore, $stateProvider) {\n    return {\n        getAll: function () {\n            return $http({\n                url: $config.API_URL + 'routes/show',\n                method: 'GET'\n            })\n            .then(response => {\n              $rootScope.routes = response.data; // Przypisz dane do $rootScope.routes\n              return response.data;\n            })\n            .catch(error => $q.reject(error));\n        },\n        setAll: function () {\n          const defaultLang = $cookieStore.get('lang') ? $cookieStore.get('lang') : 'pl'; // Użyj 'pl' jako domyślnego\n          const actDate = new Date();\n          const dateStr = '' + actDate.getHours() + actDate.getMinutes() + actDate.getSeconds();\n\n          // Iteruj po trasach z $rootScope.routes\n          $rootScope.routes.forEach((value) => {\n              value.abstract = (value.abstract == 1);\n\n              let state;\n              if (value.langs && angular.isDefined(value.langs[defaultLang]) && value.langs[defaultLang].url != null) {\n                  state = {\n                      name: value.name,\n                      url: value.langs[defaultLang].url,\n                      parent: value.parent,\n                      abstract: value.abstract,\n                      views: {},\n                      ncyBreadcrumb: {\n                          label: value.langs[defaultLang].name\n                      }\n                  };\n              } else {\n                  state = {\n                      name: value.name,\n                      parent: value.parent,\n                      abstract: value.abstract,\n                      views: {},\n                      ncyBreadcrumb: { skip: true }\n                  };\n              }\n\n              if (angular.isDefined(value.controller) && value.controller != null) {\n                  state.controller = value.controller;\n              }\n\n              if (value.abstract === true && value.name === 'main') {\n                const actTemplate = value.views.pop();\n                state.templateUrl = actTemplate.template.url + '?ver=' + dateStr;\n                delete state.views;\n              } else if (value.route === true) {\n                delete state.views;\n              } else {\n                angular.forEach(value.views, (view) => {\n                  if (view.template) {\n                    state.views[view.name] = {\n                      templateUrl: view.template.url + '?ver=' + dateStr,\n                      controller: view.controller\n                    };\n                  }\n                });\n              }\n\n              $stateProvider.state(value.name, state);\n          });\n        },\n        findOne: function (name) {\n          return $q((resolve) => {\n            // Szukaj trasy w $rootScope.routes\n            const route = $rootScope.routes.find(each => each.name === name);\n            resolve(route);\n          });\n        }\n    };\n})","start":153,"end":229,"route":null,"symbol":"routes","metadata":{"calls_functions":["$http","$q.reject","$cookieStore.get","actDate.getHours","actDate.getMinutes","actDate.getSeconds","$rootScope.routes.forEach","angular.isDefined","value.views.pop","angular.forEach","$stateProvider.state","$q","$rootScope.routes.find","resolve"],"api_endpoints":[{"url":"${{obj}.API_URL}routes/show","method":"GET","dataKeys":[],"paramKeys":[]}],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:140-152:factory:responseErrorInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":"dpClient.filters","name":"responseErrorInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$injector","$timeout"],"antiPatterns":[],"text":".factory('responseErrorInterceptor', function ($q, $injector, $timeout) {\n    return {\n        responseError: function (response) {\n            console.log('responseError Status: ' + response.status);\n            if (response.status == 0 || response.status == 408 || response.status >= 500) {\n                var $http = $injector.get('$http');\n                return $timeout(() => $http(response.config), 3000, false);\n            } else {\n                return $q.reject(response);\n            }\n        }\n    };\n})","start":140,"end":152,"route":null,"symbol":"responseErrorInterceptor","metadata":{"calls_functions":["console.log","$injector.get","$timeout","$http","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:116-139:factory:loadingInterceptor","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":"dpClient.filters","name":"loadingInterceptor","kind":"service","nodeType":"Function","dependenciesDI":["$q","$rootScope","LoadingService"],"antiPatterns":[],"text":".factory('loadingInterceptor', function ($q, $rootScope, LoadingService) {\n    return {\n        request: function (config) {\n            LoadingService.requested();\n            config.requestTimestamp = new Date().getTime();\n            $rootScope.$broadcast('loading:start');\n            return config;\n        },\n        response: function (response) {\n            LoadingService.responsed();\n            $rootScope.$broadcast('loading:finish');\n            return response;\n        },\n        responseError: function (rejection) {\n            if (rejection.status == 401) {\n                LoadingService.responsed();\n            } else {\n                LoadingService.countError();\n            }\n            $rootScope.$broadcast('loading:finish');\n            return $q.reject(rejection);\n        }\n    };\n})","start":116,"end":139,"route":null,"symbol":"loadingInterceptor","metadata":{"calls_functions":["LoadingService.requested","$rootScope.$broadcast","LoadingService.responsed","LoadingService.countError","$q.reject"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":3},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:105-115:factory:httpMethodOverride","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":"dpClient.filters","name":"httpMethodOverride","kind":"service","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":".factory('httpMethodOverride', function () {\n    return {\n        request: function (config) {\n            if (config.method === 'PUT' || config.method === 'PATCH') {\n                config.headers['x-http-method-override'] = config.method.toLowerCase();\n                config.method = 'POST';\n            }\n            return config;\n        }\n    };\n})","start":105,"end":115,"route":null,"symbol":"httpMethodOverride","metadata":{"calls_functions":["config.method.toLowerCase"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:36-81:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":"dpClient.filters","name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$httpProvider","$locationProvider","$urlRouterProvider","$stateProvider","RestangularProvider","localStorageServiceProvider","ApiCollectionProvider","$breadcrumbProvider","$provide","$configProvider"],"antiPatterns":[],"text":".config(function (\n    $httpProvider,\n    $locationProvider,\n    $urlRouterProvider,\n    $stateProvider,\n    RestangularProvider,\n    localStorageServiceProvider,\n    ApiCollectionProvider,\n    $breadcrumbProvider,\n    $provide,\n    $configProvider\n    ) {\n\n    $configProvider.set('API_URL', 'http://localtest.me/api/');\n    $configProvider.set('API_URL_EDITOR', 'http://localhost:1351/api/');\n    RestangularProvider.setBaseUrl('http://localtest.me/api/');\n    $configProvider.set('AUTH_URL', 'http://localtest.me:2600/');\n    $configProvider.set('STATIC_URL', 'http://localtest.me/static/');\n    $configProvider.set('SOCKET_URL', 'http://localtest.me:2600');\n    $configProvider.set('EDITOR_URL', 'http://localhost:1400');\n\n    function $LangStorageProvider() {\n        return {\n            $get: function () {\n                return this;\n            },\n            getLangCode: () => 'pl'\n        };\n    }\n    $provide.provider('$langStorage', $LangStorageProvider);\n\n    $locationProvider.html5Mode(true);\n\n    $urlRouterProvider.otherwise(function ($injector, $location) {\n        // Użyj $state do przekierowania zamiast bezpośredniego zwracania URL\n        $injector.get('$state').go('deliveries');\n        return true; // Zwróć true, aby zatrzymać domyślne zachowanie\n    });\n\n    RestangularProvider.setMethodOverriders(['put', 'patch']);\n    localStorageServiceProvider.setPrefix('digitalprint');\n\n    $httpProvider.interceptors.push('httpMethodOverride');\n    $httpProvider.interceptors.push('loadingInterceptor');\n    $httpProvider.interceptors.push('responseErrorInterceptor');\n})","start":36,"end":81,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["angular.module","$configProvider.set","RestangularProvider.setBaseUrl","$provide.provider","$locationProvider.html5Mode","$urlRouterProvider.otherwise","$injector.get","RestangularProvider.setMethodOverriders","localStorageServiceProvider.setPrefix","$httpProvider.interceptors.push"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:257-268:directive:initBind","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":"dpClient.app","name":"initBind","kind":"directive","nodeType":"Function","dependenciesDI":["$compile"],"antiPatterns":[],"text":"angular.module('dpClient.helpers').directive('initBind', function ($compile) {\n    return {\n        restrict: 'A',\n        link: function (scope, element, attr) {\n            attr.$observe('ngBindHtml', function () {\n                if (attr.ngBindHtml) {\n                    $compile(element[0].children)(scope);\n                }\n            });\n        }\n    };\n});","start":257,"end":268,"route":null,"symbol":"initBind","metadata":{"calls_functions":["angular.module","attr.$observe","$compile"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":18,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/app.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js:17-107:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js","module":null,"name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$locationProvider","$stateProvider"],"antiPatterns":[],"text":"        function ($locationProvider, $stateProvider) {\n            $stateProvider.state({\n                abstract: false,\n                template: '<deliveries delivery-connected=\"1\" products=\"[productItem]\"/>',\n                name: 'deliveries',\n                url: '/deliveries',\n                resolve:{\n                    productAddresses:()=> [{index:1}, {index:2}],\n                    productItem:()=> {\n                        return{\n                            volume:2\n                        }\n                    }\n                },\n                controller: function ($scope,$rootScope, $httpBackend,productAddresses,productItem) {\n                    $scope.productAddresses=productAddresses\n                    $scope.productItem=productItem\n                    $httpBackend.whenGET(/deliveries\\/deliveriesPublic/).respond(200, [{\"ID\":17,\"domainID\":4,\"courierID\":15,\"priceID\":10,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"pl\":\"Poczta Polska paczka do 5 kg - przesy\\u0142ka gratis\",\"en\":\"Polish Post parcel up to 5 kg - free shipping\",\"ru\":\"\\u041f\\u043e\\u0441\\u0442-\\u043f\\u043e\\u0447\\u0442\\u043e\\u0432\\u0430\\u044f \\u043f\\u043e\\u0447\\u0442\\u0430 \\u0434\\u043e 5 \\u043a\\u0433 - \\u0431\\u0435\\u0441\\u043f\\u043b\\u0430\\u0442\\u043d\\u0430\\u044f \\u0434\\u043e\\u0441\\u0442\\u0430\\u0432\\u043a\\u0430\"},\"module\":{\"ID\":15,\"name\":\"Poczta Polska\",\"key\":\"pocztapl\",\"typeID\":1},\"price\":{\"ID\":10,\"price\":0,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":100000,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":0,\"tax\":23}},{\"ID\":18,\"domainID\":4,\"courierID\":11,\"priceID\":11,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"6\":\"taxID\",\"pl\":\"UPS paczka do 20 kg\",\"en\":\"UPS package up to 20 kg\",\"ru\":\"UPS \\u0434\\u043e 20 \\u043a\\u0433\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":11,\"price\":20,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":10000,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":24.6,\"tax\":23}},{\"ID\":19,\"domainID\":4,\"courierID\":11,\"priceID\":12,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"6\":\"UnitQty\",\"7\":\"taxID\",\"pl\":\"UPS 100 szt w paczce, paczka do 10 kg\",\"en\":\"UPS 100 pcs in package, package up 10 kg\",\"ru\":\"UPS 100 \\u0448\\u0442. \\u0412 \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0435, \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 10 \\u043a\\u0433\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":12,\"price\":15,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":10,\"UnitQty\":100,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":18.45,\"tax\":23}},{\"ID\":24,\"domainID\":4,\"courierID\":11,\"priceID\":15,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"6\":\"UnitQty\",\"pl\":\"Metoda 4 - paczka do 10 kg, 10 szt w paczce\",\"en\":\"Method 4 - packge up to 10 kg, 10 pcs in a package\",\"ru\":\"\\u0421\\u043f\\u043e\\u0441\\u043e\\u0431 4 - \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 10 \\u043a\\u0433, 10 \\u0448\\u0442. \\u0412 \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0435\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":15,\"price\":10,\"taxID\":null,\"date\":\"0000-00-00 00:00:00\",\"weight\":10,\"UnitQty\":10,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":10,\"tax\":null}},{\"ID\":25,\"domainID\":4,\"courierID\":17,\"priceID\":16,\"active\":1,\"names\":{\"1\":\"courierID\",\"2\":\"courier\",\"3\":\"courierKeys\",\"4\":\"price\",\"5\":\"weight\",\"6\":\"UnitQty\",\"pl\":\"Metoda 5 - paczka do 20 kg, 200 sztuk w paczce\",\"en\":\"Method 5 - package up to 20 kg, 200 pcs in a package\",\"ru\":\"\\u0421\\u043f\\u043e\\u0441\\u043e\\u0431 5 - \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 20 \\u043a\\u0433, 200 \\u0448\\u0442. \\u0412 \\u0443\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0435\"},\"module\":{\"ID\":17,\"name\":\"Apaczka\",\"key\":\"apaczka\",\"typeID\":1},\"price\":{\"ID\":16,\"price\":20,\"taxID\":null,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":200,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":20,\"tax\":null}},{\"ID\":26,\"domainID\":4,\"courierID\":18,\"priceID\":17,\"active\":1,\"names\":{\"pl\":\"Odbi\\u00f3r osobisty - gratis\",\"en\":\"personal collection (free of charge)\",\"ru\":\"\\u043b\\u0438\\u0447\\u043d\\u0430\\u044f \\u043a\\u043e\\u043b\\u043b\\u0435\\u043a\\u0446\\u0438\\u044f (\\u0431\\u0435\\u0441\\u043f\\u043b\\u0430\\u0442\\u043d\\u043e)\"},\"module\":{\"ID\":18,\"name\":\"Odbi\\u00f3r osobisty\",\"key\":\"drukarnia1\",\"typeID\":1,\"keys\":[{\"ID\":13,\"moduleID\":18,\"key\":\"address\",\"type\":\"text\",\"func\":\"collectionAttributes\",\"langs\":{\"pl\":{\"name\":\"Adres punktu odbioru\"}}}]},\"price\":{\"ID\":17,\"price\":0,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":1000000,\"FS_WeightStart\":0,\"FS_WeightEnd\":0,\"FS_ValStart\":10000,\"FS_ValEnd\":30000,\"EX_WeightStart\":0,\"EX_WeightEnd\":0,\"EX_ValStart\":30100,\"EX_ValEnd\":0,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":0,\"tax\":23}},{\"ID\":27,\"domainID\":4,\"courierID\":11,\"priceID\":18,\"active\":1,\"names\":{\"pl\":\"Paleta do 300 do 600 kg\",\"en\":\"Pallet up to 600 kg\",\"ru\":\"\\u041f\\u043e\\u0434\\u0434\\u043e\\u043d \\u0434\\u043e 600 \\u043a\\u0433\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":18,\"price\":140,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":600,\"UnitQty\":10000000,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":0,\"EX_WeightEnd\":299,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":172.2,\"tax\":23}},{\"ID\":28,\"domainID\":4,\"courierID\":11,\"priceID\":19,\"active\":1,\"names\":{\"pl\":\"UPS paczka do 20 kg\"},\"module\":{\"ID\":11,\"name\":\"UPS\",\"key\":\"ups\",\"typeID\":1},\"price\":{\"ID\":19,\"price\":10,\"taxID\":14,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":10000000,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":12.3,\"tax\":23}},{\"ID\":29,\"domainID\":4,\"courierID\":18,\"priceID\":20,\"active\":1,\"names\":{\"pl\":\"Odbi\\u00f3r osobisty\"},\"module\":{\"ID\":18,\"name\":\"Odbi\\u00f3r osobisty\",\"key\":\"drukarnia1\",\"typeID\":1,\"keys\":[{\"ID\":13,\"moduleID\":18,\"key\":\"address\",\"type\":\"text\",\"func\":\"collectionAttributes\",\"langs\":{\"pl\":{\"name\":\"Adres punktu odbioru\"}}}]},\"price\":{\"ID\":20,\"price\":0,\"taxID\":14,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":99999999.99,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":0,\"tax\":23}},{\"ID\":30,\"domainID\":4,\"courierID\":21,\"priceID\":21,\"active\":1,\"names\":{\"pl\":\"Paczka do 20kg DHL 25z\\u0142 (za darmo w przedziale 10-30 kg)\",\"en\":\"Package up to 20kg DHL 25z\\u0142 (free of charge in the range of 10-30 kg)\",\"ru\":\"\\u0423\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 20 \\u043a\\u0433 DHL 25z\\u0142 (\\u0431\\u0435\\u0441\\u043f\\u043b\\u0430\\u0442\\u043d\\u043e \\u0432 \\u0434\\u0438\\u0430\\u043f\\u0430\\u0437\\u043e\\u043d\\u0435 10-30 \\u043a\\u0433)\"},\"module\":{\"ID\":21,\"name\":\"DHL\",\"key\":\"dhl\",\"typeID\":1},\"price\":{\"ID\":21,\"price\":25,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":10000000,\"FS_WeightStart\":10,\"FS_WeightEnd\":30,\"FS_ValStart\":null,\"FS_ValEnd\":null,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":30.75,\"tax\":23}},{\"ID\":31,\"domainID\":4,\"courierID\":21,\"priceID\":22,\"active\":1,\"names\":{\"pl\":\"Paczka do 20kg DHL 25z\\u0142 (za darmo dostawa dla warto\\u015bci od 100 do 1000 z\\u0142)\",\"en\":\"Package up to 20kg DHL 25z\\u0142 (free delivery for value from 100 to 1000 z\\u0142)\",\"ru\":\"\\u0423\\u043f\\u0430\\u043a\\u043e\\u0432\\u043a\\u0430 \\u0434\\u043e 20 \\u043a\\u0433 DHL 25z\\u0142 (\\u0431\\u0435\\u0441\\u043f\\u043b\\u0430\\u0442\\u043d\\u0430\\u044f \\u0434\\u043e\\u0441\\u0442\\u0430\\u0432\\u043a\\u0430 \\u043f\\u043e \\u0446\\u0435\\u043d\\u0435 \\u043e\\u0442 100 \\u0434\\u043e 1000 \\u0437\\u043b\\u043e\\u0442\\u044b\\u0445)\"},\"module\":{\"ID\":21,\"name\":\"DHL\",\"key\":\"dhl\",\"typeID\":1},\"price\":{\"ID\":22,\"price\":25,\"taxID\":11,\"date\":\"0000-00-00 00:00:00\",\"weight\":20,\"UnitQty\":99999999.99,\"FS_WeightStart\":null,\"FS_WeightEnd\":null,\"FS_ValStart\":100,\"FS_ValEnd\":1000,\"EX_WeightStart\":null,\"EX_WeightEnd\":null,\"EX_ValStart\":null,\"EX_ValEnd\":null,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":30.75,\"tax\":23}},{\"ID\":34,\"domainID\":4,\"courierID\":15,\"priceID\":31,\"active\":1,\"names\":{\"pl\":\"poczta paczka 20 zl\"},\"module\":{\"ID\":15,\"name\":\"Poczta Polska\",\"key\":\"pocztapl\",\"typeID\":1},\"price\":{\"ID\":31,\"price\":20,\"taxID\":null,\"date\":\"2021-05-25 10:42:19\",\"weight\":20,\"UnitQty\":10000,\"FS_WeightStart\":0,\"FS_WeightEnd\":0,\"FS_ValStart\":0,\"FS_ValEnd\":0,\"EX_WeightStart\":0,\"EX_WeightEnd\":0,\"EX_ValStart\":0,\"EX_ValEnd\":0,\"EX_DimW\":null,\"EX_DimL\":null,\"EX_DimH\":null,\"priceGross\":20,\"tax\":null}}]);\n                    $httpBackend.whenGET(/address\\/getUserAddresses/).respond(200, {\"response\":true,\"addresses\":[{\"ID\":418,\"name\":\"Grzegorz\",\"lastname\":\"Le\\u015bniowski\",\"street\":\"Zielona\",\"house\":35,\"apartment\":null,\"zipcode\":\"12-123\",\"city\":\"Z\\u0105bkowice\",\"areaCode\":48,\"telephone\":501680500,\"companyName\":null,\"nip\":null,\"addressName\":\"Z\\u0105bkowice, Zielona 35\",\"copyFromID\":null,\"countryCode\":\"PL\",\"externalID\":null,\"default\":0,\"joinID\":54,\"userID\":285},{\"ID\":376,\"name\":\"Grzegorz\",\"lastname\":\"Le\\u015bniowski\",\"street\":\"Kwiatowa\",\"house\":9,\"apartment\":null,\"zipcode\":\"32-085\",\"city\":\"Modlnica\",\"areaCode\":48,\"telephone\":501680500,\"companyName\":null,\"nip\":null,\"addressName\":\"Modlnica, Kwiatowa 9\",\"copyFromID\":null,\"countryCode\":\"PL\",\"externalID\":null,\"default\":1,\"joinID\":51,\"userID\":285}],\"senders\":[{\"name\":\"sender_printhouse\",\"type\":1},{\"name\":\"sender_client\",\"type\":2}]});\n                    $rootScope.logged=true\n                }\n            })\n\n            $stateProvider.state({\n                abstract: false,\n                templateUrl: 'src/cart/templates/cart.html',\n                name: 'cart',\n                url: '/cart',\n                resolve:{\n                },\n                onEnter:function ($rootScope, $httpBackend) {\n                    backedResponses($httpBackend)\n                    $rootScope.logged=true\n                    $rootScope.currentLang={code:'pl'}\n                },\n                controller: 'cart.CartCtrl'\n            })\n\n            $stateProvider.state({\n                abstract: false,\n                templateUrl: 'src/cart/templates/cart.html',\n                name: 'cart_unauthorized',\n                url: '/cart_u',\n                resolve:{\n                },\n                onEnter:function ($rootScope, $httpBackend) {\n                    backedResponses($httpBackend)\n                    $httpBackend.whenGET(/addresses\\?domainName=localhost/).respond(200, []);\n                    $httpBackend.whenGET(/address\\/addressPublic/).respond(200, []);\n                    $rootScope.logged=false\n                    $rootScope.currentLang={code:'pl'}\n                },\n                controller: 'cart.CartCtrl'\n            })\n\n            $stateProvider.state({\n                abstract: false,\n                templateUrl: 'src/category/templates/calc.html',\n                name: 'calc',\n                url: '/calc',\n                resolve:{\n                },\n                onEnter:function ($rootScope, $httpBackend,$stateParams) {\n                    $httpBackend.whenGET(/settings\\/getPublicSettings\\/additionalSettings/).respond(200, {\"onlyForCompanies\":{\"value\":\"\"},\"reclamationDays\":{\"value\":60},\"rssFeed\":{\"value\":\"http:\\/\\/vprojekt.eu\\/index.php\\/feed\\/\"},\"captchaPublicKey\":{\"value\":\"6Lc4aZwUAAAAAP9RfmPACWVNBNmrAhjPoUoITLoB\"},\"confirmButtonInCart\":{\"value\":1},\"recalculateInCart\":{\"value\":1},\"rssCharLimit\":{\"value\":4},\"separateConfirmButton\":{\"value\":1},\"filteredAttribute\":{\"value\":2},\"calcWithoutDelivery\":{\"value\":1},\"wcgaUsed\":{\"value\":1},\"confirmTextInCart\":{\"pl\":\"* O\\u015bwiadczam, \\u017ce zapozna\\u0142em si\\u0119 i akceptuj\\u0119 <a href=\\\"\\/pl\\/strona\\/regulamin\\\">regulamin<\\/a>. ( ! POLE OBOWI\\u0104ZKOWE ! )\",\"en\":\"* I declare that I have read and accept the <a href=\\\"\\/en\\/page\\/statute\\\">statute<\\/a>. ( ! REQUIRED ! )\",\"ru\":\"* \\u042f \\u0437\\u0430\\u044f\\u0432\\u043b\\u044f\\u044e, \\u0447\\u0442\\u043e \\u043f\\u0440\\u043e\\u0447\\u0438\\u0442\\u0430\\u043b \\u0438 \\u043f\\u0440\\u0438\\u043d\\u044f\\u043b <a href=\\\"\\/ru\\/site-ru\\/statute-ru\\\">\\u043f\\u0440\\u0430\\u0432\\u0438\\u043b\\u0430<\\/a>.  ( \\n! \\u041e\\u0411\\u042f\\u0417\\u0410\\u0422\\u0415\\u041b\\u042c\\u041dO ! )\"}});\n\n                    backedResponses($httpBackend)\n                    $httpBackend.whenGET(/ps_groups\\/\\/ps_types\\/oneForView\\/Przykladowy-produkt-produkt-prosty/).respond(200, {})\n                    $httpBackend.whenGET(/dp_products\\/\\/calcFilesUploader/).respond(200, [])\n                    $httpBackend.whenGET(/dp_categories\\/oneForView\\/promocje/).respond(200, [])\n                    $httpBackend.whenGET(/templateVariables\\/getVariables\\?templateName=calc/).respond(200, {\"response\":[{\"name\":\"attributeView\",\"value\":3},{\"name\":\"attributeRealisationColors\",\"value\":1},{\"name\":\"attributeRealisationView\",\"value\":1},{\"name\":\"attributeSendingView\",\"value\":1},{\"name\":\"productDescriptionView\",\"value\":1}]})\n                    $httpBackend.whenGET(/settings\\/getPublicSettings\\/general/).respond(200, {\"defaultUserType\":{\"value\":1},\"menuLeft\":{\"value\":0},\"skinName\":{\"value\":\"\"},\"defaultCurrency\":{\"value\":24},\"defaultLang\":{\"value\":16},\"defaultTax\":{\"value\":26},\"googleTagManager\":{\"value\":\"GTM-52MDDF9\"},\"synchronizeExternalApi\":{\"value\":0}})\n                    $httpBackend.whenGET(/tax\\/taxForProduct\\?groupID=undefined/).respond(200, [{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1,\"default\":1},{\"ID\":27,\"domainID\":4,\"name\":\"vat 7\",\"value\":7,\"active\":1}])\n                    $httpBackend.whenGET(/ps_groups\\/undefined\\/ps_types\\/undefined\\/ps_formats\\/formatsPublic\\/0/).respond(200, [{\"ID\":181,\"groupID\":49,\"typeID\":80,\"name\":\"10x10 cm (cyfra)\",\"adminName\":null,\"width\":100,\"height\":100,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":0,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":10,\"minHeight\":10,\"maxWidth\":300,\"maxHeight\":300,\"langs\":{\"pl\":{\"name\":\"10x10 cm (cyfra)\"},\"en\":{\"name\":\"10x10 cm (cyfra)\"},\"es\":{\"name\":\"10x10 cm (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":192,\"groupID\":49,\"typeID\":80,\"name\":\"10x10 cm (offset)\",\"adminName\":null,\"width\":100,\"height\":100,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":1,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"10x10 cm (offset)\"},\"en\":{\"name\":\"10x10 cm (offset)\"},\"es\":{\"name\":\"10x10 cm (offset)\"}},\"printTypes\":[{\"printTypeID\":1,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":193,\"groupID\":49,\"typeID\":80,\"name\":\"10x10 cm (wielki format)\",\"adminName\":null,\"width\":100,\"height\":100,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":2,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"10x10 cm (wielki format)\"},\"en\":{\"name\":\"10x10 cm (wielki format)\"},\"es\":{\"name\":\"10x10 cm (wielki format)\"}},\"printTypes\":[{\"printTypeID\":14,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":188,\"groupID\":49,\"typeID\":80,\"name\":\"A7 (105x74 mm) (cyfra)\",\"adminName\":null,\"width\":106,\"height\":75,\"slope\":1,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":3,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A7 (105x74 mm) (cyfra)\"},\"en\":{\"name\":\"A7 (105x74 mm) (cyfra)\"},\"es\":{\"name\":\"A7 (105x74 mm) (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":187,\"groupID\":49,\"typeID\":80,\"name\":\"A6 (148,5x105 mm) (cyfra)\",\"adminName\":null,\"width\":150,\"height\":107,\"slope\":1,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":4,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A6 (148,5x105 mm) (cyfra)\"},\"en\":{\"name\":\"A6 (148,5x105 mm) (cyfra)\"},\"es\":{\"name\":\"A6 (148,5x105 mm) (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":186,\"groupID\":49,\"typeID\":80,\"name\":\"A5 (148,5x210 mm)  (cyfra)\",\"adminName\":null,\"width\":150,\"height\":212,\"slope\":1,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":5,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A5 (148,5x210 mm)  (cyfra)\"},\"en\":{\"name\":\"A5 (148,5x210 mm)  (cyfra)\"},\"es\":{\"name\":\"A5 (148,5x210 mm)  (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":182,\"groupID\":49,\"typeID\":80,\"name\":\"A4 (210x297 mm) (cyfra)\",\"adminName\":null,\"width\":210,\"height\":297,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":6,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A4 (210x297 mm) (cyfra)\"},\"en\":{\"name\":\"A4 (210x297 mm) (cyfra)\"},\"es\":{\"name\":\"A4 (210x297 mm) (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":189,\"groupID\":49,\"typeID\":80,\"name\":\"A3 (420x297 mm) poziom (cyfra)\",\"adminName\":null,\"width\":420,\"height\":297,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":7,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A3 (420x297 mm) poziom (cyfra)\"},\"en\":{\"name\":\"A3 (420x297 mm) poziom (cyfra)\"},\"es\":{\"name\":\"A3 (420x297 mm) poziom (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":183,\"groupID\":49,\"typeID\":80,\"name\":\"A3 (297x420 mm) pion  (cyfra)\",\"adminName\":null,\"width\":297,\"height\":420,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":8,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A3 (297x420 mm) pion  (cyfra)\"},\"en\":{\"name\":\"A3 (297x420 mm) pion  (cyfra)\"},\"es\":{\"name\":\"A3 (297x420 mm) pion  (cyfra)\"}},\"printTypes\":[{\"printTypeID\":11,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":184,\"groupID\":49,\"typeID\":80,\"name\":\"1m x 1m (wielki format)\",\"adminName\":null,\"width\":1000,\"height\":1000,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":9,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"1m x 1m (wielki format)\"},\"en\":{\"name\":\"1m x 1m (wielki format)\"},\"es\":{\"name\":\"1m x 1m (wielki format)\"}},\"printTypes\":[{\"printTypeID\":14,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":185,\"groupID\":49,\"typeID\":80,\"name\":\"W\\u0142asny format (wielki format)\",\"adminName\":null,\"width\":null,\"height\":null,\"slope\":0,\"custom\":1,\"active\":1,\"interchangeability\":1,\"customID\":null,\"rows\":null,\"order\":10,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":120,\"minHeight\":120,\"maxWidth\":10000,\"maxHeight\":10000,\"langs\":{\"en\":{\"name\":\"W\\u0142asny format (wielki format)\"},\"es\":{\"name\":\"W\\u0142asny format (wielki format)\"},\"il\":{\"name\":\"W\\u0142asny format (wielki format)\"},\"pl\":{\"name\":\"W\\u0142asny format (wielki format)\"},\"ru\":{\"name\":\"W\\u0142asny format (wielki format)\"}},\"printTypes\":[{\"printTypeID\":14,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":190,\"groupID\":49,\"typeID\":80,\"name\":\"A2 (offset)\",\"adminName\":null,\"width\":420,\"height\":590,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":11,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"A2 (offset)\"},\"en\":{\"name\":\"A2 (offset)\"},\"es\":{\"name\":\"A2 (offset)\"}},\"printTypes\":[{\"printTypeID\":1,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]},{\"ID\":191,\"groupID\":49,\"typeID\":80,\"name\":\"25x25cm (offset)\",\"adminName\":null,\"width\":250,\"height\":250,\"slope\":0,\"custom\":0,\"active\":1,\"interchangeability\":0,\"customID\":null,\"rows\":null,\"order\":12,\"unit\":1,\"netWidth\":null,\"netHeight\":null,\"slopeExternalFront\":null,\"slopeExternalBack\":null,\"slopeExternalTop\":null,\"slopeExternalBottom\":null,\"addRidgeThickness\":0,\"wingtipFront\":null,\"wingtipFrontMin\":null,\"wingtipBack\":null,\"wingtipBackMin\":null,\"maximumTotalGrossWidth\":null,\"binding\":null,\"minWidth\":null,\"minHeight\":null,\"maxWidth\":null,\"maxHeight\":null,\"langs\":{\"pl\":{\"name\":\"25x25cm (offset)\"},\"en\":{\"name\":\"25x25cm (offset)\"},\"es\":{\"name\":\"25x25cm (offset)\"}},\"printTypes\":[{\"printTypeID\":1,\"minVolume\":\"\",\"maxVolume\":\"\",\"printTypeWorkspaceExist\":false}]}])\n                    $httpBackend.whenGET(/ps_groups\\/undefined\\/ps_types\\/undefined\\/ps_pages\\/pagesPublic/).respond(200, [{\"ID\":68,\"groupID\":49,\"typeID\":80,\"pages\":null,\"minPages\":1,\"maxPages\":1000,\"step\":1,\"name\":null,\"doublePage\":0,\"similar\":null}])\n                    $httpBackend.whenGET(/ps_groups\\/undefined\\/ps_types\\/selectedOptions\\/undefined/).respond(200, [{\"attrID\":-2,\"tooltip\":null,\"customName\":[]},{\"attrID\":-1,\"tooltip\":null,\"customName\":[]},{\"attrID\":1,\"attrName\":\"Druk\",\"attrSort\":2,\"minPages\":null,\"step\":null,\"maxPages\":null,\"names\":{\"en\":{\"name\":\"Print\"},\"pl\":{\"name\":\"Druk\"},\"es\":{\"name\":\"Druk\"}},\"tooltip\":null,\"options\":[{\"ID\":150,\"productOptionID\":1177,\"name\":\"UV kolor\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":11,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"en\":{\"name\":\"UV color\"},\"pl\":{\"name\":\"UV kolor\"},\"es\":{\"name\":\"UV kolor\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0},{\"attrID\":2,\"attrName\":\"Papier\",\"attrSort\":5,\"minPages\":null,\"step\":null,\"maxPages\":null,\"names\":{\"en\":{\"name\":\"Paper\"},\"pl\":{\"name\":\"Papier\"},\"es\":{\"name\":\"Papier\"}},\"tooltip\":null,\"options\":[{\"ID\":399,\"productOptionID\":1124,\"name\":\"01 - przyk\\u0142adowe pod\\u0142o\\u017ce - 100g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":0.1,\"invisible\":0,\"sort\":38,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"01 - przyk\\u0142adowe pod\\u0142o\\u017ce - 100g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)\"},\"en\":{\"name\":\"01 - przyk\\u0142adowe pod\\u0142o\\u017ce - 100g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)\"},\"es\":{\"name\":\"01 - przyk\\u0142adowe pod\\u0142o\\u017ce - 100g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":400,\"productOptionID\":1125,\"name\":\"02 - przyk\\u0142adowe pod\\u0142o\\u017ce - 500g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":0.5,\"invisible\":0,\"sort\":39,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"02 - przyk\\u0142adowe pod\\u0142o\\u017ce - 500g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)\"},\"en\":{\"name\":\"02 - przyk\\u0142adowe pod\\u0142o\\u017ce - 500g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)\"},\"es\":{\"name\":\"02 - przyk\\u0142adowe pod\\u0142o\\u017ce - 500g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":401,\"productOptionID\":1126,\"name\":\"03 - przyk\\u0142adowe pod\\u0142o\\u017ce - 1000g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":1,\"invisible\":0,\"sort\":40,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"03 - przyk\\u0142adowe pod\\u0142o\\u017ce - 1000g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)\"},\"en\":{\"name\":\"03 - przyk\\u0142adowe pod\\u0142o\\u017ce - 1000g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)\"},\"es\":{\"name\":\"03 - przyk\\u0142adowe pod\\u0142o\\u017ce - 1000g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":435,\"productOptionID\":1158,\"name\":\"brak\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":41,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"brak\"},\"en\":{\"name\":\"brak\"},\"es\":{\"name\":\"brak\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":511,\"productOptionID\":1637,\"name\":\"06 - przyk\\u0142adowa waga 1kg za sztuk\\u0119\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":43,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"06 - przyk\\u0142adowa waga 1kg za sztuk\\u0119\"},\"en\":{\"name\":\"06 - przyk\\u0142adowa waga 1kg za sztuk\\u0119\"},\"es\":{\"name\":\"06 - przyk\\u0142adowa waga 1kg za sztuk\\u0119\"}},\"slugs\":null,\"deliveries\":[27],\"excludesOptions\":[]},{\"ID\":512,\"productOptionID\":1638,\"name\":\"04 - przyk\\u0142adowa waga 10g za sztuk\\u0119\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":43,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"04 - przyk\\u0142adowa waga 10g za sztuk\\u0119\"},\"en\":{\"name\":\"04 - przyk\\u0142adowa waga 10g za sztuk\\u0119\"},\"es\":{\"name\":\"04 - przyk\\u0142adowa waga 10g za sztuk\\u0119\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":513,\"productOptionID\":1639,\"name\":\"05 - przyk\\u0142adowa waga 100g za sztuk\\u0119\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":43,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"05 - przyk\\u0142adowa waga 100g za sztuk\\u0119\"},\"en\":{\"name\":\"05 - przyk\\u0142adowa waga 100g za sztuk\\u0119\"},\"es\":{\"name\":\"05 - przyk\\u0142adowa waga 100g za sztuk\\u0119\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0},{\"attrID\":56,\"attrName\":\"cecha testowa\",\"attrSort\":53,\"minPages\":null,\"step\":null,\"maxPages\":null,\"names\":{\"pl\":{\"name\":\"cecha testowa\"},\"en\":{\"name\":\"cecha testowa\"},\"es\":{\"name\":\"cecha testowa\"}},\"tooltip\":null,\"options\":[{\"ID\":375,\"productOptionID\":1054,\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":0,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"},\"en\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"},\"es\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":376,\"productOptionID\":1053,\"name\":\"(02) sztuki produktu (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":1,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"},\"en\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"},\"es\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":377,\"productOptionID\":1055,\"name\":\"(03) komplet blach (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":2,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"},\"en\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"},\"es\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":378,\"productOptionID\":1056,\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":3,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"},\"en\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"},\"es\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":379,\"productOptionID\":1057,\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":4,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"},\"en\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"},\"es\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":380,\"productOptionID\":1058,\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":5,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"en\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"es\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":381,\"productOptionID\":1059,\"name\":\"(07) wszystkie strony (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":6,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"},\"en\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"},\"es\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":382,\"productOptionID\":1060,\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":7,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"en\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"es\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":383,\"productOptionID\":1061,\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":8,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"},\"en\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"},\"es\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":384,\"productOptionID\":1062,\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":9,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"},\"en\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"},\"es\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":385,\"productOptionID\":1063,\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":10,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"},\"en\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"},\"es\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":386,\"productOptionID\":1064,\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":11,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"},\"en\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"},\"es\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":387,\"productOptionID\":1065,\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":12,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"},\"en\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"},\"es\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":388,\"productOptionID\":1066,\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":13,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"},\"en\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"},\"es\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":389,\"productOptionID\":1067,\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":14,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"},\"en\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"},\"es\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":390,\"productOptionID\":1068,\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":15,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"},\"en\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"},\"es\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":391,\"productOptionID\":1069,\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":16,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"},\"en\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"},\"es\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":392,\"productOptionID\":1070,\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":17,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"},\"en\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"},\"es\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":393,\"productOptionID\":1071,\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":18,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"},\"en\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"},\"es\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":394,\"productOptionID\":1072,\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":19,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"},\"en\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"},\"es\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":395,\"productOptionID\":1073,\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":20,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"},\"en\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"},\"es\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":397,\"productOptionID\":1075,\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":21,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"},\"en\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"},\"es\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":402,\"productOptionID\":1078,\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":22,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"},\"en\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"},\"es\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":403,\"productOptionID\":1080,\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":23,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"},\"en\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"},\"es\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":404,\"productOptionID\":1083,\"name\":\"(25) metry kwadratowe dla formatu netto\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":24,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"},\"en\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"},\"es\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":434,\"productOptionID\":1121,\"name\":\"(26) metry kwadratowe dla stron\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":25,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(26) metry kwadratowe dla stron\"},\"en\":{\"name\":\"(26) metry kwadratowe dla stron\"},\"es\":{\"name\":\"(26) metry kwadratowe dla stron\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":436,\"productOptionID\":1123,\"name\":\"(27) cena procentowa (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":26,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(27) cena procentowa (jeden typ cennika)\"},\"en\":{\"name\":\"(27) cena procentowa (jeden typ cennika)\"},\"es\":{\"name\":\"(27) cena procentowa (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":440,\"productOptionID\":1166,\"name\":\"(28) pakiet\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":27,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(28) pakiet\"},\"en\":{\"name\":\"(28) pakiet\"},\"es\":{\"name\":\"(28) pakiet\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":444,\"productOptionID\":1635,\"name\":\"(29) paczka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":28,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(29) paczka\"},\"en\":{\"name\":\"(29) paczka\"},\"es\":{\"name\":\"(29) paczka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":443,\"productOptionID\":1167,\"name\":\"(30) sztuki produktu - cena dla nak\\u0142adu\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":29,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(30) sztuki produktu - cena dla nak\\u0142adu\"},\"en\":{\"name\":\"(30) sztuki produktu - cena dla nak\\u0142adu\"},\"es\":{\"name\":\"(30) sztuki produktu - cena dla nak\\u0142adu\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":510,\"productOptionID\":1636,\"name\":\"(31) wszystkie arkusze - cena dla nak\\u0142adu\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":30,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(31) wszystkie arkusze - cena dla nak\\u0142adu\"},\"en\":{\"name\":\"(31) wszystkie arkusze - cena dla nak\\u0142adu\"},\"es\":{\"name\":\"(31) wszystkie arkusze - cena dla nak\\u0142adu\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":432,\"productOptionID\":1094,\"name\":\"brak\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":35,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"brak\"},\"en\":{\"name\":\"brak\"},\"es\":{\"name\":\"brak\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":620,\"productOptionID\":2034,\"name\":\"cm\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":41,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"cm\"},\"en\":{\"name\":\"cm\"},\"es\":{\"name\":\"cm\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0},{\"attrID\":57,\"attrName\":\"cecha testowa dla wybranych stron\",\"attrSort\":54,\"minPages\":1,\"step\":1,\"maxPages\":5,\"names\":{\"pl\":{\"name\":\"cecha testowa dla wybranych stron\"},\"en\":{\"name\":\"cecha testowa dla wybranych stron\"},\"es\":{\"name\":\"cecha testowa dla wybranych stron\"}},\"tooltip\":null,\"options\":[{\"ID\":433,\"productOptionID\":1127,\"name\":\"brak\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":0,\"emptyChoice\":true,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"brak\"},\"en\":{\"name\":\"brak\"},\"es\":{\"name\":\"brak\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":407,\"productOptionID\":1128,\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":1,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(01) # wszystkie arkusze (jeden typ cennika)\"},\"en\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"},\"es\":{\"name\":\"(01) wszystkie arkusze (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":408,\"productOptionID\":1129,\"name\":\"(02) sztuki produktu (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":2,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(02) # sztuki produktu (jeden typ cennika)\"},\"en\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"},\"es\":{\"name\":\"(02) sztuki produktu (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":409,\"productOptionID\":1130,\"name\":\"(03) komplet blach (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":3,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"},\"en\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"},\"es\":{\"name\":\"(03) komplet blach (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":410,\"productOptionID\":1131,\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":4,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"},\"en\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"},\"es\":{\"name\":\"(04) metry kwadratowe (jeden typ cennika) - dzia\\u0142a gdy jest 1 kartka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":411,\"productOptionID\":1132,\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":5,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(05) # obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"},\"en\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"},\"es\":{\"name\":\"(05) obw\\u00f3d w metrach (jeden typ cennika)  - dzia\\u0142a gdy jest 1 kartka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":412,\"productOptionID\":1133,\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":6,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"en\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"es\":{\"name\":\"(06) wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":413,\"productOptionID\":1134,\"name\":\"(07) wszystkie strony (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":7,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(07) # wszystkie strony (jeden typ cennika)\"},\"en\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"},\"es\":{\"name\":\"(07) wszystkie strony (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":414,\"productOptionID\":1135,\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":8,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(08) # wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"en\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"},\"es\":{\"name\":\"(08) wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":415,\"productOptionID\":1136,\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":9,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"},\"en\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"},\"es\":{\"name\":\"(09) sztuki produktu (przedzia\\u0142 cenowy dla arkuszy) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":416,\"productOptionID\":1137,\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":10,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"},\"en\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"},\"es\":{\"name\":\"(10) sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":417,\"productOptionID\":1138,\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":11,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(11) # sztuki produktu - cena procentowa (jeden typ cennika)\"},\"en\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"},\"es\":{\"name\":\"(11) sztuki produktu - cena procentowa (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":418,\"productOptionID\":1139,\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":12,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(12) # d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"},\"en\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"},\"es\":{\"name\":\"(12) d\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":419,\"productOptionID\":1140,\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":13,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(13) # d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"},\"en\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"},\"es\":{\"name\":\"(13) d\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":420,\"productOptionID\":1141,\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":14,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(14) # ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"},\"en\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"},\"es\":{\"name\":\"(14) ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":421,\"productOptionID\":1142,\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":15,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"},\"en\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"},\"es\":{\"name\":\"(15) ilo\\u015b\\u0107 farby w litrach (przedzia\\u0142 cenowy dla nak\\u0142adu) dla maszyn Jetrion\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":422,\"productOptionID\":1143,\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":16,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"},\"en\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"},\"es\":{\"name\":\"(16) sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":423,\"productOptionID\":1144,\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":17,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(17) # d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"},\"en\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"},\"es\":{\"name\":\"(17) d\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":424,\"productOptionID\":1145,\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":18,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"},\"en\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"},\"es\":{\"name\":\"(18) metry kwadratowe zu\\u017cytego materia\\u0142u (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":425,\"productOptionID\":1146,\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":19,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"},\"en\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"},\"es\":{\"name\":\"(19) Ilo\\u015b\\u0107 wszystkich falc\\u00f3w (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":426,\"productOptionID\":1147,\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":20,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"},\"en\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"},\"es\":{\"name\":\"(20) Powierzchnia zu\\u017cytych arkuszy (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":427,\"productOptionID\":1148,\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":21,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"},\"en\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"},\"es\":{\"name\":\"(21) Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy) (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":428,\"productOptionID\":1149,\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":22,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"},\"en\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"},\"es\":{\"name\":\"(22) zbieranie po falcowaniu (jeden typ cennika)\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":429,\"productOptionID\":1150,\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":23,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(23) # d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"},\"en\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"},\"es\":{\"name\":\"(23) d\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":430,\"productOptionID\":1151,\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":24,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(24) # d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"},\"en\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"},\"es\":{\"name\":\"(24) d\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":431,\"productOptionID\":1152,\"name\":\"(25) metry kwadratowe dla formatu netto\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":25,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"},\"en\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"},\"es\":{\"name\":\"(25) metry kwadratowe dla formatu netto\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":437,\"productOptionID\":1154,\"name\":\"(26) metry kwadratowe dla stron\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":26,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(26) metry kwadratowe dla stron\"},\"en\":{\"name\":\"(26) metry kwadratowe dla stron\"},\"es\":{\"name\":\"(26) metry kwadratowe dla stron\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":438,\"productOptionID\":1155,\"name\":\"(27) cena procentowa\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":27,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(27) cena procentowa\"},\"en\":{\"name\":\"(27) cena procentowa\"},\"es\":{\"name\":\"(27) cena procentowa\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":441,\"productOptionID\":1160,\"name\":\"(28) ilo\\u015b\\u0107 produkt\\u00f3w w pakiecie\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":28,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(28) ilo\\u015b\\u0107 produkt\\u00f3w w pakiecie\"},\"en\":{\"name\":\"(28) ilo\\u015b\\u0107 produkt\\u00f3w w pakiecie\"},\"es\":{\"name\":\"(28) ilo\\u015b\\u0107 produkt\\u00f3w w pakiecie\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":442,\"productOptionID\":1161,\"name\":\"(29) Paczka\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":29,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"(29) Paczka\"},\"en\":{\"name\":\"(29) Paczka\"},\"es\":{\"name\":\"(29) Paczka\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0},{\"attrID\":71,\"attrName\":\"sztancowanie (powi\\u0105zane z formatem druku)\",\"attrSort\":65,\"minPages\":null,\"step\":null,\"maxPages\":null,\"names\":{\"pl\":{\"name\":\"sztancowanie (powi\\u0105zane z formatem druku)\"},\"en\":{\"name\":\"sztancowanie (powi\\u0105zane z formatem druku)\"},\"es\":{\"name\":\"sztancowanie (powi\\u0105zane z formatem druku)\"}},\"tooltip\":null,\"options\":[{\"ID\":527,\"productOptionID\":1678,\"name\":\"brak\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":1,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"brak\"},\"en\":{\"name\":\"brak\"},\"es\":{\"name\":\"brak\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]},{\"ID\":528,\"productOptionID\":1679,\"name\":\"sztancowanie\",\"minThickness\":null,\"maxThickness\":null,\"minPages\":null,\"maxPages\":null,\"sizePage\":null,\"invisible\":0,\"sort\":2,\"emptyChoice\":false,\"default\":0,\"iconID\":null,\"authorizedOnlyCalculation\":0,\"names\":{\"pl\":{\"name\":\"sztancowanie\"},\"en\":{\"name\":\"sztancowanie\"},\"es\":{\"name\":\"sztancowanie\"}},\"slugs\":null,\"deliveries\":null,\"excludesOptions\":[]}],\"selectByPicture\":0}])\n                    $httpBackend.whenGET(/ps_typeDescriptions\\/typeDescriptionsPublic\\?groupID=undefined&typeID=undefined/).respond(200, [{\"ID\":60,\"typeID\":80,\"descID\":59,\"order\":0,\"langs\":{\"pl\":{\"name\":\"Opis pola wyboru - cecha testowa\",\"description\":\"<p>Produkt przygotowany poni\\u017cej ma ustawione parametry prezentuj\\u0105ce r\\u00f3\\u017cne sposoby wyliczania ceny. Warto\\u015bci, kt\\u00f3rymi si\\u0119 pos\\u0142u\\u017cy\\u0142em pokazuj\\u0105 jak dzia\\u0142a dana metoda.<\\/p><p>W przypadku gdy w cenniku pos\\u0142ugujemy si\\u0119 cen\\u0105 zmniejszaj\\u0105c\\u0105 si\\u0119 dla rosn\\u0105cych nak\\u0142ad\\u00f3w (im wy\\u017cszy nak\\u0142ad tym ni\\u017csza cena), pomi\\u0119dzy warto\\u015bciami brzegowymi wpisanymi w przedzia\\u0142y program wylicza \\u015bredni\\u0105 arytmetyczn\\u0105 dla ilo\\u015bci i ceny z konkretnego przedzia\\u0142u.<\\/p><p>Niekt\\u00f3re cechy opisa\\u0142em jedn\\u0105 warto\\u015bci\\u0105, by pokaza\\u0107, \\u017ce zmiana warto\\u015bci zale\\u017cy od np: ilo\\u015bci sztuk, &nbsp;grubo\\u015bci pod\\u0142o\\u017ca, powierzchni, obwodu.&nbsp;<\\/p><p>Ka\\u017cda opcja cechy (warto\\u015b\\u0107 wybierana z pola wyboru) ma mo\\u017cliwo\\u015b\\u0107 ustawienia (w przypadku tego produktu nie u\\u017cy\\u0142em tych mo\\u017cliwo\\u015bci):<\\/p><ul><li>ceny za start (warto\\u015b\\u0107 doliczana jednorazowo do warto\\u015bci wyliczonej z cennik\\u00f3w)<\\/li><li>ceny minimalnej (warto\\u015b\\u0107 brana pod uwag\\u0119 do czasu, a\\u017c cena z cennik\\u00f3w przekroczy cen\\u0119 minimaln\\u0105)<\\/li><li>kosztu za start jak i ka\\u017cd\\u0105 opcj\\u0119 cechy (mo\\u017cna u\\u017cy\\u0107 tej funkcjonalno\\u015bci do wyliczenia rentowno\\u015bci, albo do ustalenia drugiego cennika)<\\/li><\\/ul>\"}},\"descType\":1,\"isOpen\":false,\"visible\":0,\"countFormats\":0,\"formats\":[]},{\"ID\":61,\"typeID\":80,\"descID\":60,\"order\":0,\"langs\":{\"pl\":{\"name\":\"Opis poszczeg\\u00f3lnych cennik\\u00f3w (metod wyliczania ceny)\",\"description\":\"<p>Poni\\u017cej opisa\\u0142em jak dzia\\u0142aj\\u0105 poszczeg\\u00f3lne metody wyliczania cen, we wszystkich przypadkach pos\\u0142uguj\\u0119 si\\u0119 danymi dost\\u0119pnymi w panelu administracyjnym wybieraj\\u0105c:<br>Rodzaj cennika z rozwijanej listy <br>w pola: Ilo\\u015b\\u0107 (przedzia\\u0142), Cena jednostkowa, Koszt jednostkowy wpisa\\u0142em warto\\u015bci przyk\\u0142adowe (dla druku cyfrowego o formacie SRA3, druk offsefowy i wielkoformatowy maj\\u0105 wpisane inne warto\\u015bci).<\\/p><ol><li><b>Przeloty (wszystkie arkusze)<\\/b> - Program wylicza ile arkuszy jest potrzebnych do wydrukowania danej pracy (na podstawie zdefiniowanych format\\u00f3w, kt\\u00f3re mo\\u017cna w\\u0142o\\u017cy\\u0107 do maszyny drukuj\\u0105cej oraz formatu produktu wybieranego z rozwijanej listy lub podanego przez u\\u017cytkownika (je\\u015bli taka opcja jest w\\u0142\\u0105czona) i za ka\\u017cdy arkusz dolicza warto\\u015b\\u0107 zdefiniowan\\u0105 w przedzia\\u0142ach, w przypadku tej opcji wpisa\\u0142em: <br><u>1 arkusz<\\/u> - 10 z\\u0142, <u>10 arkuszy<\\/u> - 8 z\\u0142, <u>100 arkuszy<\\/u> - 7 z\\u0142 (cena dotyczy jednego arkusza w podanym nak\\u0142adzie). Cena zale\\u017cy od formatu papieru jaki wk\\u0142adamy do maszyny drukuj\\u0105cej, formatu pracy i nak\\u0142adu.<\\/li><li><b>Sztuki produktu<\\/b>&nbsp;<b>- cena dla jednostki <\\/b>- Program liczy podane w tabeli warto\\u015bci dla ka\\u017cdej sztuki produktu. Cena nie zale\\u017cy od formatu ani obj\\u0119to\\u015bci, w przypadku tej opcji wpisa\\u0142em: <br><u>1 sztuka<\\/u> - 10 z\\u0142, <u>10 sztuk<\\/u> - 8 z\\u0142, <u>100 sztuk<\\/u> - 7 z\\u0142 (cena dotyczy jednej sztuki w nak\\u0142adzie).<\\/li><li><b>Komplety blach (ilo\\u015b\\u0107 arkuszy drukarskich)<\\/b> - Program sprawdza ile u\\u017cytk\\u00f3w zmie\\u015bci si\\u0119 na arkuszu i dla prac wielostronicowych wylicza ile rodzaj\\u00f3w arkuszy (arkuszy drukarskich) jest potrzebne do wydrukowania danej pracy, do ka\\u017cdego rodzaju arkusza (arkusza drukarskiego) dolicza warto\\u015bci z tabeli.  w przypadku tej opcji wpisa\\u0142em: <br><u>1 arkusz<\\/u> (ka\\u017cdy arkusz drukarski)- 10 z\\u0142. Tego rodzaju cennika mo\\u017cna u\\u017cy\\u0107 do okre\\u015blenia warto\\u015bci przyrz\\u0105du (ustawienia maszyny drukuj\\u0105cej) \\u0142\\u0105cznie z blachami.<\\/li><li><b>Metry kwadratowe<\\/b> - Program wylicza ile metr\\u00f3w kwadratowych jest potrzebne do wydrukowania danej pracy, <u>spad jest brany pod uwag\\u0119<\\/u>, cena zale\\u017cy wy\\u0142\\u0105cznie od powierzchni brutto pracy (\\u0142\\u0105cznie ze spadem), metoda dzia\\u0142a dla sztuki produktu nie bior\\u0105c pod uwag\\u0119 obj\\u0119to\\u015bci, w przypadku tej opcji wpisa\\u0142em: <br><u>1 m\\u00b2<\\/u> - 10 z\\u0142, <u>10 m\\u00b2<\\/u> - 8 z\\u0142, <u>100 m\\u00b2<\\/u> - 7 z\\u0142 (cena dotyczy jednego metra kwadratowego przy zam\\u00f3wieniu odpowiedniej (podanej w przedzia\\u0142ach) ilo\\u015bci metr\\u00f3w kwadratowych). (dzia\\u0142a gdy jest jedna kartka, nie dzia\\u0142a dla produkt\\u00f3w wielostronicowych)<\\/li><li><b>Obw\\u00f3d w metrach<\\/b> - (dzia\\u0142a gdy jest jedna kartka, nie dzia\\u0142a dla produkt\\u00f3w wielostronicowych)<br><u>1 m<\\/u> - 10 z\\u0142<\\/li><li><b>Wszystkie arkusze (przedzia\\u0142 cenowy dla nak\\u0142adu)<\\/b> - Program wylicza ile arkuszy jest potrzebnych do wydrukowania danej pracy (na podstawie zdefiniowanych format\\u00f3w, kt\\u00f3re mo\\u017cna w\\u0142o\\u017cy\\u0107 do maszyny drukuj\\u0105cej oraz formatu produktu wybieranego z rozwijanej listy lub podanego przez u\\u017cytkownika (je\\u015bli taka opcja jest w\\u0142\\u0105czona) i za ka\\u017cdy arkusz dolicza warto\\u015b\\u0107 zdefiniowan\\u0105 dla nak\\u0142adu produktu (inaczej ni\\u017c dla pierwszej metody), w przypadku tej opcji wpisa\\u0142em: <br><u>1 arkusz<\\/u> - 10 z\\u0142, <u>10 arkuszy<\\/u> - 8 z\\u0142, <u>100 arkuszy<\\/u> - 7 z\\u0142 (cena dotyczy jednego arkusza w podanym nak\\u0142adzie). Cena zale\\u017cy od formatu papieru jaki wk\\u0142adamy do maszyny drukuj\\u0105cej, formatu pracy i nak\\u0142adu (z nak\\u0142adu produktu s\\u0105 brane przedzia\\u0142y ilo\\u015bciowe).<\\/li><li><b>Wszystkie strony<\\/b> (jeden typ cennika) - 1 strona - 10 z\\u0142, 10 stron - 8 z\\u0142, 100 stron - 7 z\\u0142 (cena dotyczy jednej strony w podanym nak\\u0142adzie).&nbsp;<\\/li><li><b>Wszystkie strony (przedzia\\u0142 cenowy dla nak\\u0142adu) <\\/b>- 1 strona - 10 z\\u0142, 10 stron - 8 z\\u0142, 100 stron - 7 z\\u0142 (cena dotyczy jednej strony w nak\\u0142adzie pobieranym z nak\\u0142adu produktu).<\\/li><li><b>Sztuki produktu (przedzia\\u0142 cenowy dla arkuszy)<\\/b> - Program dolicza zdefiniowan\\u0105 w przedzia\\u0142ach warto\\u015b\\u0107 do ka\\u017cdej sztuki produktu w zale\\u017cno\\u015bci od tego ile arkuszy do druku jest potrzebnych do wydrukowania danej pracy, w przypadku tej opcji wpisa\\u0142em: <br><u>1 arkusz<\\/u> - 1 z\\u0142, <u>10 arkuszy<\\/u> - 5 z\\u0142, <u>100 arkuszy<\\/u> - 10 z\\u0142 (cena dotyczy jednego arkusza w podanym nak\\u0142adzie).<\\/li><li><b>Sztuki produktu (przedzia\\u0142 dla obj\\u0119to\\u015bci w mm)<\\/b> - Cena zale\\u017cy od grubo\\u015bci egzemplarza w mm, by funkcja zadzia\\u0142a\\u0142a musimy mie\\u0107 wpisan\\u0105 grubo\\u015b\\u0107 poszczeg\\u00f3lnych pod\\u0142o\\u017cy, w tym przypadku ustawi\\u0142em przedzia\\u0142y: <br><u>od 1 do 5 mm<\\/u> w cenie 1 z\\u0142 za sztuk\\u0119 produktu, <br><u>6-10 mm<\\/u> - 2 z\\u0142, <u>11-20 mm<\\/u> - 3 z\\u0142,<u> 21-30 mm<\\/u> - 4 z\\u0142, <u>31-40 mm<\\/u> - 5 z\\u0142, <u>100 mm<\\/u> 10 z\\u0142, <br>co oznacza, \\u017ce od 40 do 100 mm b\\u0119dzie wyliczana \\u015brednia cena pomi\\u0119dzy 5 z\\u0142 a 10 z\\u0142 - w zale\\u017cno\\u015bci od grubo\\u015bci egzemplarza,<br>grubo\\u015b\\u0107 pracy jest wyliczana z cechy papier, kt\\u00f3ra ma nast\\u0119puj\\u0105ce opcje: <ul><li>01 - przyk\\u0142adowe pod\\u0142o\\u017ce - <u>100 g\\/m\\u00b2 (grubo\\u015b\\u0107 0,1 mm)<\\/u><\\/li><li>02 - przyk\\u0142adowe pod\\u0142o\\u017ce - <u>500 g\\/m\\u00b2 (grubo\\u015b\\u0107 0,5 mm)<\\/u><\\/li><li>03 - przyk\\u0142adowe pod\\u0142o\\u017ce - <u>1000 g\\/m\\u00b2 (grubo\\u015b\\u0107 1,0 mm)<\\/u><\\/li><\\/ul><\\/li><li><b>Sztuki produktu - cena procentowa<\\/b> - funkcja dodaje do wyliczonej warto\\u015bci z poprzedzaj\\u0105cych j\\u0105 innych rodzaj\\u00f3w cennik\\u00f3w przypisanych do danej opcji cechy krotno\\u015b\\u0107 podanego wsp\\u00f3\\u0142czynnika procentowego, <u>gdzie cena jednostkowa 1 to 100%<\\/u>.<br>W przypadku tej opcji ustawi\\u0142em cennik:<br>- Przeloty (wszystkie arkusze) gdzie za ka\\u017cdy arkusz jest doliczane 10 z\\u0142, <br>- Sztuki produktu gdzie za ka\\u017cd\\u0105 sztuk\\u0119 jest doliczany 1 z\\u0142.<br>Cennik: Sztuki produktu - cena procentowa, ma wpisane nast\\u0119puj\\u0105ce warto\\u015bci:<br>1 sztuka - 2&nbsp;<\\/li><li><b>D\\u0142ugo\\u015b\\u0107 w m po d\\u0142u\\u017cszym boku<\\/b> - dla sztuki produktu, obj\\u0119to\\u015b\\u0107 nie ma wp\\u0142ywu ce wyliczon\\u0105 cen\\u0119, w przypadku tej opcji wpisa\\u0142em: <u>1 m - 10 z\\u0142<\\/u>, dla warto\\u015bci ni\\u017cszych jest wyliczana \\u015brednia, jednostk\\u0105 w przypadku tej cechy jest metr, gdy d\\u0142ugo\\u015b\\u0107 wynosi np 50 cm wyliczana cena b\\u0119dzie wynosi\\u0107 5 z\\u0142<\\/li><li><b>D\\u0142ugo\\u015b\\u0107 w m po kr\\u00f3tszym boku <\\/b>- dla sztuki produktu, obj\\u0119to\\u015b\\u0107 nie ma wp\\u0142ywu ce wyliczon\\u0105 cen\\u0119, w przypadku tej opcji wpisa\\u0142em: <u>1 m - 10 z\\u0142<\\/u>, dla warto\\u015bci ni\\u017cszych jest wyliczana \\u015brednia, jednostk\\u0105 w przypadku tej cechy jest metr, gdy d\\u0142ugo\\u015b\\u0107 wynosi np 40 cm wyliczana cena b\\u0119dzie wynosi\\u0107 4 z\\u0142<\\/li><li><b>Ilo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w<\\/b>, w przedziale 1 ustawiamy cen\\u0119 za 2 u\\u017cytki, dla nieparzystych ilo\\u015bci program wyliczy \\u015bredni\\u0105, cena nie zale\\u017cy od formatu, tylko od ilo\\u015bci stron (u\\u017cytk\\u00f3w) w wyliczanej pracy, w przypadku tej opcji wpisa\\u0142em: <u>1 u\\u017cytek - 10 z\\u0142<\\/u>, co dla zwi\\u0119kszenia obj\\u0119to\\u015bci o 1 zwi\\u0119ksza cen\\u0119 o 5 z\\u0142<\\/li><li><b>Ilo\\u015b\\u0107 farby w litrach<\\/b> (przedzia\\u0142 cenowy dla nak\\u0142adu) - funkcja wyliczaj\\u0105ca zu\\u017cycie farby, przygotowana dla maszyn Jetrion na podstawie analizy zawarto\\u015bci pliku, u\\u017cycie jej wymaga&nbsp;<\\/li><li><b>Sztuki produktu (przedzia\\u0142 cenowy dla ilo\\u015bci stron)<\\/b> &nbsp;- program dolicza zdefiniowan\\u0105 warto\\u015b\\u0107 w zale\\u017cno\\u015bci od obj\\u0119to\\u015bci liczonej w stronach, <br>w tym przypadku wpisa\\u0142em dla <u>1 strony - 1 z\\u0142<\\/u>, dla <u>10 stron - 2 z\\u0142<\\/u>, dla <u>100 stron - 3 z\\u0142<\\/u><\\/li><li><b>D\\u0142ugo\\u015b\\u0107 wszystkich u\\u017cytk\\u00f3w w metrach<\\/b> &nbsp;- program liczy obw\\u00f3d wszystkich u\\u017cytk\\u00f3w, <br>w tym przypadku wpisa\\u0142em wpisa\\u0142em dla <u>1 m - 10 z\\u0142<\\/u><\\/li><li><b>Metry kwadratowe zu\\u017cytego materia\\u0142u<\\/b> - &nbsp;liczy powierzchni\\u0119 \\u0142\\u0105cznie ze spadem dla sztuki produktu, w przypadku tej opcji wpisa\\u0142em: <u>1 m\\u00b2 - 10 z\\u0142, <\\/u>obj\\u0119to\\u015b\\u0107\\/ilo\\u015b\\u0107 stron nie ma wp\\u0142ywu na cen\\u0119<\\/li><li><b>Ilo\\u015b\\u0107 wszystkich falc\\u00f3w<\\/b> - do konfiguracji tej cechy niezb\\u0119dne jest ustawienie formatu strony w rozk\\u0142ad\\u00f3wkach (wyliczane i wy\\u015bwietlane parametry s\\u0105 rozdzielne i tak dla katalogu o formacie A4 podajemy format rozk\\u0142ad\\u00f3wki), oraz uzupe\\u0142nienie papier\\u00f3w o maksymaln\\u0105 ilo\\u015b\\u0107 falc\\u00f3w dla danej gramatury czy rodzaju papieru.<\\/li><li><b>Powierzchnia zu\\u017cytych arkuszy<\\/b> - program liczy powierzchni\\u0119 wszystkich wykorzystanych arkuszy bior\\u0105c pod uwag\\u0119 r\\u00f3wnie\\u017c zwy\\u017cki,  ten typ wyliczania ceny nadaje si\\u0119 do u\\u017cywania w produktach nie wielkoformatowych (do wielkiego formatu istniej\\u0105 inne rodzaje cen). W przedziale podajemy ilo\\u015b\\u0107 m\\u00b2 a w cenie - cen\\u0119 za 1 m\\u00b2, w przypadku tej opcji wpisa\\u0142em: <u>1 m\\u00b2 - 10 z\\u0142<\\/u>,&nbsp;<\\/li><li><b>Powierzchnia zu\\u017cytych arkuszy (przedzia\\u0142 dla arkuszy)<\\/b> - program liczy powierzchni\\u0119 wszystkich wykorzystanych arkuszy bior\\u0105c pod uwag\\u0119 r\\u00f3wnie\\u017c zwy\\u017cki, ten typ wyliczania ceny nadaje si\\u0119 do u\\u017cywania w produktach nie wielkoformatowych (do wielkiego formatu istniej\\u0105 inne rodzaje cen). W przedziale podajemy ilo\\u015b\\u0107 arkuszy a w cenie - cen\\u0119 za 1 m\\u00b2, w przypadku tej opcji wpisa\\u0142em: <u>1 m\\u00b2 - 10 z\\u0142,&nbsp;<\\/u><\\/li><li><b>Zbieranie po falcowaniu <\\/b>- program liczy ile arkuszy mamy do zbierania po falcowaniu, wynik dzia\\u0142ania zale\\u017cy od tego jakie parametry mamy ustawione dla papieru ile razy papier mo\\u017ce by\\u0107 \\u0142amany (falcowany), np dla arkusza A2 i formatu pracy A4<br><ul><li>dla maksymalnej ilo\\u015bci falc\\u00f3w 3 arkusz b\\u0119dzie nie b\\u0119dzie rozcinany i zostanie sfalcowany w 16-stk\\u0119 - z ka\\u017cdego arkusza drukarskiego mamy 1 arkusz do zbierania<\\/li><li>dla maksymalnej ilo\\u015bci falc\\u00f3w 2 arkusz b\\u0119dzie rozci\\u0119ty na 2 cz\\u0119\\u015bci b\\u0119dzie sfalcowany w 8-k\\u0119 - z ka\\u017cdego arkusza drukarskiego mamy 2 arkusze do zbierania<\\/li><li>dla maksymalnej ilo\\u015bci falc\\u00f3w 1 arkusz b\\u0119dzie rozci\\u0119ty na 4 cz\\u0119\\u015bci i zostanie sfalcowany w 4-k\\u0119 - z ka\\u017cdego arkusza drukarskiego mamy 4 arkusze do zbierania<\\/li><\\/ul><\\/li><li><b>D\\u0142ugo\\u015b\\u0107 w metrach dla szeroko\\u015bci <\\/b>- dla sztuki produktu, obj\\u0119to\\u015b\\u0107 nie ma wp\\u0142ywu wyliczon\\u0105 cen\\u0119, w przypadku tej opcji wpisa\\u0142em: 1 m - 10 z\\u0142, dla warto\\u015bci ni\\u017cszych jest wyliczana \\u015brednia, jednostk\\u0105 w przypadku tej cechy jest metr, gdy d\\u0142ugo\\u015b\\u0107 wynosi np 50 cm wyliczana cena b\\u0119dzie wynosi\\u0107 5 z\\u0142<\\/li><li><b>D\\u0142ugo\\u015b\\u0107 w metrach dla wysoko\\u015bci<\\/b> - dla sztuki produktu, obj\\u0119to\\u015b\\u0107 nie ma wp\\u0142ywu wyliczon\\u0105 cen\\u0119, w przypadku tej opcji wpisa\\u0142em: 1 m - 10 z\\u0142, dla warto\\u015bci ni\\u017cszych jest wyliczana \\u015brednia, jednostk\\u0105 w przypadku tej cechy jest metr, gdy d\\u0142ugo\\u015b\\u0107 wynosi np 50 cm wyliczana cena b\\u0119dzie wynosi\\u0107 5 z\\u0142<\\/li><li><b>Metry kwadratowe dla formatu netto<\\/b> - Program wylicza ile metr\\u00f3w kwadratowych jest potrzebne do wydrukowania danej pracy, <u>spad nie jest brany pod uwag\\u0119<\\/u>, cena zale\\u017cy wy\\u0142\\u0105cznie od powierzchni netto pracy, metoda dzia\\u0142a dla sztuki produktu nie bior\\u0105c pod uwag\\u0119 obj\\u0119to\\u015bci, w przypadku tej opcji wpisa\\u0142em: <br>1 m\\u00b2 - 10 z\\u0142, 10 m\\u00b2 - 8 z\\u0142, 100 m\\u00b2 - 7 z\\u0142 (cena dotyczy jednego metra kwadratowego przy zam\\u00f3wieniu odpowiedniej (podanej w przedzia\\u0142ach) ilo\\u015bci metr\\u00f3w kwadratowych, dzia\\u0142a gdy jest jedna kartka, nie dzia\\u0142a dla produkt\\u00f3w wielostronicowych)<\\/li><li><b>Metry kwadratowe dla stron<\\/b> - Program wylicza ile metr\\u00f3w kwadratowych jest potrzebne do wydrukowania danej pracy, bior\\u0105c pod uwag\\u0119 obj\\u0119to\\u015b\\u0107 i spad, cena zale\\u017cy od powierzchni brutto stron, ilo\\u015bci stron i nak\\u0142adu, w przypadku tej opcji wpisa\\u0142em:&nbsp;<br><u>1 m\\u00b2 <\\/u>- 10 z\\u0142, <u>10 m\\u00b2<\\/u> - 8 z\\u0142, <u>100 m\\u00b2<\\/u> - 7 z\\u0142 (cena dotyczy jednego metra kwadratowego przy zam\\u00f3wieniu odpowiedniej (podanej w przedzia\\u0142ach) ilo\\u015bci metr\\u00f3w kwadratowych, dzia\\u0142a dla produkt\\u00f3w wielostronicowych)<\\/li><li><b>Cena procentowa<\\/b> - funkcja mno\\u017cy przez podany wsp\\u00f3\\u0142czynnik procentowy inne rodzaje cennik\\u00f3w przypisane do danej opcji cechy. Cena jednostkowa 1 to 100%.&nbsp;<\\/li><li><b>Pakiet<\\/b> - funkcja umo\\u017cliwia podzia\\u0142 zam\\u00f3wienia na mniejsze cz\\u0119\\u015bci o zdefiniowanej ilo\\u015bci o okre\\u015blonej warto\\u015bci, mo\\u017ce s\\u0142u\\u017cy\\u0107 np do wyliczenie kompletowania, banderolowania, pakowania w foli\\u0119 termokurczliw\\u0105 itp. Funkcjonalno\\u015b\\u0107 dzia\\u0142a, dla cechy, kt\\u00f3ra jest zdefiniowana jako Definiowana ilo\\u015b\\u0107 operacji na opcji (- tak zdefiniowana cecha w\\u0142\\u0105cza spiner) w ten spos\\u00f3b pozwalamy klientowi okre\\u015bli\\u0107 spos\\u00f3b pakowania produktu w okre\\u015blonych przez niego ilo\\u015bciach i doliczy\\u0107 odpowiedni\\u0105 warto\\u015b\\u0107 (cen\\u0119 pakietu).W przypadku gdy ustawimy ograniczenia dla cechy umo\\u017cliwiaj\\u0105ce zdefiniowanie przez klienta pakietu o wy\\u017cszej ilo\\u015bci ni\\u017c nak\\u0142ad, w\\u00f3wczas zostanie doliczony jeden pakiet.W przypadku gdy ilo\\u015b\\u0107 pakiet\\u00f3w wyliczana z r\\u00f3wnania (nak\\u0142ad\\/(ilo\\u015b\\u0107 sztuk w pakiecie)) jest u\\u0142amkiem, wynik dzielenia zamieniamy na liczb\\u0119 naturaln\\u0105.<\\/li><li><b>Paczka<\\/b> - dzia\\u0142anie metody polega na okre\\u015bleniu ile razy zdefiniowana warto\\u015b\\u0107 ma by\\u0107 doliczona do warto\\u015bci zam\\u00f3wienia. Funkcjonalno\\u015b\\u0107 dzia\\u0142a, dla cechy, kt\\u00f3ra jest zdefiniowana jako Definiowana ilo\\u015b\\u0107 operacji na opcji (- tak zdefiniowana cecha w\\u0142\\u0105cza spiner)<\\/li><li><b>Sztuki produktu - cena dla nak\\u0142adu<\\/b> - Program liczy cen\\u0119 sztuki produktu na podstawie warto\\u015bci dla nak\\u0142adu, r\\u00f3\\u017cnica pomi\\u0119dzy metod\\u0105 <u>sztuki produktu - cena dla jednostki<\\/u> a <u>sztuki produktu - cena dla nak\\u0142adu<\\/u> jest taka, \\u017ce nawet przy du\\u017cym spadku warto\\u015bci w przedzia\\u0142ach cena mniejszej ilo\\u015bci sztuk nie b\\u0119dzie wy\\u017csza ni\\u017c cena wi\\u0119kszej ilo\\u015bci. Cena nie zale\\u017cy od formatu ani obj\\u0119to\\u015bci<\\/li><\\/ol>\"}},\"descType\":1,\"isOpen\":false,\"visible\":0,\"countFormats\":0,\"formats\":[]},{\"ID\":78,\"typeID\":80,\"descID\":77,\"order\":0,\"langs\":{\"pl\":{\"name\":\"miniatura\",\"description\":null}},\"descType\":6,\"isOpen\":false,\"visible\":0,\"countFormats\":0,\"formats\":[],\"files\":[{\"ID\":415,\"descID\":77,\"fileID\":72,\"domainID\":4,\"path\":\"0\\/IMG_6731_5.JPG\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/0\\/IMG_6731_5.JPG\",\"urlCrop\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/thumbs\\/0\\/IMG_6731_5.JPG\"}]},{\"ID\":165,\"typeID\":80,\"descID\":137,\"order\":1,\"langs\":{\"pl\":{\"name\":\"galeria\",\"description\":null}},\"descType\":5,\"isOpen\":false,\"visible\":0,\"countFormats\":0,\"formats\":[],\"files\":[{\"ID\":416,\"descID\":137,\"fileID\":74,\"domainID\":4,\"path\":\"0\\/IMG_6739_1.JPG\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/0\\/IMG_6739_1.JPG\",\"urlCrop\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/thumbs\\/0\\/IMG_6739_1.JPG\"},{\"ID\":417,\"descID\":137,\"fileID\":73,\"domainID\":4,\"path\":\"0\\/IMG_6738.JPG\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/0\\/IMG_6738.JPG\",\"urlCrop\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/thumbs\\/0\\/IMG_6738.JPG\"}]}])\n                     $httpBackend.whenPOST(/ps_groups\\/\\/ps_types\\/\\/ps_calculate\\/calculatePublic/,undefined,headers=>{\n                         return headers.hasOwnProperty('x-http-method-override')\n                     }).respond(200, {\"volumes\":[{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":1,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"39,33\",\"basePrice\":\"39,33\",\"weight\":0.01,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"48,38\",\"baseGrossPrice\":\"48,38\",\"oldPrice\":3933.4700000000003,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}},\"volume\":1,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":2,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"48,22\",\"basePrice\":\"48,22\",\"weight\":0.01,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"59,32\",\"baseGrossPrice\":\"59,32\",\"oldPrice\":4822.358888888889,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}},\"volume\":2,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":5,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"78,40\",\"basePrice\":\"78,40\",\"weight\":0.01,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"96,44\",\"baseGrossPrice\":\"96,44\",\"oldPrice\":7840.2844444444445,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}},\"volume\":5,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":10,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"89,32\",\"basePrice\":\"99,25\",\"weight\":0.02,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":10,\"priceBrutto\":\"109,87\",\"baseGrossPrice\":\"122,08\",\"oldPrice\":9924.876666666667,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":{\"1\":1002.4125433333335,\"2\":1091.7364333333335,\"10\":942.8632833333334},\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},\"notSelectedPrintTypes\":[{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}]},\"volume\":10,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":20,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"142,65\",\"basePrice\":\"158,50\",\"weight\":0.03,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":10,\"priceBrutto\":\"175,46\",\"baseGrossPrice\":\"194,95\",\"oldPrice\":15849.616666666667,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":{\"1\":1600.8112833333334,\"2\":1743.4578333333336,\"10\":1505.7135833333332},\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}},\"volume\":20,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":50,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"235,90\",\"basePrice\":\"262,11\",\"weight\":0.08,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":10,\"priceBrutto\":\"290,15\",\"baseGrossPrice\":\"322,39\",\"oldPrice\":26210.666666666668,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":{\"1\":2647.2773333333334,\"2\":2883.1733333333336,\"10\":2490.0133333333333},\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},\"notSelectedPrintTypes\":[{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}]},\"volume\":50,\"custom\":false},{\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":100,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"235,78\",\"basePrice\":\"235,78\",\"weight\":0.16,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"290,00\",\"baseGrossPrice\":\"290,00\",\"oldPrice\":23577.600000000002,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},\"notSelectedPrintTypes\":[{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}]},\"volume\":100,\"custom\":false}],\"realisationTimes\":[{\"ID\":1,\"name\":\"Standard\",\"days\":5,\"pricePercentage\":1,\"active\":1,\"order\":0,\"color\":\"#2e7522\",\"names\":{\"en\":\"Standard\",\"pl\":\"Standard\",\"ru\":\"\\u0441\\u0442\\u0430\\u043d\\u0434\\u0430\\u0440\\u0442\"},\"date\":\"2022-12-30\",\"volumes\":[{\"price\":\"39,73\",\"priceBrutto\":\"48,87\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"48,71\",\"priceBrutto\":\"59,91\",\"basePrice\":\"48,22\",\"baseGrossPrice\":\"59,32\",\"volume\":2,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"79,19\",\"priceBrutto\":\"97,40\",\"basePrice\":\"78,40\",\"baseGrossPrice\":\"96,44\",\"volume\":5,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"90,22\",\"priceBrutto\":\"110,97\",\"basePrice\":\"99,25\",\"baseGrossPrice\":\"122,08\",\"volume\":10,\"date\":null,\"active\":true,\"weight\":0.02,\"custom\":false,\"oldPrice\":\"100,24\",\"oldPriceBrutto\":\"123,30\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"144,07\",\"priceBrutto\":\"177,21\",\"basePrice\":\"158,50\",\"baseGrossPrice\":\"194,95\",\"volume\":20,\"date\":null,\"active\":true,\"weight\":0.03,\"custom\":false,\"oldPrice\":\"160,08\",\"oldPriceBrutto\":\"196,90\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"238,25\",\"priceBrutto\":\"293,05\",\"basePrice\":\"262,11\",\"baseGrossPrice\":\"322,39\",\"volume\":50,\"date\":null,\"active\":true,\"weight\":0.08,\"custom\":false,\"oldPrice\":\"264,73\",\"oldPriceBrutto\":\"325,62\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"238,13\",\"priceBrutto\":\"292,90\",\"basePrice\":\"235,78\",\"baseGrossPrice\":\"290,00\",\"volume\":100,\"date\":null,\"active\":true,\"weight\":0.16,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0}]},{\"ID\":2,\"name\":\"Ekspresowy\",\"days\":2,\"pricePercentage\":10,\"active\":1,\"order\":1,\"color\":\"#ad2525\",\"names\":{\"en\":\"Express\",\"pl\":\"Ekspresowy\",\"ru\":\"\\u044d\\u043a\\u0441\\u043f\\u0440\\u0435\\u0441\\u0441\"},\"date\":\"2022-12-27\",\"volumes\":[{\"price\":\"43,27\",\"priceBrutto\":\"53,22\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"53,05\",\"priceBrutto\":\"65,25\",\"basePrice\":\"48,22\",\"baseGrossPrice\":\"59,32\",\"volume\":2,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"86,24\",\"priceBrutto\":\"106,08\",\"basePrice\":\"78,40\",\"baseGrossPrice\":\"96,44\",\"volume\":5,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"98,26\",\"priceBrutto\":\"120,86\",\"basePrice\":\"99,25\",\"baseGrossPrice\":\"122,08\",\"volume\":10,\"date\":null,\"active\":true,\"weight\":0.02,\"custom\":false,\"oldPrice\":\"109,17\",\"oldPriceBrutto\":\"134,28\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"156,91\",\"priceBrutto\":\"193,00\",\"basePrice\":\"158,50\",\"baseGrossPrice\":\"194,95\",\"volume\":20,\"date\":null,\"active\":true,\"weight\":0.03,\"custom\":false,\"oldPrice\":\"174,35\",\"oldPriceBrutto\":\"214,45\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"259,49\",\"priceBrutto\":\"319,17\",\"basePrice\":\"262,11\",\"baseGrossPrice\":\"322,39\",\"volume\":50,\"date\":null,\"active\":true,\"weight\":0.08,\"custom\":false,\"oldPrice\":\"288,32\",\"oldPriceBrutto\":\"354,63\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"259,35\",\"priceBrutto\":\"319,00\",\"basePrice\":\"235,78\",\"baseGrossPrice\":\"290,00\",\"volume\":100,\"date\":null,\"active\":true,\"weight\":0.16,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0}]},{\"ID\":10,\"name\":\"Ekonomiczny\",\"days\":11,\"pricePercentage\":-5,\"active\":1,\"order\":2,\"color\":\"#ad9831\",\"names\":{\"en\":\"Economic\",\"pl\":\"Ekonomiczny\",\"ru\":\"\\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u0439\"},\"date\":\"2023-01-10\",\"volumes\":[{\"price\":\"37,37\",\"priceBrutto\":\"45,96\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"45,81\",\"priceBrutto\":\"56,35\",\"basePrice\":\"48,22\",\"baseGrossPrice\":\"59,32\",\"volume\":2,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"74,48\",\"priceBrutto\":\"91,61\",\"basePrice\":\"78,40\",\"baseGrossPrice\":\"96,44\",\"volume\":5,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0},{\"price\":\"84,86\",\"priceBrutto\":\"104,37\",\"basePrice\":\"99,25\",\"baseGrossPrice\":\"122,08\",\"volume\":10,\"date\":null,\"active\":true,\"weight\":0.02,\"custom\":false,\"oldPrice\":\"94,29\",\"oldPriceBrutto\":\"115,97\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"135,51\",\"priceBrutto\":\"166,68\",\"basePrice\":\"158,50\",\"baseGrossPrice\":\"194,95\",\"volume\":20,\"date\":null,\"active\":true,\"weight\":0.03,\"custom\":false,\"oldPrice\":\"150,57\",\"oldPriceBrutto\":\"185,20\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"224,10\",\"priceBrutto\":\"275,64\",\"basePrice\":\"262,11\",\"baseGrossPrice\":\"322,39\",\"volume\":50,\"date\":null,\"active\":true,\"weight\":0.08,\"custom\":false,\"oldPrice\":\"249,00\",\"oldPriceBrutto\":\"306,27\",\"percentageDiscount\":10,\"promotionType\":\"discount\"},{\"price\":\"223,99\",\"priceBrutto\":\"275,50\",\"basePrice\":\"235,78\",\"baseGrossPrice\":\"290,00\",\"volume\":100,\"date\":null,\"active\":true,\"weight\":0.16,\"custom\":false,\"oldPrice\":0,\"oldPriceBrutto\":0}]}],\"response\":true,\"customVolume\":{\"custom\":false},\"volumeInfo\":{\"custom\":true,\"maxVolume\":10000},\"technologies\":[{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}}]})\n                    $httpBackend.whenPOST(/ps_groups\\/\\/ps_types\\/\\/ps_calculate\\/calculatePublic/).respond(200, {\"products\":[{\"groupID\":49,\"typeID\":80,\"formatID\":181,\"formatWidth\":100,\"formatHeight\":100,\"pages\":1,\"attributes\":{\"1\":{\"controllerID\":11,\"attrPages\":null,\"attrID\":1,\"optID\":150,\"all\":{\"volume\":1,\"sheets\":31,\"sheetsAfterCut\":31,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":null,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[],\"devices\":[],\"marginsParts\":{\"\":{\"value\":0,\"type\":\"nature\"}}}},\"2\":{\"controllerID\":23,\"attrPages\":null,\"attrID\":2,\"optID\":399,\"paperPriceKG\":{\"weightKg\":0.19334700000000002,\"priceForKg\":10000,\"price\":1933.4700000000003,\"expenseForKg\":0,\"expense\":0},\"all\":{\"volume\":1,\"sheets\":31,\"sheetsAfterCut\":31,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":null,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[],\"devices\":[],\"marginsParts\":{\"1\":{\"value\":0,\"type\":\"nature\"}}}},\"56\":{\"controllerID\":2,\"attrPages\":null,\"attrID\":56,\"optID\":375,\"all\":{\"volume\":1,\"sheets\":1,\"sheetsAfterCut\":1,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":null,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[\"sheet\"],\"devices\":[],\"marginsParts\":{\"\":{\"value\":0,\"type\":\"nature\"}}}},\"57\":{\"controllerID\":2,\"attrPages\":1,\"attrID\":57,\"optID\":413,\"all\":{\"volume\":1,\"sheets\":1,\"sheetsAfterCut\":1,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":1,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[\"allPages\"],\"devices\":[],\"marginsParts\":{\"\":{\"value\":0,\"type\":\"nature\"}}}},\"71\":{\"controllerID\":11,\"attrPages\":null,\"attrID\":71,\"optID\":527,\"all\":{\"volume\":1,\"sheets\":1,\"sheetsAfterCut\":1,\"projectSheets\":1,\"area\":{\"size\":0.010000000000000002,\"sizeNet\":0.010000000000000002},\"perimeter\":0.4,\"attrPages\":null,\"pages\":1,\"size\":0.05,\"longSide\":100,\"shortSide\":100,\"uzytki\":0.5,\"repeatedOperationsNumber\":0,\"workUnits\":[],\"priceFunctions\":[],\"devices\":[],\"marginsParts\":{\"\":{\"value\":0,\"type\":\"nature\"}}}}},\"printTypeID\":11,\"workspaceID\":23,\"thickness\":0.05,\"usePerSheet\":4,\"pageRanges\":{\"minimumPages\":1,\"maximumPages\":1000,\"minimumWarning\":[],\"maximumWarning\":[]}}],\"info\":null,\"response\":true,\"calculation\":{\"amount\":1,\"groupID\":49,\"typeID\":80,\"volume\":1,\"marginParts\":{\"\":{\"value\":0,\"type\":\"supplier\"},\"material\":{\"value\":0,\"type\":\"nature\"}},\"price\":\"39,33\",\"basePrice\":\"39,33\",\"weight\":0.01,\"expense\":0,\"attrDiscount\":0,\"percentageDiscount\":false,\"priceBrutto\":\"48,38\",\"baseGrossPrice\":\"48,38\",\"oldPrice\":3933.4700000000003,\"tax\":{\"ID\":26,\"domainID\":4,\"name\":\"vat 23\",\"value\":23,\"active\":1},\"realisationTimeDiscounts\":[],\"priceListIcon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"},\"priceLists\":{\"ID\":2,\"name\":\"cyfrowy\",\"iconID\":64,\"allowJoinProcess\":1,\"names\":{\"en\":\"digital print\",\"pl\":\"druk cyfrowy\"},\"icon\":{\"ID\":64,\"name\":\"digital.svg\",\"path\":\"0\\/digital.svg\",\"created\":\"2022-11-05 08:37:55\",\"destination\":\"priceListIcon\",\"url\":\"http:\\/\\/localtest.me\\/static\\/uploadedFiles\\/25\\/priceListIcons\\/0\\/digital.svg\"}},\"currency\":{\"ID\":24,\"domainID\":4,\"code\":\"PLN\",\"course\":100,\"active\":1}},\"realisationTimes\":{\"80\":{\"1\":{\"ID\":1,\"name\":\"Standard\",\"days\":5,\"pricePercentage\":1,\"active\":1,\"order\":0,\"color\":\"#2e7522\",\"names\":{\"en\":\"Standard\",\"pl\":\"Standard\",\"ru\":\"\\u0441\\u0442\\u0430\\u043d\\u0434\\u0430\\u0440\\u0442\"},\"date\":\"2022-12-30\",\"volumes\":[{\"price\":\"39,73\",\"priceBrutto\":\"48,87\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false}]},\"2\":{\"ID\":2,\"name\":\"Ekspresowy\",\"days\":2,\"pricePercentage\":10,\"active\":1,\"order\":1,\"color\":\"#ad2525\",\"names\":{\"en\":\"Express\",\"pl\":\"Ekspresowy\",\"ru\":\"\\u044d\\u043a\\u0441\\u043f\\u0440\\u0435\\u0441\\u0441\"},\"date\":\"2022-12-27\",\"volumes\":[{\"price\":\"43,27\",\"priceBrutto\":\"53,22\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false}]},\"10\":{\"ID\":10,\"name\":\"Ekonomiczny\",\"days\":11,\"pricePercentage\":-5,\"active\":1,\"order\":2,\"color\":\"#ad9831\",\"names\":{\"en\":\"Economic\",\"pl\":\"Ekonomiczny\",\"ru\":\"\\u044d\\u043a\\u043e\\u043d\\u043e\\u043c\\u0438\\u0447\\u0435\\u0441\\u043a\\u043e\\u0439\"},\"date\":\"2023-01-10\",\"volumes\":[{\"price\":\"37,37\",\"priceBrutto\":\"45,96\",\"basePrice\":\"39,33\",\"baseGrossPrice\":\"48,38\",\"volume\":1,\"date\":null,\"active\":true,\"weight\":0.01,\"custom\":false}]}}},\"correctCalculation\":true,\"errors\":[]})\n                    $rootScope.logged=true\n                    $rootScope.currentLang={code:'pl'}\n                    $rootScope.customBreadcrumbs={group:'bla'}\n                    $stateParams.typeurl='Przykladowy-produkt-produkt-prosty'\n                    $stateParams.groupurl='Przykladowa-grupa-produktow'\n                    $stateParams.categoryurl='promocje'\n                },\n                controller: 'category.CalcCtrl'\n            })\n\n        }","start":17,"end":107,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["$stateProvider.state","$httpBackend.whenGET","backedResponses","$httpBackend.whenPOST","headers.hasOwnProperty"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js:route:null","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/demo/routes.js","module":null,"name":"route","kind":"route","nodeType":"Object","dependenciesDI":[],"antiPatterns":[],"text":"// route: ui-router   controller=","start":1,"end":1,"route":null,"symbol":null,"metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/filters/MenuTypesFilter.js:3-55:filter:menutypes","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/filters/MenuTypesFilter.js","module":null,"name":"menutypes","kind":"filter","nodeType":"Function","dependenciesDI":["$rootScope"],"antiPatterns":[],"text":"angular.module('dpClient.app').filter('menutypes', function ( $rootScope ) {\n    function checkChilds(childs) {\n        var filtered = [];\n        _.each(childs, function (child) {\n            if (!_.isUndefined(child.groups) && !_.isNull(child.groups) && !_.isEmpty(child.groups)) {\n                filtered = _.union(filtered, checkGroups(child.groups));\n            }\n            if (!_.isUndefined(child.types) && !_.isNull(child.types) && !_.isEmpty(child.types)) {\n                filtered = _.union(filtered, child.types);\n            }\n        });\n        return filtered;\n    }\n\n    function checkGroups(groups) {\n        var filtered = [];\n        _.each(groups, function (group) {\n            if (!_.isNull(group) && !_.isUndefined(group.types) && !_.isEmpty(group.types)) {\n                filtered = _.union(filtered, group.types);\n            }\n        });\n        return filtered;\n    }\n\n    return function (items) {\n        if (_.isUndefined(items) || _.isEmpty(items)) {\n            return [];\n        }\n        _.each(items, function (item) {\n            var filtered = [];\n            if (!_.isUndefined(item.childs) && !_.isNull(item.childs) && !_.isEmpty(item.childs)) {\n                filtered = _.union(filtered, checkChilds(item.childs));\n            }\n            if (!_.isUndefined(item.groups) && !_.isNull(item.groups) && !_.isEmpty(item.groups)) {\n                filtered = _.union(filtered, checkGroups(item.groups));\n            }\n            if (!_.isUndefined(item.types) && !_.isNull(item.types) && !_.isEmpty(item.types)) {\n                filtered = _.union(filtered, item.types);\n            }\n            filtered = _.sortBy(_.uniq(filtered, function (item) {\n                return item.ID;\n            }), function( item ) {\n                if(item.names != undefined && $rootScope.currentLang != undefined) {\n                    return item.names[$rootScope.currentLang.code];\n                }\n                return item.name;\n            });\n            item.allTypes = filtered;\n        });\n        return items;\n\n    };\n});","start":3,"end":55,"route":null,"symbol":"menutypes","metadata":{"calls_functions":["angular.module","_.each","_.isUndefined","_.isNull","_.isEmpty","_.union","checkGroups","checkChilds","_.sortBy","_.uniq"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":23,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/routes/main.js:4-6:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/routes/main.js","module":null,"name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$locationProvider","$stateProvider","$urlRouterProvider"],"antiPatterns":[],"text":"        function($locationProvider, $stateProvider ) {\n\n        }","start":4,"end":6,"route":null,"symbol":"anonymous","metadata":{"calls_functions":[],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/cart/CartCtrl.js:11-1423:controller:cart.CartCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/cart/CartCtrl.js","module":null,"name":"cart.CartCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$filter","DpOrderService","DeliveryService","DpProductService","AddressService","DpAddressService","AuthService","PaymentService","ProductFileService","UserService","AuthDataService","CalculationService","CountriesService","RegisterWidget","Notification","FileUploader","$state","$q","$config","$modal","$timeout","LoginWidgetService","DeliveryWidgetService","TemplateRootService","CouponService","TokenService","EditorProjectService","SocialWidgetService","SettingService","CommonService","$sce","CountService","CartWidgetService","vcRecaptchaService","DpCartsDataService","MainWidgetService"],"antiPatterns":[],"text":"    .controller('cart.CartCtrl', function ($scope, $rootScope, $filter, DpOrderService, DeliveryService, DpProductService,\n                                           AddressService, DpAddressService, AuthService, PaymentService,\n                                           ProductFileService, UserService, AuthDataService, CalculationService,\n                                           CountriesService, RegisterWidget, Notification, FileUploader, $state, $q,\n                                           $config, $modal, $timeout, LoginWidgetService, DeliveryWidgetService,\n                                           TemplateRootService, CouponService, TokenService, EditorProjectService,\n                                           SocialWidgetService, SettingService, CommonService, $sce, CountService,\n                                           CartWidgetService, vcRecaptchaService, DpCartsDataService, MainWidgetService) {\n\n        var _timeout;\n        var _overallTimeout;\n\n        $scope._ = _;\n\n        $scope.isCollapsed = false;\n        $scope.cart = {};\n        $scope.deliveries = [];\n        $scope.addresses = [];\n        $scope.blockCart = false;\n        $scope.payments = [];\n        $scope.preventPayment = false;\n        $scope.paymentsOffset = 0;\n        $scope.countries = [];\n        $scope.coupons = [];\n        $scope.onlyForCompanies = false;\n        $scope.confirmButtonInCart = false;\n        $scope.userCanRecalculateCart = false;\n        $scope.reCountProductExist = false;\n        $scope.confirmTextInCart = {};\n        $scope.senders = [];\n        $scope.confirmButton = false;\n        $scope.showSeparateConfirmButton = false;\n\n        $scope.form = {};\n        $scope.noRegisterForm = {};\n\n        $scope.canJoinAddresses = false;\n        $scope.addressToJoin = {};\n\n        $scope.connectedIndexes = {};\n        $scope.connectDeliveryPrices = {};\n\n        $scope.joinedDelivery = {};\n\n        $scope.capthaResponse = null;\n        $scope.captchaWidgetId = null;\n\n        $rootScope.$watch('logged', function (logged) {\n        });\n\n        $scope.setResponse = function (response) {\n            console.info('Captcha response available');\n            $scope.capthaResponse = response;\n        };\n        $scope.setCaptchaWidgetId = function (widgetId) {\n            console.info('Created captcha widget ID: %s', widgetId);\n            $scope.captchaWidgetId = widgetId;\n        };\n        $scope.setCaptchaExpiration = function () {\n            console.info('Captcha expired. Resetting response object');\n            vcRecaptchaService.reload($scope.captchaWidgetId);\n            $scope.capthaResponse = null;\n        };\n\n        $rootScope.$on('Delivery:change', function (event) {\n\n        });\n        $rootScope.$on('delivery', function (e, productAddresses) {\n            if ($scope.cart.deliveryConnected) {\n                $scope.cart.deliveryGrossPrice = productAddresses[0].priceGross\n                $scope.cart.deliveryPrice = productAddresses[0].price\n            } else {\n                $scope.cart.deliveryGrossPrice = _.reduce($scope.cart.products, (all, product) => {\n                    return all + _.reduce(product.addresses, (all, address) => {\n                        return all + _.parseFloat(address.priceGross)\n                    }, 0)\n                }, 0)\n                $scope.cart.deliveryPrice = _.reduce($scope.cart.products, (all, product) => {\n                    return all + _.reduce(product.addresses, (all, address) => {\n                        return all + _.parseFloat(address.price)\n                    }, 0)\n                }, 0)\n            }\n            $scope.allDeliveryPrice()\n        })\n        $rootScope.$on('Cart:copied', function () {\n            getCartData();\n        });\n\n        $rootScope.$on('Cart:deleted', function () {\n            getCartData();\n        });\n\n        $rootScope.$on('productFileChanged', function () {\n            getCartData();\n        });\n\n        var Setting = new SettingService('additionalSettings');\n\n        var init = function () {\n\n            CountriesService.getAll().then(function (dataCountries) {\n                $scope.countries = dataCountries;\n            });\n\n            Setting.getPublicSettings().then(function(settingsData) {\n                if( settingsData.confirmButtonInCart ) {\n                    $scope.confirmButtonInCart = settingsData.confirmButtonInCart.value;\n                    $scope.confirmTextInCart = settingsData.confirmTextInCart;\n                }\n                if(settingsData.onlyForCompanies) {\n                    $scope.onlyForCompanies = settingsData.onlyForCompanies.value;\n                }\n                if( settingsData.recalculateInCart ) {\n                    $scope.userCanRecalculateCart = settingsData.recalculateInCart.value;\n                }\n                if( settingsData.separateConfirmButton ) {\n                    $scope.showSeparateConfirmButton = settingsData.separateConfirmButton.value;\n                }\n                if (settingsData.captchaPublicKey) {\n                    $scope.model = {\n                        key: settingsData.captchaPublicKey.value\n                    };\n                }\n                $scope.fixFile = settingsData.fixFile.value;\n\n            });\n\n            getCartData();\n\n        };\n\n        function getAddresses() {//TODO\n            var def = $q.defer();\n\n            if ($rootScope.logged) {\n\n                AddressService.getForUser().then(function (data) {\n                    def.resolve(data);\n                });\n\n            } else {\n                AddressService.getAddressesFromSession().then(function (addresses) {\n                    AddressService.getAll(addresses).then(function (data) {\n                        def.resolve(data);\n                    });\n                });\n            }\n\n            return def.promise;\n        }\n\n        function getCartData() {\n\n            var projects = [];\n            $scope.coupons = [];\n            $scope.cart.overallAddresses = [{}];\n            $scope.connectDeliveryPrices = {};\n            $scope.connectedIndexes = {};\n\n            $scope.reCountProductExist = false;\n            $scope.dataLoading = true;\n\n            DpOrderService.getCart().then(function (data) {\n\n                if (data.response === false) {\n                    $scope.dataLoading = false;\n                    return;\n                }\n\n                if (data.order !== undefined) {\n                    $scope.cart.deliveryConnected = data.order.deliveryConnected;\n                    $scope.cart.currency = data.order.currency;\n                    $scope.cart.currencySymbol = data.order.currencySymbol;\n                    $scope.cart.userMail = data.order.userMail;\n                    $scope.cart.userTelephone = data.order.defaultAddress.areaCode + '' + data.order.defaultAddress.telephone;\n                    $scope.cart.userFullName = data.order.defaultAddress.name + ' ' + data.order.defaultAddress.lastname;\n                }\n\n                DeliveryService.getAll().then(function (deliveries) {\n\n                    PaymentService.getAll(data.order.ID).then(function (paymentsData) {\n\n                        $scope.paymentsOffset = (4 % paymentsData.length) * 3;\n\n                        _.each(paymentsData, function(payment) {\n                            if( payment.deferredPayment && payment.creditLimit ) {\n                                payment.tooltipInfo = $filter('translate')(payment.infoForUser) + ' ' + payment.creditLimit\n                                    + '/' + payment.unpaidValue + ' ' + payment.baseCurrency;\n                            } else {\n                                payment.tooltipInfo = $filter('translate')('no_credit_limit');\n                            }\n                        });\n\n                        $scope.payments = paymentsData;\n\n                        $scope.deliveries = deliveries;\n\n                        $scope.cart.deliveryPrice = 0;\n                        $scope.cart.deliveryGrossPrice = 0;\n\n                        _.each(data.order.products, function (product, index) {\n\n                            if( product.beforeReCountPriceID > 0 ) {\n                                $scope.reCountProductExist = true;\n                            }\n\n                            if (typeof product.deliveryPrice === 'string') {\n                                product.deliveryPrice = product.deliveryPrice.replace(',', '.');\n                            }\n                            $scope.cart.deliveryPrice += parseFloat(product.deliveryPrice);\n                            if (typeof product.deliveryPriceGross === 'string') {\n                                product.deliveryPriceGross = product.deliveryPriceGross.replace(',', '.');\n                            }\n                            $scope.cart.deliveryGrossPrice += parseFloat(product.deliveryPriceGross);\n\n                            var cartIndex = _.findIndex(data.carts, {productID: product.productID});\n                            if (cartIndex > -1 && !_.isEmpty(data.carts[cartIndex].ProductAddresses) && data.carts[cartIndex].ProductAddresses !== null) {\n                                if (data.carts[cartIndex].ProductAddresses[0].commonRealisationTime &&\n                                    data.carts[cartIndex].ProductAddresses[0].commonDeliveryID > 0) {\n                                    var tmpDate = new Date(null);\n                                    tmpDate.setTime(data.carts[cartIndex].ProductAddresses[0].commonRealisationTime);\n                                    product.realisationDate = tmpDate;\n                                } else {\n                                    product.realisationDate = Date.parse(product.realisationDate);\n                                }\n                            }\n\n                            product.addresses = [];\n                            var pAddresses;\n\n                            var pIdx = _.findIndex(data.carts, {productID: product.productID});\n\n                            if (pIdx > -1) {\n                                pAddresses = data.carts[pIdx].ProductAddresses;\n                            }\n\n                            if (!_.isEmpty(pAddresses)) {\n                                product.addresses = pAddresses;\n                            }\n\n\n                            product.checked = true;\n\n                            /**\n                             *\n                             * @param {Array} product.fileList\n                             */\n                            product.fileList = [];\n                            product.lastFile = {};\n                            ProductFileService.getAll(product.productID).then(function (attributes) {\n                                product.fileList = attributes;\n                                product.lastFile = _.last(_.sortBy(attributes, function (sortableFile) {\n                                    return sortableFile.created;\n                                }));\n                                product.availableFilesToFix=false\n                                attributes.forEach(attr=>{\n                                    if(attr.files.find((file)=>(file.dimensionsValid===0 || file.pagesDiff>0))!=undefined){\n                                        product.availableFilesToFix= true\n                                    }\n                                })\n\n                            });\n\n                            if (product.projectID) {\n                                EditorProjectService.getProjectPrev(product.projectID).then(function (prevData) {\n                                    if (prevData && prevData.length > 0) {\n                                        product.prevPages = prevData;\n                                    }\n                                });\n                            }\n\n                            if(product.projectID) {\n                                projects.push(product.projectID);\n                            }\n\n                            var findIndex;\n                            if( index === (data.order.products.length - 1) && projects.length > 0) {\n                                EditorProjectService.getProjectsData(projects).then(function(projectsData) {\n                                    if( projectsData.length > 0 ) {\n                                        _.each(projectsData, function(oneProject) {\n                                            findIndex = -1;\n                                            if( oneProject.projectName ) {\n                                                findIndex = _.findIndex(data.order.products, {projectID: oneProject._id});\n                                                if( findIndex > -1 ) {\n                                                    data.order.products[findIndex].projectName = oneProject.projectName;\n                                                }\n                                            }\n                                        });\n                                    }\n                                });\n                            }\n\n                        });\n                        $scope.dataLoading = false;\n                        $scope.cart.products = data.order.products;\n                        $scope.cart.sumPrice = data.order.sumPrice;\n                        $scope.cart.sumGrossPrice = data.order.sumGrossPrice;\n\n                        $scope.cart.sumCalcPrice = data.order.sumCalcPrice;\n                        $scope.cart.sumCalcGrossPrice = data.order.sumCalcGrossPrice;\n\n                        getAddresses().then(function (allAddress) {\n\n                            $scope.addresses = allAddress.addresses;\n                            if($rootScope.logged && $scope.addresses.length==0){\n                                fillReceiverAddress(true)\n                            }\n\n                        });\n\n                    });\n\n                });\n            });\n\n        }\n\n        $scope.$watch('countries', function (countries) {\n\n            if (_.isEmpty(countries)) {\n                return;\n            }\n\n            RegisterWidget.initCodeRegister($scope, countries);\n            RegisterWidget.initCodeWithoutRegister($scope, countries);\n\n        });\n\n        $scope.selectCountry = function (prefix, withoutRegister) {\n\n            if (withoutRegister) {\n                RegisterWidget.selectCountryWithoutRegister($scope, prefix);\n            } else {\n                RegisterWidget.selectCountryRegister($scope, prefix);\n            }\n\n        };\n\n\n        var checkFiles = function () {\n            var def = $q.defer();\n\n            var emptyProducts = 0;\n\n            _.each($scope.cart.products, function (product, index) {\n\n                if (product.fileList.length === 0) {\n                    emptyProducts++;\n                }\n\n                if (index === ($scope.cart.products.length - 1)) {\n                    def.resolve(emptyProducts);\n                }\n\n            });\n\n            return def.promise;\n        };\n\n        $scope.deleteProduct = function (product) {\n\n            CartWidgetService.deleteProduct($scope, product).then(function (response) {\n                if (response) {\n                    Notification.success($filter('translate')('product_deleted'));\n                    getCartData()\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n\n\n            });\n        };\n\n        $scope.showDelivery = function (product) {\n\n            showDelivery(product);\n\n        };\n\n        function fillDeliveryInfo(scope, address) {\n\n            var _addressTimeout = null;\n            var def = $q.defer();\n\n            var adrIdx = _.findIndex(scope.addresses, {ID: parseInt(address.addressID)});\n            if (adrIdx > -1) {\n                address.details = scope.addresses[adrIdx];\n            }\n\n            var sdrIdx = _.findIndex(scope.senders, {type: parseInt(address.senderID)});\n            if (sdrIdx > -1) {\n                address.senderName = $filter('translate')(scope.senders[sdrIdx].name);\n            }\n\n            var dlvIdx = _.findIndex(scope.filteredDeliveries, {ID: parseInt(address.deliveryID)});\n            if (dlvIdx > -1) {\n                address.deliveryNames = scope.filteredDeliveries[dlvIdx].names;\n            }\n\n            console.log('address: ', address);\n\n            var deliveryIndex = _.findIndex(scope.filteredDeliveries, {ID: address.deliveryID});\n            if (deliveryIndex > -1) {\n                address.deliveryNames = scope.filteredDeliveries[deliveryIndex].names;\n                address.collectionPoints = scope.filteredDeliveries[deliveryIndex].collectionPoints;\n                var collectionPointIndex = _.findIndex(\n                    scope.filteredDeliveries[deliveryIndex].collectionPoints,\n                    {ID: address.collectionPointID});\n                if( collectionPointIndex > -1 ) {\n                    address.collectionPoint = scope.filteredDeliveries[deliveryIndex].collectionPoints[collectionPointIndex];\n                }\n            }\n\n            _addressTimeout = $timeout(function(){\n                def.resolve(address);\n                _addressTimeout = null;\n            },500);\n\n            return def.promise;\n        }\n\n        function fillDeliveryInfo2(product, address) {\n\n            var _addressTimeout = null;\n            var def = $q.defer();\n\n            var adrIdx = _.findIndex(product.addresses, {ID: parseInt(address.addressID)});\n            if (adrIdx > -1) {\n                address.details = product.addresses[adrIdx];\n            }\n\n            var sdrIdx = _.findIndex(product.senders, {type: parseInt(address.senderID)});\n            if (sdrIdx > -1) {\n                address.senderName = $filter('translate')(product.senders[sdrIdx].name);\n            }\n\n            var dlvIdx = _.findIndex(product.filteredDeliveries, {ID: parseInt(address.deliveryID)});\n            if (dlvIdx > -1) {\n                address.deliveryNames = product.filteredDeliveries[dlvIdx].names;\n            }\n\n            _addressTimeout = $timeout(function(){\n                def.resolve(address);\n                _addressTimeout = null;\n            },500);\n\n            return def.promise;\n        }\n\n        $scope.allDeliveryPrice = function () {\n\n            var deliveryPrice = 0;\n            var deliveryGrossPrice = 0;\n\n            var totalPrice;\n            var totalGrossPrice;\n            var tmpCalcPrice;\n            var tmpCalcGrossPrice;\n            var tmpDeliveryGrossPrice;\n            var tmpDeliveryPrice;\n\n            if ($scope.cart.sumPrice !== undefined) {\n                totalPrice = $scope.cart.sumPrice;\n                tmpDeliveryPrice = $scope.cart.deliveryPrice;\n\n                if (typeof(totalPrice) === 'string') {\n                    totalPrice = totalPrice.replace(',', '.');\n                }\n                if (typeof tmpDeliveryPrice === 'string') {\n                    tmpDeliveryPrice = tmpDeliveryPrice.replace(',', '.');\n                }\n                totalPrice = parseFloat(totalPrice) + parseFloat(tmpDeliveryPrice);\n            }\n\n            if ($scope.cart.sumCalcPrice !== undefined) {\n                tmpCalcPrice = $scope.cart.sumCalcPrice;\n                tmpDeliveryPrice = $scope.cart.deliveryPrice;\n\n                if (typeof(tmpCalcPrice) === 'string') {\n                    tmpCalcPrice = tmpCalcPrice.replace(',', '.');\n                }\n                if (typeof tmpDeliveryPrice === 'string') {\n                    tmpDeliveryPrice = tmpDeliveryPrice.replace(',', '.');\n                }\n                tmpCalcPrice = parseFloat(tmpCalcPrice) + parseFloat(tmpDeliveryPrice);\n            }\n\n            if ($scope.cart.sumGrossPrice !== undefined) {\n                totalGrossPrice = $scope.cart.sumGrossPrice;\n                tmpDeliveryGrossPrice = $scope.cart.deliveryGrossPrice;\n\n                if (typeof(totalGrossPrice) === 'string') {\n                    totalGrossPrice = totalGrossPrice.replace(',', '.');\n                }\n                if (typeof tmpDeliveryGrossPrice === 'string') {\n                    tmpDeliveryGrossPrice = tmpDeliveryGrossPrice.replace(',', '.');\n                }\n                totalGrossPrice = parseFloat(totalGrossPrice) + parseFloat(tmpDeliveryGrossPrice);\n            }\n\n            if ($scope.cart.sumCalcGrossPrice !== undefined) {\n                tmpCalcGrossPrice = $scope.cart.sumCalcGrossPrice;\n                tmpDeliveryGrossPrice = $scope.cart.deliveryGrossPrice;\n\n                if (typeof(tmpCalcGrossPrice) === 'string') {\n                    tmpCalcGrossPrice = tmpCalcGrossPrice.replace(',', '.');\n                }\n                if (typeof tmpDeliveryGrossPrice === 'string') {\n                    tmpDeliveryGrossPrice = tmpDeliveryGrossPrice.replace(',', '.');\n                }\n                tmpCalcGrossPrice = parseFloat(tmpCalcGrossPrice) + parseFloat(tmpDeliveryGrossPrice);\n            }\n\n            $scope.cart.totalPrice = totalPrice.toFixed(2).replace('.', ',');\n            $scope.cart.totalGrossPrice = totalGrossPrice.toFixed(2).replace('.', ',');\n\n            $scope.cart.totalCalcPrice = tmpCalcPrice.toFixed(2).replace('.', ',');\n            $scope.cart.totalCalcGrossPrice = tmpCalcGrossPrice.toFixed(2).replace('.', ',');\n\n            $scope.cart.deliveryPrice = parseFloat(tmpDeliveryPrice).toFixed(2).replace('.', ',');\n            $scope.cart.deliveryGrossPrice = parseFloat(tmpDeliveryGrossPrice).toFixed(2).replace('.', ',');\n        };\n\n        $scope.checkDelivery = function (address) {\n\n            var idx = _.findIndex($scope.deliveries, {ID: address.deliveryID});\n\n            address.turnOffAddress = false;\n\n            if (idx < 0) {\n                return;\n            }\n\n            var delivery = $scope.deliveries[idx];\n\n            if (angular.isDefined(delivery.module) && Object.keys(delivery.module).length > 0) {\n\n                if (angular.isDefined(delivery.module.keys) && Object.keys(delivery.module.keys).length > 0) {\n\n                    _.each(delivery.module.keys, function (key) {\n\n                        if (key.func === 'collection') {\n\n                            address.turnOffAddress = true;\n\n                        }\n\n                    });\n\n                }\n\n            }\n\n        };\n\n        $scope.saveCartData = function () {\n\n            if (this.blockCart) {\n                return;\n            }\n\n            var orderID;\n            var sendData = {};\n            sendData.addresses = {};\n\n            _.each($scope.cart.products, function (product) {\n\n                orderID = product.orderID;\n                sendData.addresses[product.ID] = product.addresses;\n\n            });\n\n            sendData.paymentID = $scope.cart.paymentID;\n            sendData.orderMessage = $scope.form.orderMessage;\n\n            DpOrderService.saveCart(orderID, sendData).then(function () {\n\n                AuthService.cleanSession().then(function () {\n\n                    $rootScope.carts = [];\n                    $rootScope.orderID = null;\n                    $state.go('cartVerify');\n\n                });\n\n            });\n\n        };\n\n\n\n        $scope.reg = false;\n        $scope.no_acct = false;\n        $scope._login = true;\n        $scope.isActiveReg = false;\n        $scope.isActiveNo_acct = false;\n        $scope.isActive_login = true;\n\n        $scope.showReg = function () {\n            $scope.reg = true;\n            $scope.no_acct = false;\n            $scope._login = false;\n            $scope.isActive = !$scope.isActive;\n        };\n\n        $scope.showLogin = function () {\n            $scope.reg = false;\n            $scope.no_acct = false;\n            $scope._login = true;\n            $scope.isActive = !$scope.isActive;\n        };\n\n        $scope.showCheckout = function () {\n            $scope.reg = false;\n            $scope.no_acct = true;\n            $scope._login = false;\n            $scope.isActive = !$scope.isActive;\n        };\n\n        init();\n\n        $scope.login = function (credentials) {\n            LoginWidgetService.loginInCart($scope, credentials).then(function() {\n                getCartData();\n            });\n        };\n\n        $scope.addUser = function () {\n            if ($scope.form.terms === true && $scope.form.data_protection === true) {\n\n                $scope.form.captchaResponse = $scope.capthaResponse;\n\n                UserService.userRegister($scope.form).then(function (data) {\n                    if (data.response) {\n                        var credentials = {};\n                        credentials.password = $scope.form.pass;\n                        credentials.email = $scope.form.user;\n\n                        $scope.cart.userMail = data.user.user;\n                        if( data.address ) {\n                            $scope.cart.userTelephone = data.address.areaCode + '' + data.address.telephone;\n                            $scope.cart.userFullName = data.address.name + ' ' + data.address.lastname;\n                        }\n\n                        LoginWidgetService.loginInCart($scope, credentials).then(function() {\n                            getCartData();\n                        });\n\n                    } else {\n                        if (data.info.length > 0) {\n                            Notification.error($filter('translate')(data.info));\n                        } else {\n                            Notification.error($filter('translate')('error'));\n                        }\n                    }\n\n                }, function (data) {\n                    Notification.error($filter('translate')('unexpected_error'));\n                });\n            } else {\n                Notification.error($filter('translate')('accept_terms'));\n            }\n        };\n\n        $scope.addNonRegister = function () {\n\n            if ($scope.noRegisterForm.terms !== true || $scope.noRegisterForm.data_protection !== true) {\n                Notification.error($filter('translate')('accept_terms'));\n                return;\n            }\n\n            checkFiles().then(function (emptyProducts) {\n\n                if (emptyProducts > 0) {\n                    Notification.error($filter('translate')('to_order_add_file'));\n                    return;\n                }\n\n                $scope.noRegisterForm.oneTimeUser = 1;\n                $scope.noRegisterForm.captchaResponse = $scope.capthaResponse;\n\n                UserService.userRegister($scope.noRegisterForm).then(function (data) {\n\n                    console.log(data);\n\n                    var credentials = {};\n                    credentials.password = data.user.ID;\n                    credentials.email = data.user.user + '_' + data.user.ID;\n\n                    $scope.cart.userMail = data.user.user;\n                    if( data.address ) {\n                        $scope.cart.userTelephone = data.address.areaCode + '' + data.address.telephone;\n                        $scope.cart.userFullName = data.address.name + ' ' + data.address.lastname;\n                    }\n\n                    LoginWidgetService.loginInCart($scope, credentials, true).then( function() {\n                        getCartData();\n                    });\n\n                }, function err(data) {\n                    if (data.info.length > 0) {\n                        Notification.error($filter('translate')(data.info));\n                    } else {\n                        Notification.error($filter('translate')('unexpected_error'));\n                    }\n                });\n\n            });\n\n        };\n\n        $scope.continueShopping = function () {\n            $state.go('home');\n        };\n\n        $scope.paymentConfirm = function (paymentID) {\n\n            var paymentIdx = _.findIndex($scope.payments, {ID: paymentID});\n\n            if( paymentIdx > -1 ) {\n                var payment = $scope.payments[paymentIdx];\n\n                if( payment.deferredPayment && !payment.creditLimit ) {\n                    Notification.error($filter('translate')('no_credit_limit'));\n                    return;\n                }\n\n                if( payment.limitExceeded ) {\n                    Notification.error($filter('translate')('credit_limit_exceeded') + ' - ' +\n                        payment.creditLimit + '/' +  payment.unpaidValue + ' ' + payment.baseCurrency );\n                    return;\n                }\n\n                resetPayments().then(function() {\n                    payment.selected = true;\n                });\n            }\n\n            if( $scope.confirmButtonInCart ) {\n                if( !$scope.form.confirmStatute ) {\n                    Notification.error($filter('translate')('confirm_statute_is_required'));\n                    return;\n                }\n            }\n\n            checkSelfCollectDelivery($scope.cart.products).then(function(collectDeliveries) {\n\n                if ($scope.addresses.length === 0 && !collectDeliveries) {\n\n                    fillReceiverAddress();\n\n                } else {\n\n                    var incorrectProduct = 0;\n                    _.each($scope.cart.products, function (product) {\n                        if( _.isEmpty(product.addresses)) {\n                            //showDelivery(product);\n                            incorrectProduct++;\n                        }\n                    });\n\n                    if( incorrectProduct > 0 ) {\n                        Notification.error($filter('translate')('choose_delivery'));\n                        return;\n                    }\n\n                    Setting.getPublicSettings().then(function(settingsData) {\n                        if( settingsData.onlyForCompanies && settingsData.onlyForCompanies.value === 1 ) {\n                            DpAddressService.getDefaultAddress(2).then(function (invoiceData) {\n                                if( invoiceData.address.length === 0 ) {\n                                    fillInvoiceAddress();\n                                } else {\n                                    if( settingsData.separateConfirmButton && settingsData.separateConfirmButton.value === 1 ) {\n                                        showConfirmButton(payment);\n                                    } else {\n                                        $scope.preventPayment = true;\n                                        doConfirmation(paymentID);\n                                    }\n                                }\n                            });\n                        } else {\n                            if( settingsData.separateConfirmButton && settingsData.separateConfirmButton.value === 1 ) {\n                                showConfirmButton(payment);\n                            } else {\n                                $scope.preventPayment = true;\n                                doConfirmation(paymentID);\n                            }\n                        }\n\n                    });\n\n                }\n\n\n\n            });\n\n        };\n\n        $scope.confirmStatuteCheck = function() {\n            if( this.form.confirmStatute ) {\n                var payment = _.find($scope.payments, { selected: true });\n                if(payment) {\n                    $scope.confirmButton = true;\n                }\n            } else {\n                $scope.confirmButton = false;\n            }\n        };\n\n        $scope.confirmOrder = function() {\n            var payment = _.find($scope.payments, { selected: true });\n\n            if( payment ) {\n                doConfirmation(payment.ID);\n            } else {\n                Notification.info($filter('translate')('select_a _payment_method'));\n            }\n        };\n\n        function showConfirmButton(payment) {\n\n            $scope.confirmButton = true;\n\n        }\n\n        function resetPayments() {\n\n            var def = $q.defer();\n\n            $scope.payments.forEach(function(element, index) {\n                element.selected = false;\n                if( ($scope.payments.length -1 ) === index ) {\n                    def.resolve(true);\n                }\n            });\n\n            return def.promise;\n        }\n\n        function doConfirmation(paymentID) {\n\n            var orderID;\n            var sendData = {};\n            sendData.addresses = {};\n\n            _.each($scope.cart.products, function (product) {\n\n                orderID = product.orderID;\n                sendData.addresses[product.ID] = product.addresses;\n\n            });\n\n            sendData.paymentID = paymentID;\n            sendData.orderMessage = $scope.form.orderMessage;\n\n            DpOrderService.saveCart(orderID, sendData).then(function (_cartData) {\n                if (_cartData.payment.status) {\n                    $rootScope.$emit('cartRequired')\n                    if (_cartData.payment.status.statusCode === \"SUCCESS\" && _cartData.payment.operator == 'payu') {\n\n                        AuthService.cleanSession().then(function () {\n                            $rootScope.carts = [];\n                            $rootScope.orderID = null;\n                            window.location.href = _cartData.payment.redirectUri;\n                        });\n                    } else if(_cartData.payment.status === 'NEW' && _cartData.payment.operator == 'tinkoff') {\n\n                        AuthService.cleanSession().then(function () {\n                            $rootScope.carts = [];\n                            $rootScope.orderID = null;\n                            window.location.href = _cartData.payment.url;\n                        });\n                    } else if(_cartData.payment.status === 'NEW' && _cartData.payment.operator == 'sberbank') {\n\n                        AuthService.cleanSession().then(function () {\n                            $rootScope.carts = [];\n                            $rootScope.orderID = null;\n                            window.location.href = _cartData.payment.url;\n                        });\n                    } else if(_cartData.payment.status === 'CREATED' && _cartData.payment.operator == 'paypal') {\n\n                        AuthService.cleanSession().then(function () {\n                            $rootScope.carts = [];\n                            $rootScope.orderID = null;\n                            window.location.href = _cartData.payment.url;\n                        });\n                    } else {\n                        Notification.error($filter('translate')('payment_rejected'));\n                    }\n                } else {\n                    AuthService.cleanSession().then(function (data) {\n                        $rootScope.carts = [];\n                        $rootScope.orderID = null;\n                        $state.go('cartVerify', {orderid: orderID});\n                        $rootScope.$emit('cartRequired')\n                    });\n\n                }\n            });\n        }\n\n        $scope.editName = function (product) {\n\n            if (_timeout) {\n                $timeout.cancel(_timeout);\n            }\n\n            _timeout = $timeout(function () {\n                var CalculateService = new CalculationService(product.groupID, product.typeID);\n                CalculateService.updateName({\n                    name: product.name,\n                    productID: product.productID\n                }).then(function (response) {\n                    if (response.response == true) {\n                        Notification.success($filter('translate')('saved_message'));\n                    }\n                });\n            }, 1000);\n\n        };\n\n        $scope.showOldPrice = function (oldPrice, newPrice) {\n            if (typeof oldPrice === 'string') {\n                oldPrice = oldPrice.replace(',', '.');\n            }\n            if (typeof newPrice === 'string') {\n                newPrice = newPrice.replace(',', '.');\n            }\n            return parseFloat(oldPrice) > parseFloat(newPrice);\n        };\n\n        $scope.sendCoupon = function () {\n            var coupon = this.form.couponID;\n            this.form.couponID = null;\n            CouponService.check(coupon, $rootScope.orderID).then(function (data) {\n                if (data.response) {\n                    DpOrderService.updatePrice().then(function (updateData) {\n\n                        if( updateData.response === true ) {\n                            if( updateData.messages.length > 0 ) {\n                                _.each(updateData.messages, function(msg) {\n                                    Notification.success($filter('translate')(msg));\n                                });\n                            }\n                            getCartData();\n                        } else {\n                            if( updateData.messages.length > 0 ) {\n                                _.each(updateData.messages, function(msg) {\n                                    Notification.error($filter('translate')(msg));\n                                });\n                            }\n                        }\n\n                    });\n                } else {\n                    if( data.info ) {\n                        _.each(data.info.results, function(oneResult) {\n                            if( oneResult.valid ) {\n                                Notification.success( $filter('translate')(oneResult.reason) );\n                            } else {\n                                Notification.error( $filter('translate')(oneResult.reason) );\n                            }\n                        });\n                        Notification.error( $filter('translate')(data.info) );\n                    } else {\n                        Notification.error($filter('translate')('error'));\n                    }\n                }\n            }, function (data) {\n                Notification.error($filter('translate')(data.info));\n            });\n        };\n\n        function fillReceiverAddress(requiredSave) {\n            console.log('Musisz posiadać address');\n\n            TemplateRootService.getTemplateUrl(97).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    keyboard:!requiredSave,\n                    backdrop:requiredSave?'static':true,\n                    controller: function ($scope, $modalInstance) {\n                        $scope.requiredSave = requiredSave;\n                        $scope.saveAddress = function () {\n\n                            this.form.default = 1;\n\n                            DpAddressService.addAddress($scope.form, 1).then( function(data) {\n                                if(data.response === true) {\n                                    $scope.addresses.push(data.item);\n                                    var params = {addressID: data.item.ID};\n                                    AuthService.updateDefaultAddress(params).then(function () {\n                                        addAddressToOrder(data.item.ID);\n                                        Notification.success($filter('translate')('added'));\n                                        $rootScope.$emit('addressesChanged')\n                                        $modalInstance.close();\n                                    });\n                                } else {\n                                    Notification.error($filter('translate')('error'));\n                                }\n                            }, function(data) {\n                                Notification.error($filter('translate')('error'));\n                            });\n\n                        };\n\n                        $scope.cancel = function () {\n                            $modalInstance.close();\n                        }\n\n                        $scope.isCountryCode = function () {\n                            var country = _.find($scope.countries, {code: $scope.form.countryCode});\n                            return country && String(country.areaCode).length > 0;\n                        }\n\n                        $scope.updateAreaCode = function () {\n                            var country = _.find($scope.countries, {code: $scope.form.countryCode});\n                            $scope.form.areaCode = country.areaCode;\n                        }\n                    }\n                });\n\n            });\n\n        }\n\n        function fillInvoiceAddress() {\n\n            console.log('Musisz podać dane do faktury!');\n\n            TemplateRootService.getTemplateUrl(98).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        $scope.saveAddress = function () {\n\n                            this.form.default = 1;\n\n                            DpAddressService.addAddress($scope.form, 2).then( function(data) {\n                                if(data.response === true) {\n                                    Notification.success($filter('translate')('added'));\n                                    $modalInstance.close();\n                                } else {\n                                    Notification.error($filter('translate')('error'));\n                                }\n                            }, function(data) {\n                                Notification.error($filter('translate')('error'));\n                            });\n\n                        };\n\n                        $scope.cancel = function () {\n                            $modalInstance.close();\n                        }\n\n                        $scope.isCountryCode = function () {\n                            var country = _.find($scope.countries, {code: $scope.form.countryCode});\n                            return country && String(country.areaCode).length > 0;\n                        }\n\n                        $scope.updateAreaCode = function () {\n                            var country = _.find($scope.countries, {code: $scope.form.countryCode});\n                            $scope.form.areaCode = country.areaCode;\n                        }\n                    }\n                });\n\n            });\n\n        }\n\n        $scope.changeVolumes = function(product) {\n\n            var _this = this;\n            if(_timeout){\n                $timeout.cancel(_timeout);\n            }\n\n            var allVolumes = 0;\n\n            _.each(product.productAddresses, function(oneAddress, index) {\n                allVolumes += parseInt(oneAddress.allVolume);\n                DeliveryWidgetService.getPkgWeight(product, oneAddress, product.filteredDeliveries);\n                checkDeliveryParcelShops(oneAddress);\n                checkDeliveryCollectionPoints(oneAddress);\n            });\n\n            _timeout = $timeout(function(){\n\n                var selectedVolume = product.volume;\n                if( product.amount > 1 ) {\n                    selectedVolume *= product.amount;\n                }\n\n                if( allVolumes > selectedVolume ){\n                    var over = allVolumes - selectedVolume;\n\n                    product.productAddresses[_this.$index].allVolume -= Number(over);\n                    product.deliveryLackOfVolume = 0;\n\n                    Notification.error($filter('translate')('volume_exceeded_by') + ' ' + over);\n\n                } else if( allVolumes <= selectedVolume ) {\n\n                    product.deliveryLackOfVolume = Number(selectedVolume - allVolumes);\n\n                }\n\n                _timeout = null;\n            },500);\n        };\n\n\n        function checkDeliveryParcelShops(productAddress) {\n\n            var deliveryIndex = _.findIndex(productAddress.deliveries, {ID: productAddress.deliveryID});\n            if( deliveryIndex > -1 ) {\n\n                if( productAddress.deliveries[deliveryIndex].hasParcelShops && !productAddress.parcelShops ) {\n\n                    productAddress.hasParcelShops = true;\n                    productAddress.parcelShops = null;\n\n                    DeliveryWidgetService.findParcelShops(\n                        productAddress.addressID,\n                        productAddress.deliveries[deliveryIndex].ID,\n                        productAddress.deliveries[deliveryIndex].courierID,\n                        productAddress\n                    ).then( function(result) {\n                        console.log(result);\n                    });\n                } else if ( productAddress.deliveries[deliveryIndex].hasParcelShops && productAddress.parcelShops ) {\n                    productAddress.hasParcelShops = true;\n                } else {\n                    productAddress.hasParcelShops = false;\n                }\n            }\n        }\n\n        function checkDeliveryCollectionPoints(productAddress) {\n\n            var deliveryIndex = _.findIndex(productAddress.deliveries, {ID: productAddress.deliveryID});\n            if( deliveryIndex > -1 ) {\n\n                if(productAddress.deliveries[deliveryIndex].module.func === 'collectionAttributes') {\n\n                    productAddress.collectionPointID = productAddress.deliveries[deliveryIndex].collectionPoints[0].ID;\n                    productAddress.collectionPoint = productAddress.deliveries[deliveryIndex].collectionPoints[0];\n                    productAddress.collectionPoints = productAddress.deliveries[deliveryIndex].collectionPoints;\n\n                } else {\n                    delete productAddress.collectionPointID;\n                    delete productAddress.collectionPoint;\n                    delete productAddress.collectionPoints;\n                }\n            }\n\n\n        }\n\n        $scope.displayFlipBook = function (product) {\n\n            if( product.prevPages === undefined ) {\n                return;\n            }\n\n            var flipbookHolder = document.createElement('div');\n            flipbookHolder.className = 'flipbook-holder';\n\n            var remove = document.createElement('div');\n            remove.className = 'remove-flipbook';\n            remove.innerHTML = 'x';\n\n            var nextPage = document.createElement('div');\n            nextPage.className = 'nextPage-flipbook';\n            nextPage.innerHTML = '<i class=\"fa fa-arrow-right\" aria-hidden=\"true\"></i>';\n\n            var prevPage = document.createElement('div');\n            prevPage.className = 'prevPage-flipbook';\n            prevPage.innerHTML = '<i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>';\n\n            flipbookHolder.appendChild(remove);\n            flipbookHolder.appendChild(nextPage);\n            flipbookHolder.appendChild(prevPage);\n\n            document.body.appendChild(flipbookHolder);\n\n\n            var html = '<div id=\"flipbook\">' +\n                '<div class=\"hard\"> Turn.js </div>' +\n                '<div class=\"hard\"></div>';\n\n            for (var i = 0; i < product.prevPages.length; i++) {\n\n                html += '<div class=\"\"><img loading=\"lazy\" ng-src=\"' + product.prevPages[i] + '\"></div>';\n\n            }\n\n            html += '<div class=\"hard\"></div>' +\n                '<div class=\"hard\"></div>' +\n                '</div>';\n\n            flipbookHolder.innerHTML += html;\n\n            var image = new Image();\n            image.onload = function () {\n\n                var width = window.innerWidth * 0.8;\n                var aspect = width / (this.width * 2);\n                var height = this.height * aspect;\n\n                if (height > window.innerHeight) {\n\n                    height = window.innerHeight * 0.8;\n                    aspect = height / this.height;\n                    width = (this.width * 2) * aspect;\n                }\n\n                flipbookHolder.style.paddingTop = (height - window.innerHeight) / 2 + \"px\";\n\n                $(\"#flipbook\").turn({\n                    height: height,\n                    width: width,\n                    autoCenter: true\n                });\n\n                $('.remove-flipbook').on('click', function (e) {\n                    e.stopPropagation();\n                    $(this).parent().remove();\n                });\n\n                $('.nextPage-flipbook').on('click', function (e) {\n                    $(\"#flipbook\").turn('next')\n                });\n\n                $('.prevPage-flipbook').on('click', function (e) {\n                    $(\"#flipbook\").turn(\"previous\");\n                });\n\n                $(document).keyup(function(e) {\n                    if (e.keyCode === 27) {\n                        $(\"#flipbook\").turn(\"destroy\").remove();\n                    }\n                    e.stopPropagation();\n                });\n\n            };\n\n            image.src = product.prevPages[0];\n\n        };\n\n        function addAddressToOrder(addressID) {\n            _.each($rootScope.carts, function(order) {\n                if( !order.ProductAddresses ) {\n                    _.each($scope.cart.products, function (product) {\n                        if( _.isEmpty(product.addresses)) {\n                            //showDelivery(product);\n                        }\n                    });\n                } else {\n                    order.ProductAddresses[0].addressID = addressID;\n                }\n            });\n        }\n\n        function checkSelfCollectDelivery(products) {\n            var def = $q.defer();\n\n            var countAddresses = 0;\n            var countCollectionPoints = 0;\n            var iterator = 0;\n            var productIterator = 0;\n\n            _.each(products, function(oneProduct) {\n                countAddresses += oneProduct.addresses.length;\n                productIterator++;\n                _.each(oneProduct.addresses, function(oneAddress) {\n                    if( oneAddress.collectionPointID !== undefined || oneAddress.collectionPointID > 0 ) {\n                        countCollectionPoints++;\n                    }\n                    iterator++;\n\n                    if( iterator === countAddresses && productIterator === products.length) {\n                        if(countCollectionPoints === countAddresses) {\n                            def.resolve(true);\n                        } else {\n                            def.resolve(false);\n                        }\n                    }// TODO Co jeśli nie ustawione\n                })\n            });\n\n            return def.promise;\n        }\n\n        $scope.loginFacebook = function () {\n\n            SocialWidgetService.loginFacebook();\n\n        };\n\n        $scope.loginGoogle = function () {\n\n            SocialWidgetService.loginGoogle();\n\n        };\n\n        $scope.insertHtml = function(string) {\n            return $sce.trustAsHtml(string);\n        };\n\n        $scope.reCalculateCart = function() {\n\n            var data = $scope.cart;\n\n            CountService.reCalculateCart(data).then( function(responseData) {\n                 if( responseData.response ) {\n                     getCartData();\n                     Notification.success($filter('translate')('saved_message'));\n                 } else {\n                     Notification.warning($filter('translate')('no_price_has_been_changed'));\n                 }\n            });\n\n        };\n\n        $scope.editProduct = function(product) {\n            CartWidgetService.copyProduct($scope, product, false,false, true);\n        };\n\n        $scope.copyProduct = function(product) {\n            CartWidgetService.copyProduct($scope, product);\n        };\n\n        $scope.changeOnlyVolume = function(product) {\n            CartWidgetService.copyProduct($scope, product, true);\n        };\n\n        /**\n         *\n         * @param schemType 0 - single 1 - multiple\n         */\n        $scope.changeDeliveryConnected = function (item) {\n            DpOrderService.edit($scope.cart.products[0].orderID, {deliveryConnected : item.value}).then(data=>{\n                if(!data.response){\n                    Notification.error($filter('translate')('error'));return;\n                }\n                $scope.cart.deliveryConnected = item.value;\n                if($scope.cart.deliveryConnected){\n                    $scope.cart.products[0].addresses=[_.clone($scope.cart.products[0].addresses[0])]\n                    $scope.cart.products.forEach((product)=>{\n                        product.addresses=_.clone($scope.cart.products[0].addresses);\n                        product.addresses[0].volume=product.addresses[0].allVolume=product.volume;\n                    })\n                }else{\n                    $scope.cart.products.forEach((product,i)=>{\n                        product.addresses.forEach((address,j)=>{\n                            $scope.cart.products[i].addresses[j]=_.clone($scope.cart.products[i].addresses[j],true)\n                            $scope.cart.products[i].addresses[j].allVolume=product.volume\n                        })\n                    })\n\n                }\n            },err=>{\n                Notification.error($filter('translate')('error'))\n            })\n\n        }\n\n        const topSpace = 100\n\n        $scope.sectionLinkClick = e => {\n            e.preventDefault()\n\n            const name = e.currentTarget.getAttribute('href').substr(1)\n            const section = document.querySelector(`section[id=${name}]`)\n\n            $('html').animate({\n                scrollTop: section.offsetTop - topSpace\n            });\n        }\n        const scrollFunction = e => {\n            const scrollY = window.pageYOffset;\n            const sections = document.querySelectorAll('section')\n            sections.forEach(section => {\n                const toTop = section.getBoundingClientRect().top + window.pageYOffset;\n                const relLink = document.querySelector(`a[href*=${section.getAttribute('id')}]`)\n                if (window.pageYOffset > toTop - topSpace && window.pageYOffset < toTop + section.getBoundingClientRect().height - topSpace) {\n                    relLink.classList.add('active');\n                } else {\n                    relLink.classList.remove('active');\n                }\n            })\n        }\n\n        window.addEventListener('scroll', scrollFunction);\n\n        $scope.$on('$stateChangeStart', (event, toState, toParams, fromState, fromParams) => {\n            window.removeEventListener('scroll',scrollFunction);\n        })\n        $scope.deliveryConnectedLabel = (item) => $filter('translate')(item.name)\n        $scope.compareDeliveryMode = (item) => item.value == $scope.cart.deliveryConnected;\n\n\n    });","start":11,"end":1423,"route":null,"symbol":"cart.CartCtrl","metadata":{"calls_functions":["angular.module","$rootScope.$watch","console.info","vcRecaptchaService.reload","$rootScope.$on","_.reduce","_.parseFloat","$scope.allDeliveryPrice","getCartData","CountriesService.getAll","Setting.getPublicSettings","$q.defer","AddressService.getForUser","def.resolve","AddressService.getAddressesFromSession","AddressService.getAll","DpOrderService.getCart","DeliveryService.getAll","PaymentService.getAll","_.each","$filter","product.deliveryPrice.replace","parseFloat","product.deliveryPriceGross.replace","_.findIndex","_.isEmpty","tmpDate.setTime","Date.parse","ProductFileService.getAll","_.last","_.sortBy","attributes.forEach","attr.files.find","EditorProjectService.getProjectPrev","projects.push","EditorProjectService.getProjectsData","getAddresses","fillReceiverAddress","$scope.$watch","RegisterWidget.initCodeRegister","RegisterWidget.initCodeWithoutRegister","RegisterWidget.selectCountryWithoutRegister","RegisterWidget.selectCountryRegister","CartWidgetService.deleteProduct","Notification.success","Notification.error","showDelivery","parseInt","console.log","$timeout","totalPrice.replace","tmpDeliveryPrice.replace","tmpCalcPrice.replace","totalGrossPrice.replace","tmpDeliveryGrossPrice.replace","tmpCalcGrossPrice.replace","totalPrice.toFixed","totalGrossPrice.toFixed","tmpCalcPrice.toFixed","tmpCalcGrossPrice.toFixed","angular.isDefined","Object.keys","DpOrderService.saveCart","AuthService.cleanSession","$state.go","init","LoginWidgetService.loginInCart","UserService.userRegister","checkFiles","resetPayments","checkSelfCollectDelivery","DpAddressService.getDefaultAddress","fillInvoiceAddress","showConfirmButton","doConfirmation","_.find","Notification.info","$scope.payments.forEach","$rootScope.$emit","$timeout.cancel","CalculateService.updateName","oldPrice.replace","newPrice.replace","CouponService.check","DpOrderService.updatePrice","TemplateRootService.getTemplateUrl","$modal.open","DpAddressService.addAddress","$scope.addresses.push","AuthService.updateDefaultAddress","addAddressToOrder","$modalInstance.close","String","DeliveryWidgetService.getPkgWeight","checkDeliveryParcelShops","checkDeliveryCollectionPoints","Number","DeliveryWidgetService.findParcelShops","document.createElement","flipbookHolder.appendChild","document.body.appendChild","$","e.stopPropagation","SocialWidgetService.loginFacebook","SocialWidgetService.loginGoogle","$sce.trustAsHtml","CountService.reCalculateCart","Notification.warning","CartWidgetService.copyProduct","DpOrderService.edit","_.clone","$scope.cart.products.forEach","product.addresses.forEach","e.preventDefault","e.currentTarget.getAttribute","document.querySelector","document.querySelectorAll","sections.forEach","section.getBoundingClientRect","section.getAttribute","relLink.classList.add","relLink.classList.remove","window.addEventListener","$scope.$on","window.removeEventListener"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":149,"eventfulness":{"watchers":2,"emits":3,"broadcasts":0},"summary_en":null,"business_tags":["cart"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/cart/CartSummaryCtrl.js:11-21:controller:CartSummaryCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/cart/CartSummaryCtrl.js","module":null,"name":"CartSummaryCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$modal"],"antiPatterns":[],"text":"    .controller('CartSummaryCtrl', function($scope, $modal) {\n\n        $scope.deliveryMethod = function(cart) {\n            $modal.open({\n                templateUrl: 'src/cart/templates/modalboxes/delivery-method.html',\n                controller: function($scope) {\n                    $scope.cart = cart;\n                }\n            })\n        }\n    });","start":11,"end":21,"route":null,"symbol":"CartSummaryCtrl","metadata":{"calls_functions":["angular.module","$modal.open"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["cart"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/cart/CartVerifyCtrl.js:4-128:controller:cart.CartVerifyCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/cart/CartVerifyCtrl.js","module":null,"name":"cart.CartVerifyCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","UserService","AuthService","TokenService","Notification","$filter","$location","$stateParams","DpOrderService","ClientZoneWidgetService"],"antiPatterns":[],"text":"  .controller('cart.CartVerifyCtrl', function ($scope, $rootScope, UserService, AuthService, TokenService,\n                                               Notification, $filter, $location, $stateParams,\n                                               DpOrderService, ClientZoneWidgetService ) {\n\n      $scope.transactionConfirm = false;\n      $scope.isOnline = false;\n      $scope.wasOneTimeUser = false;\n      $scope.products = [];\n      $scope.order = {};\n\n      var init = function () {\n\n          var orderID;\n\n          orderID = ($location.search()).orderID;\n          if( !orderID ) {\n              orderID = $stateParams.orderid;\n          }\n\n          var urlParams = {};\n\n          if( orderID === 'tinkoff' ) {\n              urlParams = {\n                  OrderId: $location.search().OrderId,\n                  PaymentId: $location.search().PaymentID\n              };\n          }\n          if( ($location.search()).provider === 'paypal' ) {\n              urlParams = {\n                  token: $location.search().token,\n                  PayerID: $location.search().PayerID\n              };\n          }\n          if( ($location.search()).orderId !== undefined ) {\n              urlParams.orderId = ($location.search()).orderId;\n          }\n\n          DpOrderService.sendPaymentStatus(orderID, urlParams).then(function ( statusResponse ) {\n\n              $rootScope.$emit('CreditLimit:reload', true);\n\n              $scope.products = statusResponse.products;\n              if( statusResponse.orderInfo ) {\n                  $scope.order.finalPrice = statusResponse.orderInfo.finalPrice;\n                  $scope.order.currency = statusResponse.orderInfo.currency;\n                  $scope.order.orderNumber = statusResponse.order.orderNumber;\n                  $scope.order.ID = statusResponse.orderInfo.orderID;\n\n                  window.dataLayer = window.dataLayer || [];\n                  window.dataLayer.push({\n                      'event': 'eec.purchase',\n                      'ecommerce': {\n                          'currencyCode': $rootScope.currentCurrency.code,\n                          'purchase': {\n                              'actionField': {\n                                  'id': statusResponse.orderInfo.orderID,\n                                  'revenue': statusResponse.orderInfo.finalPrice,\n                                  'shipping': statusResponse.orderInfo.deliveryPrice,\n                                  'coupon': $scope.coupons && $scope.coupons.length ? $scope.coupons[0].name : ''\n                              },\n                              'products': _.map(statusResponse.products,function(prod){\n                                  return {\n                                      'name': prod.names[$rootScope.currentLang.code],\n                                      'id': prod.ID,\n                                      'price': prod.grossPrice,\n                                      'quantity': prod.volume,\n                                  };\n                              })\n                          }\n                      }\n                  });\n              }\n\n              if( statusResponse.paymentOnline == true ) {\n                  $scope.isOnline = true;\n              }\n\n              if( statusResponse.paymentStatus == true ) {\n                  $scope.transactionConfirm = true;\n              }\n\n              ClientZoneWidgetService.getPayments().then(function (paymentsData) {\n                  $scope.payments = paymentsData;\n\n                  if( statusResponse.order != undefined  ) {\n                      $scope.selectedPayment = _.find(paymentsData, {ID: statusResponse.order.paymentID});\n                  }\n\n              });\n\n              UserService.checkOneTimeUser().then(function (data) {\n                  if (data.response == true) {\n\n                      AuthService.logout().then(function (res) {\n\n                          if (res.logout) {\n\n                              TokenService.getNonUserToken().then(function (data) {\n                                  $rootScope.logged = false;\n                                  $rootScope.oneTimeUser = false;\n                                  $scope.wasOneTimeUser = true;\n                                  $rootScope.orderID = null;\n                                  if (!$rootScope.logged) {\n                                      AuthService.setAccessToken(data.token);\n                                  }\n                              });\n\n                          } else {\n                              Notification.error($filter('translate')('unexpected_error'));\n                          }\n\n                      }, function () {\n                          Notification.error($filter('translate')('unexpected_error'));\n                      });\n\n                  }\n              });\n          });\n\n\n      };\n\n      init();\n\n});","start":4,"end":128,"route":null,"symbol":"cart.CartVerifyCtrl","metadata":{"calls_functions":["angular.module","$location.search","DpOrderService.sendPaymentStatus","$rootScope.$emit","window.dataLayer.push","_.map","ClientZoneWidgetService.getPayments","_.find","UserService.checkOneTimeUser","AuthService.logout","TokenService.getNonUserToken","AuthService.setAccessToken","Notification.error","$filter","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":15,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":["cart"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/cart/UploadCtrl.js:11-17:controller:UploadCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/cart/UploadCtrl.js","module":null,"name":"UploadCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope"],"antiPatterns":[],"text":"  .controller('UploadCtrl', function ($scope) {\n    $scope.awesomeThings = [\n      'HTML5 Boilerplate',\n      'AngularJS',\n      'Karma'\n    ];\n  });","start":11,"end":17,"route":null,"symbol":"UploadCtrl","metadata":{"calls_functions":["angular.module"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:11-4405:controller:category.CalcCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":null,"name":"category.CalcCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$config","$filter","$cookies","$timeout","$state","PsTypeService","PsGroupService","PsAttributeService","PsFormatService","PsPageService","PsComplexService","CalculationService","TaxService","PsTypeDescriptionService","$stateParams","Notification","AuthService","AuthDataService","DeliveryService","AddressService","DpCategoryService","DeliveryWidgetService","TemplateRootService","DpOrderService","TokenService","SettingService","localStorageService","$modal","$q","TextWidgetService","CountriesService","DomWidgetService","CalculateDataService","$window","AddressWidgetService","CalcSimplifyWidgetService","$sce","$location","MainWidgetService","CustomProductService","LoginWidgetService","DpCartsDataService","CommonService","FileUploader","ProductFileService","CalcFileService"],"antiPatterns":[],"text":"    .controller('category.CalcCtrl', function ($scope, $rootScope, $config, $filter, $cookies, $timeout, $state,\n                                               PsTypeService, PsGroupService, PsAttributeService, PsFormatService,\n                                               PsPageService, PsComplexService, CalculationService, TaxService,\n                                               PsTypeDescriptionService, $stateParams, Notification, AuthService,\n                                               AuthDataService, DeliveryService, AddressService, DpCategoryService,\n                                               DeliveryWidgetService, TemplateRootService, DpOrderService, TokenService,\n                                               SettingService, localStorageService, $modal, $q, TextWidgetService,\n                                               CountriesService, DomWidgetService, CalculateDataService, $window,\n                                               AddressWidgetService, CalcSimplifyWidgetService, $sce, $location,\n                                               MainWidgetService, CustomProductService, LoginWidgetService, DpCartsDataService, CommonService,\n                                               FileUploader,\n                                               ProductFileService,\n                                               CalcFileService) {\n        // TODO Remove fragment while transfer to webpack\n        try {\n            var log = anylogger('Calc');\n        } catch (e) {\n            var log = {\n                info: function () {\n                },\n                debug: function () {\n                }\n            };\n        }\n        const timeouts=[]\n        /**\n         *\n         * @param {Object} $scope\n         */\n        $scope.type = {};\n        $scope.group = {};\n        $scope.volumes = [];\n        $scope.complexProducts = [];\n\n        $scope.currentTypeID = null;\n        $scope.currentGroupID = null;\n\n        /**\n         * @param $stateParams\n         * @param $stateParams.typeurl\n         * @param $stateParams.groupurl\n         */\n        var choosenPaperID = false;\n        if ($stateParams.typeurl.includes('?paperID=')) {\n            var splitType = $stateParams.typeurl.split('?paperID=');\n            $scope.currentTypeUrl = splitType[0];\n            choosenPaperID = splitType[1];\n        } else {\n            $scope.currentTypeUrl = $stateParams.typeurl;\n        }\n        $rootScope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {\n            timeouts.forEach(timer=>$timeout.cancel(timer))\n        });\n\n        $scope.currentGroupUrl = $stateParams.groupurl;\n\n        var countProducts;\n        var productsLoaded = false;\n        var stopSelect = undefined;\n        var stopSelectAttr;\n        var deletedAttrs = [];\n\n        var AttributeService;\n        var FormatService;\n        var PagesService;\n        var ComplexService;\n        var CalculateService;\n\n        var _timeout;\n\n        $scope.editorUrl = '';\n        $scope.currentType = {};\n        $scope.realisationTimes = [];\n        $scope.activeVolume = {};\n        $scope.rememberVolume = {};\n        $scope.customVolume = {};\n        $scope.taxes = [];\n        $scope.loadVolumes = false;\n        $scope.summaryThickness = {};\n        $scope.allThickness = 0;\n        $scope.complexID = 0;\n        $scope.productItem = {};\n        $scope.hideAmount = true;\n        $scope.deliveryLackOfVolume = 0;\n\n        $scope.addresses = [];\n        $scope.senders = [];\n        $scope.productAddresses = [];\n        $scope.deliveries = [];\n        $scope.filteredDeliveries = [];\n        $scope.technologies = [];\n        $scope.optionPicture = {};\n        $scope.query = {};\n\n        // Galerie\n        $scope.galleries = [];\n        // Tekst\n        $scope.descriptions = [];\n        // Miniatura\n        $scope.thumbnails = [];\n        // makieta\n        $scope.patterns = [];\n\n        $scope.actualFile = null;\n\n        $scope.showPattern = false;\n        $scope.showSummary = true;\n\n        $scope.calcFiles = [];\n        $scope.calcFilesDisplay = [];\n        $scope.isAddToCartDisabled = false;\n        $scope.calcFilesSetID = null;\n        $scope.calcFilesPaginationList = [{count: 10, name: '10'}, {count: 25, name: '25'}, {\n            count: 50,\n            name: '50'\n        }, {count: 100, name: '100'}];\n        $scope.calcFilesPerPage = 25;\n        $scope.calcFilesCurrentPage = 1;\n\n        $rootScope.$on('delivery', function (e, productAddresses) {\n\n            if (angular.isDefined($scope.calculation)) {\n                $scope.calculation.deliveryPrice = productAddresses[0].price;\n                $scope.calculation.deliveryGrossPrice = productAddresses[0].priceGross;\n            }\n            $scope.productAddresses = _.clone(productAddresses)\n        })\n\n        $scope.$on('$stateChangeStart', (event, toState, toParams, fromState, fromParams) => {\n            $rootScope.$emit('startPreLoader');\n        })\n\n        $scope.calcFilesLoading = {\n            isBW: false,\n            isSepia: false,\n            removeFilters: false\n        };\n\n        $scope.scrollbarVolume = {\n            config: {\n                autoHideScrollbar: false,\n                advanced: {\n                    updateOnContentResize: true\n                },\n                setHeight: $('#panel-product-parameters').height(),\n                scrollInertia: 0\n            },\n            update: null\n        };\n\n        var emptyProducts = 0;\n        var countGroups = 0;\n        $scope.emptyProduct = false;\n        $scope.selectedTechnology = false;\n        $scope.quotationSend = false;\n\n        function init() {\n            $scope.productAddresses[0] = {\n                ID: 1,\n                deliveryID: 0,\n                index: 0,\n                price: 0,\n                volume: 1,\n                weight: 0\n            };\n            $(':not(.select-product-form)').on('click', function () {\n                if ($scope.currentType.names !== undefined) {\n                    $('#changeProductInput').attr('placeholder', $scope.currentType.names[$rootScope.currentLang.code]);\n                }\n            });\n        }\n\n        init();\n\n        function loadData() {\n            var def = $q.defer();\n\n            var sequences = [];\n\n            sequences.push(getType('', $scope.currentTypeUrl));\n            sequences.push(getDeliveries());\n            sequences.push(getAddress().then(function (data) {\n                setAddress(data);\n            }));\n\n            if ($stateParams.categoryurl) {\n                sequences.push(getCategory($stateParams.categoryurl));\n            }\n\n            $q.all(sequences).then(\n                function (results) {\n                    def.resolve(results);\n                },\n                function (errors) {\n                    def.reject(errors);\n                },\n                function (updates) {\n                    def.update(updates);\n                });\n\n            return def.promise;\n        }\n\n        var Setting = new SettingService('additionalSettings');\n        Setting.getPublicSettings().then(function (settingsData) {\n            $scope.alternativesAttrID = settingsData.filteredAttribute.value;\n            $scope.calcWithoutDelivery = settingsData.calcWithoutDelivery.value;\n        });\n\n        function getDescriptions() {\n\n            var SettingView = new SettingService('general');\n\n            var groupID = $scope.currentGroupID;\n            var typeID = $scope.currentTypeID;\n\n            SettingView.getPublicSettings().then(function (settingsData) {\n                PsTypeDescriptionService.getAll(groupID, typeID).then(function (data) {\n\n                    var sliderData = [];\n\n                    if (!_.isEmpty(data)) {\n\n                        _.each(data, function (oneDesc) {\n\n                            /**\n                             * @param {Object} oneDesc\n                             * @param {number} oneDesc.descType\n                             *\n                             */\n                            switch (oneDesc.descType) {\n                                case 1:\n                                    if (settingsData.numberOfLinesInDescription &&\n                                        settingsData.numberOfLinesInDescription.value > 0) {\n                                        var word = '';\n                                        if (oneDesc.langs[$rootScope.currentLang.code] !== undefined) {\n                                            word = TextWidgetService.findWord(\n                                                oneDesc.langs[$rootScope.currentLang.code].description,\n                                                settingsData.numberOfLinesInDescription.value\n                                            );\n\n                                            var paragraphNumber = TextWidgetService.findParagraph(\n                                                oneDesc.langs[$rootScope.currentLang.code].description,\n                                                word\n                                            );\n\n                                            if (paragraphNumber !== false) {\n                                                oneDesc.showLess = TextWidgetService.getLess(\n                                                    oneDesc.langs[$rootScope.currentLang.code].description,\n                                                    paragraphNumber\n                                                );\n                                                oneDesc.initHide = true;\n                                            } else {\n\n                                                var firstMatch = -1;\n                                                if (oneDesc.langs[$rootScope.currentLang.code].description !== null) {\n                                                    var withNoBreaks = oneDesc.langs[$rootScope.currentLang.code].description.replace(/(\\r\\n|\\n|\\r|\\<br\\>|\\<br \\/\\>)/gm, \"\");\n                                                    firstMatch = withNoBreaks.indexOf(word);\n                                                }\n\n                                                if (firstMatch > -1) {\n                                                    var finalCut = firstMatch + word.length;\n                                                    oneDesc.showLess = oneDesc.langs[$rootScope.currentLang.code].description.slice(0, finalCut) +\n                                                        '...</p>';\n                                                    oneDesc.initHide = true;\n                                                } else {\n                                                    oneDesc.showLess = false;\n                                                }\n                                            }\n                                        }\n                                    }\n\n                                    if (oneDesc.langs[$rootScope.currentLang.code].description) {\n                                        oneDesc.langs[$rootScope.currentLang.code].description = $sce.trustAsHtml(\n                                            oneDesc.langs[$rootScope.currentLang.code].description\n                                        );\n                                    }\n\n                                    if (oneDesc.showLess) {\n                                        oneDesc.showLess = $sce.trustAsHtml(oneDesc.showLess);\n                                    }\n\n                                    if (oneDesc.showLess && oneDesc.visible === 1) {\n                                        oneDesc.initHide = false;\n                                    }\n\n                                    $scope.descriptions.push(oneDesc);\n                                    break;\n                                case 5:\n\n                                    oneDesc.items = [];\n\n                                    if (!_.isEmpty(oneDesc.files)) {\n                                        _.each(oneDesc.files, function (oneFile) {\n\n                                            /**\n                                             * @param {Object} oneFile\n                                             * @param {string} oneFile.urlCrop\n                                             * @param {number} oneFile.fileID\n                                             */\n\n                                            oneDesc.items.push({\n                                                thumb: oneFile.urlCrop,\n                                                img: oneFile.url,\n                                                description: 'Image ' + oneFile.fileID\n                                            });\n                                        });\n                                    }\n\n                                    $scope.galleries.push(oneDesc);\n\n                                    break;\n                                case 3:\n\n                                    sliderData.push(oneDesc);\n\n                                    break;\n\n                                case 6:\n\n                                    $scope.thumbnails.push(oneDesc);\n\n                                    break;\n\n                                case 7:\n                                    $scope.patterns = oneDesc.patterns;\n\n                                    break;\n                                case 8:\n                                    $scope.seoDescription = oneDesc.langs[$rootScope.currentLang.code].description ?? '';\n\n                                    break;\n                            }\n\n                        });\n\n\n                    }\n\n                    $rootScope.$emit('Slider:data', sliderData);\n\n                });\n            });\n\n        }\n\n        var selectType = function (type) {\n\n            $scope.currentType = type;\n\n            if ($rootScope.currentLang && $rootScope.currentLang.code && type.names) {\n                $rootScope.customBreadcrumbs.calculate = type.names[$rootScope.currentLang.code];\n            } else {\n                $rootScope.customBreadcrumbs.calculate = $filter('translate')('product');\n            }\n\n            var promises = [];\n\n            /**\n             * @param {Object} type\n             * @param {number} type.complex\n             */\n\n            if (!!type.complex) {\n\n                $scope.complexID = type.ID;\n\n                // complex product\n                ComplexService.getAllPublic().then(function (data) {\n                    countProducts = data.length;\n                    var cgIndex = 0;\n                    _.each(data, function (item) {\n                        cgIndex++;\n                        promises.push($scope.getComplexGroup(item, cgIndex));\n\n                    });\n\n                });\n\n            } else {\n\n                // normal product\n                countProducts = 1;\n\n                var group = {\n                    ID: null,\n                    name: type.name,\n                    names: type.names,\n                    productID: type.ID,\n                    type: \"other\",\n                    products: []\n                };\n                // if not complex type\n                var product = {\n                    groupID: type.groupID,\n                    typeID: type.ID,\n                    typeName: type.name,\n                    typeNames: type.names\n                };\n                group.products.push(product);\n                promises.push($scope.getComplexGroup(group, 1));\n\n            }\n            $q.all(promises).then(function (data) {\n\n                getFormat();\n\n                log.info('100% - loaded');\n                updateLinkToCopy();\n                setupClipboardJS();\n                DomWidgetService.pinElementWhenScroll(\n                    \".panel-summary\",\n                    \".panel-summary .panel-heading\",\n                    \".panel-configuration\"\n                );\n            }, function (data) {\n                console.error('ERR: Problem with products load', data);\n            });\n\n        };\n\n        function getType(groupUrl, typeUrl) {\n\n            PsTypeService.getOneForView(groupUrl, typeUrl).then(function (data) {\n                if (data && data.active === 0) {\n                    Notification.error($filter('translate')('product_currently_not_available'));\n                    $state.go('home');\n                    return;\n                }\n                $scope.currentGroupID = data.groupID;\n                $scope.currentTypeID = data.ID;\n                MainWidgetService.includeTemplateVariables($scope, 'calc', $scope.currentGroupID, $scope.currentTypeID);\n                $scope.type = data;\n                //log type\n\n                if ($rootScope.logged === false) {\n                    $scope.calcFilesSetID = localStorageService.get('calcFilesSetID');\n                    if (!$scope.calcFilesSetID) {\n                        CalcFileService.createGuestSet($scope.type.ID).then(function (createGuestSetResponse) {\n                            $scope.calcFilesSetID = createGuestSetResponse.response ? createGuestSetResponse.calcFileSetID : null;\n                            localStorageService.set('calcFilesSetID', $scope.calcFilesSetID);\n                        });\n                    } else {\n                        CalcFileService.getBySetID($scope.calcFilesSetID).then(function (caclFilesData) {\n                            $scope.calcFiles = caclFilesData;\n                            $scope.setPagination($scope.calcFilesCurrentPage);\n                        });\n                    }\n                } else {\n                    CalcFileService.getAllByType($scope.type.ID).then(function (caclFilesData) {\n                        $scope.calcFiles = caclFilesData;\n                        $scope.setPagination($scope.calcFilesCurrentPage);\n                        if (caclFilesData.length > 0) {\n                            $scope.calcFilesSetID = caclFilesData[0].calcFilesSetID;\n                        }\n                    });\n                }\n\n\n                if ($rootScope.currentLang && $rootScope.currentLang.code && $rootScope.customBreadcrumbs.group === undefined) {\n                    $rootScope.customBreadcrumbs.group = data.group.slugs[$rootScope.currentLang.code];\n                }\n\n                if ($rootScope.customBreadcrumbs.group === undefined) {\n                    $rootScope.customBreadcrumbs.group = $filter('translate')('group');\n                }\n\n                getDescriptions();\n\n                if ($stateParams.categoryurl === undefined && $scope.currentTypeID) {\n                    getFirstCategory($scope.currentTypeID);\n                }\n\n                ComplexService = new PsComplexService(data.groupID, data.ID);\n\n                var getTaxes = function () {\n\n                    var def = $q.defer();\n                    TaxService.getForProduct($scope.currentGroupID, $scope.currentTypeID).then(function (data) {\n                        def.resolve(data);\n                    });\n                    return def.promise;\n                };\n\n                getTaxes().then(function (data) {\n                    $scope.taxes = data;\n                    if (data.length > 1) {\n                        _.each($scope.taxes, function (tax) {\n                            if (tax.default) {\n                                $scope.productItem.taxID = tax.ID;\n                            }\n                        });\n                    } else if (data.length === 1) {\n                        $scope.productItem.taxID = $scope.taxes[0].ID;\n                    }\n\n\n                });\n\n                selectType(data);\n\n            }, function (data) {\n                console.error(data);\n                Notification.error($filter('translate')('error'));\n            });\n\n        }\n\n        $scope.getComplexGroup = function (group, index) {\n\n            var def = $q.defer();\n\n            if (group.products.length > 0) {\n                countGroups++;\n            }\n\n            $scope.complexProducts.push(group);\n            var fakeTarget = [{}];\n            setFromCalculationUrl(fakeTarget, 'selectedProduct', 'selectedProduct[]', null, parseInt);\n            var product = fakeTarget[index-1] && fakeTarget[index-1].selectedProduct ? _.findWhere(group.products, {ID: fakeTarget[index-1].selectedProduct}) : group.products[0];\n            if (!group.selectedProduct) {\n\n\n                /**\n                 * @param {Object} $scope.currentCalc\n                 * @param {Array} $scope.currentCalc.calcProducts\n                 */\n                if ($scope.currentCalc) {\n                    var idx = _.findIndex($scope.currentCalc.calcProducts, {typeID: product.typeID});\n                    if (idx === -1) {\n                        return true;\n                    }\n                }\n                $scope.selectComplexProductSync(group, product).then(function (data) {\n                    log.info('Another product loaded!')\n                    timeouts.push($timeout(function () {\n                        $rootScope.$emit('stopPreLoader', true);\n                        $scope.selectFormatSync(group.selectedProduct.data, group.selectedProduct.data.currentFormat).then(function () {\n                            if (countProducts === index) {\n                                productsLoaded = true;\n                                if (getCalculationUrlParam('customVolumes')) {\n                                    var customVolumes = angular.fromJson(getCalculationUrlParam('customVolumes'));\n                                    if (angular.isDefined(customVolumes[$scope.currentTypeID])) {\n                                        $scope.customVolume = customVolumes[$scope.currentTypeID];\n                                    }\n                                }\n                                $scope.getVolumes($scope.productItem.amount);\n                                setFromCalculationUrl($scope.productItem, 'name', 'name');\n                                setFromCalculationUrl($scope.productItem, 'selectedTechnologyID', 'technologyID', null, parseInt);\n                                setFromCalculationUrl($scope.productItem, 'realisationTime', 'realisationTime', null, parseInt)\n                                setFromCalculationUrl($scope.productItem, 'taxID', 'tax', null, parseInt)\n                                setFromCalculationUrl($scope.complexProducts, 'selectedProduct.data.currentFormat.customWidth', 'customWidth[]', 'customWidth', parseInt);\n                                setFromCalculationUrl($scope.complexProducts, 'selectedProduct.data.currentFormat.customHeight', 'customHeight[]', 'customHeight', parseInt);\n\n                                var changes = setFromCalculationUrl($scope.complexProducts, 'selectedProduct.data.selectedOptions', 'attrID[]', null, parseInt);\n\n                                _.each(changes, function (data) {\n                                    _.each($scope.complexProducts[data[1]].selectedProduct.data.attributes, (attribute) => {\n                                        if (attribute.attrID == data[2]) {\n                                            _.each(attribute.options, (option) => {\n                                                if (option.ID == data[3]) {\n                                                    $scope.selectOption($scope.complexProducts[data[1]].selectedProduct.data, data[2], option)\n                                                }\n                                            })\n                                        }\n                                    });\n                                });\n\n                                setFromCalculationUrl($scope.complexProducts, 'selectedProduct.data.attrPages', 'attrPages[]', null, parseInt);\n                                setFromCalculationUrl($scope.complexProducts, 'selectedProduct.data.currentPages', 'pages[]', null, parseInt);\n                                setFromCalculationUrl($scope.productAddresses[0], 'deliveryID', 'deliveryID', null, parseInt);\n                                $scope.getVolumes($scope.productItem.amount);\n                                if (choosenPaperID) {\n                                    console.log('choosenPaperID');\n                                    console.log(choosenPaperID);\n                                    var obj = $scope.complexProducts[0].selectedProduct.data;\n                                    var allAttributes = Object.keys(obj).filter((key) => key === 'attributes').reduce((cur, key) => {\n                                        return Object.assign(cur, {[key]: obj[key]})\n                                    }, {});\n                                    var gramsPaperAttr = allAttributes.attributes.find(function (object) {\n                                        if (object.attrID === 2) return object;\n                                    });\n                                    var gramsPaperAllOptions = gramsPaperAttr.options;\n\n                                    var foundPaperGramme = gramsPaperAllOptions.find(function (object) {\n                                        if (object.ID === parseInt(choosenPaperID)) return object;\n                                    });\n\n                                    var foundPaperName = false,\n                                        foundPaperType = false,\n                                        foundPaperFamily = false;\n\n                                    // find paper name by exclusions\n                                    var namePaperAttr = allAttributes.attributes.find(function (object) {\n                                        if (object.attrID === 105) return object;\n                                    });\n                                    console.log('namePaperAttr');\n                                    console.log(namePaperAttr);\n                                    var namePaperAllOptions = namePaperAttr.options;\n                                    _.each(namePaperAllOptions, function (singlePaper) {\n                                        if (!singlePaper.exclusions[2].includes(parseInt(choosenPaperID))) {\n                                            foundPaperName = singlePaper;\n                                        }\n                                    });\n\n                                    // find paper type by exclusions\n                                    var typePaperAttr = allAttributes.attributes.find(function (object) {\n                                        if (object.attrID === 103) return object;\n                                    });\n                                    var typePaperAllOptions = typePaperAttr.options;\n                                    _.each(typePaperAllOptions, function (singlePaper) {\n                                        if (!singlePaper.exclusions[105].includes(foundPaperName.ID)) {\n                                            foundPaperType = singlePaper;\n                                        }\n                                    });\n\n                                    // find paper family by exclusions\n                                    var familyPaperAttr = allAttributes.attributes.find(function (object) {\n                                        if (object.attrID === 55) return object;\n                                    });\n                                    var familyPaperAllOptions = familyPaperAttr.options;\n                                    _.each(familyPaperAllOptions, function (singlePaper) {\n                                        if (!singlePaper.exclusions[103].includes(foundPaperType.ID)) {\n                                            foundPaperFamily = singlePaper;\n                                        }\n                                    });\n\n                                    $scope.selectOption($scope.complexProducts[0].selectedProduct.data, 55, foundPaperFamily);\n                                    $scope.selectOption($scope.complexProducts[0].selectedProduct.data, 103, foundPaperType);\n                                    $scope.selectOption($scope.complexProducts[0].selectedProduct.data, 105, foundPaperName);\n                                    $scope.selectOption($scope.complexProducts[0].selectedProduct.data, 2, foundPaperGramme);\n\n                                }\n\n                            }\n                            def.resolve(data);\n                        }, function (errorData) {\n                            console.log('selectFormatSyncReject', errorData);\n                            console.log(group);\n                        });\n                    }, 100));\n                }, function (data) {\n                    console.error('selectComplexProductError');\n                    def.reject(data);\n                });\n            }\n\n            return def.promise;\n\n        };\n\n        $scope.selectComplexProductSync = function (complexProduct, selectedProduct) {\n\n            var def = $q.defer();\n            complexProduct.selectedProduct = selectedProduct;\n\n            $scope.getProduct(selectedProduct).then(function (data) {\n                def.resolve(data);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        $scope.selectComplexProduct = function (complexProduct, selectedProduct) {\n            updateCalculationUrl('selectedProduct', selectedProduct.ID, null, productIndex(complexProduct));\n            var def = $q.defer();\n            complexProduct.selectedProduct = selectedProduct;\n            $scope.getProduct(selectedProduct).then(function (data) {\n                def.resolve(data);\n                $scope.getVolumes($scope.productItem.amount);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        $scope.selectDefaultOptions = function (product) {\n            // product.attributes[2]=\n            var currentCalcProduct = getCurrentCalcProduct(product.info);\n\n            _.each(product.attributes, function (item) {\n\n                if (!product.selectedOptions[item.attrID]) {\n                    var currentCalcAttr = null;\n                    if (currentCalcProduct) {\n                        currentCalcAttr = _.find(currentCalcProduct.attributes, {attrID: item.attrID});\n                    }\n\n                    var tmp;\n                    _.each(item.options, function (option) {\n                        if (currentCalcAttr) {\n                            if (currentCalcAttr.optID !== option.ID) {\n                                return true;\n                            }\n                            if (currentCalcAttr.attrPages) {\n                                product.attrPages[item.attrID] = currentCalcAttr.attrPages\n                            }\n                        }\n\n                        if (!_.includes(product.excludedOptions, option.ID)) {\n                            tmp = option;\n                            return false;\n                        }\n                    });\n\n                    var defaultOption = _.find(item.options, {default: 1});\n\n                    if (defaultOption && !_.includes(product.excludedOptions, defaultOption.ID)) {\n                        tmp = defaultOption;\n                    }\n\n                    $scope.selectOption(product, item.attrID, tmp);\n\n                }\n            });\n\n        };\n\n        function getCurrentCalcProduct(product) {\n            var currentCalcProduct = null;\n            if ($scope.currentCalc) {\n                currentCalcProduct = _.find($scope.currentCalc.calcProducts, {typeID: product.typeID});\n            }\n            return currentCalcProduct;\n        }\n\n        $scope.getProduct = function (product) {\n\n            var def = $q.defer();\n\n            emptyProducts = 0;\n\n            var newProduct = {\n                info: product,\n                selectedOptions: {},\n                attrPages: {},\n                attributes: {},\n                attributeMap: [],\n                optionMap: {},\n                currentFormat: false,\n                currentPages: false,\n                excludedOptions: [],\n                excludedByAttribute: {},\n                formatExcluded: [],\n                thickness: {\n                    values: {},\n                    min: null,\n                    max: null,\n                    current: null\n                }\n            };\n\n            product.data = newProduct;\n\n            AttributeService = new PsAttributeService(product.groupID, product.typeID);\n            FormatService = new PsFormatService(product.groupID, product.typeID);\n            PagesService = new PsPageService(product.groupID, product.typeID);\n\n            $q.all([\n                FormatService.getPublic($scope.complexID),\n                PagesService.getPublic(),\n                AttributeService.getFullOptions()\n            ]).then(function (data) {\n\n                newProduct.formats = data[0];\n\n                var attributesData = data[2];\n\n                if (attributesData.length === 0) {\n                    emptyProducts++;\n                }\n\n                if (emptyProducts === countGroups) {\n                    $scope.emptyProduct = true;\n                }\n\n                var customFormatIndex = _.findIndex(attributesData, {attrID: -1});\n                if (customFormatIndex > -1) {\n                    newProduct.customFormatInfo = attributesData[customFormatIndex];\n                    attributesData.splice(1, customFormatIndex);\n                }\n\n                var customPageIndex = _.findIndex(attributesData, {attrID: -2});\n                if (customPageIndex > -1) {\n                    newProduct.customPageInfo = attributesData[customPageIndex];\n                    attributesData.splice(1, customPageIndex);\n                }\n\n                newProduct.attributes = attributesData;\n\n                _.each(newProduct.attributes, function (attr) {\n                    newProduct.attributeMap.push(attr.attrID);\n                    newProduct.optionMap[attr.attrID] = [];\n                    _.each(attr.options, function (opt) {\n                        newProduct.optionMap[attr.attrID].push(opt.ID);\n                    });\n                });\n\n                newProduct.pages = data[1];\n\n                newProduct.relatedFormats = _.clone(newProduct.formats);\n\n                var currentCalcProduct = getCurrentCalcProduct(product.info);\n\n                var formatIdx = 0;\n                if (currentCalcProduct) {\n                    formatIdx = _.findIndex(newProduct.relatedFormats, {ID: currentCalcProduct.formatID});\n                    if (formatIdx === -1) {\n                        console.error('Can\\'t find format like in select calculation.');\n                        return true;\n                    }\n                }\n\n\n                $scope.selectFormatSync(newProduct, newProduct.relatedFormats[formatIdx]).then(function () {\n\n                    if (currentCalcProduct) {\n                        $scope.selectPagesSync(newProduct, currentCalcProduct.pages);\n                    } else {\n                        if (newProduct.pages.length && newProduct.pages[0].pages) {\n                            $scope.selectPagesSync(newProduct, newProduct.pages[0].pages);\n                        }\n                        if (newProduct.pages.length && newProduct.pages[0].minPages) {\n                            $scope.selectPagesSync(newProduct, newProduct.pages[0].minPages);\n                        }\n                    }\n                    def.resolve(data);\n                });\n                for (var i = 0; i < $scope.complexProducts.length; i++) {\n                    var formatFromUrl = _.find($scope.complexProducts[i].selectedProduct.data.formats, function (item) {\n                        return item.ID == getCalculationUrlParam('formatID.' + i)\n                    });\n                    setFromCalculationUrl($scope.complexProducts[i].selectedProduct.data, 'currentFormat', 'format', formatFromUrl);\n                    if($scope.complexProducts[i].selectedProduct.data.currentFormat){\n                        $scope.selectFormat($scope.complexProducts[i], $scope.complexProducts[i].selectedProduct.data.currentFormat)\n                    }\n                }\n            }, function (data) {\n                def.reject(data);\n                Notification.error($filter('translate')('data_retrieve_failed'));\n            });\n\n            return def.promise;\n        };\n\n        function getAttributeFromOption(product, optionID) {\n\n            var def = $q.defer();\n\n            _.each(product.optionMap, function (options, attrID) {\n                if (_.includes(options, optionID)) {\n                    def.resolve(parseInt(attrID));\n                }\n            });\n\n            return def.promise;\n        }\n\n        $scope.selectFormat = function (product, format) {\n            updateCalculationUrl('formatID', format.ID, null, productIndex(product));\n            product.currentFormat = format;\n            if (!!format.custom) {\n                product.currentFormat.customWidth = format.minWidth - format.slope * 2;\n                product.currentFormat.customHeight = format.minHeight - format.slope * 2;\n            }\n\n            $scope.checkRelatedFormats(product, format);\n\n            $scope.filterRelatedFormats();\n\n            $scope.selectDefaultFormats().then(function () {\n\n\n                CalcSimplifyWidgetService.checkFormatExclusions(product, format).then(function () {\n\n                    setExclusionsAsync(product).then(function (exclusionEnd) {\n\n                        if (exclusionEnd) {\n\n                            descriptionTabResetActive();\n\n                            $scope.selectDefaultOptions(product);\n                            $scope.getVolumes($scope.productItem.amount);\n                        }\n                    }, function (msg) {\n                        console.error(msg)\n                    });\n\n                }, function (msg) {\n                    console.error(msg)\n                });\n\n            }, function (data) {\n                console.log(data);\n            });\n\n        };\n\n        $scope.selectFormatSync = function (product, format) {\n\n            var def = $q.defer();\n\n            if (format === null || format === undefined) {\n                def.reject(false);\n                return def.promise;\n            }\n\n            product.currentFormat = format;\n            if (format && !!format.custom) {\n                product.currentFormat.customWidth = format.minWidth - format.slope * 2;\n                product.currentFormat.customHeight = format.minHeight - format.slope * 2;\n            }\n\n            $scope.checkRelatedFormats(product, format);\n            $scope.filterRelatedFormats();\n\n            $scope.selectDefaultFormats().then(function () {\n\n                CalcSimplifyWidgetService.checkFormatExclusions(product, format).then(function () {\n\n                    setExclusionsAsync(product).then(function (exclusionEnd) {\n                        if (exclusionEnd) {\n                            descriptionTabResetActive();\n\n                            $scope.selectDefaultOptions(product);\n\n                            product.info.noCalculate = false;\n                            def.resolve();\n                        } else {\n                            product.info.noCalculate = true;\n                            def.resolve();\n                        }\n                    });\n\n                });\n\n            }, function (data) {\n                console.log(data);\n            });\n\n            return def.promise;\n        };\n\n        function setExclusionsAsync(product) {\n\n            var def = $q.defer();\n\n            product.excludedOptions = _.clone(product.formatExcluded);\n            product.excludedByAttribute = {};\n\n            _.each(product.attributes, function (attribute) {\n                attribute.filteredOptions = _.clone(attribute.options, true);\n            });\n\n            var optID = {};\n            var activeAttrID;\n            _.each(product.attributeMap, function (attrID) {\n\n                activeAttrID = attrID;\n                optID = product.selectedOptions[attrID];\n\n                if (optID) {\n                    var item = {};\n\n                    if (_.isObject(optID)) {\n                        item = optID;\n                    } else {\n                        item = getOption(product, optID);\n                    }\n                    if (!item) {\n                        def.reject('no item for optID ' + optID);\n                        return def.promise;\n                    }\n                    var tmpExclusions = {};\n\n                    function printExcl(all, label) {\n                        _.each(all, function (item, i) {\n                            if (item.length)\n                                console.log('excluded ' + label, item)\n                        })\n                    }\n\n                    var exclusionsThickness = $scope.filterByThickness(product);\n                    printExcl(exclusionsThickness, 'exclusionsThickness')\n                    var exclusionsThicknessPages = $scope.filterByOptionsPages(product);\n                    printExcl(exclusionsThicknessPages, 'exclusionsThicknessPages')\n\n                    /**\n                     * @param {Object} item\n                     * @param {Array} item.exclusions\n                     */\n                    if (item.exclusions) {\n                        tmpExclusions = _.merge({}, item.exclusions, exclusionsThickness, exclusionsThicknessPages);\n                    }\n\n                    product.excludedByAttribute[activeAttrID] = _.merge({}, item.exclusions);\n\n                    setOptionExclusionsAsync(product, activeAttrID, tmpExclusions).then(function (isEnd) {\n                        if (isEnd) {\n\n                            checkAttrSelectAsync(product).then(function (isAttrSelectEnd) {\n                                if (isAttrSelectEnd) {\n                                    if (_.last(product.attributeMap) === activeAttrID) {\n\n                                        var attrIndex = _.findIndex(product.attributes, {'attrID': attrID});\n\n                                        if (attrIndex > -1) {\n                                            if (product.attributes[attrIndex].filteredOptions.length !==\n                                                $('#select-attribute-' + attrID + \" option\").length) {\n                                                product.attributes[attrIndex].filteredOptions = angular.copy(\n                                                    product.attributes[attrIndex].filteredOptions\n                                                );\n                                            }\n                                        }\n\n                                        def.resolve(true);\n                                    }\n                                } else {\n                                    if (_.last(product.attributeMap) === activeAttrID) {\n                                        def.resolve(true);\n                                    }\n                                }\n                            });\n                        } else {\n                            if (_.last(product.attributeMap) === activeAttrID) {\n                                def.resolve(true);\n                            }\n                        }\n                    });\n\n                } else {\n                    if (_.last(product.attributeMap) === activeAttrID) {\n                        def.resolve(true);\n                    }\n                }\n            });\n\n            if (product.attributeMap.length === 0) {\n                def.resolve(false);\n            }\n\n            return def.promise;\n\n        }\n\n        function setOptionExclusionsAsync(product, attrID, exclusions) {\n\n            var def = $q.defer();\n\n            var attribute = _.find(product.attributes, {attrID: attrID});\n\n            addExcludesFromFormatAndPages(product, exclusions).then(function () {\n\n                addExcludedOptions(product, attribute).then(function () {\n\n                    attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                        return !_.includes(product.excludedOptions, opt.ID);\n                    });\n\n                    var selectedOption = _.find(attribute.filteredOptions, {ID: product.selectedOptions[attribute.attrID]});\n\n                    if (selectedOption === undefined) {\n                        if (attribute.filteredOptions.length > 0) {\n\n                            var oldSelectedOptionID = product.selectedOptions[attribute.attrID];\n\n                            var oldOptionIndex = _.findIndex(attribute.options, {ID: oldSelectedOptionID});\n\n                            if (oldOptionIndex > -1) {\n                                var flatExclusions = _.reduceRight(attribute.options[oldOptionIndex].exclusions, function (a, b) {\n                                    return a.concat(b);\n                                }, []);\n                                product.excludedOptions = product.excludedOptions.filter(function (item) {\n                                    return !flatExclusions.includes(item);\n                                });\n                            }\n\n                            var flatNewExclusions = _.reduceRight(attribute.filteredOptions[0].exclusions, function (a, b) {\n                                return a.concat(b);\n                            }, []);\n\n                            _.each(flatNewExclusions, function (oneOptionID) {\n                                if (!_.includes(product.excludedOptions, oneOptionID)) {\n                                    product.excludedOptions.push(oneOptionID);\n                                }\n                            });\n\n                            product.selectedOptions[attribute.attrID] = attribute.filteredOptions[0].ID;\n\n                            CalcSimplifyWidgetService.removeUnActiveOptions(product).then(function (removedStatus) {\n                                setExclusionsAsync(product).then(function (exclusionEnd) {\n                                    def.resolve(true);\n                                });\n                            });\n\n                        } else {\n                            console.log('Wykluczamy opcje dla atrybutu: ', attribute.attrName, product.selectedOptions[attribute.attrID]);\n                            delete product.selectedOptions[attribute.attrID];\n                            def.resolve(true);\n                        }\n                    } else {\n                        def.resolve(true);\n                    }\n\n                });\n\n            });\n\n            return def.promise;\n        }\n\n        function addExcludesFromFormatAndPages(product, exclusions) {\n            var def = $q.defer();\n\n            var sizeOutside = _.size(exclusions);\n            var iteratorOutside = 0;\n            var iteratorInside;\n            var sizeInside;\n\n            if (_.size(exclusions) > 0) {\n                _.each(exclusions, function (exc) {\n\n                    sizeInside = exc.length;\n                    iteratorInside = 0;\n\n                    if (sizeInside > 0) {\n                        _.each(exc, function (optID) {\n                            product.excludedOptions.push(optID);\n\n                            if (iteratorOutside === (sizeOutside - 1) && (sizeInside - 1) === iteratorInside) {\n                                def.resolve(true);\n                            }\n\n                            iteratorInside++;\n\n                        });\n                    } else {\n\n                        if (iteratorOutside === (sizeOutside - 1)) {\n                            def.resolve(true);\n                        }\n\n                    }\n\n\n                    iteratorOutside++;\n                });\n            } else {\n                def.resolve(true);\n            }\n\n            return def.promise;\n        }\n\n        function aggregateSelectedOptions(product) {\n            var def = $q.defer();\n\n            var aggregateSelectedOptions = [];\n\n            var counter = 0;\n            var size = _.size(product.selectedOptions);\n\n            _.each(product.selectedOptions, function (selectedOptID) {\n                aggregateSelectedOptions.push(selectedOptID);\n\n                if (counter === (size - 1)) {\n                    def.resolve(aggregateSelectedOptions);\n                }\n\n                counter++;\n            });\n\n            return def.promise;\n        }\n\n        function addExcludedOptions(product, attribute) {\n            var def = $q.defer();\n\n            aggregateSelectedOptions(product).then(function (aggregateSelectedOptions) {\n\n                deletedAttrs = [];\n\n                var counter = 0;\n                var size = _.size(attribute.options);\n\n                _.each(attribute.options, function (option) {\n\n\n                    if (_.size(_.intersection(aggregateSelectedOptions, option.excludesOptions)) > 0) {\n\n                        if (_.indexOf(Object.values(product.excludedOptions), option.ID) === -1) {\n                            product.excludedOptions.push(option.ID);\n                        }\n\n                        if (counter === (size - 1)) {\n                            def.resolve(true);\n                        }\n\n                    } else {\n\n                        if (counter === (size - 1)) {\n                            def.resolve(true);\n                        }\n\n                    }\n\n                    counter++;\n                });\n\n            });\n\n            return def.promise;\n        }\n\n        function checkAttrSelectAsync(product) {\n            var def = $q.defer();\n\n            var firstFilteredOption = null;\n\n            _.each(product.attributes, function (attribute) {\n\n                if (_.includes(deletedAttrs, attribute.attrID)) {\n                    if (product.selectedOptions[attribute.attrID]) {\n                        firstFilteredOption = _.first(attribute.filteredOptions);\n                        if (firstFilteredOption) {\n                            product.selectedOptions[attribute.attrID] = firstFilteredOption.ID;\n                        }\n                    } else {\n\n                        attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                            return !_.includes(product.excludedOptions, opt.ID);\n                        });\n\n                        firstFilteredOption = _.first(attribute.filteredOptions);\n\n                        if (firstFilteredOption) {\n\n                            var flat = _.reduceRight(firstFilteredOption.exclusions, function (a, b) {\n                                return a.concat(b);\n                            }, []);\n                            product.excludedOptions = _.merge({}, product.excludedOptions, flat);\n\n                            product.selectedOptions[attribute.attrID] = firstFilteredOption.ID;\n                        }\n\n                    }\n                }\n\n                if (_.last(product.attributeMap) === attribute.attrID) {\n                    def.resolve(true);\n                }\n\n            });\n\n            return def.promise;\n        }\n\n        $scope.checkRelatedFormats = function (product, format) {\n\n            if (!format.relatedFormats) {\n                return true;\n            }\n            $scope.relatedFormats = [];\n            _.each(format.relatedFormats, function (item) {\n                $scope.relatedFormats.push({ID: item.formatID, typeID: item.typeID});\n            });\n\n        };\n\n        $scope.filterRelatedFormats = function () {\n\n            _.each($scope.complexProducts.slice(1), function (oneProduct) {\n                if (oneProduct.selectedProduct) {\n                    if ($scope.complexProducts[0].selectedProduct.data.formats.length === 1) {\n                        oneProduct.selectedProduct.data.relatedFormats = _.clone(oneProduct.selectedProduct.data.formats);\n                    } else {\n                        oneProduct.selectedProduct.data.relatedFormats = filterFormats(oneProduct.selectedProduct.data.formats, $scope.relatedFormats);\n                    }\n\n                }\n            });\n\n        };\n\n        function filterFormats(input, ids) {\n\n            var result = [];\n\n            _.each(input, function (item) {\n                var idx = _.findIndex(ids, {ID: item.ID});\n                if (idx > -1) {\n                    result.push(item);\n                }\n            });\n            return result;\n\n        }\n\n        $scope.selectDefaultFormats = function () {\n\n            var def = $q.defer();\n            var formatChange = false;\n\n            _.each($scope.complexProducts.slice(1), function (oneProduct) {\n\n                if (!oneProduct.selectedProduct) {\n                    return true;\n                }\n\n\n                var product = oneProduct.selectedProduct.data;\n\n                var currentFormat = product.currentFormat;\n\n                var find = -1;\n                if (!!currentFormat) {\n                    find = _.findIndex($scope.relatedFormats, {ID: currentFormat.ID, typeID: product.info.typeID});\n                }\n\n                if (find === -1) {\n\n                    if (!angular.isDefined(product.relatedFormats) || product.relatedFormats.length === 0) {\n                        product.currentFormat = null;\n                        return true;\n                    } else {\n                        var searchFormat = filterFormats(product.formats, $scope.relatedFormats)[0];\n\n                        if (searchFormat) {\n                            product.currentFormat = searchFormat;\n                            if (!!searchFormat.custom) {\n                                product.currentFormat.customWidth = searchFormat.minWidth - searchFormat.slope * 2;\n                                product.currentFormat.customHeight = searchFormat.minHeight - searchFormat.slope * 2;\n                            }\n                        }\n                    }\n\n                    if (!product.currentFormat) {\n                        def.reject({'info': 'select another format'});\n                        Notification.error($filter('translate')('not_related_format_for_product') + ' - ' + product.info.typeName);\n                    }\n\n                } else {\n                    var idx = _.findIndex(product.relatedFormats, {ID: currentFormat.ID});\n                    if (idx > -1) {\n                        product.currentFormat = product.relatedFormats[idx];\n                    }\n                }\n\n                CalcSimplifyWidgetService.checkFormatExclusions(product).then(function () {\n\n                    setExclusionsAsync(product).then(function (exclusionEnd) {\n\n                        if (exclusionEnd) {\n                            $scope.selectDefaultOptions(product);\n                        }\n                    });\n\n                });\n\n            });\n\n            if (!formatChange) {\n                def.resolve();\n            } else {\n                console.log('Format change error!');\n            }\n\n            return def.promise;\n        };\n        function getGroup(currentGroupUrl) {\n\n            PsGroupService.getOneForView(currentGroupUrl).then(function (data) {\n                $scope.group = data;\n                if ($rootScope.currentLang && $rootScope.currentLang.code) {\n                    $rootScope.customBreadcrumbs.group = data.names[$rootScope.currentLang.code];\n                } else {\n                    $rootScope.customBreadcrumbs.group = $filter('translate')('group');\n                }\n                getType(currentGroupUrl, $scope.currentTypeUrl);\n            }, function (data) {\n                console.error(data);\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getCategory(currentCategoryUrl) {\n            DpCategoryService.getOneForView(currentCategoryUrl).then(function (data) {\n                if ($rootScope.currentLang && $rootScope.currentLang.code && data.langs) {\n                    $rootScope.customBreadcrumbs.category = data.langs[$rootScope.currentLang.code].name;\n                } else {\n                    $rootScope.customBreadcrumbs.category = $filter('translate')('category');\n                }\n            }, function (data) {\n                console.error(data);\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getFirstCategory(typeID) {\n            DpCategoryService.getFirstByType(typeID).then(function (data) {\n                if ($rootScope.currentLang && $rootScope.currentLang.code && data.langs) {\n                    $rootScope.customBreadcrumbs.category = data.langs[$rootScope.currentLang.code].name;\n                } else {\n                    $rootScope.customBreadcrumbs.category = $filter('translate')('category');\n                }\n            }, function (data) {\n                console.error(data);\n            });\n        }\n\n        function getFormat() {\n\n            FormatService = new PsFormatService($scope.currentGroupID, $scope.currentTypeID);\n            FormatService.getPublic($scope.complexID).then(function (data) {\n\n                $scope.type.formats = data;\n                $scope.type.currentFormat = $scope.type.formats[0];\n\n            }, function (data) {\n                console.error('format err: ', data);\n            });\n        }\n\n        $scope.selectOption = function (product, attrID, item) {\n\n            var itemExist = true;\n\n            if (item === undefined) {\n                itemExist = false;\n                var optID = product.selectedOptions[attrID];\n\n                item = getOption(product, optID);\n\n                if (item === undefined) {\n                    return false;\n                }\n            }\n            if(product.attributes[product.attributeMap.indexOf(parseInt(attrID))].displayImageOnMiniature){\n                $scope.optionFileUrl =  item.icon ? item.icon.url : null\n            }\n\n\n            product.selectedOptions[attrID] = parseInt(item.ID);\n\n            setRangePages(product, attrID);\n\n            if (product.thickness.minAttr === attrID) {\n                product.thickness.min = null;\n                product.thickness.minAttr = null;\n            }\n\n            if (product.thickness.maxAttr === attrID) {\n                product.thickness.max = null;\n                product.thickness.maxAttr = null;\n            }\n\n            /**\n             * @param {Object} item\n             * @param {number|null} item.minThickness\n             * @param {number|null} item.maxThickness\n             * @param {number} item.sizePage\n             */\n            if (Number(item.minThickness) > 0 && (Number(item.minThickness) > product.thickness.min || item.minThickness === null)) {\n                product.thickness.min = item.minThickness;\n                product.thickness.minAttr = attrID;\n            }\n\n            if (Number(item.maxThickness) > 0 && (Number(item.maxThickness) < product.thickness.max || product.thickness.max === null)) {\n\n                product.thickness.max = item.maxThickness;\n                product.thickness.maxAttr = attrID;\n            }\n\n            product.thickness.values[attrID] = item.sizePage;\n\n            if (product.pages.length) {\n                $scope.calcProductThickness(product);\n                $scope.getMinimumThickness(product);\n                $scope.getMaximumThickness(product);\n            }\n\n            setExclusionsAsync(product).then(function (exclusionEnd) {\n                if (exclusionEnd) {\n                    $scope.selectDefaultOptions(product);\n                    if (!itemExist) {\n                        $scope.getVolumes($scope.productItem.amount);\n                    }\n                }\n\n            });\n            if (productsLoaded) {\n                updateCalculationUrl('attrID', product.selectedOptions[attrID], attrID, productIndex(product));\n            }\n        };\n\n        function productIndex(productOrGroup) {\n            var idInItem = null;\n            if (productOrGroup.selectedProduct) {\n                idInItem = productOrGroup.selectedProduct.typeID\n            } else if (productOrGroup.productID) {\n                idInItem = productOrGroup.productID\n            } else if (productOrGroup.info.typeID) {\n                idInItem = productOrGroup.info.typeID\n            }\n            var index = _.findIndex($scope.complexProducts, function (item) {\n                if (item.selectedProduct && item.selectedProduct.typeID) {\n                    return item.selectedProduct.typeID == idInItem;\n                }\n                return item.productID == idInItem;\n            });\n            return index;\n        }\n\n        function excludeDeliveries() {\n\n            $scope.filteredDeliveries = _.clone($scope.deliveries);\n\n            var optID;\n\n            _.each($scope.complexProducts, function (complexProduct, index) {\n\n                var product = complexProduct.selectedProduct.data;\n\n                _.each(product.attributeMap, function (attrID) {\n\n                    optID = product.selectedOptions[attrID];\n\n                    if (optID) {\n                        var item = getOption(product, optID);\n\n                        if (item && item.deliveries) {\n\n                            _.each(item.deliveries, function (deliveryID) {\n\n                                var deliveryIndex = _.findIndex($scope.filteredDeliveries, {ID: deliveryID});\n\n                                if (deliveryIndex > -1) {\n\n                                    $scope.filteredDeliveries.splice(deliveryIndex, 1);\n\n                                    _.each($scope.productAddresses, function (productAddress, index) {\n\n                                        if (productAddress.deliveryID === deliveryID && !_.isEmpty($scope.filteredDeliveries)) {\n                                            productAddress.deliveryID = _.first($scope.filteredDeliveries).ID;\n                                        }\n                                    });\n\n                                }\n                            });\n                        }\n                    }\n\n                });\n\n            });\n\n        }\n\n        var getOption = function (product, optID) {\n\n            var item = undefined;\n            _.each(product.attributes, function (attribute) {\n                var idx = _.findIndex(attribute.options, {ID: optID});\n\n                if (idx > -1) {\n                    item = attribute.options[idx];\n                    return false;\n                }\n\n            });\n\n            return item;\n        };\n\n        $scope.filterByThickness = function (product) {\n\n            var exclusions = {};\n\n            _.each(product.attributes, function (attribute) {\n\n                exclusions[attribute.attrID] = [];\n                var idx;\n                _.each(attribute.options, function (option) {\n\n                    if (angular.isDefined(option.maxThickness) && Number(option.maxThickness) > 0) {\n\n                        if (product.thickness.current > option.maxThickness) {\n\n                            idx = product.excludedOptions.indexOf(option.ID);\n                            if (idx === -1) {\n                                exclusions[attribute.attrID].push(option.ID);\n                            }\n\n                        }\n                    }\n\n                    if (angular.isDefined(option.minThickness) && Number(option.minThickness) > 0) {\n\n                        if (product.thickness.current < option.minThickness) {\n\n                            idx = product.excludedOptions.indexOf(option.ID);\n                            if (idx === -1) {\n                                exclusions[attribute.attrID].push(option.ID);\n                            }\n\n                        }\n\n                    }\n\n                });\n\n            });\n\n            return exclusions;\n        };\n\n        $scope.filterByOptionsPages = function (product) {\n\n            var exclusions = {};\n\n            _.each(product.attributes, function (attribute) {\n\n                exclusions[attribute.attrID] = [];\n\n                _.each(attribute.options, function (option) {\n\n                    /**\n                     * @param {number} option.maxPages\n                     */\n\n                    if (product.currentPages && angular.isDefined(option.maxPages) && Number(option.maxPages) > 0) {\n\n                        if (product.currentPages > option.maxPages) {\n\n                            idx = product.excludedOptions.indexOf(option.ID);\n                            if (idx === -1) {\n                                exclusions[attribute.attrID].push(option.ID);\n                            }\n\n                        }\n                    }\n\n                    if (product.currentPages && angular.isDefined(option.minPages) && Number(option.minPages) > 0) {\n\n                        if (product.currentPages < option.minPages) {\n\n                            var idx = product.excludedOptions.indexOf(option.ID);\n\n                            if (idx === -1) {\n                                exclusions[attribute.attrID].push(option.ID);\n                            }\n\n                        }\n\n                    }\n\n                });\n\n            });\n\n            return exclusions;\n        };\n\n        var setRangePages = function (product, attrID) {\n\n            var idx = _.findIndex(product.attributes, {attrID: attrID});\n            if (idx > -1) {\n                if (product.attributes[idx].minPages !== null) {\n                    if (!product.attrPages[attrID]) {\n                        product.attrPages[attrID] = product.attributes[idx].minPages;\n                    }\n                }\n            } else {\n                console.log(`Attribute ${attrID} not found`);\n            }\n        };\n\n        $scope.selectPagesSync = function (product, pages) {\n            product.currentPages = pages;\n            $scope.calcProductThickness(product);\n        };\n\n        $scope.selectPages = function (product, pages) {\n            updateCalculationUrl('pages', pages, null, productIndex(product));\n            pages = Number(pages);\n\n            if (product.pages[0].pages) {\n\n                product.currentPages = pages;\n\n                $scope.calcProductThickness(product);\n                setExclusionsAsync(product).then(function (exclusionEnd) {\n                    if (exclusionEnd) {\n                        _.each(product.attrPages, function (oneAttrPage, attrID) {\n                            if (product.currentPages < oneAttrPage) {\n                                product.attrPages[attrID] = product.currentPages;\n                            }\n                        });\n\n                        $scope.getVolumes($scope.productItem.amount);\n                    }\n                });\n\n            } else {\n                if (product.pages[0].step !== null) {\n                    var step = Number(product.pages[0].step);\n                }\n\n                if (angular.isDefined(stopSelect)) {\n                    $timeout.cancel(stopSelect);\n                    stopSelect = undefined;\n                }\n\n                stopSelect = $timeout(function () {\n                    var maxPages = $scope.getMaximumThickness(product);\n                    var minPages = $scope.getMinimumThickness(product);\n\n                    if (parseInt(product.pages[0].maxPages) > 0 && maxPages > parseInt(product.pages[0].maxPages)) {\n                        maxPages = parseInt(product.pages[0].maxPages);\n                    }\n\n                    if (product.pages[0].minPages !== null && minPages < parseInt(product.pages[0].minPages)) {\n                        minPages = parseInt(product.pages[0].minPages);\n                    }\n\n                    if (product.pages[0].step !== null) {\n                        if (pages % step !== 0) {\n                            if ((pages % step) > (step / 2)) {\n                                pages = pages + (step - (pages % step));\n                            } else {\n                                pages -= pages % step;\n                            }\n                        }\n                    }\n\n                    if (pages > maxPages) {\n                        Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                        product.currentPages = maxPages;\n                        pages = maxPages;\n                    } else if (pages < minPages) {\n                        Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + minPages);\n                        product.currentPages = minPages;\n                        pages = minPages;\n                    } else if (pages === undefined) {\n                        Notification.info($filter('translate')('range_of_pages') + ' ' + minPages + ' - ' + maxPages);\n                    } else {\n                        product.currentPages = pages;\n                    }\n\n                    $scope.calcProductThickness(product);\n\n                    setExclusionsAsync(product).then(function (exclusionEnd) {\n\n                        if (exclusionEnd) {\n                            _.each(product.attrPages, function (oneAttrPage, attrID) {\n                                if (product.currentPages < oneAttrPage) {\n                                    product.attrPages[attrID] = product.currentPages;\n                                }\n                            });\n\n                            if (pages <= maxPages && pages >= minPages && pages !== undefined) {\n                                $scope.getVolumes($scope.productItem.amount);\n                            }\n                        }\n\n                    });\n\n                }, 1000);\n                timeouts.push(stopSelect)\n            }\n        };\n\n        $scope.selectAttrPages = function (complexProduct, attrID) {\n            updateCalculationUrl('attrPages', complexProduct.selectedProduct.data.attrPages[attrID], attrID, productIndex(complexProduct))\n            if (angular.isDefined(stopSelectAttr)) {\n                $timeout.cancel(stopSelectAttr);\n                stopSelectAttr = undefined;\n            }\n\n            stopSelectAttr = $timeout(function () {\n\n                if (complexProduct.selectedProduct.data.attrPages[attrID] <= 0) {\n                    complexProduct.selectedProduct.data.attrPages[attrID] = 0;\n                }\n\n                var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n\n                if (attrIdx > -1) {\n                    var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                    var maxPages = attribute.maxPages;\n                    if (maxPages === null) {\n                        maxPages = complexProduct.selectedProduct.data.currentPages;\n                    }\n\n                    if (complexProduct.selectedProduct.data.attrPages[attrID] > maxPages) {\n                        Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                        complexProduct.selectedProduct.data.attrPages[attrID] = maxPages;\n                        return;\n                    }\n\n                    if (complexProduct.selectedProduct.data.attrPages[attrID] < attribute.minPages) {\n                        Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + attribute.minPages);\n                        complexProduct.selectedProduct.data.attrPages[attrID] = attribute.minPages;\n                        return;\n                    }\n                }\n\n\n                $scope.getVolumes($scope.productItem.amount);\n            }, 1500);\n            timeouts.push(stopSelectAttr)\n        };\n\n        $scope.calcProductThickness = function (product) {\n\n            var sheets = product.currentPages / 2;\n\n            if (!_.keys(product.thickness.values).length) {\n                product.thickness.current = null;\n                return true;\n            }\n            /**\n             * @param {number} product.pages[].doublePage\n             */\n            var doublePage = !!product.pages[0].doublePage;\n\n            if (doublePage) {\n                sheets /= 2;\n            }\n\n            var value = 0;\n            var keyThickness = _.keys(product.thickness.values);\n            var tmpAttrID = null;\n            _.each(_.values(product.thickness.values), function (one, index) {\n                tmpAttrID = keyThickness[index];\n                if (Number(one) > 0 && _.has(product.selectedOptions, tmpAttrID)) {\n                    value += one;\n                }\n            });\n\n            product.thickness.current = sheets * value;\n\n            $scope.summaryThickness[product.info.typeID] = product.thickness.current;\n\n            return true;\n        };\n\n        $scope.getMinimumThickness = function (type) {\n\n            if (!_.keys(type.thickness.values).length || !type.thickness.min) {\n\n                var minPages = getMinPages(type);\n\n                if (minPages > type.pages[0].minPages) {\n                    return minPages;\n                }\n\n                return type.pages[0].minPages || 0;\n            }\n\n            var value = 0;\n            _.each(_.values(type.thickness.values), function (one) {\n                if (Number(one) > 0) {\n                    value += one;\n                }\n            });\n\n            var sheets = type.thickness.min / value;\n            var pages = Math.ceil(sheets) * 2;\n            var doublePage = !!type.pages[0].doublePage;\n            if (doublePage) {\n                pages *= 2;\n            }\n\n            if (!!type.pages[0].step) {\n                var modulo = pages % type.pages[0].step;\n                if (modulo) {\n                    pages += type.pages[0].step - modulo;\n                }\n            }\n\n            if (type.currentPages < pages) {\n                $scope.selectPages(type, pages);\n            }\n\n            return pages;\n        };\n\n        var getMinPages = function (type) {\n\n            /**\n             * @param {Array} type.minOptionPages\n             */\n\n            if (_.size(type.minOptionPages)) {\n                return _.min(_.values(type.minOptionPages));\n            }\n\n            return false;\n        };\n\n        $scope.getMaximumThickness = function (product) {\n\n            if (!_.keys(product.thickness.values).length || !product.thickness.max) {\n                return product.pages[0].maxPages || 9999999;\n            }\n\n            var value = 0;\n            _.each(_.values(product.thickness.values), function (one) {\n                if (Number(one) > 0) {\n                    value += one;\n                }\n            });\n\n            var sheets = product.thickness.max / value;\n            var pages = Math.floor(sheets) * 2;\n            var doublePage = !!product.pages[0].doublePage;\n            if (doublePage) {\n                pages *= 2;\n            }\n\n            if (!!product.pages[0].step) {\n                var modulo = pages % product.pages[0].step;\n                if (modulo) {\n                    pages -= modulo;\n                }\n            }\n\n            if (product.currentPages > pages) {\n                $scope.selectPages(product, pages);\n            }\n\n            return pages;\n        };\n\n        $scope.count = function (volume) {\n\n            if (volume === undefined) {\n                volume = $scope.productItem.volume;\n            }\n\n            getPreparedProduct(volume).then(function (data) {\n\n                CalculationService.calculate($scope.currentTypeID, $scope.currentGroupID, data).then(function (data) {\n\n                    $scope.info = data.info;\n                    $scope.calculation = data.calculation;\n\n                }, function (data) {\n                    console.error('calc err: ', data);\n                });\n            });\n\n        };\n\n        function checkForAuth() {\n            var authorizedOnlyCalculation = false;\n            if (!$rootScope.logged) {\n                _.each($scope.complexProducts, function (cp) {\n                    _.each(cp.products, function (p) {\n                        if (p.data) {\n                            for (var kAttr in p.data.selectedOptions) {\n                                kAttr = Number(kAttr);\n                                var kOpt = p.data.selectedOptions[kAttr]\n                                var attrIndx = p.data.attributeMap.indexOf(kAttr)\n                                var attr = p.data.attributes[attrIndx]\n                                var opt = _.find(attr.options, function (op) {\n                                    return op.ID == kOpt\n                                });\n                                authorizedOnlyCalculation = authorizedOnlyCalculation || opt.authorizedOnlyCalculation\n                                if(opt.authorizedOnlyCalculation){\n                                    console.log('opt.authorizedOnlyCalculation '+attr.attrID+' '+opt.ID)\n                                }\n                            }\n                        }\n                    });\n                })\n            }\n            $scope.authorizedOnlyCalculation = authorizedOnlyCalculation;\n        }\n\n        $scope.calculate = function (amount, volume) {\n            checkForAuth()\n            $scope.calculation = {};\n\n            $scope.calculationInfo = [];\n            getPreparedProduct(amount, volume).then(function (preparedProduct) {\n\n                CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                CalculateService.calculate(preparedProduct).then(function (data) {\n                    $scope.calculationStep = 2;\n                    $scope.showCalculation(data);\n                    if (!$scope.productAddresses[0].deliveryID) {\n                        $scope.productAddresses[0].deliveryID = $scope.deliveries[0].ID;\n                        $scope.productAddresses[0].index = 0;\n                        $scope.productAddresses[0].ID = 1;\n                    }\n                    var address = $scope.productAddresses[0];\n                    address.weight = data.weight;\n                    address.volume = volume;\n                    address.amount = amount;\n                    address.allVolume = volume * amount;\n\n                    excludeDeliveries();\n\n                    if ($rootScope.logged !== false) {\n                        DeliveryWidgetService.getPkgWeightCalc(\n                            address,\n                            $scope\n                        );\n                    } else {\n                        DeliveryWidgetService.getPkgWeightLite(\n                            address,\n                            DeliveryWidgetService.getVolume($scope, address),\n                            $scope\n                        );\n                    }\n\n                    $('#scrollbar-volume').height(\n                        $('#panel-product-parameters').outerHeight() - ($('#panel-product-volumes').outerHeight() - $('.mCustomScrollbar').outerHeight())\n                    );\n\n                }, function (data) {\n                    console.error(data);\n                    Notification.error($filter('translate')('error'));\n                });\n\n            });\n\n\n        };\n\n        $scope.showCalculation = function (data) {\n\n            $scope.calculation = data.calculation;\n\n            $scope.calculationInfo = data.info;\n            $scope.prepareUrl();\n\n            if (!_.isEmpty($scope.rememberVolume)) {\n\n                var idxRT = _.findIndex($scope.realisationTimes, {ID: $scope.rememberVolume.realisationTime.ID});\n                if (idxRT !== -1) {\n                    var idxVol = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: $scope.rememberVolume.volume.volume});\n                    if (idxVol !== -1) {\n                        $scope.checkVolume(false, $scope.rememberVolume.realisationTime, $scope.realisationTimes[idxRT].volumes[idxVol]);\n                    } else {\n                        $scope.checkVolume(false, $scope.realisationTimes[0], $scope.realisationTimes[0].volumes[0]);\n                    }\n\n                } else {\n                    $scope.checkVolume(false, $scope.rememberVolume.realisationTime, $scope.rememberVolume.volume);\n                }\n\n\n            } else {\n                if (getCalculationUrlParam('realisationTime')) {\n                    var realisationTime = _.find($scope.realisationTimes, function (item) {\n                        return item.ID == getCalculationUrlParam('realisationTime');\n                    });\n                } else {\n                    var realisationTime = _.sortBy($scope.realisationTimes, 'order')[0];\n                }\n\n                if (getCalculationUrlParam('volume')) {\n                    var volumeIdx = _.findIndex(realisationTime.volumes, function (item) {\n                        return item.volume == getCalculationUrlParam('volume');\n                    });\n                } else {\n                    var volumeIdx = 0;\n                }\n\n                if ($scope.type.allowCalcFilesUpload == 1) {\n                    var volumeIdx = _.findIndex(realisationTime.volumes, function (item) {\n                        return item.volume == caclulateCalcFilesVolume();\n                    });\n                    if (volumeIdx === -1) {\n                        volumeIdx = 0;\n                        $scope.isAddToCartDisabled = true;\n                    }\n                }\n                var activeVolume = getActiveVolume(realisationTime.volumes, volumeIdx);\n\n                $scope.checkVolume(false, realisationTime, activeVolume);\n                if (getCalculationUrlParam('volume')) {\n                    setFromCalculationUrl($scope.productItem, 'volume', 'volume', null, parseInt)\n                } else {\n                    $scope.productItem.volume = activeVolume.volume;\n                }\n            }\n            $rootScope.$emit('calculation', $scope.calculation)\n        };\n\n        var getActiveVolume = function (volumes, index) {\n\n            var actVolume = volumes[index];\n\n            if (actVolume) {\n                if (actVolume.active === false) {\n                    return getActiveVolume(volumes, (index + 1));\n                } else {\n                    return actVolume;\n                }\n            } else {\n                console.error('Problem with realization time!');\n            }\n        };\n\n        function getPreparedProduct(amount, volume) {\n\n            var def = $q.defer();\n\n            var newItem = {};\n\n            newItem.amount = amount;\n            if (!(volume === undefined)) newItem.volume = volume;\n            newItem.groupID = $scope.currentGroupID;\n            newItem.typeID = $scope.currentTypeID;\n            newItem.taxID = $scope.productItem.taxID;\n            newItem.name = $scope.productItem.name;\n            newItem.realizationTimeID = $scope.productItem.realisationTime;\n            if ($scope.productItem.selectedTechnologyID) {\n                newItem.selectedTechnology = _.findWhere($scope.technologies,{ID:$scope.productItem.selectedTechnologyID});\n            }\n\n            var rIdx = _.findIndex($scope.realisationTimes, {ID: $scope.productItem.realisationTime});\n\n            if (rIdx > -1) {\n                if ($scope.realisationTimes[rIdx].overwriteDate !== undefined && $scope.realisationTimes[rIdx].overwriteDate !== null) {\n                    newItem.realizationDate = $scope.realisationTimes[rIdx].overwriteDate;\n                } else {\n                    newItem.realizationDate = $scope.realisationTimes[rIdx].date;\n                }\n            }\n\n            DeliveryWidgetService.reducePostData($scope.productAddresses).then(function (productAddresses) {\n\n                newItem.productAddresses = productAddresses;\n                if ($scope.calculation !== undefined) {\n                    newItem.weight = $scope.calculation.weight;\n                }\n\n                newItem.currency = $rootScope.currentCurrency.code;\n\n                prepareProductPromise(newItem).then(function (newItemPrepared) {\n                    if (newItemPrepared) {\n                        def.resolve(newItemPrepared);\n                    }\n                });\n\n            });\n\n            return def.promise;\n\n        }\n\n        function prepareProductPromise(newItem) {\n\n            var def = $q.defer();\n\n            newItem.products = [];\n            var cnt=0;\n            _.each($scope.complexProducts, function (complexProduct, index) {\n\n                var product = complexProduct.selectedProduct.data;\n\n                var newProduct = {};\n\n                newProduct.groupID = product.info.groupID;\n                newProduct.typeID = product.info.typeID;\n                newProduct.name = product.info.typeName;\n\n                if (!product.currentFormat) {\n                    console.error('Formats must be assign!');\n                }\n\n                newProduct.formatID = product.currentFormat.ID;\n\n                if (!product.currentFormat.custom) {\n\n                    newProduct.width = product.currentFormat.width;\n                    newProduct.height = product.currentFormat.height;\n                } else {\n                    newProduct.width = product.currentFormat.customWidth + product.currentFormat.slope * 2;\n                    newProduct.height = product.currentFormat.customHeight + product.currentFormat.slope * 2;\n                }\n\n                if (product.currentPages) {\n                    newProduct.pages = product.currentPages;\n                } else {\n                    const printAttr = product.attributes.find((attr => attr.type === 2));\n                    const printOptID = product.selectedOptions[printAttr?.attrID];\n                    newProduct.pages = printAttr?.options.find((opt => opt.ID === printOptID)).doubleSidedSheet ? 2 : 1;\n                }\n                newProduct.options = [];\n\n                CalcSimplifyWidgetService.removeEmptyOptionFromSelected(product, newProduct)\n\n                newProduct.attrPages = product.attrPages;\n\n                if (product.info.noCalculate !== true) {\n                    newItem.products.push(newProduct);\n                }\n\n                if ($scope.complexProducts.length === ++cnt) {\n                    def.resolve(newItem);\n                }\n\n            });\n\n            return def.promise;\n        }\n\n\n        $scope.getVolumes = function (amount) {\n            $scope.calculationStep = 0;\n            $scope.loadVolumes = true;\n\n            getPreparedProduct(amount).then(function (preparedProduct) {\n\n                if ($scope.type.allowCalcFilesUpload == 1) {\n                    var newVolume = {'volume': caclulateCalcFilesVolume(), 'active': true};\n                    $scope.customVolume.volumes = [newVolume];\n                }\n                preparedProduct.customVolumes = $scope.customVolume.volumes;\n                CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n\n                CalculateService.getVolumes(preparedProduct).then(function (data) {\n                    $scope.calculationStep = 1;\n                    $scope.technologies=data.technologies\n\n                    data.volumes.filter(function (element) {\n                        return element.active === true;\n                    });\n\n                    $scope.showVolumes(data);\n\n                    /**\n                     * @param {Object} data.volumeInfo\n                     */\n                    if (angular.isDefined(data.volumeInfo)) {\n                        $scope.customVolume.custom = data.volumeInfo.custom;\n                        $scope.customVolume.maxVolume = data.volumeInfo.maxVolume;\n                    }\n\n                    $scope.getMinVolume();\n\n                    getJson();\n\n                }, function (data) {\n                    console.log(data);\n                    Notification.error($filter('translate')('error'));\n                });\n            });\n\n\n        };\n\n        $scope.showVolumes = function (data) {\n\n            $scope.volumes = data.volumes;\n            $scope.realisationTimes = data.realisationTimes;\n\n            if ($scope.type.allowCalcFilesUpload == 1) {\n                $scope.calculate($scope.productItem.amount, caclulateCalcFilesVolume());\n            } else {\n                if (angular.isDefined($scope.rememberVolume.volume)) {\n                    $scope.calculate($scope.productItem.amount, $scope.rememberVolume.volume.volume);\n                } else {\n                    if (angular.isDefined($scope.volumes[0])) {\n                        $scope.calculate($scope.productItem.amount, $scope.volumes[0].volume);\n                    } else {\n                        console.log('volumes: ', $scope.volumes);\n                    }\n                }\n            }\n        };\n\n        $scope.countAttrNotExcludedOptions = function (product, attr) {\n\n            var count = 0;\n            _.each(attr.options, function (option) {\n\n                if (!_.includes(product.excludedOptions, option.ID)) {\n                    count++;\n                }\n\n            });\n            return count;\n        };\n\n        $scope.prepareUrl = function () {\n\n            if ($scope.complexProducts.length === 1 && $scope.calculation.amount > 0) {\n\n                getPreparedProduct($scope.calculation.amount).then(function (preparedProduct) {\n                    var product = preparedProduct.products[0];\n\n                    /**\n                     * @param {string} $config.EDITOR_URL\n                     */\n\n                    $scope.editorUrl = $config.EDITOR_URL + '?' + 'typeID=' + product.typeID + '&formatID=' + product.formatID + '&pages=' + product.pages;\n\n                    _.each(product.options, function (opt) {\n                        $scope.editorUrl += '&' + opt.attrID + '=' + opt.optID;\n                    });\n                });\n\n            }\n        };\n\n        $scope.checkVolume = function (isFromClient, realisationTime, volume) {\n\n            if ($scope.type.allowCalcFilesUpload == 1 && isFromClient) {\n                Notification.error($filter('translate')('volume_calculates_automaticly_from_image_files'));\n                return;\n            } else {\n\n                _.each($scope.realisationTimes, function (val) {\n                    val.overwriteDate = null;\n                });\n\n                var idxRT = _.findIndex($scope.realisationTimes, {ID: realisationTime.ID});\n\n                if (idxRT !== -1) {\n\n                    $scope.rememberVolume.realisationTime = $scope.realisationTimes[idxRT];\n\n                    $scope.realisationTimes[idxRT].overwriteDate = volume.date;\n\n                    var idxV = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: volume.volume});\n                    if (idxV !== -1) {\n                        $scope.rememberVolume.volume = volume;\n\n                        $scope.activeVolume.rtID = $scope.realisationTimes[idxRT].ID;\n                        $scope.activeVolume.volume = $scope.calculation.volume = $scope.realisationTimes[idxRT].volumes[idxV].volume;\n\n                        $scope.calculation.priceTotal = $scope.realisationTimes[idxRT].volumes[idxV].price;\n\n                        /**\n                         * @param {number} $scope.realisationTimes[].volumes[].priceBrutto\n                         */\n                        $scope.calculation.priceTotalBrutto = $scope.realisationTimes[idxRT].volumes[idxV].priceBrutto;\n                        $scope.calculation.weight = $scope.realisationTimes[idxRT].volumes[idxV].weight;\n                        if ($scope.realisationTimes[idxRT].overwriteDate) {\n                            $scope.calculation.realisationTime = $scope.realisationTimes[idxRT].overwriteDate;\n                        } else {\n                            $scope.calculation.realisationTime = $scope.realisationTimes[idxRT].date;\n                        }\n\n                        _.each($scope.realisationTimes[idxRT].volumes, function (actVolume) {\n\n\n                            var idxVol = _.findIndex($scope.volumes, {volume: actVolume.volume});\n\n                            if (idxVol !== -1) {\n                                $scope.volumes[idxVol].active = actVolume.active;\n                            }\n\n                        });\n                        $scope.activeVolume.priceListIcons=_.find($scope.volumes,function(item){\n                            return item.volume==volume.volume\n                        }).calculation.priceListIcons;\n                        $scope.productItem.volume = volume.volume;\n                        updateCalculationUrl('volume', volume.volume);\n                        _.each($scope.realisationTimes, function (realisationTime, rIndex) {\n                            var idxVol = _.findIndex(realisationTime.volumes, {volume: volume.volume});\n                            if (idxVol !== -1) {\n                                $scope.realisationTimes[rIndex].active = realisationTime.volumes[idxVol].active;\n                            }\n                        });\n                        $scope.productItem.realisationTime = realisationTime.ID;\n                        updateCalculationUrl('realisationTime', $scope.productItem.realisationTime);\n                        $scope.loadVolumes = false;\n                        $scope.getTotalThickness();\n                    }\n                } else {\n                    $scope.rememberVolume = {};\n                }\n            }\n        };\n\n\n        $scope.changeVolume = function () {\n\n            if ($scope.type.allowCalcFilesUpload == 1) {\n                Notification.error($filter('translate')('volume_calculates_automaticly_from_image_files'));\n                $scope.productItem.volume = caclulateCalcFilesVolume();\n                return;\n            } else {\n                var volume = $scope.productItem.volume;\n                var idx;\n\n                if (!_.isEmpty($scope.rememberVolume)) {\n\n                    idx = _.findIndex($scope.rememberVolume.realisationTime.volumes, {volume: volume});\n\n                    if (idx !== -1) {\n                        $scope.checkVolume(false, $scope.rememberVolume.realisationTime, $scope.rememberVolume.realisationTime.volumes[idx]);\n                    } else {\n                        idx = _.findIndex($scope.realisationTimes[0].volumes, {volume: volume});\n                        if (idx !== -1) {\n                            $scope.checkVolume(false, $scope.realisationTimes[0], $scope.realisationTimes[0].volumes[idx]);\n                        }\n                    }\n\n                } else {\n\n                    idx = _.findIndex($scope.realisationTimes[0].volumes, {volume: volume});\n                    if (idx !== -1) {\n                        $scope.checkVolume(false, $scope.realisationTimes[0], $scope.realisationTimes[0].volumes[idx]);\n                    }\n\n                }\n                if (typeof $scope.scrollbarVolume.update === 'function') {\n                    $scope.scrollbarVolume.update(\"scrollTo\", \"#row-volume-\" + $scope.productItem.volume);\n                }\n            }\n        };\n\n        $scope.addVolume = function () {\n\n            if (parseInt($scope.customVolume.maxVolume) < parseInt($scope.customVolume.newVolume)) {\n                $scope.customVolume.newVolume = $scope.customVolume.maxVolume;\n                Notification.error($filter('translate')('to_high_volume') + ' - ' + $scope.customVolume.maxVolume);\n                return;\n            }\n\n            if (parseInt($scope.customVolume.minVolume) > parseInt($scope.customVolume.newVolume)) {\n                $scope.customVolume.newVolume = $scope.customVolume.minVolume;\n                Notification.error($filter('translate')('to_low_volume') + ' - ' + $scope.customVolume.minVolume);\n                return;\n            }\n\n            if ($scope.customVolume.newVolume === undefined) {\n                $scope.customVolume.newVolume = $scope.customVolume.minVolume;\n                Notification.error($filter('translate')('incorrect_volume'));\n                return;\n            }\n\n            var newVolume = {'volume': $scope.customVolume.newVolume, 'active': true};\n            if (!angular.isDefined($scope.customVolume.volumes)) {\n                $scope.customVolume.volumes = [];\n            }\n\n            var idxV = _.findIndex($scope.volumes, {volume: $scope.customVolume.newVolume});\n            var idxCV = _.findIndex($scope.customVolume.volumes, {volume: $scope.customVolume.newVolume});\n\n            if (idxV === -1 && idxCV === -1) {\n\n                $scope.customVolume.volumes.push(newVolume);\n                $scope.rememberVolume.volume = newVolume;\n                $scope.getVolumes($scope.productItem.amount);\n\n                var cookieCustomVolumes = angular.fromJson($cookies['customVolumes']);\n\n                if (!cookieCustomVolumes) {\n                    cookieCustomVolumes = {};\n                }\n\n                cookieCustomVolumes[$scope.currentTypeID] = $scope.customVolume;\n\n                $cookies['customVolumes'] = angular.toJson(cookieCustomVolumes);\n\n                updateCalculationUrl('customVolumes', $cookies['customVolumes']);\n            } else {\n                Notification.error($filter('translate')('volume_exist'));\n            }\n        };\n\n        $scope.getMinVolume = function () {\n\n            $scope.customVolume.minVolume = $scope.volumes[0].volume;\n\n            if (!angular.isDefined($scope.customVolume.newVolume)) {\n                $scope.customVolume.newVolume = $scope.volumes[0].volume;\n            }\n        };\n\n        $scope.changeTax = function () {\n            updateCalculationUrl('tax', $scope.productItem.taxID);\n            $scope.getVolumes($scope.productItem.amount);\n        };\n\n        $scope.changeRealisationTime = function () {\n            var idxRT = _.findIndex($scope.realisationTimes, {ID: $scope.productItem.realisationTime});\n\n            if (idxRT !== -1) {\n\n                var volume = $scope.productItem.volume;\n\n                var idx = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: volume});\n                if (idx !== -1) {\n                    $scope.checkVolume(false, $scope.realisationTimes[idxRT], $scope.realisationTimes[idxRT].volumes[idx]);\n                }\n\n            }\n\n        };\n\n        $scope.filterRealisationTime = function (rt) {\n            return rt.active ? 1 : 0;\n        };\n\n        $scope.getTotalThickness = function () {\n\n            var tmp = 0;\n            _.each($scope.summaryThickness, function (th) {\n                tmp += th;\n            });\n            return tmp.toFixed(2);\n\n        };\n\n        $scope.toCart = function (addInBackground) {\n\n            if ($scope.deliveryLackOfVolume > 0) {\n                Notification.error($filter('translate')('delivery_lack_of_volume') + ': ' + $scope.deliveryLackOfVolume);\n                return;\n            }\n\n            if ($scope.isAddToCartDisabled) {\n                Notification.error($filter('translate')('cannot_add_to_cart_too_small_or_high_volume'));\n                return;\n            }\n\n            getPreparedProduct($scope.productItem.amount, $scope.productItem.volume).then(function (preparedProduct) {\n                AuthService.getSessionCarts().then(function (resData) {\n                    if ($rootScope.logged) {\n                        preparedProduct.orderID = undefined;\n                    } else {\n                        if (resData.orderID) {\n                            preparedProduct.orderID = resData.orderID;\n                        } else {\n                            preparedProduct.orderID = undefined;\n                        }\n                    }\n                }).then(function () {\n\n                    DeliveryWidgetService.reducePostData($scope.productAddresses).then(function (productAddresses) {\n                        DeliveryWidgetService.checkParcelShopSelected(productAddresses).then(function (productAddressesChecked) {\n\n                            if (productAddressesChecked) {\n                                if ($scope.type.allowCalcFilesUpload == 1) {\n                                    if ($rootScope.logged === false) {\n                                        preparedProduct.notLoggedCalcFilesSetID = $scope.calcFilesSetID;\n                                    }\n                                    preparedProduct.hasCalcFiles = true;\n                                }\n                                CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                                CalculateService.saveCalculation(preparedProduct).then(function (savedProduct) {\n\n                                    if (savedProduct.orderID) {\n                                        $rootScope.orderID = savedProduct.orderID;\n                                    }\n\n                                    savedProduct.productAddresses = productAddresses;\n                                    var addData = savedProduct;\n                                    if ($rootScope.logged) {\n                                        addData.userID = $rootScope.user.userID;\n                                        addData.token = '';\n                                    } else {\n                                        addData.userID = 0;\n                                        addData.token = AuthDataService.getAccessToken();\n                                    }\n                                    DpCartsDataService.add(addData).then(function (response) {\n\n                                        AuthService.addToCart(savedProduct).then(function (cartsData) {\n                                            $rootScope.$emit('cartRequired');\n                                            window.dataLayer = window.dataLayer || [];\n                                            window.dataLayer.push({\n                                                'event': 'eec.addToCart',\n                                                'ecommerce': {\n                                                    'currencyCode': $scope.calculation.currency.code,\n                                                    'add': {\n                                                        'products': [{\n                                                            'name': $scope.currentType.name,\n                                                            'id': $scope.calculation.groupID + '-' + $scope.calculation.typeID,\n                                                            'price': $scope.calculation.priceTotalBrutto,\n                                                            'quantity': $scope.calculation.volume\n                                                        }]\n                                                    }\n                                                }\n                                            });\n                                            checkMatchAddress(cartsData.carts, productAddresses).then(function (cartToJoin) {\n                                                if (addInBackground) {\n                                                    Notification.success($filter('translate')('added_to_cart'));\n                                                }\n                                                if (cartToJoin) {\n                                                    addToJoinedDelivery(productAddresses[0].addressID, $rootScope.currentCurrency.code).then(function (joinData) {\n\n                                                        if (joinData.response) {\n                                                            var tokenParams = {};\n\n                                                            tokenParams['addressID'] = joinData.paramsToCopy.addressID;\n                                                            tokenParams['active'] = true;\n                                                            tokenParams['commonDeliveryID'] = joinData.paramsToCopy.commonDeliveryID;\n                                                            tokenParams['commonRealisationTime'] = new Date(joinData.paramsToCopy.commonRealisationTime.sec * 1000);\n                                                            TokenService.joinAddresses(tokenParams).then(function (data) {\n                                                                if (!addInBackground) {\n                                                                    $state.go('cart');\n                                                                }\n                                                            });\n                                                        } else {\n                                                            if (!addInBackground) {\n                                                                $state.go('cart');\n                                                            }\n                                                        }\n                                                    });\n                                                } else {\n                                                    if (!addInBackground) {\n                                                        $state.go('cart');\n                                                    }\n                                                }\n\n                                            });\n                                        });\n                                    });\n\n                                }, function () {\n                                    Notification.error($filter('translate')('error'));\n                                });\n\n                            } else {\n                                Notification.error($filter('translate')('select_missing_parcel_shop'));\n                            }\n\n\n                        });\n                    });\n                });\n            });\n\n        };\n\n        function checkMatchAddress(carts, productAddresses) {\n\n            var def = $q.defer();\n\n            if (productAddresses.length > 1) {\n                def.resolve(false);\n            }\n\n            carts.pop();\n\n            var addressID = productAddresses[0].addressID;\n            var cartLen = carts.length;\n\n            if (cartLen === 0) {\n                def.resolve(false);\n            }\n\n            _.each(carts, function (cart, index) {\n                if (cart.ProductAddresses.length === 1 && cart.ProductAddresses[0].addressID === addressID && cart.ProductAddresses[0].join === true) {\n                    def.resolve(cart);\n                }\n\n                if (cartLen === index + 1) {\n                    def.resolve(false);\n                }\n            });\n\n            return def.promise;\n\n        }\n\n        function addToJoinedDelivery(addressID, currency) {\n            var def = $q.defer();\n            DpOrderService.addToJoinedDelivery(addressID, currency).then(function (data) {\n                def.resolve(data);\n            });\n            return def.promise;\n        }\n\n        $scope.changeAmount = function () {\n            if ($scope.productItem.amount === '') {\n                $scope.productItem.amount = 1;\n            }\n            if (typeof $scope.productItem.amount === 'string') {\n                if (isNaN(parseInt($scope.productItem.amount))) {\n                    $scope.productItem.amount = 1;\n                } else {\n                    $scope.productItem.amount = parseInt($scope.productItem.amount);\n                }\n            }\n            if ($scope.productItem.amount < 1) {\n                $scope.productItem.amount = 1;\n            }\n            $scope.getVolumes($scope.productItem.amount);\n        };\n\n        $scope.hasFormats = function (desc) {\n\n            var complexProducts = $scope.complexProducts;\n\n            if (desc.formats.length > 0) {\n\n                if (!angular.isDefined(complexProducts[0])) {\n                    return true;\n                }\n\n                return _.includes(desc.formats, complexProducts[0].selectedProduct.data.currentFormat.ID);\n\n            } else {\n                return true;\n            }\n\n        };\n\n        $scope.hasOneFormat = function (pattern) {\n\n            if (!$scope.complexProducts || !$scope.complexProducts[0]) {\n                return false;\n            }\n\n            return pattern.formatID === $scope.complexProducts[0].selectedProduct.data.currentFormat.ID;\n\n\n        };\n\n        function getDeliveries() {\n\n            var def = $q.defer();\n\n            DeliveryService.getAll($rootScope.currentCurrency.code).then(function (data) { //TODO currentCurrency can not exist\n                $scope.deliveries = data;\n                $scope.filteredDeliveries = _.clone(data);\n                def.resolve(data);\n            });\n\n            return def.promise;\n\n        }\n\n        $rootScope.$watch('logged', function (logged) {\n            if (logged != undefined) {\n                loadData();\n            }\n\n        });\n\n        function getAddress() {\n            var def = $q.defer();\n\n            if ($rootScope.logged) {\n\n                AddressService.getForUser().then(function (data) {\n                    def.resolve(data);\n                });\n\n            } else {\n                AddressService.getAddressesFromSession().then(function (addresses) {\n                    AddressService.getAll(addresses).then(function (data) {\n                        def.resolve(data);\n                    });\n                });\n            }\n\n            return def.promise;\n        }\n\n        $scope.emptyArray = function (value) {\n            return _.isArray(value) && _.isEmpty(value);\n        };\n\n        $scope.showSumPrice = () => CalcSimplifyWidgetService.showSumPrice($scope)\n\n        $scope.showSumGrossPrice = () => CalcSimplifyWidgetService.showSumGrossPrice($scope)\n\n        $scope.$watch('calculation.volume', function (value) {\n            if (value === undefined) {\n                return;\n            }\n\n            if ($scope.calculation.amount > 1) {\n                value *= $scope.calculation.amount;\n            }\n\n            var address = $scope.productAddresses[0];\n\n            DeliveryWidgetService.checkExclusions($scope, address);\n\n            var existVolume = 0;\n            _.each($scope.productAddresses, function (oneAddress, index) {\n                if (index > 0) {\n                    existVolume += Number(oneAddress.allVolume);\n                }\n            });\n\n            if (existVolume >= value) {\n                $scope.productAddresses.splice(1, $scope.productAddresses.length);\n                existVolume = 0;\n            }\n            if (address !== undefined) {\n                address.allVolume = (value - existVolume);\n                if (typeof ($scope.calculation.weight) === 'number') {\n                    address.weight = $scope.calculation.weight.toFixed(2).replace('.', ',');\n                } else {\n                    address.weight = parseFloat($scope.calculation.weight).toFixed(2).replace('.', ',');\n                }\n                if ($scope.senders[0] !== undefined) {\n                    address.senderID = $scope.senders[0].type;\n                }\n                if ($scope.addresses[0] !== undefined) {\n                    address.addressID = $scope.addresses[0].ID;\n                }\n                DeliveryWidgetService.getPkgWeightLite(\n                    address,\n                    DeliveryWidgetService.getVolume($scope, address),\n                    $scope\n                );\n            }\n        });\n\n        $scope.getToken = function () {\n            return AuthDataService.getAccessToken();\n        };\n\n        function getJson() {\n\n            getPreparedProduct($scope.productItem.amount, $scope.productItem.volume).then(function (preparedProduct) {\n\n                var result = {\n                    typeID: preparedProduct.typeID,\n                    products: [],\n                    formats: [],\n                    pages: [],\n                    attributes: [],\n                    name: $scope.productItem.name\n                };\n                _.each(preparedProduct.products, function (product, index) {\n                    result.products.push(product.typeID);\n                    result.formats.push(product.formatID);\n                    result.pages.push(product.pages);\n                    result.attributes[index] = [];\n                    _.each(product.options, function (option) {\n                        result.attributes[index].push(option.attrID + '-' + option.optID);\n                    });\n                });\n                updateCalculationUrl('name', $scope.productItem.name);\n                $scope.productItem.jsonText = JSON.stringify(result);\n\n            });\n\n        }\n\n        $scope.changeUserProductName = function () {\n            getJson();\n        };\n\n        $scope.printOffer = function () {\n\n            TemplateRootService.getTemplateUrl(73).then(function (response) {\n\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope) {\n\n                        var Setting = new SettingService('general');\n\n                        var numberOfVolumes = 5;\n\n                        $scope.offerdate = new Date();\n                        $scope.offer_exp_date = new Date();\n                        $scope.offer_exp_date = $scope.offer_exp_date.setDate($scope.offerdate.getDate() + 30);\n\n                        var url = '';\n                        if (typeof $scope.galleries !== \"undefined\") {\n                            if ($scope.galleries.length > 0 && $scope.galleries[0].files) {\n                                url = $scope.galleries[0].files[0].url;\n                            }\n                        }\n\n                        $scope.po_logo = url;\n\n                        Setting.getPublicSettings().then(function (settingsData) {\n                            if (settingsData.numberOfVolumesInOffer) {\n                                numberOfVolumes = settingsData.numberOfVolumesInOffer.value;\n                            }\n                            getPreparedProduct($scope.productItem.amount, $scope.productItem.volume).then(function (data) {\n\n                                $scope.offerdata = data;\n\n                                if (data.products.length > 0 && $scope.complexProducts.length > 0) {\n                                    var cps = new Array(data.products.length);\n\n                                    for (var _idx = 0; _idx < data.products.length; ++_idx) {\n                                        var _groupID = data.products[_idx].groupID;\n                                        for (var i = 0; i < $scope.complexProducts.length; ++i) {\n\n                                            var cp = $scope.complexProducts[i].selectedProduct;\n                                            if (cp.groupID === _groupID) {\n                                                cps[_idx] = cp;\n                                            }\n                                        }\n                                    }\n\n                                    $scope.offerdata.cps = cps;\n                                }\n\n                                if (typeof $scope.taxes !== \"undefined\") {\n                                    if ($scope.taxes.length > 0) {\n                                        var tax = \"\";\n                                        for (i = 0; i < $scope.taxes.length; ++i) {\n                                            if ($scope.taxes[i].ID === data.taxID) {\n                                                tax = $scope.taxes[i].name;\n                                            }\n                                        }\n                                        $scope.offerdata.tax = tax;\n                                    }\n                                }\n\n                                var rt;\n                                if ($scope.realisationTimes !== undefined) {\n                                    if (data.realizationTimeID !== undefined) {\n                                        rt = _.find($scope.realisationTimes, {ID: data.realizationTimeID});\n                                        $scope.offerdata.realizationTime = rt.name;\n                                    } else {\n                                        $scope.offerdata.realizationTime = \"\";\n                                    }\n\n                                }\n\n                                var index = 0;\n\n                                rt.volumes = _(rt.volumes).chain().filter(function (oneVolume) {\n                                    return oneVolume.active === true;\n                                }).sortBy(function (oneVolume) {\n                                    return oneVolume.volume;\n                                }).value();\n\n                                var actualVolumeIndex = _.findIndex(rt.volumes, {volume: data.volume});\n\n                                var halfOfVolumes;\n                                var firstIndex;\n                                var lastIndex;\n\n                                if (numberOfVolumes >= (rt.volumes.length - 1)) {\n                                    firstIndex = 0;\n                                    lastIndex = rt.volumes.length - 1;\n                                } else {\n\n                                    halfOfVolumes = parseInt(numberOfVolumes / 2);\n                                    firstIndex = actualVolumeIndex - halfOfVolumes;\n                                    lastIndex = firstIndex + (numberOfVolumes - 1);\n\n                                    if (firstIndex < 0) {\n                                        firstIndex = 0;\n                                        lastIndex = firstIndex + (numberOfVolumes - 1);\n                                    }\n\n                                    if (lastIndex > (rt.volumes.length - 1)) {\n                                        lastIndex = rt.volumes.length - 1;\n                                        firstIndex = lastIndex - (numberOfVolumes - 1);\n                                    }\n\n                                }\n\n                                var filteredVolumes = {};\n                                var tmpPrice;\n                                var tmpPriceGross;\n\n                                for (index; index < rt.volumes.length; ++index) {\n\n                                    if (index >= firstIndex && index <= lastIndex) {\n                                        var q = rt.volumes[index].volume;\n                                        var n = rt.volumes[index].price;\n                                        var g = rt.volumes[index].priceBrutto;\n                                        var ns = n;\n                                        var gs = g;\n                                        if (q > 1) {\n                                            if (typeof n === 'string') {\n                                                n = n.replace(',', '.');\n                                            }\n                                            if (typeof g === 'string') {\n                                                g = g.replace(',', '.');\n                                            }\n                                            ns = parseFloat(n) / q;\n                                            gs = parseFloat(g) / q;\n                                            ns = ns.toFixed(2);\n                                            gs = gs.toFixed(2);\n                                        }\n\n                                        tmpPrice = ns;\n                                        if (typeof tmpPrice === 'string') {\n                                            tmpPrice = tmpPrice.replace(\".\", \",\");\n                                        }\n                                        tmpPriceGross = gs;\n                                        if (typeof tmpPriceGross === 'string') {\n                                            tmpPriceGross = tmpPriceGross.replace(\".\", \",\");\n                                        }\n                                        filteredVolumes[index] = {\n                                            qty: q,\n                                            net: n,\n                                            gross: g,\n                                            netunit: tmpPrice,\n                                            grossunit: tmpPriceGross\n                                        };\n                                    }\n\n                                    if (rt.volumes[index].active === false) {\n                                        --lastIndex;\n                                    }\n\n                                }\n\n                                $scope.rtVolumes = filteredVolumes;\n\n                                $scope.print = function () {\n\n                                    var CalculateDataObject = new CalculateDataService(data.typeID);\n\n                                    var dataForPrint = {\n                                        amount: data.amount,\n                                        groupID: data.groupID,\n                                        typeID: data.typeID,\n                                        products: data.products,\n                                        customVolumes: data.customVolumes,\n                                        taxID: data.taxID,\n                                        currency: data.currency,\n                                        productAddresses: data.productAddresses,\n                                        activeVolume: data.volume,\n                                        realizationTimeID: data.realizationTimeID\n                                    };\n                                    if (data.userID) {\n                                        dataForPrint.userID = data.userID;\n                                    }\n                                    if (data.selectedTechnology) {\n                                        dataForPrint.selectedTechnology = data.selectedTechnology;\n                                    }\n                                    CalculateDataObject.printOffer(dataForPrint).then(function (processedData) {\n                                        if (processedData.success === true) {\n                                            $window.open(processedData.link, '_blank');\n                                        }\n                                    });\n\n                                }\n\n                            });\n\n                        });\n\n                    }\n                });\n\n            });\n        };\n\n        $scope.showRealizationTime = function (realizationTimeID) {\n            var rIdx = _.findIndex($scope.realisationTimes, {ID: realizationTimeID});\n            var resDate = '';\n            if (rIdx > -1) {\n                if ($scope.realisationTimes[rIdx].overwriteDate !== undefined && $scope.realisationTimes[rIdx].overwriteDate !== null) {\n                    resDate = $scope.realisationTimes[rIdx].overwriteDate;\n                } else {\n                    resDate = $scope.realisationTimes[rIdx].date;\n                }\n            }\n            return resDate;\n        };\n\n        $scope.releaseSpinner = function (complexProduct, attrID, direct) {\n\n            if (complexProduct.selectedProduct.data.attrPages[attrID] <= 0 && direct === 0) {\n                return;\n            }\n\n            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n\n            if (attrIdx > -1) {\n                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                var step = attribute.step;\n\n                var maxPages = attribute.maxPages;\n                if (maxPages === null) {\n                    maxPages = complexProduct.selectedProduct.data.currentPages;\n                }\n\n                if ((complexProduct.selectedProduct.data.attrPages[attrID] + step) > maxPages && direct === 1) {\n                    Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                    return;\n                }\n\n                if ((complexProduct.selectedProduct.data.attrPages[attrID] - step) < attribute.minPages && direct === 0) {\n                    Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + attribute.minPages);\n                    return;\n                }\n            }\n\n            if (direct) {\n                complexProduct.selectedProduct.data.attrPages[attrID] += step;\n            } else {\n                complexProduct.selectedProduct.data.attrPages[attrID] -= step;\n            }\n\n            $scope.selectAttrPages(complexProduct, attrID);\n        };\n\n        $scope.spinPage = function (complexProduct, direct) {\n            $scope.selectPages(complexProduct.selectedProduct.data, complexProduct.selectedProduct.data.currentPages + (direct ? 1 : -1) * complexProduct.selectedProduct.data.pages[0].step);\n        };\n\n        $scope.selectCustomFormat = function (complexProduct) {\n\n            complexProduct.selectedProduct.data.currentFormat.customHeight = Number(complexProduct.selectedProduct.data.currentFormat.customHeight);\n            complexProduct.selectedProduct.data.currentFormat.customWidth = Number(complexProduct.selectedProduct.data.currentFormat.customWidth);\n            updateCalculationUrl('customWidth', complexProduct.selectedProduct.data.currentFormat.customWidth, null, productIndex(complexProduct));\n            updateCalculationUrl('customHeight', complexProduct.selectedProduct.data.currentFormat.customHeight, null, productIndex(complexProduct));\n            if (angular.isDefined(stopSelect)) {\n                $timeout.cancel(stopSelect);\n                stopSelect = undefined;\n            }\n\n            stopSelect = $timeout(function () {\n\n                // check maximal and minimal customSize\n                var minHeight = complexProduct.selectedProduct.data.currentFormat.minHeight - complexProduct.selectedProduct.data.currentFormat.slope * 2;\n                var minWidth = complexProduct.selectedProduct.data.currentFormat.minWidth - complexProduct.selectedProduct.data.currentFormat.slope * 2;\n\n                var maxHeight = complexProduct.selectedProduct.data.currentFormat.maxHeight - complexProduct.selectedProduct.data.currentFormat.slope * 2;\n                var maxWidth = complexProduct.selectedProduct.data.currentFormat.maxWidth - complexProduct.selectedProduct.data.currentFormat.slope * 2;\n\n                if (complexProduct.selectedProduct.data.currentFormat.customHeight > maxHeight) {\n                    Notification.info($filter('translate')('value_greater_than_maximum') + ' ' + maxHeight);\n                    complexProduct.selectedProduct.data.currentFormat.customHeight = maxHeight;\n                }\n\n                if (complexProduct.selectedProduct.data.currentFormat.customHeight < minHeight) {\n                    Notification.info($filter('translate')('value_lower_than_minimum') + ' ' + minHeight);\n                    complexProduct.selectedProduct.data.currentFormat.customHeight = minHeight;\n                }\n\n                if (complexProduct.selectedProduct.data.currentFormat.customWidth > maxWidth) {\n                    Notification.info($filter('translate')('value_greater_than_maximum') + ' ' + maxWidth);\n                    complexProduct.selectedProduct.data.currentFormat.customWidth = maxWidth;\n                }\n\n                if (complexProduct.selectedProduct.data.currentFormat.customWidth < minWidth) {\n                    Notification.info($filter('translate')('value_lower_than_minimum') + ' ' + minWidth);\n                    complexProduct.selectedProduct.data.currentFormat.customWidth = minWidth;\n                }\n\n                // depth notification when lower,  higher\n                if (complexProduct.selectedProduct.data.currentFormat.customDepth > complexProduct.selectedProduct.data.currentFormat.maxDepth) {\n                    Notification.info($filter('translate')('value_greater_than_maximum') + ' ' + complexProduct.selectedProduct.data.currentFormat.maxDepth);\n                    complexProduct.selectedProduct.data.currentFormat.customDepth = complexProduct.selectedProduct.data.currentFormat.maxDepth;\n                }\n                if (complexProduct.selectedProduct.data.currentFormat.customDepth < complexProduct.selectedProduct.data.currentFormat.minDepth) {\n                    Notification.info($filter('translate')('value_lower_than_minimum') + ' ' + complexProduct.selectedProduct.data.currentFormat.minDepth);\n                    complexProduct.selectedProduct.data.currentFormat.customDepth = complexProduct.selectedProduct.data.currentFormat.minDepth;\n                }\n\n                $scope.getVolumes($scope.productItem.amount);\n\n            }, 1500);\n        };\n\n        $scope.spinCustomHeight = function (complexProduct, direct) {\n            if (direct) {\n                complexProduct.selectedProduct.data.currentFormat.customHeight = complexProduct.selectedProduct.data.currentFormat.customHeight + complexProduct.selectedProduct.data.currentFormat.heightStep || 1;\n            } else {\n                complexProduct.selectedProduct.data.currentFormat.customHeight = complexProduct.selectedProduct.data.currentFormat.customHeight - complexProduct.selectedProduct.data.currentFormat.heightStep || 1;\n            }\n\n            $scope.selectCustomFormat(complexProduct);\n\n        };\n\n        $scope.spinCustomDepth = function (complexProduct, direct) {\n\n            if (direct) {\n                complexProduct.selectedProduct.data.currentFormat.customDepth = complexProduct.selectedProduct.data.currentFormat.customDepth + complexProduct.selectedProduct.data.currentFormat.depthStep || 1;\n            } else {\n                complexProduct.selectedProduct.data.currentFormat.customDepth = complexProduct.selectedProduct.data.currentFormat.customDepth - complexProduct.selectedProduct.data.currentFormat.depthStep || 1;\n            }\n\n            $scope.selectCustomFormat(complexProduct);\n\n        };\n                $scope.spinCustomWidth = function (complexProduct, direction) {\n\n            if (direction) {\n                complexProduct.selectedProduct.data.currentFormat.customWidth = complexProduct.selectedProduct.data.currentFormat.customWidth + complexProduct.selectedProduct.data.currentFormat.widthStep || 1;\n            } else {\n                complexProduct.selectedProduct.data.currentFormat.customWidth = complexProduct.selectedProduct.data.currentFormat.customWidth - complexProduct.selectedProduct.data.currentFormat.widthStep || 1;\n            }\n\n            $scope.selectCustomFormat(complexProduct);\n\n        };\n\n        $scope.spinCustomAmount = function (direct) {\n\n            if (direct) {\n                $scope.productItem.amount = $scope.productItem.amount + 1;\n            } else {\n\n                if ($scope.productItem.amount === 1) {\n                    return;\n                }\n\n                $scope.productItem.amount = $scope.productItem.amount - 1;\n            }\n\n            $scope.changeAmount();\n\n        };\n\n        $scope.spinWingtip = function (complexProduct, direction, field) {\n            complexProduct.selectedProduct.data.currentFormat[field] = Number(complexProduct.selectedProduct.data.currentFormat[field]) + direction;\n            $scope.selectWingtip(complexProduct);\n        };\n\n        $scope.selectWingtip = function (complexProduct) {\n            complexProduct.selectedProduct.data.currentFormat.wingtipFront = Number(complexProduct.selectedProduct.data.currentFormat.wingtipFront);\n            complexProduct.selectedProduct.data.currentFormat.wingtipBack = Number(complexProduct.selectedProduct.data.currentFormat.wingtipBack);\n            updateCalculationUrl('wingtipFront', complexProduct.selectedProduct.data.currentFormat.wingtipFront, null, productIndex(complexProduct));\n            updateCalculationUrl('wingtipBack', complexProduct.selectedProduct.data.currentFormat.wingtipBack, null, productIndex(complexProduct));\n            if (angular.isDefined(stopSelect)) {\n                $timeout.cancel(stopSelect);\n                stopSelect = undefined;\n            }\n            var minSize = [complexProduct.selectedProduct.data.currentFormat.wingtipFrontMin, complexProduct.selectedProduct.data.currentFormat.wingtipBackMin];\n            var maxWidth = complexProduct.selectedProduct.data.currentFormat.width - 2 * 10;\n            stopSelect = $timeout(function () {\n                if (complexProduct.selectedProduct.data.currentFormat.wingtipFront < minSize[0]) {\n                    Notification.info($filter('translate')('value_lower_than_minimum') + ' ' + minSize[0]);\n                    complexProduct.selectedProduct.data.currentFormat.wingtipFront = minSize[0];\n                }\n                if (complexProduct.selectedProduct.data.currentFormat.wingtipBack < minSize[1]) {\n                    Notification.info($filter('translate')('value_lower_than_minimum') + ' ' + minSize[1]);\n                    complexProduct.selectedProduct.data.currentFormat.wingtipBack = minSize[1];\n                }\n                if (complexProduct.selectedProduct.data.currentFormat.wingtipFront > maxWidth) {\n                    Notification.info($filter('translate')('value_greater_than_maximum') + ' ' + maxWidth);\n                    complexProduct.selectedProduct.data.currentFormat.wingtipFront = maxWidth;\n                }\n                if (complexProduct.selectedProduct.data.currentFormat.wingtipBack > maxWidth) {\n                    Notification.info($filter('translate')('value_greater_than_maximum') + ' ' + maxWidth);\n                    complexProduct.selectedProduct.data.currentFormat.wingtipBack = maxWidth;\n                }\n                $scope.getVolumes($scope.productItem.amount);\n\n            }, 1500);\n            timeouts.push(stopSelect);\n        };\n\n        $scope.optionsSort = function (option) {\n            return option.sort;\n        };\n\n        $rootScope.$on('Currency.changed', function (e, currency) {\n\n            $scope.getVolumes($scope.productItem.amount);\n            getDeliveries();\n\n        });\n\n        $scope.showAttribute = function (complexProduct, attrID) {\n            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n            var attrName;\n            if (attrIdx > -1) {\n                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                var optID = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n\n                var optIdx = _.findIndex(attribute.filteredOptions, {ID: parseInt(optID)});\n                if (optIdx > -1) {\n                    var option = attribute.filteredOptions[optIdx];\n\n                    if (option.invisible === 1) {\n                        return '';\n                    }\n\n                } else {\n                    return '';\n                }\n\n                if (attribute.names[$rootScope.currentLang.code].name !== undefined) {\n                    attrName = attribute.names[$rootScope.currentLang.code].name\n                } else {\n                    attrName = attribute.attrName;\n                }\n\n                return attrName;\n\n            }\n            return '';\n        };\n\n        $scope.showOption = function (complexProduct, attrID) {\n            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n            var optionName;\n            if (attrIdx > -1) {\n                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                var optID = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n\n                var optIdx = _.findIndex(attribute.filteredOptions, {ID: parseInt(optID)});\n                if (optIdx > -1) {\n                    var option = attribute.filteredOptions[optIdx];\n\n                    if (option.invisible === 1) {\n                        return '';\n                    }\n\n                    if (option.names[$rootScope.currentLang.code].name !== undefined) {\n                        optionName = option.names[$rootScope.currentLang.code].name;\n                    } else {\n                        optionName = option.name;\n                    }\n\n                    return optionName;\n                }\n            }\n            return '';\n        };\n\n        $scope.showTax = function (taxID) {\n\n            var idxTax = _.findIndex($scope.taxes, {ID: taxID});\n\n            if (idxTax > -1) {\n                return $scope.taxes[idxTax].value + ' %';\n            }\n        };\n\n        $scope.checkEmptyChoice = function (complexProduct, attributeID) {\n\n            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attributeID)});\n\n            if (attrIdx > -1) {\n                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                var optionID = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n\n                var optIdx = _.findIndex(attribute.filteredOptions, {ID: parseInt(optionID)});\n                if (optIdx > -1) {\n                    var option = attribute.filteredOptions[optIdx];\n                    return option.emptyChoice;\n                }\n\n                return false;\n            }\n\n            return false;\n        };\n\n        $scope.toggleShowPattern = function () {\n            $scope.showPattern = true;\n            $scope.showSummary = false;\n        };\n\n        $scope.toggleShowSummary = function () {\n            $scope.showSummary = true;\n            $scope.showPattern = false;\n        };\n\n        $scope.selectType = function (item) {\n            if (item) {\n\n                PsTypeService.getOneForView(\n                    item.group.slugs[$rootScope.currentLang.code],\n                    item.slugs[$rootScope.currentLang.code]\n                ).then(function (typeInfo) {\n\n                    var categorySlugs = {};\n                    _.each(typeInfo.category.langs, function (langObject, lang) {\n                        categorySlugs[lang] = langObject.url;\n                    });\n                    if ($rootScope.urlParams === undefined) {\n                        $rootScope.urlParams = {};\n                    }\n                    $rootScope.urlParams.category = categorySlugs;\n                    $rootScope.urlParams.group = typeInfo.group.slugs;\n                    $rootScope.urlParams.type = typeInfo.slugs;\n\n                    var urlParams = {};\n\n                    if ($stateParams.categoryurl === undefined && $stateParams.groupurl === undefined) {\n                        urlParams = {\n                            typeurl: typeInfo.slugs[$rootScope.currentLang.code]\n                        };\n                    } else if ($stateParams.categoryurl === undefined && $stateParams.groupurl !== undefined) {\n                        urlParams = {\n                            groupurl: typeInfo.group.slugs[$rootScope.currentLang.code],\n                            typeurl: typeInfo.slugs[$rootScope.currentLang.code]\n                        };\n                    } else {\n                        urlParams = {\n                            categoryurl: typeInfo.category.langs[$rootScope.currentLang.code].url,\n                            groupurl: typeInfo.group.slugs[$rootScope.currentLang.code],\n                            typeurl: typeInfo.slugs[$rootScope.currentLang.code]\n                        };\n                    }\n\n                    if (typeInfo.isEditor) {\n                        $state.go('select-project', urlParams);\n                    } else {\n                        $state.go('calculate', urlParams);\n                    }\n\n                });\n            }\n        };\n\n        function descriptionTabResetActive() {\n            $timeout(function () {\n                $('.with-nav-tabs .nav-tabs li').removeClass('active');\n                $('.with-nav-tabs .tab-content div.tab-pane').removeClass('active');\n\n                $('.with-nav-tabs .nav-tabs li').first().addClass('active');\n                $('.with-nav-tabs .tab-content div.tab-pane').first().addClass('active');\n            }, 300);\n        }\n\n        function updateCalculationUrl(name, value, nameGroup, index) {\n            $scope.quotationSend = false;\n            if (arguments.length > 2 && nameGroup) {\n                name += '.' + nameGroup;\n            }\n            if (arguments.length > 3) {\n                name += '.' + index;\n            }\n            $location.search(name, value);\n            updateLinkToCopy();\n        }\n\n        function setFromCalculationUrl(item, propertyName, storedPropertyName, defaultValue, converter, reset) {\n            var formatValue = function (value) {\n                if (converter) {\n                    value = converter(value);\n                }\n                return value;\n            };\n            var changes = [];\n            if (storedPropertyName.indexOf('[]') > -1) {\n                var params = $location.search();\n                storedPropertyName = storedPropertyName.replace('[]', '');\n                for (var key in params) {\n                    var keyParts = key.split('.')\n                    if (keyParts[0] === storedPropertyName) {\n                        if (keyParts.length == 2) {\n                            var index = keyParts[1]\n                            var path = propertyName.split('.')\n                            var goal = item[index];\n                            for (var i = 0; i < path.length - 1; i++) {\n                                goal = goal[path[i]]\n                            }\n                            try{\n                                goal[path[path.length - 1]] = formatValue(params[key]);\n                            }catch (e) {\n                                console.log(e)\n                                throw new Error(e)\n                            }\n\n                            log.debug('setFromCalculationUrl', index, path, key, params);\n                        } else if (keyParts.length == 3) {\n                            var propertyNameParts = propertyName.split('.')\n                            var goal = item[keyParts[2]]\n                            for (var i = 0; i < propertyNameParts.length; i++) {\n                                if (goal) {\n                                    goal = goal[propertyNameParts[i]]\n                                } else {\n                                    throw new Error('Wrong goal for propertyName ' + propertyName);\n                                }\n\n                            }\n                            goal[keyParts[1]] = formatValue(params[key]);\n                            changes.push([goal, keyParts[2], keyParts[1], goal[keyParts[1]]]);\n                            log.debug('setFromCalculationUrl', index, propertyNameParts, key, params);\n                        }\n\n                    }\n                }\n            } else {\n                var value = $location.search()[storedPropertyName] || defaultValue\n                if (value) {\n                    item[propertyName] = formatValue(value);\n                    log.debug('setFromCalculationUrl', propertyName, value);\n                }\n            }\n            if (reset) {\n                updateCalculationUrl(storedPropertyName, null)\n            }\n            return changes;\n        }\n\n        function getCalculationUrlParam(storedPropertyName) {\n            return $location.search()[storedPropertyName]\n        }\n\n        function setupClipboardJS() {\n            var clipboardJS = new ClipboardJS('#copyCalculationUrlBtn')\n            clipboardJS.on('success', function (e) {\n                log.info('Url copied');\n            });\n            clipboardJS.on('error', function (e) {\n                log.error('Copy Url', e);\n            });\n        }\n\n        function updateLinkToCopy() {\n            var elRef = document.querySelector('#copyCalculationUrlBtn')\n            if (elRef) {\n                elRef.setAttribute('data-clipboard-text', $location.absUrl())\n            }\n        }\n\n        function getCartUrl() {\n            return document.querySelector('#copyCalculationUrlBtn').getAttribute('data-clipboard-text');\n        }\n\n        $scope.selectOptionImage = function (complexProductData, item, attribute) {\n            complexProductData.selectedOptions[attribute.attrID] = item.ID;\n            $scope.selectOption(complexProductData, attribute.attrID);\n        };\n\n        $scope.setOptionPicture = function ($event, item) {\n            $scope.optionPicture = item.icon;\n            setTimeout(function () {\n                $('#showOptionPicture').modal('show');\n                $event.stopPropagation();\n            }, 100);\n\n        };\n\n        $scope.filterSearchProduct = function () {\n\n            var _that = this;\n\n            if (this.query === undefined) {\n                return;\n            }\n\n            if (!this.query.productName) {\n                $scope.filteredProducts = $rootScope.allTypes;\n            } else {\n                $('.dropdown-menu.option:hidden').dropdown(\"toggle\");\n                $scope.filteredProducts = _.filter($rootScope.allTypes, function (one) {\n\n                    if (one.names === undefined || one.names[$rootScope.currentLang.code] === undefined) {\n                        return false;\n                    }\n\n                    return one.names[$rootScope.currentLang.code].toLowerCase().search(_that.query.productName.toLowerCase()) > -1;\n\n                });\n            }\n        };\n\n        $scope.getFlagClass = function (addresses, addressID) {\n            var selectedAddress = _.find(addresses, {ID: addressID});\n            if (selectedAddress) {\n                return 'flag-icon-' + selectedAddress.countryCode.toLowerCase();\n            }\n            return '';\n        };\n\n        $scope.selectTechnology = function () {\n            updateCalculationUrl('technologyID', this.productItem.selectedTechnologyID);\n            $scope.getVolumes($scope.productItem.amount);\n        };\n\n        $scope.showTechnologyTooltip = function (technology) {\n\n            if (!technology || technology.names === undefined) {\n                return '';\n            }\n\n            if (!technology.selected) {\n                return $filter('translate')('count_only_for') + ' ' + technology.names[$rootScope.currentLang.code];\n            }\n\n            return $filter('translate')('count_for_all_technologies');\n        };\n\n        function formatTextProductConfiguration() {\n            var texts = [];\n            _.each($scope.complexProducts, function (complexProduct) {\n                var data = complexProduct.selectedProduct.data;\n                if ($scope.complexProducts.length > 1) {\n                    texts.push([data.info.langs[$scope.currentLang.code].name])\n                }\n                // texts.push([data.customFormatInfo.customName[$scope.currentLang.code]])\n                if (data.currentFormat.custom) {\n                    texts.push([$filter('translate')('format'), data.currentFormat.name + ' (' + data.currentFormat.customWidth + ' x ' + data.currentFormat.customHeight + ')'])\n                } else {\n                    texts.push([$filter('translate')('format'), data.currentFormat.name])\n                }\n                texts.push([$filter('translate')('pages'), data.currentPages])\n                _.each(complexProduct.selectedProduct.data.attributes, function (attribute) {\n                    if (attribute.filteredOptions && attribute.filteredOptions.length > 0) {\n                        var addToArray = true;\n                        _.each(attribute.filteredOptions, function (filteredOption) {\n                            if (filteredOption.emptyChoice) {\n                                addToArray = false;\n                            }\n                        });\n                        if (addToArray === true) {\n                            texts.push([$scope.showAttribute(complexProduct, attribute.attrID), $scope.showOption(complexProduct, attribute.attrID)])\n                        }\n                    }\n                });\n                texts.push([$filter('translate')('volume'), $scope.productItem.amount])\n                texts.push([$filter('translate')('vat_value'), $scope.showTax($scope.productItem.taxID)])\n            });\n            texts = _.map(texts, function (text) {\n                if (text.length === 2) {\n                    if (text[0] && text[1] && text[0] !== '' && text[1] !== '') {\n                        return text[0] + ': ' + text[1];\n                    }\n                    return '';\n                } else if (text.length === 1) {\n                    return text[0];\n                }\n            });\n            return texts.join(\"\\n\");\n        }\n\n        $scope.sendQuotation = function () {\n            getPreparedProduct($scope.productItem.amount, $scope.productItem.volume).then(function (preparedProduct) {\n                CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                preparedProduct.isOffer = 1;\n                preparedProduct.isQuestion = 1;\n                CalculateService.saveCalculation(preparedProduct).then(function (data) {\n                    var productQuestion = {\n                        name: $scope.currentType.names[$scope.currentLang.code],\n                        content: formatTextProductConfiguration() + \"\\n\" + getCartUrl(),\n                        groupID: $scope.currentGroupID,\n                        typeID: $scope.currentTypeID,\n                        calcID: data.calcID\n                    };\n                    CustomProductService.add(productQuestion).then(function (savedData) {\n                        if (savedData.response === true) {\n                            Notification.success($filter('translate')('question_send'));\n                            $scope.quotationSend = true;\n                            $scope.quotationItemID = savedData.item.ID;\n                        }\n                    }, function () {\n                        Notification.error($filter('translate')('error'));\n                    });\n                });\n            });\n\n        };\n\n        $scope.login = function (credentials) {\n            var backTo = {\n                state: 'calculate',\n                params: {\n                    categoryurl: $state.params.categoryurl,\n                    groupurl: $state.params.groupurl,\n                    typeurl: $state.params.typeurl\n                }\n            };\n            LoginWidgetService.login(credentials, backTo);\n        };\n\n        $scope.includedAlternatives = false;\n\n        $scope.includeAlternatives = function () {\n            $scope.includedAlternatives = !$scope.includedAlternatives;\n        }\n\n        $scope.includeAlternativesOn = function () {\n            $scope.includedAlternatives = true;\n        }\n\n        $scope.filterAlternatives = function (items) {\n            return _.filter(items, function (item) {\n                return $scope.includedAlternatives ? true : !item.isAlternative\n            });\n        }\n\n        $scope.checkForAlts = function (attribute, complexProduct) {\n            var selectedOption = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n            var allOptions = attribute.options;\n            var altOptions = _.filter(allOptions, function (item) {\n                return item.isAlternativeOf === selectedOption;\n            });\n            return altOptions.length;\n        }\n\n        $scope.showAltPapers = function (attribute, complexProduct) {\n            var selectedOption = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n            var allOptions = attribute.options;\n            var altOptions = _.filter(allOptions, function (item) {\n                return item.isAlternativeOf === selectedOption;\n            });\n            var selectedOptionInstance = _.filter(allOptions, function (item) {\n                return item.ID === selectedOption;\n            });\n            console.log(complexProduct);\n            console.log(attribute);\n\n            if (altOptions.length > 0) {\n                TemplateRootService.getTemplateUrl(129).then(function (response) {\n                    $modal.open({\n                        templateUrl: response.url,\n                        scope: $scope,\n                        size: 'lg',\n                        controller: function ($scope, $modalInstance) {\n                            $scope.selectedOptionInstance = selectedOptionInstance;\n                            $scope.altOptions = altOptions;\n                            $scope.chooseAltOption = function (option) {\n                                $scope.includeAlternativesOn();\n                                complexProduct.selectedProduct.data.selectedOptions[attribute.attrID] = option.ID;\n                                $scope.selectOption(complexProduct.selectedProduct.data, attribute.attrID);\n                                $modalInstance.close();\n                            };\n                        }\n                    });\n\n                });\n            } else {\n                Notification.error($filter('translate')('no_alternative_options_for_this_option'));\n            }\n        };\n\n        $scope.uploadFiles = function (product) {\n\n            TemplateRootService.getTemplateUrl(34).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    backdrop: true,\n                    keyboard: false,\n                    size: 'lg',\n                    resolve: {\n                        allowedExtensions: function () {\n                            return CommonService.getAll().then(function (data) {\n                                var extensions = [];\n                                _.each(data, function (item) {\n                                    extensions.push(item['extension']);\n                                });\n\n                                return extensions;\n\n                            });\n                        }\n                    },\n                    controller: function ($scope, $modalInstance, allowedExtensions, $config) {\n\n                        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n                        var header = {};\n                        header[accessTokenName] = AuthDataService.getAccessToken();\n\n                        var calcFilesSetID = '';\n                        if ($rootScope.logged === false && $scope.calcFilesSetID) {\n                            calcFilesSetID = '/' + $scope.calcFilesSetID;\n                        }\n\n                        var uploader = $scope.uploader = new FileUploader({\n                            'url': CalcFileService.getUrl($scope.currentTypeID) + calcFilesSetID,\n                            'headers': header\n                        });\n\n                        console.log({uploader});\n\n                        uploader.filters.push({\n                            name: 'imageFilter',\n                            fn: function (item, options) {\n                                var itemName = item.name.split('.');\n                                var lastItem = itemName.pop().toLowerCase();\n\n                                if (allowedExtensions.indexOf(lastItem) > -1) {\n                                    return true;\n                                }\n                                Notification.warning($filter('translate')('required_ext') + allowedExtensions.join(', '));\n                                return false;\n                            }\n                        });\n\n                        uploader.onAfterAddingAll = function (addedItems) {\n                            uploader.uploadAll();\n                        };\n\n                        uploader.onSuccessItem = function (fileItem, response, status) {\n                            console.log(response);\n                            $scope.calcFiles.push(response.file);\n                            var calcFilesSetID = response.file.calcFilesSetID;\n                            localStorageService.set('calcFilesSetID', calcFilesSetID);\n                            $scope.calcFilesSetID = calcFilesSetID;\n                            $scope.setPagination($scope.calcFilesCurrentPage);\n                            // $scope.calculate($scope.productItem.amount, 209);\n\n                        };\n\n                        uploader.onCompleteAll = function () {\n                            // $modalInstance.close();\n\n                        };\n\n                        uploader.onClose = function () {\n                            console.log('asdasdasd');\n\n                        };\n\n                        $scope.cancel = function () {\n                            if (uploader.isUploading) {\n                                alert($filter('translate')('uploading_in_progress'));\n                            } else {\n                                $modalInstance.close();\n                            }\n                        }\n                    }\n                }).result.finally(function () {\n                    $scope.setNewVolume(caclulateCalcFilesVolume());\n                });\n                ;\n            });\n        };\n\n        $scope.removeFile = function (fileID) {\n            CalcFileService.removeFile($scope.type.ID, fileID).then(caclFilesData => {\n\n\n                var index = _.findIndex($scope.calcFiles, {ID: fileID});\n                if (index === -1) {\n                    return true;\n                }\n\n                if ($scope.calcFiles[index].isLastInGroup && $scope.calcFiles[index - 1].isFirstInGroup) {\n                    $scope.calcFiles[index - 1].copies = 0;\n                } else if ($scope.calcFiles[index].isLastInGroup && !$scope.calcFiles[index - 1].isFirstInGroup && !$scope.calcFiles[index - 1].isLastInGroup) {\n                    $scope.calcFiles[index - 1].isLastInGroup = true;\n                } else if ($scope.calcFiles[index].isFirstInGroup && $scope.calcFiles[index].copies > 0) {\n                    if ($scope.calcFiles[index].copies == 1) {\n                        $scope.calcFiles[index + 1].copies = 0;\n                        $scope.calcFiles[index + 1].isFirstInGroup = true;\n                        $scope.calcFiles[index + 1].isLastInGroup = false;\n                    } else {\n                        $scope.calcFiles[index + 1].copies = 1;\n                        $scope.calcFiles[index + 1].isFirstInGroup = true;\n                        $scope.calcFiles[index + 1].isLastInGroup = false;\n                    }\n\n                    _.forEach($scope.calcFiles, function (calcFile) {\n                        if (calcFile.copyOf == $scope.calcFiles[index].ID) {\n                            var index2 = _.findIndex($scope.calcFiles, {ID: calcFile.ID});\n                            if (index2 === -1) {\n                                return true;\n                            }\n                            console.log(index2);\n                            console.log($scope.calcFiles[index2]);\n                            console.log($scope.calcFiles[index + 1]);\n                            $scope.calcFiles[index2].copyOf = $scope.calcFiles[index + 1].ID;\n                        }\n                    });\n                    console.log($scope.calcFiles);\n                }\n\n\n                _.remove($scope.calcFiles, {ID: caclFilesData.removed_item.ID});\n                $scope.setNewVolume(caclulateCalcFilesVolume());\n                $scope.setPagination($scope.calcFilesCurrentPage);\n            });\n        };\n\n        $scope.removeAllFiles = function () {\n            _.forEach($scope.calcFiles, function (calcFile) {\n                CalcFileService.removeFile($scope.type.ID, calcFile.ID).then(function (caclFilesData) {\n                    _.remove($scope.calcFiles, {ID: caclFilesData.removed_item.ID});\n                    if ($scope.calcFiles.length === 0) {\n                        $scope.setNewVolume(caclulateCalcFilesVolume());\n                        $scope.productItem.volume = 0;\n                        $scope.changeVolume();\n                        $scope.setPagination(1);\n                    }\n                });\n            });\n        };\n\n        $scope.setNewVolume = function (volume) {\n            $scope.isAddToCartDisabled = true;\n            if (parseInt($scope.customVolume.maxVolume) < parseInt(volume)) {\n                Notification.error($filter('translate')('to_high_volume') + ' - ' + $scope.customVolume.maxVolume);\n                return;\n            }\n\n            if (parseInt($scope.customVolume.minVolume) > parseInt(volume)) {\n                Notification.error($filter('translate')('to_low_volume') + ' - ' + $scope.customVolume.minVolume);\n                return;\n            }\n\n            if (volume === undefined) {\n                Notification.error($filter('translate')('incorrect_volume'));\n                return;\n            }\n\n            var newVolume = {'volume': volume, 'active': true};\n            $scope.customVolume.volumes = [newVolume];\n            $scope.rememberVolume.volume = newVolume;\n            $scope.getVolumes($scope.productItem.amount);\n            $scope.isAddToCartDisabled = false;\n        };\n        function copyGroupProperties(file) {\n            var copies = file.copies;\n            var isFirstInGroup = file.isFirstInGroup;\n            var isLastInGroup = file.isLastInGroup;\n\n            return {copies, isFirstInGroup, isLastInGroup};\n        }\n\n        function setGroupProperties(properties, index) {\n            $scope.calcFiles[index].copies = properties.copies;\n            $scope.calcFiles[index].isFirstInGroup = properties.isFirstInGroup;\n            $scope.calcFiles[index].isLastInGroup = properties.isLastInGroup;\n        }\n\n        function setAddress(allAddress) {\n            $scope.addresses = allAddress.addresses;\n            if (_.size(allAddress.senders) > 0) {\n                $scope.senders = [];\n                _.each(allAddress.senders, function (item) {\n                    item.name = $filter('translate')(item.name);\n                    $scope.senders.push(item);\n                });\n            }\n        }\n\n        $scope.setImageBW = function (file) {\n            CalcFileService.setImageBW(file.ID).then(function (data) {\n                console.log(data);\n                var index = _.findIndex($scope.calcFiles, {ID: file.ID});\n                if (index === -1) {\n                    return true;\n                }\n                var groupProperties = copyGroupProperties($scope.calcFiles[index]);\n                $scope.calcFiles[index] = data.response;\n                setGroupProperties(groupProperties, index);\n\n                $scope.setPagination($scope.calcFilesCurrentPage);\n            });\n        };\n\n        $scope.setImageSepia = function (file) {\n            CalcFileService.setImageSepia(file.ID).then(function (data) {\n                console.log(data);\n                var index = _.findIndex($scope.calcFiles, {ID: file.ID});\n                if (index === -1) {\n                    return true;\n                }\n\n                var groupProperties = copyGroupProperties($scope.calcFiles[index]);\n                $scope.calcFiles[index] = data.response;\n                setGroupProperties(groupProperties, index);\n\n                $scope.setPagination($scope.calcFilesCurrentPage);\n            });\n        };\n\n        $scope.allFilesToBW = function () {\n            $scope.calcFilesLoading.isBW = true;\n            CalcFileService.setCollectionToBW($scope.calcFilesSetID).then(function (data) {\n                console.log(data);\n                $scope.calcFiles = data.calcFiles;\n                $scope.calcFilesLoading.isBW = false;\n                $scope.setPagination($scope.calcFilesCurrentPage);\n            });\n        };\n\n        $scope.allFilesToSepia = function () {\n            $scope.calcFilesLoading.isSepia = true;\n            CalcFileService.setCollectionToSepia($scope.calcFilesSetID).then(function (data) {\n                console.log(data);\n                $scope.calcFiles = data.calcFiles;\n                $scope.calcFilesLoading.isSepia = false;\n                $scope.setPagination($scope.calcFilesCurrentPage);\n            });\n        };\n\n        $scope.allFilesRemoveFilters = function () {\n            $scope.calcFilesLoading.removeFilters = true;\n            CalcFileService.removeCollectionFilters($scope.calcFilesSetID).then(function (data) {\n                console.log(data);\n                $scope.calcFiles = data.calcFiles;\n                $scope.calcFilesLoading.removeFilters = false;\n                $scope.setPagination($scope.calcFilesCurrentPage);\n            });\n        };\n\n        $scope.restoreAllImages = function () {\n            $scope.calcFilesLoading.restoreAllImages = true;\n            CalcFileService.removeCollectionFilters($scope.calcFilesSetID).then(function (data) {\n                console.log(data);\n                $scope.calcFiles = data.calcFiles;\n                $scope.calcFilesLoading.removeFilters = false;\n                $scope.setPagination($scope.calcFilesCurrentPage);\n            });\n        };\n\n        $scope.setPagination = function (page) {\n            $scope.calcFilesCurrentPage = page;\n            var indexFrom = $scope.calcFilesPerPage * (page - 1);\n            var indexTo = indexFrom + $scope.calcFilesPerPage;\n            $scope.calcFilesDisplay = _.slice($scope.calcFiles, indexFrom, indexTo);\n        }\n\n        $scope.setPerPage = function (perPage) {\n            $scope.calcFilesPerPage = perPage;\n            $scope.setPagination(1);\n        }\n\n        $scope.scrollProduct = function (dir) {\n            // Filtrowanie typów, aby wykluczyć elementy z isEditor\n            var types = _.filter($rootScope.allTypes, function(item) { return !item.isEditor; });\n\n            // Znajdź indeks aktualnego typu\n            var idx = _.findIndex(types, { name: $scope.currentType.name });\n\n            // Sprawdzenie, czy znaleziono typ\n            if (idx === -1) return; // Bezpieczne wyjście, jeśli nie znaleziono typu\n\n            // Przechowanie długości tablicy w zmiennej lokalnej dla optymalizacji\n            var totalTypes = types.length;\n\n            // Zmienna dla nowego indeksu\n            var newIndex;\n\n            // Zmiana indeksu w zależności od kierunku\n            if (dir === 1) {\n                newIndex = (idx + 1) % totalTypes;\n            } else if (dir === -1) {\n                newIndex = (idx === 0) ? totalTypes - 1 : idx - 1;\n            } else {\n                return; // Bezpieczne wyjście, jeśli kierunek jest nieprawidłowy\n            }\n\n            // Pobierz nowy typ produktu na podstawie nowego indeksu\n            var type = types[newIndex];\n\n            // Wywołaj funkcję wybierającą nowy typ\n            $scope.selectType(type);\n        }\n\n\n        $scope.restoreImage = function (file) {\n            console.log('restoreImage');\n            CalcFileService.restoreImage(file.ID).then(function (data) {\n                console.log(data);\n                if (data.success) {\n                    var index = _.findIndex($scope.calcFiles, {ID: file.ID});\n                    if (index === -1) {\n                        return true;\n                    }\n\n                    var groupProperties = copyGroupProperties($scope.calcFiles[index]);\n                    $scope.calcFiles[index] = data.response;\n                    setGroupProperties(groupProperties, index);\n\n                    $scope.setPagination($scope.calcFilesCurrentPage);\n                }\n            });\n        };\n\n        $scope.modifyImage = function (image) {\n            console.log(image);\n            $modal.open({\n                scope: $scope,\n                size: 'lg',\n                backdrop: true,\n                controller: function ($scope, $modalInstance) {\n                    var calcFile = image;\n                    var cropper;\n                    var img;\n                    var canvas;\n                    var croppedData;\n                    var editImageData = JSON.parse(calcFile.editData);\n\n                    $timeout(function () {\n                        var imageURL = image.isCropped == 1 ? image.originalUrl : image.url;\n                        img = new Image();\n                        canvas = document.getElementById(\"canvas\");\n                        var ctx = canvas.getContext(\"2d\");\n                        img = new Image();\n                        img.src = imageURL + '?' + new Date().getTime();\n                        img.setAttribute('crossOrigin', '');\n                        img.onload = function () {\n                            canvas.width = img.width;\n                            canvas.height = img.height;\n                            ctx.drawImage(img, 0, 0, img.width, img.height);\n                        };\n\n                        croppedData = calcFile.isCropped == 1 ? JSON.parse(calcFile.cropData) : {};\n                        $scope.imageQuality = $scope.checkImageQuality(calcFile.width, calcFile.height);\n\n                        $timeout(function () {\n                            cropper = new Cropper(canvas, {\n                                data: croppedData,\n                                autoCrop: true,\n                                aspectRatio: $scope.complexProducts[0].selectedProduct.data.currentFormat.width / $scope.complexProducts[0].selectedProduct.data.currentFormat.height,\n                                crop(event) {\n                                    $scope.imageQuality = $scope.checkImageQuality(event.detail.width, event.detail.height);\n                                },\n                            });\n                            canvas.style.display = 'block';\n                        }, 500);\n\n                        $timeout(function () {\n                            var cropData = cropper.getData();\n                            $scope.imageQuality = $scope.checkImageQuality(Math.ceil(cropData.width), Math.ceil(cropData.height));\n                        }, 500);\n\n                    }, 500);\n\n                    $scope.send = function () {\n                        var cropData = cropper.getData();\n                        cropData.json = JSON.stringify(cropData);\n                        CalcFileService.cropImage(calcFile.ID, cropData).then(function (data) {\n                            if (data.success) {\n                                console.log('cropImage');\n                                console.log(data);\n                                CalcFileService.editImage(calcFile.ID, editImageData).then(function (editData) {\n                                    if (editData.success) {\n                                        console.log('editImage');\n                                        console.log(editData);\n\n                                        var index = _.findIndex($scope.calcFiles, {ID: calcFile.ID});\n                                        if (index === -1) {\n                                            return true;\n                                        }\n\n                                        var groupProperties = copyGroupProperties($scope.calcFiles[index]);\n                                        $scope.calcFiles[index] = editData.file;\n                                        setGroupProperties(groupProperties, index);\n\n                                        $scope.setPagination($scope.calcFilesCurrentPage);\n                                    }\n                                    $modalInstance.close();\n                                });\n                            }\n                        });\n                    };\n                },\n                template: '<div class=\"modal-header\">\\n' +\n                    '    <h4 class=\"modal-title\">{{\"crop_an_image\" |translate }}</h4>\\n' +\n                    '    <h5 ng-if=\"!imageQuality.isCorrect\" style=\"color: red;\"><i class=\"fa fa-warning\"></i> <b>{{\"bad_image_quality\" | translate }}</b></h5>\\n' +\n                    '    <p ng-if=\"!imageQuality.isCorrect\">{{\"image_must_be_at_least\" | translate }} {{imageQuality.pixelSize.width}}px x {{imageQuality.pixelSize.height}}px</p>\\n' +\n                    '</div>\\n' +\n                    '<div class=\"modal-body\">\\n' +\n                    '    <div class=\"row\">\\n' +\n                    '      <canvas id=\"canvas\" style=\"display: none; width: 100%; height: auto;\"></canvas>\\n' +\n                    '    </div>\\n' +\n                    '</div>\\n' +\n                    '<div class=\"modal-footer\">\\n' +\n                    '    <button class=\"btn btn-default\" ng-click=\"$dismiss()\">{{ \\'cancel\\' | translate }}</button>\\n' +\n                    '    <button class=\"btn btn-success\" ng-click=\"send()\"><i class=\"fa fa-check\"></i> {{ \\'submit\\' | translate }}</button>\\n' +\n                    '</div>'\n            })\n        }\n\n        $scope.copyImage = function (file) {\n            CalcFileService.copyImage(file.ID).then(function (data) {\n                console.log(data);\n                if (data.success) {\n                    var newFile = data.response;\n                    var copyOf = file.copyOf;\n                    var searchFileID = file.ID;\n                    if (copyOf != 0) {\n                        searchFileID = file.copyOf;\n                    }\n                    var index = _.findIndex($scope.calcFiles, {ID: searchFileID});\n                    if (index === -1) {\n                        return true;\n                    }\n\n                    if (!$scope.calcFiles[index].copies || $scope.calcFiles[index].copies == 0) {\n                        $scope.calcFiles[index].copies = 1;\n                        $scope.calcFiles[index].isFirstInGroup = true;\n                        $scope.calcFiles[index].isLastInGroup = false;\n                        newFile.isFirstInGroup = false;\n                        newFile.isLastInGroup = true;\n                    } else {\n                        $scope.calcFiles[index].copies += 1;\n                        newFile.isFirstInGroup = false;\n                        newFile.isLastInGroup = false;\n                    }\n                    newFile.copies = 0;\n\n                    $scope.calcFiles.splice(index + 1, 0, newFile);\n                    $scope.setNewVolume(caclulateCalcFilesVolume());\n                    $scope.setPagination($scope.calcFilesCurrentPage);\n                }\n            });\n        }\n\n        var timerId;\n        $scope.changeQty = function (file, type) {\n            if (file.qty == 1 && type == 'minus') {\n                Notification.error($filter('translate')('cannot_order_less_than_one'));\n                return;\n            }\n\n            var newQty = file.qty;\n            if (type == 'plus') {\n                newQty++;\n            } else if (type == 'minus') {\n                newQty--;\n            }\n            var sendData = {newQty};\n            CalcFileService.changeQty(file.ID, sendData).then(function (data) {\n                if (data.success) {\n                    file.qty = data.file.qty;\n                    clearTimeout(timerId);\n                    timerId = setTimeout(function () {\n                        $scope.setNewVolume(caclulateCalcFilesVolume());\n                    }, 1000);\n                }\n            });\n        }\n\n        $scope.checkImageQuality = function (width, height) {\n            width = Math.ceil(width);\n            height = Math.ceil(height);\n            var isCorrect = true;\n            var pixelSize = getPixelSizes($scope.complexProducts[0].selectedProduct.data.currentFormat);\n            if (width < pixelSize.width || height < pixelSize.height) {\n                isCorrect = false;\n            }\n\n            return {isCorrect, pixelSize};\n        }\n\n        function caclulateCalcFilesVolume() {\n            var sum = 0;\n            _.each($scope.calcFiles, function (calcFile) {\n                sum += calcFile.qty;\n            });\n\n            return sum;\n        }\n\n        function getPixelSizes(format) {\n            /* Dla maszyn o rozdzielczości 300 dpi\n            9 x 13 8,9 x 12,7 cm 1051 x 1500 pikseli\n            10 x 15 10,2 x 15,2 cm 1205 x 1795 pikseli\n            13 x 18 12,7 x 17,8 cm 1500 x 2102 pikseli\n            15 x 21 15,2 x 21,0 cm 1795 x 2480 pikseli\n            21 x 30 21,0 x 30,0 cm 2480 x 3543 pikseli\n            */\n            var returnSizes = {width: 0, height: 0};\n            if (format.height == 89 && format.width == 127) {\n                returnSizes.height = 1051;\n                returnSizes.width = 1500;\n            } else if (format.height == 102 && format.width == 152) {\n                returnSizes.height = 1205;\n                returnSizes.width = 1795;\n            } else if (format.height == 127 && format.width == 178) {\n                returnSizes.height = 1500;\n                returnSizes.width = 2102;\n            } else if (format.height == 152 && format.width == 210) {\n                returnSizes.height = 1795;\n                returnSizes.width = 2480;\n            } else if (format.height == 210 && format.width == 300) {\n                returnSizes.height = 2480;\n                returnSizes.width = 3543;\n            }\n\n            return returnSizes;\n        }\n\n        $scope.insertHtml = function(string) {\n            return $sce.trustAsHtml(string);\n        };\n\n        $scope.editImage = function (image) {\n            console.log('editImage');\n            console.log(image);\n            $scope.editButtons = {brightness: 0, contrast: 0};\n            $scope.editImageData = {brightness: 0, contrast: 0};\n            $modal.open({\n                scope: $scope,\n                size: 'lg',\n                backdrop: true,\n                controller: function ($scope, $modalInstance) {\n                    var calcFile = image;\n                    $scope.imageQuality = $scope.checkImageQuality(calcFile.width, calcFile.height);\n                    var img;\n                    var canvas;\n                    var ctx;\n                    var imageURL = image.isCropped == 1 ? image.originalCroppedUrl : image.originalUrl;\n\n                    function generateNewOriginalImage() {\n                        img = new Image();\n                        img.src = imageURL + '?' + new Date().getTime();\n                        img.setAttribute('crossOrigin', '');\n                        img.onload = function () {\n                            canvas.width = img.width;\n                            canvas.height = img.height;\n                            ctx.drawImage(img, 0, 0, img.width, img.height);\n                        };\n                    }\n\n                    $timeout(function () {\n                        canvas = document.getElementById(\"canvas\");\n                        ctx = canvas.getContext(\"2d\");\n                        generateNewOriginalImage();\n\n                        $timeout(function () {\n                            console.log(calcFile.editData);\n                            if (calcFile.editData) {\n                                var parsedEditData = JSON.parse(calcFile.editData);\n                                $scope.editImageData.brightness = parseInt(parsedEditData.brightness) - 100;\n                                $scope.editImageData.contrast = parseInt(parsedEditData.contrast) - 100;\n                                $scope.editButtons.brightness = parseInt(parsedEditData.brightness) - 100;\n                                $scope.editButtons.contrast = parseInt(parsedEditData.contrast) - 100;\n                                Caman(\"#canvas\", img, function () {\n                                    this.brightness($scope.editImageData.brightness);\n                                    this.contrast($scope.editImageData.contrast);\n                                    this.render();\n                                });\n                                console.log($scope.editImageData);\n                            }\n                        }, 200);\n                    }, 500);\n\n                    $scope.send = function () {\n                        CalcFileService.editImage(calcFile.ID, $scope.editImageData).then(function (editData) {\n                            console.log('editImage');\n                            console.log(editData);\n                            if (editData.success) {\n                                var index = _.findIndex($scope.calcFiles, {ID: calcFile.ID});\n                                if (index === -1) {\n                                    return true;\n                                }\n\n                                var groupProperties = copyGroupProperties($scope.calcFiles[index]);\n                                $scope.calcFiles[index] = editData.file;\n                                setGroupProperties(groupProperties, index);\n\n                                $scope.setPagination($scope.calcFilesCurrentPage);\n                            }\n                            $modalInstance.close();\n                        });\n                    };\n\n                    var brightnessDebounce;\n                    $scope.brightnessChange = function () {\n                        clearTimeout(brightnessDebounce);\n                        brightnessDebounce = setTimeout(function () {\n                            $scope.editImageData.brightness = 100 + parseInt($scope.editButtons.brightness);\n                            $scope.editImageData.contrast = 100 + parseInt($scope.editButtons.contrast);\n                            Caman(\"#canvas\", function () {\n                                this.reset();\n                                this.brightness(parseInt($scope.editButtons.brightness));\n                                this.contrast(parseInt($scope.editButtons.contrast));\n                                this.render();\n                            });\n                        }, 500);\n                    };\n                },\n                template: '<div class=\"modal-header\">\\n' +\n                    '    <h4 class=\"modal-title\">{{\"edit_an_image\" |translate }}</h4>\\n' +\n                    '    <h5 ng-if=\"!imageQuality.isCorrect\" style=\"color: red;\"><i class=\"fa fa-warning\"></i> <b>{{\"bad_image_quality\" | translate }}</b></h5>\\n' +\n                    '    <p ng-if=\"!imageQuality.isCorrect\">{{\"image_must_be_at_least\" | translate }} {{imageQuality.pixelSize.width}}px x {{imageQuality.pixelSize.height}}px</p>\\n' +\n                    '</div>\\n' +\n                    '<div class=\"modal-body\">\\n' +\n                    '    <div class=\"row editImageWrapper\">\\n' +\n                    '       <div class=\"imageCol\">\\n' +\n                    '           <canvas id=\"canvas\" style=\"width: 100%; height: auto;\"></canvas>\\n' +\n                    '       </div>\\n' +\n                    '       <div class=\"editCol\">\\n' +\n                    '           <div class=\"rangeCol\">\\n' +\n                    '               <h4>\\n' +\n                    '                   {{\"brightness\" | translate }} ({{editButtons.brightness}} %)\\n' +\n                    '               </h4>\\n' +\n                    '              <input type=\"range\" min=\"-100\" max=\"100\" value=\"' + $scope.editButtons.brightness + '\" ng-model=\"editButtons.brightness\" ng-change=\"brightnessChange()\"/>\\n' +\n                    '           </div>\\n' +\n                    '           <div class=\"rangeCol\">\\n' +\n                    '               <h4>\\n' +\n                    '                   {{\"contrast\" | translate }} ({{editButtons.contrast}} %)\\n' +\n                    '               </h4>\\n' +\n                    '              <input type=\"range\" min=\"-100\" max=\"100\" value=\"' + $scope.editButtons.contrast + '\" ng-model=\"editButtons.contrast\" ng-change=\"brightnessChange()\"/>\\n' +\n                    '           </div>\\n' +\n                    '       </div>\\n' +\n                    '    </div>\\n' +\n                    '</div>\\n' +\n                    '<div class=\"modal-footer\">\\n' +\n                    '    <button class=\"btn btn-default\" ng-click=\"$dismiss()\">{{ \\'cancel\\' | translate }}</button>\\n' +\n                    '    <button class=\"btn btn-success\" ng-click=\"send()\"><i class=\"fa fa-check\"></i> {{ \\'submit\\' | translate }}</button>\\n' +\n                    '</div>'\n            })\n        }\n    });","start":11,"end":4405,"route":null,"symbol":"category.CalcCtrl","metadata":{"calls_functions":["anylogger","$stateParams.typeurl.includes","$stateParams.typeurl.split","$rootScope.$on","timeouts.forEach","$timeout.cancel","angular.isDefined","_.clone","$scope.$on","$rootScope.$emit","$","init","$q.defer","sequences.push","getType","getDeliveries","getAddress","setAddress","getCategory","$q.all","def.resolve","def.reject","def.update","Setting.getPublicSettings","SettingView.getPublicSettings","PsTypeDescriptionService.getAll","_.isEmpty","_.each","TextWidgetService.findWord","TextWidgetService.findParagraph","TextWidgetService.getLess","withNoBreaks.indexOf","$sce.trustAsHtml","$scope.descriptions.push","oneDesc.items.push","$scope.galleries.push","sliderData.push","$scope.thumbnails.push","$filter","ComplexService.getAllPublic","promises.push","$scope.getComplexGroup","group.products.push","getFormat","log.info","updateLinkToCopy","setupClipboardJS","DomWidgetService.pinElementWhenScroll","console.error","PsTypeService.getOneForView","Notification.error","$state.go","MainWidgetService.includeTemplateVariables","localStorageService.get","CalcFileService.createGuestSet","localStorageService.set","CalcFileService.getBySetID","$scope.setPagination","CalcFileService.getAllByType","getDescriptions","getFirstCategory","TaxService.getForProduct","getTaxes","selectType","$scope.complexProducts.push","setFromCalculationUrl","_.findWhere","_.findIndex","$scope.selectComplexProductSync","timeouts.push","$timeout","$scope.selectFormatSync","getCalculationUrlParam","angular.fromJson","$scope.getVolumes","$scope.selectOption","console.log","Object.keys","Object.assign","allAttributes.attributes.find","gramsPaperAllOptions.find","parseInt","singlePaper.exclusions.2.includes","singlePaper.exclusions.105.includes","singlePaper.exclusions.103.includes","$scope.getProduct","updateCalculationUrl","productIndex","getCurrentCalcProduct","_.find","_.includes","FormatService.getPublic","PagesService.getPublic","AttributeService.getFullOptions","attributesData.splice","newProduct.attributeMap.push","$scope.selectPagesSync","$scope.selectFormat","$scope.checkRelatedFormats","$scope.filterRelatedFormats","$scope.selectDefaultFormats","CalcSimplifyWidgetService.checkFormatExclusions","setExclusionsAsync","descriptionTabResetActive","$scope.selectDefaultOptions","_.isObject","getOption","$scope.filterByThickness","printExcl","$scope.filterByOptionsPages","_.merge","setOptionExclusionsAsync","checkAttrSelectAsync","_.last","angular.copy","addExcludesFromFormatAndPages","addExcludedOptions","_.filter","_.reduceRight","a.concat","product.excludedOptions.filter","flatExclusions.includes","product.excludedOptions.push","CalcSimplifyWidgetService.removeUnActiveOptions","_.size","aggregateSelectedOptions.push","aggregateSelectedOptions","_.intersection","_.indexOf","Object.values","_.first","$scope.relatedFormats.push","$scope.complexProducts.slice","filterFormats","result.push","PsGroupService.getOneForView","DpCategoryService.getOneForView","DpCategoryService.getFirstByType","product.attributeMap.indexOf","setRangePages","Number","$scope.calcProductThickness","$scope.getMinimumThickness","$scope.getMaximumThickness","$scope.filteredDeliveries.splice","product.excludedOptions.indexOf","Notification.info","_.keys","_.values","_.has","getMinPages","Math.ceil","$scope.selectPages","_.min","Math.floor","getPreparedProduct","CalculationService.calculate","p.data.attributeMap.indexOf","checkForAuth","CalculateService.calculate","$scope.showCalculation","excludeDeliveries","DeliveryWidgetService.getPkgWeightCalc","DeliveryWidgetService.getPkgWeightLite","DeliveryWidgetService.getVolume","$scope.prepareUrl","$scope.checkVolume","_.sortBy","caclulateCalcFilesVolume","getActiveVolume","DeliveryWidgetService.reducePostData","prepareProductPromise","product.attributes.find","CalcSimplifyWidgetService.removeEmptyOptionFromSelected","newItem.products.push","CalculateService.getVolumes","data.volumes.filter","$scope.showVolumes","$scope.getMinVolume","getJson","$scope.calculate","$scope.getTotalThickness","$scope.scrollbarVolume.update","$scope.customVolume.volumes.push","angular.toJson","tmp.toFixed","AuthService.getSessionCarts","DeliveryWidgetService.checkParcelShopSelected","CalculateService.saveCalculation","AuthDataService.getAccessToken","DpCartsDataService.add","AuthService.addToCart","window.dataLayer.push","checkMatchAddress","Notification.success","addToJoinedDelivery","TokenService.joinAddresses","carts.pop","DpOrderService.addToJoinedDelivery","isNaN","DeliveryService.getAll","$rootScope.$watch","loadData","AddressService.getForUser","AddressService.getAddressesFromSession","AddressService.getAll","_.isArray","CalcSimplifyWidgetService.showSumPrice","CalcSimplifyWidgetService.showSumGrossPrice","$scope.$watch","DeliveryWidgetService.checkExclusions","$scope.productAddresses.splice","$scope.calculation.weight.toFixed","parseFloat","result.products.push","result.formats.push","result.pages.push","result.attributes.index.push","JSON.stringify","TemplateRootService.getTemplateUrl","$modal.open","$scope.offer_exp_date.setDate","$scope.offerdate.getDate","_","n.replace","g.replace","ns.toFixed","gs.toFixed","tmpPrice.replace","tmpPriceGross.replace","CalculateDataObject.printOffer","$window.open","$scope.selectAttrPages","$scope.selectCustomFormat","$scope.changeAmount","$scope.selectWingtip","$location.search","converter","storedPropertyName.indexOf","storedPropertyName.replace","key.split","propertyName.split","formatValue","log.debug","changes.push","clipboardJS.on","log.error","document.querySelector","elRef.setAttribute","$location.absUrl","setTimeout","$event.stopPropagation","_that.query.productName.toLowerCase","selectedAddress.countryCode.toLowerCase","texts.push","$scope.showAttribute","$scope.showOption","$scope.showTax","_.map","texts.join","formatTextProductConfiguration","getCartUrl","CustomProductService.add","LoginWidgetService.login","$scope.includeAlternativesOn","$modalInstance.close","CommonService.getAll","extensions.push","CalcFileService.getUrl","uploader.filters.push","item.name.split","itemName.pop","allowedExtensions.indexOf","Notification.warning","allowedExtensions.join","uploader.uploadAll","$scope.calcFiles.push","alert","$scope.setNewVolume","CalcFileService.removeFile","_.forEach","_.remove","$scope.changeVolume","$scope.senders.push","CalcFileService.setImageBW","copyGroupProperties","setGroupProperties","CalcFileService.setImageSepia","CalcFileService.setCollectionToBW","CalcFileService.setCollectionToSepia","CalcFileService.removeCollectionFilters","_.slice","$scope.selectType","CalcFileService.restoreImage","JSON.parse","document.getElementById","canvas.getContext","img.setAttribute","ctx.drawImage","$scope.checkImageQuality","cropper.getData","CalcFileService.cropImage","CalcFileService.editImage","CalcFileService.copyImage","$scope.calcFiles.splice","CalcFileService.changeQty","clearTimeout","getPixelSizes","generateNewOriginalImage","Caman"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":2,"emits":5,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:4-10:filter:alternativeOptions","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":null,"name":"alternativeOptions","kind":"filter","nodeType":"Function","dependenciesDI":["useAlt"],"antiPatterns":[],"text":"    .filter('alternativeOptions', function (useAlt) {\n        return function (items) {\n            return _.filter(items, function (item) {\n                return useAlt ? true : !item.isAlternative\n            });\n        }\n    })","start":4,"end":10,"route":null,"symbol":"alternativeOptions","metadata":{"calls_functions":["angular.module","_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:6-8:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"            return _.filter(items, function (item) {\n                return useAlt ? true : !item.isAlternative\n            });","start":6,"end":8,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:587-587:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["key"],"antiPatterns":[],"text":"                                    var allAttributes = Object.keys(obj).filter((key) => key === 'attributes').reduce((cur, key) => {","start":587,"end":587,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["timeouts.push","$timeout","Object.keys"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:1069-1071:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["opt"],"antiPatterns":[],"text":"                    attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                        return !_.includes(product.excludedOptions, opt.ID);\n                    });","start":1069,"end":1071,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter","_.includes"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:1086-1088:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"                                product.excludedOptions = product.excludedOptions.filter(function (item) {\n                                    return !flatExclusions.includes(item);\n                                });","start":1086,"end":1088,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["product.excludedOptions.filter","flatExclusions.includes"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:1243-1245:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["opt"],"antiPatterns":[],"text":"                        attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                            return !_.includes(product.excludedOptions, opt.ID);\n                        });","start":1243,"end":1245,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.each","_.includes","_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:2246-2248:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["element"],"antiPatterns":[],"text":"                    data.volumes.filter(function (element) {\n                        return element.active === true;\n                    });","start":2246,"end":2248,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["data.volumes.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:2943-2945:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["oneVolume"],"antiPatterns":[],"text":"                                rt.volumes = _(rt.volumes).chain().filter(function (oneVolume) {\n                                    return oneVolume.active === true;\n                                }).sortBy(function (oneVolume) {","start":2943,"end":2945,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["$modal.open","_"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:3558-3566:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["one"],"antiPatterns":[],"text":"                $scope.filteredProducts = _.filter($rootScope.allTypes, function (one) {\n\n                    if (one.names === undefined || one.names[$rootScope.currentLang.code] === undefined) {\n                        return false;\n                    }\n\n                    return one.names[$rootScope.currentLang.code].toLowerCase().search(_that.query.productName.toLowerCase()) > -1;\n\n                });","start":3558,"end":3566,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter","_that.query.productName.toLowerCase"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:3689-3691:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"            return _.filter(items, function (item) {\n                return $scope.includedAlternatives ? true : !item.isAlternative\n            });","start":3689,"end":3691,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:3697-3699:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"            var altOptions = _.filter(allOptions, function (item) {\n                return item.isAlternativeOf === selectedOption;\n            });","start":3697,"end":3699,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:3706-3708:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"            var altOptions = _.filter(allOptions, function (item) {\n                return item.isAlternativeOf === selectedOption;\n            });","start":3706,"end":3708,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:3709-3711:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"            var selectedOptionInstance = _.filter(allOptions, function (item) {\n                return item.ID === selectedOption;\n            });","start":3709,"end":3711,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js:4027-4027:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CalcCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"            var types = _.filter($rootScope.allTypes, function(item) { return !item.isEditor; });","start":4027,"end":4027,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":534,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CategoriesCtrl.js:4-162:controller:category.CategoriesCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CategoriesCtrl.js","module":null,"name":"category.CategoriesCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$q","$rootScope","$filter","DpCategoryService","$stateParams","Notification","SubCategoryDescriptionService","MainWidgetService"],"antiPatterns":[],"text":"    .controller('category.CategoriesCtrl', function ($scope, $q, $rootScope, $filter, DpCategoryService, $stateParams,\n                                                     Notification, SubCategoryDescriptionService, MainWidgetService) {\n\n        var currentCategoryUrl;\n\n        $scope.descriptions = [];\n        $scope.galleries = [];\n        $scope.subCategories = [];\n\n\n        function init() {\n\n            $scope.items = [];\n            $scope.form = {};\n            $scope.groups = [];\n            $scope.category = {};\n            currentCategoryUrl = $scope.currentCategoryUrl = $stateParams.categoryurl;\n            getContains(currentCategoryUrl);\n            getOne(currentCategoryUrl).then(function (cat) {\n                getDescription(currentCategoryUrl);\n                MainWidgetService.includeTemplateVariables($scope, 'category', undefined, undefined, cat.ID);\n            });\n\n            getChilds(currentCategoryUrl).then( function(subCategories) {\n                $scope.subCategories = subCategories;\n            });\n\n        }\n\n        init();\n\n        function getContains(currentCategoryUrl) {\n            $q.all([DpCategoryService.getContains(currentCategoryUrl), MainWidgetService.includeTemplateVariables($scope, 'group', undefined, undefined, undefined, true)]).then(function (data) {\n                $scope.items = data[0];\n                var tplVars = data[1].response[0].value;\n                _.each(tplVars, function (tplVar) {\n                    if (tplVar.groupID) {\n                        var groupItem = _.find($scope.items, {itemID: tplVar.groupID});\n                        if (groupItem) {\n                            groupItem[tplVar.name] = tplVar.value;\n                        }\n                    }\n                });\n            }, function (errors) {\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        $scope.itemsClassName = function(product){\n            var attrIconWith = product.attributeIconWidth ? product.attributeIconWidth : $scope.attributeIconWidth;\n            var iconWidth = attrIconWith === 0 ? 1 : attrIconWith;\n            if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 0){\n                return 'col-xs-6 col-sm-4 col-md-'+(iconWidth*3)+' col-lg-'+(iconWidth*3);\n\n            }else if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 1){\n                return 'col-xs-12 col-sm-4 col-md-2 col-lg-2 col-md-'+(iconWidth*2)+'-20pp';\n\n            }else if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 2){\n                return 'col-xs-6 col-sm-3 col-md-'+(iconWidth*2)+' col-lg-'+(iconWidth*2);\n\n            }else if (($scope.attributeDescView == 1 || $scope.attributeDescView == 2) && $scope.attributeMenuLeft == 0){\n                return 'col-xs-12 col-sm-12 col-md-6 col-lg-6';\n\n            }else if ($scope.attributeMenuLeft == 1){\n                return 'col-xs-4 col-sm-4 col-md-4 col-lg-4';\n            }\n        }\n\n        $scope.loadOtherTemplateVariables=function(templateName){\n            MainWidgetService.includeTemplateVariables($scope, templateName, undefined, undefined, undefined, true);\n        };\n\n        $scope.getTemplateVariable=function(collection, itemType,id,variableName,defaultValue){\n            return MainWidgetService.getTemplateVariable($scope, collection, itemType,id,variableName,defaultValue);\n        };\n\n        function getOne(currentCategoryUrl) {\n            var def = $q.defer();\n\n            DpCategoryService.getOneForView(currentCategoryUrl).then(function (data) {\n                $scope.category = data;\n                if( $rootScope.currentLang && $rootScope.currentLang.code && data.langs ) {\n                    $rootScope.customBreadcrumbs.category = data.langs[$rootScope.currentLang.code].name;\n                } else {\n                    $rootScope.customBreadcrumbs.category = $filter('translate')('category');\n                }\n                def.resolve(data);\n            }, function (data) {\n                Notification.error($filter('translate')('error'));\n            });\n\n            return def.promise;\n        }\n\n        function getDescription(currentCategoryUrl) {\n\n            SubCategoryDescriptionService.getAll(currentCategoryUrl).then(function (data) {\n\n                var sliderData = [];\n\n                if (!_.isEmpty(data)) {\n\n                    _.each(data, function (oneDesc) {\n\n                        switch (oneDesc.descType) {\n                            case 1:\n                                $scope.descriptions.push(oneDesc);\n                                break;\n                            case 5:\n\n                                oneDesc.items = [];\n\n                                if (!_.isEmpty(oneDesc.files)) {\n                                    _.each(oneDesc.files, function (oneFile) {\n                                        oneDesc.items.push({\n                                            thumb: oneFile.urlCrop,\n                                            img: oneFile.url,\n                                            description: 'Image ' + oneFile.fileID\n                                        });\n                                    });\n                                }\n\n                                $scope.galleries.push(oneDesc);\n\n                                break;\n                            case 3:\n                                sliderData.push(oneDesc);\n                                break;\n\n                            case 6:\n\n                                //$scope.thumbnails.push(oneDesc);\n\n                                break;\n                        }\n\n                    });\n\n                }\n\n                $rootScope.$emit('Slider:data', sliderData);\n\n            });\n        }\n\n        function getChilds( currentCategoryUrl ) {\n            var def = $q.defer();\n\n            DpCategoryService.getChilds(currentCategoryUrl).then(function (data) {\n                $scope.subcategories = data;\n                def.resolve(data);\n            }, function (data) {\n                Notification.error($filter('translate')('error'));\n            });\n\n            return def.promise;\n        }\n\n    });","start":4,"end":162,"route":null,"symbol":"category.CategoriesCtrl","metadata":{"calls_functions":["angular.module","getContains","getOne","getDescription","MainWidgetService.includeTemplateVariables","getChilds","init","$q.all","DpCategoryService.getContains","_.each","_.find","Notification.error","$filter","MainWidgetService.getTemplateVariable","$q.defer","DpCategoryService.getOneForView","def.resolve","SubCategoryDescriptionService.getAll","_.isEmpty","$scope.descriptions.push","oneDesc.items.push","$scope.galleries.push","sliderData.push","$rootScope.$emit","DpCategoryService.getChilds"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":30,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/ConfigureProjectCtrl.js:4-2048:controller:category.ConfigureProjectCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/ConfigureProjectCtrl.js","module":null,"name":"category.ConfigureProjectCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","PsTypeService","$rootScope","$filter","Notification","$stateParams","PsComplexService","TaxService","PsGroupService","PsFormatService","$q","PsTypeDescriptionService","PsAttributeService","PsPageService","$timeout","CalculationService","PhotoFolderService","SettingService","TextWidgetService","$config","$state","DpCategoryService","AuthDataService","AuthService","DeliveryWidgetService","DpCartsDataService","TokenService","CalcSimplifyWidgetService"],"antiPatterns":[],"text":"    .controller('category.ConfigureProjectCtrl', function ($scope, PsTypeService, $rootScope, $filter, Notification,\n                                                           $stateParams, PsComplexService, TaxService, PsGroupService,\n                                                           PsFormatService, $q, PsTypeDescriptionService,\n                                                           PsAttributeService, PsPageService, $timeout,\n                                                           CalculationService, PhotoFolderService, SettingService,\n                                                           TextWidgetService, $config, $state, DpCategoryService,\n                                                           AuthDataService, AuthService, DeliveryWidgetService,\n                                                           DpCartsDataService, TokenService, CalcSimplifyWidgetService) {\n\n        $scope.currentTypeID = null;\n        $scope.currentGroupID = null;\n        /**\n         * @param $stateParams.mainthemeid string\n         */\n        $scope.currentThemeID = $stateParams.mainthemeid;\n\n        $scope.currentTypeUrl = $stateParams.typeurl;\n        $scope.currentGroupUrl = $stateParams.groupurl;\n\n        $scope.type = {};\n        $scope.currentType = {};\n\n        $scope.complexProducts = [];\n        $scope.summaryThickness = {};\n        $scope.descriptions = [];\n        $scope.customVolume = {};\n        $scope.rememberVolume = {};\n        $scope.activeVolume = {};\n        $scope.productAddresses = [{}];\n        $scope.deliveries = [];\n        $scope.volumes = [];\n        $scope.hideAmount = true;\n        $scope.galleries = [];\n        $scope.thumbnails = [];\n        var isEditorProject = $scope.isEditorProject = true;\n\n        var CalculateService;\n        var PagesService;\n        var AttributeService;\n        var ComplexService;\n        var FormatService;\n        var countProducts;\n\n        var stopSelect;\n        var _timeout;\n        var stopSelectAttr;\n\n        var deletedAttrs = [];\n        var countGroups = 0;\n        var emptyProducts = 0;\n\n        $rootScope.$on('delivery', function (e, productAddresses) {\n\n            if (angular.isDefined($scope.calculation)) {\n                $scope.calculation.deliveryPrice = productAddresses[0].price;\n                $scope.calculation.deliveryGrossPrice = productAddresses[0].priceGross;\n            }\n        })\n\n        function init() {\n\n            var def = $q.defer();\n\n            var sequences = [];\n\n            sequences.push(getGroup($scope.currentGroupUrl));\n            sequences.push(getProjects());\n            sequences.push(getCategory($stateParams.categoryurl));\n\n            $q.all(sequences)\n            return def.promise;\n        }\n        init()\n\n        function getProjects() {\n            PhotoFolderService.getProjectsForTypes([]).then( function(projectsData) {\n                $scope.currentProject = _.find(projectsData, { _id: $scope.currentThemeID });\n            });\n        }\n\n        function getGroup(currentGroupUrl) {\n\n            PsGroupService.getOneForView(currentGroupUrl).then(function (data) {\n                $scope.group = data;\n                if( $rootScope.currentLang && $rootScope.currentLang.code ) {\n                    $rootScope.customBreadcrumbs.group = data.names[$rootScope.currentLang.code];\n                } else {\n                    $rootScope.customBreadcrumbs.group = $filter('translate')('group');\n                }\n                getType(currentGroupUrl, $scope.currentTypeUrl);\n            }, function (data) {\n                console.error(data);\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getCategory(currentCategoryUrl) {\n            DpCategoryService.getOneForView(currentCategoryUrl).then(function(data) {\n                if( $rootScope.currentLang && $rootScope.currentLang.code && data.langs ) {\n                    $rootScope.customBreadcrumbs.category = data.langs[$rootScope.currentLang.code].name;\n                } else {\n                    $rootScope.customBreadcrumbs.category = $filter('translate')('category');\n                }\n            }, function (data) {\n                console.error(data);\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getFormat() {\n\n            var FormatService = new PsFormatService($scope.currentGroupID, $scope.currentTypeID);\n            FormatService.getPublic($scope.complexID).then(function (data) {\n\n                $scope.type.formats = data;\n                $scope.type.currentFormat = $scope.type.formats[0];\n\n            }, function (data) {\n                console.error('format err: ', data);\n            });\n        }\n\n        function getType(groupUrl, typeUrl) {\n\n            PsTypeService.getOneForView(groupUrl, typeUrl).then(function (data) {\n                if( data && data.active === 0 ) {\n                    Notification.error($filter('translate')('product_currently_not_available'));\n                    $state.go('home');\n                    return;\n                }\n                $scope.currentGroupID = data.groupID;\n                $scope.currentTypeID = data.ID;\n                getDescriptions();\n\n                ComplexService = new PsComplexService($scope.currentGroupID, $scope.currentTypeID);\n\n                selectType(data);\n            }, function (data) {\n                console.error(data);\n                Notification.error($filter('translate')('error'));\n            });\n\n        }\n\n        var selectType = function (type) {\n\n            $scope.currentType = type;\n\n            if( $rootScope.currentLang && $rootScope.currentLang.code && type.names ) {\n                $rootScope.customBreadcrumbs.calc = type.names[$rootScope.currentLang.code];\n            } else {\n                $rootScope.customBreadcrumbs.calc = $filter('translate')('product');\n            }\n\n            var promises = [];\n\n            /**\n             * @param {Object} type\n             * @param {number} type.complex\n             */\n\n            if (!!type.complex) {\n\n                $scope.complexID = type.ID;\n\n                // complex product\n                ComplexService.getAllPublic().then(function (data) {\n                    countProducts = data.length;\n                    var cgIndex = 0;\n                    _.each(data, function (item) {\n                        cgIndex++;\n                        promises.push($scope.getComplexGroup(item, cgIndex));\n\n                    });\n\n                });\n\n            } else {\n\n                // normal product\n                countProducts = 1;\n\n                var group = {\n                    ID: null,\n                    name: type.name,\n                    names: type.names,\n                    productID: type.ID,\n                    type: \"other\",\n                    products: []\n                };\n                // if not complex type\n                var product = {\n                    groupID: type.groupID,\n                    typeID: type.ID,\n                    typeName: type.name,\n                    typeNames: type.names\n                };\n                group.products.push(product);\n                promises.push($scope.getComplexGroup(group, 1));\n\n            }\n            $q.all(promises).then(function () {\n\n                getFormat();\n\n                getTaxes().then(function (data) {\n                    $scope.taxes = data;\n                    if (data.length > 1) {\n                        _.each($scope.taxes, function (tax) {\n                            if (tax.default) {\n                                $scope.productItem.taxID = tax.ID;\n                            }\n                        });\n                    } else if (data.length === 1) {\n                        $scope.productItem.taxID = $scope.taxes[0].ID;\n                    }\n\n                });\n\n                console.log('100% - loaded');\n            }, function (data) {\n                console.error('ERR: Problem with products load', data);\n            });\n\n        };\n\n        function getDescriptions() {\n\n            var SettingView = new SettingService('general');\n\n            var groupID = $scope.currentGroupID;\n            var typeID = $scope.currentTypeID;\n\n            SettingView.getPublicSettings().then(function (settingsData) {\n                PsTypeDescriptionService.getAll(groupID, typeID).then(function (data) {\n\n                    var sliderData = [];\n\n                    if (!_.isEmpty(data)) {\n\n                        _.each(data, function (oneDesc) {\n\n                            /**\n                             * @param {Object} oneDesc\n                             * @param {number} oneDesc.descType\n                             *\n                             */\n                            switch (oneDesc.descType) {\n                                case 1:\n                                    if( settingsData.numberOfLinesInDescription &&\n                                        settingsData.numberOfLinesInDescription.value > 0 ) {\n                                        var word = TextWidgetService.findWord(\n                                            oneDesc.langs[$rootScope.currentLang.code].description,\n                                            settingsData.numberOfLinesInDescription.value\n                                        );\n                                        var paragraphNumber = TextWidgetService.findParagraph(\n                                            oneDesc.langs[$rootScope.currentLang.code].description,\n                                            word\n                                        );\n                                        if( paragraphNumber !== false ) {\n                                            oneDesc.showLess = TextWidgetService.getLess(\n                                                oneDesc.langs[$rootScope.currentLang.code].description,\n                                                paragraphNumber\n                                            );\n                                            oneDesc.initHide = true;\n                                        } else {\n                                            oneDesc.showLess = false;\n                                        }\n                                    }\n\n                                    $scope.descriptions.push(oneDesc);\n                                    break;\n                                case 5:\n\n                                    oneDesc.items = [];\n\n                                    if (!_.isEmpty(oneDesc.files)) {\n                                        _.each(oneDesc.files, function (oneFile) {\n\n                                            /**\n                                             * @param {Object} oneFile\n                                             * @param {string} oneFile.urlCrop\n                                             * @param {number} oneFile.fileID\n                                             */\n\n                                            oneDesc.items.push({\n                                                thumb: oneFile.urlCrop,\n                                                img: oneFile.url,\n                                                description: 'Image ' + oneFile.fileID\n                                            });\n                                        });\n                                    }\n\n                                    $scope.galleries.push(oneDesc);\n\n                                    break;\n                                case 3:\n\n                                    sliderData.push(oneDesc);\n\n                                    break;\n\n                                case 6:\n\n                                    $scope.thumbnails.push(oneDesc);\n\n                                    break;\n\n                                case 7:\n                                    $scope.patterns = oneDesc.patterns;\n\n                                    break;\n                            }\n\n                        });\n\n\n                    }\n\n                    $rootScope.$emit('Slider:data', sliderData);\n\n                });\n            });\n        }\n\n        var SettingAdditional = new SettingService('additionalSettings');\n        SettingAdditional.getPublicSettings().then(function (settingsData) {\n            $scope.calcWithoutDelivery = settingsData.calcWithoutDelivery.value;\n        });\n\n        $scope.$on('$stateChangeStart', (event, toState, toParams, fromState, fromParams) => {\n            $rootScope.$emit('startPreLoader');\n        })\n        $scope.getComplexGroup = function (group, index) {\n\n            var def = $q.defer();\n\n            if (group.products.length > 0) {\n                countGroups++;\n            }\n\n            $scope.complexProducts.push(group);\n\n            _.each(group.products, function (item) {\n                if (!group.selectedProduct) {\n\n                    /**\n                     * @param {Object} $scope.currentCalc\n                     * @param {Array} $scope.currentCalc.calcProducts\n                     */\n                    if ($scope.currentCalc) {\n                        var idx = _.findIndex($scope.currentCalc.calcProducts, {typeID: item.typeID});\n                        if (idx === -1) {\n                            return true;\n                        }\n                    }\n                    $scope.selectComplexProductSync(group, item).then(function (data) {\n                        console.log('Another product loaded!');\n\n                        $timeout(function () {\n                            $rootScope.$emit('stopPreLoader', true);\n                            $scope.selectFormatSync(group.selectedProduct.data, group.selectedProduct.data.currentFormat).then(function () {\n                                if (countProducts === index) {\n                                    $scope.getVolumes($scope.productItem.amount);\n                                }\n                                def.resolve(data);\n                            }, function (errorData) {\n                                console.log('selectFormatReject', errorData);\n                                console.log(group);\n                            });\n                        }, 100);\n\n                    }, function (data) {\n                        console.error('selectComplexProductError');\n                        def.reject(data);\n                    });\n                }\n            });\n\n            return def.promise;\n\n        };\n\n        $scope.selectFormat = function (product, format) {\n\n            product.currentFormat = format;\n            if (!!format.custom) {\n                product.currentFormat.customWidth = format.minWidth - format.slope * 2;\n                product.currentFormat.customHeight = format.minHeight - format.slope * 2;\n            }\n\n            $scope.checkRelatedFormats(product, format);\n\n            $scope.filterRelatedFormats();\n\n            $scope.selectDefaultFormats().then(function () {\n\n                $scope.checkFormatExclusions(product);\n\n                setExclusionsAsync(product).then(function (exclusionEnd) {\n\n                    if (exclusionEnd) {\n\n                        descriptionTabResetActive();\n\n                        $scope.selectDefaultOptions(product);\n                        $scope.getVolumes($scope.productItem.amount);\n                    }\n                });\n\n            }, function (data) {\n                console.log(data);\n            });\n\n        };\n\n        $scope.selectFormatSync = function (product, format) {\n\n            var def = $q.defer();\n\n            if (format === null || format === undefined) {\n                def.reject(false);\n                return def.promise;\n            }\n\n            product.currentFormat = format;\n            if (format && !!format.custom) {\n                product.currentFormat.customWidth = format.minWidth - format.slope * 2;\n                product.currentFormat.customHeight = format.minHeight - format.slope * 2;\n            }\n\n            $scope.checkRelatedFormats(product, format);\n            $scope.filterRelatedFormats();\n            $scope.selectDefaultFormats().then(function () {\n\n                $scope.checkFormatExclusions(product);\n\n                setExclusionsAsync(product).then(function (exclusionEnd) {\n                    if (exclusionEnd) {\n\n                        descriptionTabResetActive();\n\n                        $scope.selectDefaultOptions(product);\n                        def.resolve();\n                    }\n                });\n\n            }, function (data) {\n                console.log(data);\n            });\n\n            return def.promise;\n        };\n\n        $scope.selectComplexProductSync = function (complexProduct, selectedProduct) {\n\n            var def = $q.defer();\n            complexProduct.selectedProduct = selectedProduct;\n            $scope.getProduct(selectedProduct).then(function (data) {\n                def.resolve(data);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        $scope.selectComplexProduct = function (complexProduct, selectedProduct) {\n\n            var def = $q.defer();\n            complexProduct.selectedProduct = selectedProduct;\n            $scope.getProduct(selectedProduct).then(function (data) {\n                def.resolve(data);\n                $scope.getVolumes($scope.productItem.amount);\n            }, function (data) {\n                def.reject(data);\n            });\n\n            return def.promise;\n        };\n\n        $scope.getProduct = function (product) {\n\n            var def = $q.defer();\n\n            var newProduct = {\n                info: product,\n                selectedOptions: {},\n                attrPages: {},\n                attributes: {},\n                attributeMap: [],\n                optionMap: {},\n                currentFormat: false,\n                currentPages: false,\n                excludedOptions: [],\n                formatExcluded: [],\n                thickness: {\n                    values: {},\n                    min: null,\n                    max: null,\n                    current: null\n                }\n            };\n\n            product.data = newProduct;\n\n            AttributeService = new PsAttributeService(product.groupID, product.typeID);\n            FormatService = new PsFormatService(product.groupID, product.typeID);\n            PagesService = new PsPageService(product.groupID, product.typeID);\n\n            $q.all([\n                FormatService.getPublic($scope.complexID),\n                PagesService.getPublic(),\n                AttributeService.getFullOptions()\n            ]).then(function (data) {\n\n                newProduct.formats = data[0];\n\n                var attributesData = data[2];\n\n                if (attributesData.length === 0) {\n                    emptyProducts++;\n                }\n\n                if (emptyProducts === countGroups) {\n                    $scope.emptyProduct = true;\n                }\n\n                var customFormatIndex = _.findIndex(attributesData, {attrID: -1});\n                if (customFormatIndex > -1) {\n                    newProduct.customFormatInfo = attributesData[customFormatIndex];\n                    attributesData.splice(1, customFormatIndex);\n                }\n\n                var customPageIndex = _.findIndex(attributesData, {attrID: -2});\n                if (customPageIndex > -1) {\n                    newProduct.customPageInfo = attributesData[customPageIndex];\n                    attributesData.splice(1, customPageIndex);\n                }\n\n                newProduct.attributes = attributesData;\n\n                _.each(newProduct.attributes, function (attr) {\n                    newProduct.attributeMap.push(attr.attrID);\n                    newProduct.optionMap[attr.attrID] = [];\n                    _.each(attr.options, function (opt) {\n                        newProduct.optionMap[attr.attrID].push(opt.ID);\n                    });\n                });\n\n                newProduct.pages = data[1];\n\n                newProduct.relatedFormats = _.clone(newProduct.formats);\n\n                var currentCalcProduct = getCurrentCalcProduct(product.info);\n\n                var formatIdx = 0;\n                if (currentCalcProduct) {\n                    formatIdx = _.findIndex(newProduct.relatedFormats, {ID: currentCalcProduct.formatID});\n                    // check that actual product is in selected calculation\n                    if (formatIdx === -1) {\n                        console.error('Can\\'t find format like in select calculation.');\n                        return true;\n                    }\n                }\n\n                /**\n                 * @param {Object} newProduct\n                 * @param {Array} newProduct.pages\n                 * @param {number} newProduct.pages[].pages\n                 * @param {number|null} newProduct.pages[].minPages\n                 */\n\n                $scope.selectFormatSync(newProduct, newProduct.relatedFormats[formatIdx]).then(function () {\n                    if (currentCalcProduct) {\n                        $scope.selectPagesSync(newProduct, currentCalcProduct.pages);\n                    } else {\n                        if (newProduct.pages.length && newProduct.pages[0].pages) {\n                            $scope.selectPagesSync(newProduct, newProduct.pages[0].pages);\n                        }\n                        if (newProduct.pages.length && newProduct.pages[0].minPages) {\n                            $scope.selectPagesSync(newProduct, newProduct.pages[0].minPages);\n                        }\n                    }\n                    def.resolve(data);\n                });\n\n            }, function (data) {\n                def.reject(data);\n                Notification.error($filter('translate')('data_retrieve_failed'));\n            });\n\n            return def.promise;\n        };\n\n        $scope.checkRelatedFormats = function (product, format) {\n\n            if (!format.relatedFormats) {\n                return true;\n            }\n            $scope.relatedFormats = [];\n            _.each(format.relatedFormats, function (item) {\n                $scope.relatedFormats.push({ID: item.formatID, typeID: item.typeID});\n            });\n\n        };\n\n        $scope.filterRelatedFormats = function () {\n\n            _.each($scope.complexProducts.slice(1), function (oneProduct) {\n                if (oneProduct.selectedProduct) {\n                    oneProduct.selectedProduct.data.relatedFormats = filterFormats(oneProduct.selectedProduct.data.formats, $scope.relatedFormats);\n                }\n            });\n\n        };\n\n        $scope.selectDefaultFormats = function () {\n\n            var def = $q.defer();\n            var formatChange = false;\n\n            _.each($scope.complexProducts.slice(1), function (oneProduct) {\n\n                // first group is that in which they are all formats because that formats are basic\n                if (!oneProduct.selectedProduct) {\n                    return true;\n                }\n\n\n                var product = oneProduct.selectedProduct.data;\n\n                var currentFormat = product.currentFormat;\n\n                var find = -1;\n                if (!!currentFormat) {\n                    find = _.findIndex($scope.relatedFormats, {ID: currentFormat.ID, typeID: product.info.typeID});\n                }\n                // if we don't have select format in related\n                if (find === -1) {\n\n                    if (!angular.isDefined(product.relatedFormats) || product.relatedFormats.length === 0) {\n                        product.currentFormat = null;\n                        return true;\n                    } else {\n                        var searchFormat = filterFormats(product.formats, $scope.relatedFormats)[0];\n\n                        if (searchFormat) {\n                            product.currentFormat = searchFormat;\n                            if (!!searchFormat.custom) {\n                                product.currentFormat.customWidth = searchFormat.minWidth - searchFormat.slope * 2;\n                                product.currentFormat.customHeight = searchFormat.minHeight - searchFormat.slope * 2;\n                            }\n                        }\n                    }\n\n                    if (!product.currentFormat) {\n                        def.reject({'info': 'select another format'});\n                        Notification.error($filter('translate')('not_related_format_for_product') + ' - ' + product.info.typeName);\n                    }\n\n                } else {\n                    // if is in related formats so again assign it than if we change product select can update\n                    var idx = _.findIndex(product.relatedFormats, {ID: currentFormat.ID});\n                    if (idx > -1) {\n                        product.currentFormat = product.relatedFormats[idx];\n                    }\n                }\n\n                $scope.checkFormatExclusions(product);\n\n                setExclusionsAsync(product).then(function (exclusionEnd) {\n\n                    if (exclusionEnd) {\n                        $scope.selectDefaultOptions(product);\n                    }\n                });\n\n            });\n            // if format not change, continue\n            if (!formatChange) {\n                def.resolve();\n            } else {\n                console.log('Format zmieniony ale czemu tu doszło :o')\n            }\n\n            return def.promise;\n        };\n\n        $scope.checkFormatExclusions = function (product) {\n\n            if (!product.currentFormat) {\n                return false;\n            }\n            product.formatExcluded = [];\n            _.each(product.attributes, function (attribute) {\n\n                _.each(attribute.options, function (option) {\n\n                    if (option && option.formats) {\n                        if (!_.includes(option.formats, product.currentFormat.ID)) {\n                            product.formatExcluded.push(option.ID);\n                            // remove from selected if exist in it\n                            if (product.selectedOptions[attribute.attrID] === option.ID) {\n                                delete product.selectedOptions[attribute.attrID];\n                            }\n                        }\n                    }\n                });\n            });\n\n        };\n\n        $scope.selectDefaultOptions = function (product) {\n\n            var currentCalcProduct = getCurrentCalcProduct(product.info);\n\n            _.each(product.attributes, function (item) {\n\n                if (!product.selectedOptions[item.attrID]) {\n                    var currentCalcAttr = null;\n                    if (currentCalcProduct) {\n                        currentCalcAttr = _.find(currentCalcProduct.attributes, {attrID: item.attrID});\n                    }\n\n                    var tmp;\n                    _.each(item.options, function (option) {\n                        if (currentCalcAttr) {\n                            if (currentCalcAttr.optID !== option.ID) {\n                                return true;\n                            }\n                            if (currentCalcAttr.attrPages) {\n                                product.attrPages[item.attrID] = currentCalcAttr.attrPages\n                            }\n                        }\n\n                        if (!_.includes(product.excludedOptions, option.ID)) {\n                            tmp = option;\n                            return false;\n                        }\n                    });\n\n                    var defaultOption = _.find(item.options, {default: 1});\n\n                    if (defaultOption && !_.includes(product.excludedOptions, defaultOption.ID)) {\n                        tmp = defaultOption;\n                    }\n\n                    $scope.selectOption(product, item.attrID, tmp);\n\n                }\n            });\n\n        };\n\n        $scope.selectOption = function (product, attrID, item) {\n\n            var itemExist = true;\n\n            if (item === undefined) {\n                itemExist = false;\n                var optID = product.selectedOptions[attrID];\n\n                item = getOption(product, optID);\n\n                if (item === undefined) {\n                    return false;\n                }\n            }\n\n            product.selectedOptions[attrID] = parseInt(item.ID);\n\n            setRangePages(product, attrID);\n\n            if (product.thickness.minAttr === attrID) {\n                product.thickness.min = null;\n                product.thickness.minAttr = null;\n            }\n\n            if (product.thickness.maxAttr === attrID) {\n                product.thickness.max = null;\n                product.thickness.maxAttr = null;\n            }\n\n            /**\n             * @param {Object} item\n             * @param {number|null} item.minThickness\n             * @param {number|null} item.maxThickness\n             * @param {number} item.sizePage\n             */\n            if (Number(item.minThickness) > 0 && ( Number(item.minThickness) > product.thickness.min || item.minThickness === null)) {\n                product.thickness.min = item.minThickness;\n                product.thickness.minAttr = attrID;\n            }\n\n            if (Number(item.maxThickness) > 0 && ( Number(item.maxThickness) < product.thickness.max || product.thickness.max === null)) {\n\n                product.thickness.max = item.maxThickness;\n                product.thickness.maxAttr = attrID;\n            }\n\n            product.thickness.values[attrID] = item.sizePage;\n\n            if (product.pages.length) {\n                $scope.calcProductThickness(product);\n                $scope.getMinimumThickness(product);\n                $scope.getMaximumThickness(product);\n            }\n\n            setExclusionsAsync(product).then(function (exclusionEnd) {\n\n                if (exclusionEnd) {\n                    $scope.selectDefaultOptions(product);\n                    if (!itemExist) {\n                        $scope.getVolumes($scope.productItem.amount);\n                    }\n                }\n\n            });\n\n\n        };\n\n        $scope.calcProductThickness = function (product) {\n\n            var sheets = product.currentPages / 2;\n\n            // condition concerns minimal and maximal number of pages it is given for every single option\n            if (!_.keys(product.thickness.values).length) {\n                product.thickness.current = null;\n                return true;\n            }\n            /**\n             * @param {number} product.pages[].doublePage\n             */\n            var doublePage = !!product.pages[0].doublePage;\n\n            if (doublePage) {\n                sheets /= 2;\n            }\n\n            var value = 0;\n            var keyThickness = _.keys(product.thickness.values);\n            var tmpAttrID = null;\n            _.each(_.values(product.thickness.values), function (one, index) {\n                tmpAttrID = keyThickness[index];\n                if (Number(one) > 0 && _.has(product.selectedOptions, tmpAttrID)) {\n                    value += one;\n                }\n            });\n\n            product.thickness.current = sheets * value;\n\n            // show thickness in summary od product\n\n            $scope.summaryThickness[product.info.typeID] = product.thickness.current;\n\n            return true;\n        };\n\n        $scope.getMinimumThickness = function (type) {\n\n            if (!_.keys(type.thickness.values).length || !type.thickness.min) {\n\n                var minPages = getMinPages(type);\n\n                if (minPages > type.pages[0].minPages) {\n                    return minPages;\n                }\n\n                return type.pages[0].minPages || 0;\n            }\n\n            var value = 0;\n            _.each(_.values(type.thickness.values), function (one) {\n                if (Number(one) > 0) {\n                    value += one;\n                }\n            });\n\n            var sheets = type.thickness.min / value;\n            var pages = Math.ceil(sheets) * 2;\n            var doublePage = !!type.pages[0].doublePage;\n            if (doublePage) {\n                pages *= 2;\n            }\n\n            if (!!type.pages[0].step) {\n                var modulo = pages % type.pages[0].step;\n                if (modulo) {\n                    pages += type.pages[0].step - modulo;\n                }\n            }\n\n            if (type.currentPages < pages) {\n                // show that pages was change\n                $scope.selectPages(type, pages);\n            }\n\n            return pages;\n        };\n\n        $scope.getMaximumThickness = function (product) {\n\n            if (!_.keys(product.thickness.values).length || !product.thickness.max) {\n                return product.pages[0].maxPages || 9999999;\n            }\n\n            var value = 0;\n            _.each(_.values(product.thickness.values), function (one) {\n                if (Number(one) > 0) {\n                    value += one;\n                }\n            });\n\n            var sheets = product.thickness.max / value;\n            var pages = Math.floor(sheets) * 2;\n            var doublePage = !!product.pages[0].doublePage;\n            if (doublePage) {\n                pages *= 2;\n            }\n\n            if (!!product.pages[0].step) {\n                var modulo = pages % product.pages[0].step;\n                if (modulo) {\n                    pages -= modulo;\n                }\n            }\n\n            if (product.currentPages > pages) {\n                $scope.selectPages(product, pages);\n            }\n\n            return pages;\n        };\n\n        $scope.filterByOptionsPages = function (product) {\n\n            var exclusions = {};\n\n            _.each(product.attributes, function (attribute) {\n\n                exclusions[attribute.attrID] = [];\n\n                _.each(attribute.options, function (option) {\n\n                    /**\n                     * @param {number} option.maxPages\n                     */\n\n                    if (product.currentPages && angular.isDefined(option.maxPages) && Number(option.maxPages) > 0) {\n\n                        if (product.currentPages > option.maxPages) {\n\n                            idx = product.excludedOptions.indexOf(option.ID);\n                            if (idx === -1) {\n                                exclusions[attribute.attrID].push(option.ID);\n                            }\n\n                        }\n                    }\n\n                    if (product.currentPages && angular.isDefined(option.minPages) && Number(option.minPages) > 0) {\n\n                        if (product.currentPages < option.minPages) {\n\n                            var idx = product.excludedOptions.indexOf(option.ID);\n\n                            if (idx === -1) {\n                                exclusions[attribute.attrID].push(option.ID);\n                            }\n\n                        }\n\n                    }\n\n                });\n\n            });\n\n            return exclusions;\n        };\n\n        $scope.filterByThickness = function (product) {\n\n            var exclusions = {};\n\n            _.each(product.attributes, function (attribute) {\n\n                exclusions[attribute.attrID] = [];\n                var idx;\n                _.each(attribute.options, function (option) {\n\n                    if (angular.isDefined(option.maxThickness) && Number(option.maxThickness) > 0) {\n\n                        if (product.thickness.current > option.maxThickness) {\n\n                            idx = product.excludedOptions.indexOf(option.ID);\n                            if (idx === -1) {\n                                exclusions[attribute.attrID].push(option.ID);\n                            }\n\n                        }\n                    }\n\n                    if (angular.isDefined(option.minThickness) && Number(option.minThickness) > 0) {\n\n                        if (product.thickness.current < option.minThickness) {\n\n                            idx = product.excludedOptions.indexOf(option.ID);\n                            if (idx === -1) {\n                                exclusions[attribute.attrID].push(option.ID);\n                            }\n\n                        }\n\n                    }\n\n                });\n\n            });\n\n            return exclusions;\n        };\n\n        $scope.selectPagesSync = function (product, pages) {\n            product.currentPages = pages;\n            $scope.calcProductThickness(product);\n        };\n\n        $scope.selectPages = function (product, pages) {\n\n            pages = Number(pages);\n\n            if (product.pages[0].pages) {\n\n                product.currentPages = pages;\n\n                $scope.calcProductThickness(product);\n                setExclusionsAsync(product).then(function (exclusionEnd) {\n                    if (exclusionEnd) {\n                        _.each(product.attrPages, function (oneAttrPage, attrID) {\n                            if (product.currentPages < oneAttrPage) {\n                                product.attrPages[attrID] = product.currentPages;\n                            }\n                        });\n\n                        $scope.getVolumes($scope.productItem.amount);\n                    }\n                });\n\n            } else {\n                if (product.pages[0].step !== null) {\n                    var step = Number(product.pages[0].step);\n                }\n\n                if (angular.isDefined(stopSelect)) {\n                    $timeout.cancel(stopSelect);\n                    stopSelect = undefined;\n                }\n\n                stopSelect = $timeout(function () {\n                    var maxPages = $scope.getMaximumThickness(product);\n                    var minPages = $scope.getMinimumThickness(product);\n\n                    if (product.pages[0].step !== null) {\n                        if (pages % step !== 0) {\n                            if ((pages % step) > (step / 2)) {\n                                pages = pages + (step - (pages % step));\n                            } else {\n                                pages -= pages % step;\n                            }\n                        }\n                    }\n\n                    if (pages > maxPages) {\n                        Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                        product.currentPages = maxPages;\n                        pages = maxPages;\n                    } else if (pages < minPages) {\n                        Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + minPages);\n                        product.currentPages = minPages;\n                        pages = minPages;\n                    } else if (pages === undefined) {\n                        Notification.info($filter('translate')('range_of_pages') + ' ' + minPages + ' - ' + maxPages);\n                    } else {\n                        product.currentPages = pages;\n                    }\n\n                    $scope.calcProductThickness(product);\n\n                    setExclusionsAsync(product).then(function (exclusionEnd) {\n\n                        if (exclusionEnd) {\n                            _.each(product.attrPages, function (oneAttrPage, attrID) {\n                                if (product.currentPages < oneAttrPage) {\n                                    product.attrPages[attrID] = product.currentPages;\n                                }\n                            });\n\n                            if (pages <= maxPages && pages >= minPages && pages !== undefined) {\n                                $scope.getVolumes($scope.productItem.amount);\n                            }\n                        }\n\n                    });\n\n                }, 1500);\n            }\n        };\n\n        $scope.getVolumes = function (amount) {\n\n            $scope.loadVolumes = true;\n\n            getPreparedProduct(amount).then(function (preparedProduct) {\n                preparedProduct.customVolumes = $scope.customVolume.volumes;\n                CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n\n                CalculateService.getVolumes(preparedProduct).then(function (data) {\n\n                    data.volumes.filter(function (element) {\n                        return element.active === true;\n                    });\n\n                    $scope.showVolumes(data);\n\n                    /**\n                     * @param {Object} data.volumeInfo\n                     */\n                    if (angular.isDefined(data.volumeInfo)) {\n                        $scope.customVolume.custom = data.volumeInfo.custom;\n                        $scope.customVolume.maxVolume = data.volumeInfo.maxVolume;\n                    }\n\n                    $scope.getMinVolume();\n\n                    getJson();\n\n                }, function (data) {\n                    console.log(data);\n                    Notification.error($filter('translate')('error'));\n                });\n            });\n\n        };\n\n        $scope.showVolumes = function (data) {\n\n            $scope.volumes = data.volumes;\n            $scope.realisationTimes = data.realisationTimes;\n\n            if (angular.isDefined($scope.rememberVolume.volume)) {\n                $scope.calculate($scope.productItem.amount, $scope.rememberVolume.volume.volume);\n            } else {\n                if (angular.isDefined($scope.volumes[0])) {\n                    $scope.calculate($scope.productItem.amount, $scope.volumes[0].volume);\n                } else {\n                    console.log('nakłady: ', $scope.volumes);\n                }\n            }\n\n        };\n\n        $scope.calculate = function (amount, volume) {\n\n            $scope.calculation = {};\n\n            $scope.calculationInfo = [];\n            getPreparedProduct(amount, volume).then(function (preparedProduct) {\n\n                CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                CalculateService.calculate(preparedProduct).then(function (data) {\n                    $scope.showCalculation(data);\n\n                    $('#scrollbar-volume').height(\n                        $('#panel-product-parameters').outerHeight() - ($('#panel-product-volumes').outerHeight() - $('.mCustomScrollbar').outerHeight())\n                    );\n                }, function (data) {\n                    console.error(data);\n                    Notification.error($filter('translate')('error'));\n                });\n\n            });\n\n\n        };\n\n        $scope.getMinVolume = function () {\n\n            $scope.customVolume.minVolume = $scope.volumes[0].volume;\n\n            if (!angular.isDefined($scope.customVolume.newVolume)) {\n                $scope.customVolume.newVolume = $scope.volumes[0].volume;\n            }\n        };\n\n        $scope.showCalculation = function (data) {\n\n            $scope.calculation = data.calculation;\n\n            $scope.calculationInfo = data.info;\n\n            if (!_.isEmpty($scope.rememberVolume)) {\n\n                var idxRT = _.findIndex($scope.realisationTimes, {ID: $scope.rememberVolume.realisationTime.ID});\n                if (idxRT !== -1) {\n                    var idxVol = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: $scope.rememberVolume.volume.volume});\n                    if (idxVol !== -1) {\n\n                        $scope.checkVolume($scope.rememberVolume.realisationTime, $scope.realisationTimes[idxRT].volumes[idxVol]);\n                    } else {\n                        // return to 0 index because volume is excluded\n                        $scope.checkVolume($scope.realisationTimes[0], $scope.realisationTimes[0].volumes[0]);\n                    }\n\n                } else {\n                    $scope.checkVolume($scope.rememberVolume.realisationTime, $scope.rememberVolume.volume);\n                }\n\n\n            } else {\n\n                var sortRealisationTimes = _.sortBy($scope.realisationTimes, 'order');\n\n                var activeVolume = getActiveVolume(sortRealisationTimes[0].volumes, 0);\n\n                $scope.checkVolume(sortRealisationTimes[0], activeVolume);\n\n                $scope.productItem.volume = activeVolume.volume;\n            }\n            $rootScope.$emit('calculation', $scope.calculation)\n        };\n\n        function openEditor(preparedProduct, orderID, productID) {\n            var products=[]\n            var attributes=[]\n            var formats=[]\n            var pages=[]\n            _.each(preparedProduct.products,function(product){\n                products.push(product.typeID);\n                attributes.push('['+_.map(product.options,function(item){\n                    return item.attrID+'-'+item.optID;\n                }).join(',')+']')\n                formats.push(product.formatID);\n                pages.push(product.pages);\n            })\n\n            window.location = $config.EDITOR_URL + '?' + 'typeID=' + preparedProduct.typeID + '&formatID=' + preparedProduct.products[0].formatID + '&pages=['+pages.join(',')+']&products=['+products.join(',')+']&attributes='+attributes.join(',')+'&formats=['+formats.join(',')+']&themeID='+$scope.currentThemeID+'&orderID='+orderID+'&productID='+productID+'&access-token='+AuthDataService.getAccessToken();\n        }\n\n        $scope.prepareUrl = function () {\n\n            if ($scope.calculation.amount > 0) {\n\n                getPreparedProduct($scope.calculation.amount, $scope.calculation.volume).then(function (preparedProduct) {\n                    AuthService.getSessionCarts().then(function (resData) {\n                        if ($rootScope.logged) {\n                            preparedProduct.orderID = undefined;\n                        } else {\n                            if (resData.orderID) {\n                                preparedProduct.orderID = resData.orderID;\n                            } else {\n                                preparedProduct.orderID = undefined;\n                            }\n                        }\n                    }).then(function () {\n\n                        DeliveryWidgetService.reducePostData($scope.productAddresses).then(function (productAddresses) {\n                            DeliveryWidgetService.checkParcelShopSelected(productAddresses).then(function (productAddressesChecked) {\n\n                                if (productAddressesChecked) {\n                                    if($scope.type.allowCalcFilesUpload == 1){\n                                        if ($rootScope.logged === false) {\n                                            preparedProduct.notLoggedCalcFilesSetID = $scope.calcFilesSetID;\n                                        }\n                                        preparedProduct.hasCalcFiles = true;\n                                    }\n                                    CalculateService = new CalculationService(preparedProduct.groupID, preparedProduct.typeID);\n                                    CalculateService.saveCalculation(preparedProduct).then(function (data) {\n\n                                        if (data.orderID) {\n                                            $rootScope.orderID = data.orderID;\n                                        }\n                                        data.productAddresses = productAddresses;\n                                        var addData = data;\n                                        if( $rootScope.logged ) {\n                                            addData.userID = $rootScope.user.userID;\n                                            addData.token = '';\n                                        }else{\n                                            addData.userID = 0;\n                                            addData.token = AuthDataService.getAccessToken();\n                                        }\n                                        DpCartsDataService.add(addData).then(function (response) {\n\n                                            AuthService.addToCart(data).then(function (cartsData) {\n                                                $rootScope.$emit('cartRequired');\n                                                // $rootScope.carts = cartsData.carts.slice(0);\n                                                window.dataLayer = window.dataLayer || [];\n                                                window.dataLayer.push({\n                                                    'event': 'eec.addToCart',\n                                                    'ecommerce': {\n                                                        'currencyCode': $scope.calculation.currency.code,\n                                                        'add': {\n                                                            'products': [{\n                                                                'name': $scope.currentType.name,\n                                                                'id': $scope.calculation.groupID + '-' + $scope.calculation.typeID,\n                                                                'price': $scope.calculation.priceTotalBrutto,\n                                                                'quantity': $scope.calculation.volume\n                                                            }]\n                                                        }\n                                                    }\n                                                });\n                                                DeliveryWidgetService.checkMatchAddress(cartsData.carts, productAddresses).then(function (cartToJoin) {\n                                                    if (cartToJoin) {\n                                                        DeliveryWidgetService.addToJoinedDelivery(productAddresses[0].addressID, $rootScope.currentCurrency.code).then(function (joinData) {\n\n                                                            if (joinData.response) {\n                                                                var tokenParams = {};\n\n                                                                tokenParams['addressID'] = joinData.paramsToCopy.addressID;\n                                                                tokenParams['active'] = true;\n                                                                tokenParams['commonDeliveryID'] = joinData.paramsToCopy.commonDeliveryID;\n                                                                tokenParams['commonRealisationTime'] = new Date(joinData.paramsToCopy.commonRealisationTime.sec * 1000);\n                                                                TokenService.joinAddresses(tokenParams).then(function (data) {\n                                                                    openEditor(preparedProduct, data.orderID, addData.productID);\n                                                                });\n                                                            } else {\n                                                                openEditor(preparedProduct, data.orderID, addData.productID);\n                                                            }\n                                                        });\n                                                    } else {\n                                                        openEditor(preparedProduct, data.orderID, addData.productID);\n                                                    }\n\n                                                });\n                                            });\n                                        });\n\n                                    }, function () {\n                                        Notification.error($filter('translate')('error'));\n                                    });\n\n                                } else {\n                                    Notification.error($filter('translate')('select_missing_parcel_shop'));\n                                }\n\n\n                            });\n                        });\n                    });\n                });\n\n            }\n        };\n\n        $scope.checkVolume = function (realisationTime, volume) {\n\n            _.each($scope.realisationTimes, function (val) {\n                val.overwriteDate = null;\n            });\n\n            var idxRT = _.findIndex($scope.realisationTimes, {ID: realisationTime.ID});\n\n            if (idxRT !== -1) {\n\n                $scope.rememberVolume.realisationTime = $scope.realisationTimes[idxRT];\n\n                $scope.realisationTimes[idxRT].overwriteDate = volume.date;\n\n                var idxV = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: volume.volume});\n                if (idxV !== -1) {\n                    $scope.rememberVolume.volume = volume;\n\n                    $scope.activeVolume.rtID = $scope.realisationTimes[idxRT].ID;\n                    $scope.activeVolume.volume = $scope.calculation.volume = $scope.realisationTimes[idxRT].volumes[idxV].volume;\n\n                    $scope.calculation.priceTotal = $scope.realisationTimes[idxRT].volumes[idxV].price;\n\n                    /**\n                     * @param {number} $scope.realisationTimes[].volumes[].priceBrutto\n                     */\n\n                    $scope.calculation.priceTotalBrutto = $scope.realisationTimes[idxRT].volumes[idxV].priceBrutto;\n                    $scope.calculation.weight = $scope.realisationTimes[idxRT].volumes[idxV].weight;\n                    if ($scope.realisationTimes[idxRT].overwriteDate) {\n                        $scope.calculation.realisationTime = $scope.realisationTimes[idxRT].overwriteDate;\n                    } else {\n                        $scope.calculation.realisationTime = $scope.realisationTimes[idxRT].date;\n                    }\n\n                    _.each($scope.realisationTimes[idxRT].volumes, function (actVolume) {\n\n\n                        var idxVol = _.findIndex($scope.volumes, {volume: actVolume.volume});\n\n                        if (idxVol !== -1) {\n                            $scope.volumes[idxVol].active = actVolume.active;\n                        }\n\n                    });\n\n                    $scope.productItem.volume = volume.volume;\n\n                    _.each($scope.realisationTimes, function (realisationTime, rIndex) {\n                        var idxVol = _.findIndex(realisationTime.volumes, {volume: volume.volume});\n                        if (idxVol !== -1) {\n                            $scope.realisationTimes[rIndex].active = realisationTime.volumes[idxVol].active;\n                        }\n                    });\n\n                    $scope.productItem.realisationTime = realisationTime.ID;\n\n                    $scope.loadVolumes = false;\n                    $scope.getTotalThickness();\n                }\n            } else {\n                $scope.rememberVolume = {};\n            }\n\n        };\n\n        $scope.getTotalThickness = function () {\n\n            var tmp = 0;\n            _.each($scope.summaryThickness, function (th) {\n                tmp += th;\n            });\n            return tmp.toFixed(2);\n\n        };\n\n        $scope.releaseSpinner = function (complexProduct, attrID, direct) {\n\n            if (complexProduct.selectedProduct.data.attrPages[attrID] <= 0 && direct === 0) {\n                return;\n            }\n\n            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n\n            if (attrIdx > -1) {\n                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                var step = attribute.step;\n\n                var maxPages = attribute.maxPages;\n                if (maxPages === null) {\n                    maxPages = complexProduct.selectedProduct.data.currentPages;\n                }\n\n                if ((complexProduct.selectedProduct.data.attrPages[attrID] + step) > maxPages && direct === 1) {\n                    Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                    return;\n                }\n\n                if ((complexProduct.selectedProduct.data.attrPages[attrID] - step) < attribute.minPages && direct === 0) {\n                    Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + attribute.minPages);\n                    return;\n                }\n            }\n\n            if (direct) {\n                complexProduct.selectedProduct.data.attrPages[attrID] += step;\n            } else {\n                complexProduct.selectedProduct.data.attrPages[attrID] -= step;\n            }\n\n            $scope.selectAttrPages(complexProduct, attrID);\n        };\n\n        $scope.selectAttrPages = function (complexProduct, attrID) {\n\n            if (angular.isDefined(stopSelectAttr)) {\n                $timeout.cancel(stopSelectAttr);\n                stopSelectAttr = undefined;\n            }\n\n            stopSelectAttr = $timeout(function () {\n\n                if (complexProduct.selectedProduct.data.attrPages[attrID] <= 0) {\n                    complexProduct.selectedProduct.data.attrPages[attrID] = 0;\n                }\n\n                var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attrID)});\n\n                if (attrIdx > -1) {\n                    var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                    var maxPages = attribute.maxPages;\n                    if (maxPages === null) {\n                        maxPages = complexProduct.selectedProduct.data.currentPages;\n                    }\n\n                    if (complexProduct.selectedProduct.data.attrPages[attrID] > maxPages) {\n                        Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + maxPages);\n                        complexProduct.selectedProduct.data.attrPages[attrID] = maxPages;\n                        return;\n                    }\n\n                    if (complexProduct.selectedProduct.data.attrPages[attrID] < attribute.minPages) {\n                        Notification.info($filter('translate')('minimum_number_of_pages') + ' ' + attribute.minPages);\n                        complexProduct.selectedProduct.data.attrPages[attrID] = attribute.minPages;\n                        return;\n                    }\n                }\n\n\n                $scope.getVolumes($scope.productItem.amount);\n            }, 1500);\n\n        };\n\n        $scope.spinPage = function (complexProduct, direct) {\n\n            var min = $scope.getMinimumThickness(complexProduct.selectedProduct.data);\n            var max = $scope.getMaximumThickness(complexProduct.selectedProduct.data);\n\n            if (complexProduct.selectedProduct.data.currentPages <= min && direct === 0) {\n                return;\n            }\n            if (complexProduct.selectedProduct.data.currentPages >= max && direct === 1) {\n                Notification.info($filter('translate')('maximum_number_of_pages') + ' ' + max);\n                return;\n            }\n            if (direct) {\n                complexProduct.selectedProduct.data.currentPages = complexProduct.selectedProduct.data.currentPages + complexProduct.selectedProduct.data.pages[0].step;\n            } else {\n                complexProduct.selectedProduct.data.currentPages = complexProduct.selectedProduct.data.currentPages - complexProduct.selectedProduct.data.pages[0].step;\n            }\n\n            $scope.selectPages(complexProduct.selectedProduct.data, complexProduct.selectedProduct.data.currentPages);\n        };\n\n        $scope.showSumPrice = () => CalcSimplifyWidgetService.showSumPrice($scope)\n\n        $scope.showSumGrossPrice = () => CalcSimplifyWidgetService.showSumGrossPrice($scope)\n\n        $scope.checkPrice = function( price ) {\n              return parseFloat(price) > 0;\n        };\n\n        $scope.changeVolume = function () {\n\n            var volume = $scope.productItem.volume;\n            var idx;\n\n            if (!_.isEmpty($scope.rememberVolume)) {\n\n                idx = _.findIndex($scope.rememberVolume.realisationTime.volumes, {volume: volume});\n\n                if (idx !== -1) {\n                    $scope.checkVolume($scope.rememberVolume.realisationTime, $scope.rememberVolume.realisationTime.volumes[idx]);\n                } else {\n                    idx = _.findIndex($scope.realisationTimes[0].volumes, {volume: volume});\n                    if (idx !== -1) {\n                        $scope.checkVolume($scope.realisationTimes[0], $scope.realisationTimes[0].volumes[idx]);\n                    }\n                }\n\n            } else {\n\n                idx = _.findIndex($scope.realisationTimes[0].volumes, {volume: volume});\n                if (idx !== -1) {\n                    $scope.checkVolume($scope.realisationTimes[0], $scope.realisationTimes[0].volumes[idx]);\n                }\n\n            }\n\n            if( !isEditorProject ) {\n                if ( typeof $scope.scrollbarVolume.update === 'function') {\n                    $scope.scrollbarVolume.update(\"scrollTo\", \"#row-volume-\" + $scope.productItem.volume);\n                }\n            }\n\n        };\n\n        $scope.changeRealisationTime = function () {\n\n            var idxRT = _.findIndex($scope.realisationTimes, {ID: $scope.productItem.realisationTime});\n\n            if (idxRT !== -1) {\n\n                var volume = $scope.productItem.volume;\n\n                var idx = _.findIndex($scope.realisationTimes[idxRT].volumes, {volume: volume});\n                if (idx !== -1) {\n                    $scope.checkVolume($scope.realisationTimes[idxRT], $scope.realisationTimes[idxRT].volumes[idx]);\n                }\n\n            }\n\n        };\n\n        $scope.countAttrNotExcludedOptions = function (product, attr) {\n\n            var count = 0;\n            _.each(attr.options, function (option) {\n\n                if (!_.includes(product.excludedOptions, option.ID)) {\n                    count++;\n                }\n\n            });\n            return count;\n        };\n\n        $scope.checkEmptyChoice = function (complexProduct, attributeID) {\n\n            var attrIdx = _.findIndex(complexProduct.selectedProduct.data.attributes, {attrID: parseInt(attributeID)});\n\n            if (attrIdx > -1) {\n                var attribute = complexProduct.selectedProduct.data.attributes[attrIdx];\n\n                var optionID = complexProduct.selectedProduct.data.selectedOptions[attribute.attrID];\n\n                var optIdx = _.findIndex(attribute.filteredOptions, {ID: parseInt(optionID)});\n                if (optIdx > -1) {\n                    var option = attribute.filteredOptions[optIdx];\n                    return option.emptyChoice;\n                }\n\n                return false;\n            }\n\n            return false;\n        };\n\n        $scope.selectOptionImage = function (complexProductData, item, attribute) {\n            complexProductData.selectedOptions[attribute.attrID] = item.ID;\n            $scope.selectOption(complexProductData, attribute.attrID);\n        };\n\n        $scope.setOptionPicture = function ($event, item) {\n            $scope.optionPicture = item.icon;\n            setTimeout(function () {\n                console.log($scope.optionPicture);\n                $('#showOptionPicture').modal('show');\n                $event.stopPropagation();\n            }, 100);\n\n        };\n\n        $scope.selectType = function (item) {\n            if (item && isEditorProject) {\n                PsTypeService.getOneForView(\n                    item.group.slugs[$rootScope.currentLang.code],\n                    item.slugs[$rootScope.currentLang.code]\n                ).then(function (typeInfo) {\n\n                    var urlParams = {\n                        categoryurl: typeInfo.category.langs[$rootScope.currentLang.code].url,\n                        groupurl: typeInfo.group.slugs[$rootScope.currentLang.code],\n                        typeurl: typeInfo.slugs[$rootScope.currentLang.code]\n                    };\n\n                    $state.go('select-project', {\n                        categoryurl: typeInfo.category.langs[$rootScope.currentLang.code].url,\n                        groupid: typeInfo.groupID,\n                        typeid: typeInfo.ID\n                    });\n                });\n            }\n        };\n\n        var getOption = function (product, optID) {\n\n            var item = undefined;\n            _.each(product.attributes, function (attribute) {\n                var idx = _.findIndex(attribute.options, {ID: optID});\n\n                if (idx > -1) {\n                    item = attribute.options[idx];\n                    return false;\n                }\n\n            });\n\n            return item;\n        };\n\n        var setRangePages = function (product, attrID) {\n\n            var idx = _.findIndex(product.attributes, {attrID: attrID});\n            if (idx > -1) {\n                if (product.attributes[idx].minPages !== null) {\n                    if (!product.attrPages[attrID]) {\n                        product.attrPages[attrID] = product.attributes[idx].minPages;\n                    }\n                }\n            } else {\n                console.error('Some functions may not work well.');\n            }\n        };\n\n        var getMinPages = function (type) {\n\n            /**\n             * @param {Array} type.minOptionPages\n             */\n            if (_.size(type.minOptionPages)) {\n                return _.min(_.values(type.minOptionPages));\n            }\n\n            return false;\n        };\n\n        var getActiveVolume = function (volumes, index) {\n\n            var actVolume = volumes[index];\n\n            if (actVolume) {\n                if (actVolume.active === false) {\n                    return getActiveVolume(volumes, (index + 1));\n                } else {\n                    return actVolume;\n                }\n            } else {\n                console.error('Problem with realization time!');\n            }\n        };\n\n        function filterTypeByEditor() {\n            $scope.filteredProducts = _.filter($rootScope.allTypes, function (one) {\n\n                return !(isEditorProject && one.isEditor !== 1);\n\n            });\n        }\n\n        function filterFormats(input, ids) {\n\n            var result = [];\n\n            _.each(input, function (item) {\n                var idx = _.findIndex(ids, {ID: item.ID});\n                if (idx > -1) {\n                    result.push(item);\n                }\n            });\n            return result;\n\n        }\n\n        function getJson() {\n\n            getPreparedProduct($scope.productItem.amount, $scope.productItem.volume).then(function (preparedProduct) {\n\n                var result = {\n                    typeID: preparedProduct.typeID,\n                    products: [],\n                    formats: [],\n                    pages: [],\n                    attributes: [],\n                    themeID: $scope.currentThemeID,\n                    name: $scope.productItem.name\n                };\n                _.each(preparedProduct.products, function (product, index) {\n                    result.products.push(product.typeID);\n                    result.formats.push(product.formatID);\n                    result.pages.push(product.pages);\n                    result.attributes[index] = [];\n                    _.each(product.options, function (option) {\n                        result.attributes[index].push(option.attrID + '-' + option.optID);\n                    });\n                });\n\n                $scope.productItem.jsonText = JSON.stringify(result);\n\n            });\n\n        }\n\n        function getPreparedProduct(amount, volume) {\n\n            var def = $q.defer();\n\n            var newItem = {};\n\n            newItem.amount = amount;\n            if (!(volume === undefined)) newItem.volume = volume;\n            newItem.groupID = $scope.currentGroupID;\n            newItem.typeID = $scope.currentTypeID;\n            newItem.taxID = $scope.productItem.taxID;\n            newItem.name = $scope.productItem.name;\n            newItem.realizationTimeID = $scope.productItem.realisationTime;\n\n            var rIdx = _.findIndex($scope.realisationTimes, {ID: $scope.productItem.realisationTime});\n\n            if (rIdx > -1) {\n                if ($scope.realisationTimes[rIdx].overwriteDate !== undefined && $scope.realisationTimes[rIdx].overwriteDate !== null) {\n                    newItem.realizationDate = $scope.realisationTimes[rIdx].overwriteDate;\n                } else {\n                    newItem.realizationDate = $scope.realisationTimes[rIdx].date;\n                }\n            }\n\n            newItem.productAddresses = $scope.productAddresses;\n            if ($scope.calculation !== undefined) {\n                newItem.weight = $scope.calculation.weight;\n            }\n\n            newItem.currency = $rootScope.currentCurrency.code;\n\n            newItem.projectID = $scope.currentThemeID;\n            newItem.inEditor = 1;\n            prepareProductPromise(newItem).then(function (newItemPrepared) {\n                def.resolve(newItemPrepared);\n            });\n\n            return def.promise;\n\n        }\n\n        function prepareProductPromise(newItem) {\n\n            var def = $q.defer();\n\n            newItem.products = [];\n            _.each($scope.complexProducts, function (complexProduct, index) {\n\n                var product = complexProduct.selectedProduct.data;\n\n                var newProduct = {};\n\n                newProduct.groupID = product.info.groupID;\n                newProduct.typeID = product.info.typeID;\n                newProduct.name = product.info.typeName;\n\n                if (!product.currentFormat) {\n                    console.error('Formats must be assign!');\n                }\n\n                newProduct.formatID = product.currentFormat.ID;\n\n                if (!product.currentFormat.custom) {\n\n                    newProduct.width = product.currentFormat.width;\n                    newProduct.height = product.currentFormat.height;\n                } else {\n                    newProduct.width = product.currentFormat.customWidth + product.currentFormat.slope * 2;\n                    newProduct.height = product.currentFormat.customHeight + product.currentFormat.slope * 2;\n                }\n\n                if (product.currentPages) {\n                    newProduct.pages = product.currentPages;\n                } else {\n                    newProduct.pages = 2;\n                }\n                newProduct.options = [];\n                _.each(product.selectedOptions, function (optID, attrID) {\n                    if (!optID) {\n                        console.log('Lack of optID: ', optID);\n                        console.log('attrID is:', attrID);\n                    } else {\n                        newProduct.options.push({\n                            attrID: parseInt(attrID),\n                            optID: optID\n                        });\n                    }\n\n                });\n\n                newProduct.attrPages = product.attrPages;\n\n                newItem.products.push(newProduct);\n\n                if (($scope.complexProducts.length - 1) === index) {\n                    def.resolve(newItem);\n                }\n            });\n\n            return def.promise;\n        }\n\n        function checkAttrSelectAsync(product) {\n            var def = $q.defer();\n\n            _.each(product.attributes, function (attribute) {\n                if (_.includes(deletedAttrs, attribute.attrID)) {\n                    if (product.selectedOptions[attribute.attrID]) {\n                        var firstFilteredOption = _.first(attribute.filteredOptions);\n                        if (firstFilteredOption) {\n                            product.selectedOptions[attribute.attrID] = firstFilteredOption.ID;\n                        }\n                    }\n                }\n\n                if (_.last(product.attributeMap) === attribute.attrID) {\n                    def.resolve(true);\n                }\n\n            });\n\n            return def.promise;\n        }\n\n        function setOptionExclusionsAsync(product, attrID, exclusions) {\n            var def = $q.defer();\n\n            deletedAttrs = [];\n\n            var attribute = _.find(product.attributes, {attrID: attrID});\n\n            var allExclude = [];\n            _.each(exclusions, function (exc) {\n\n                _.each(exc, function (optID) {\n\n                    allExclude.push(optID);\n\n                    product.excludedOptions.push(optID);\n\n                    _.each(product.selectedOptions, function (selectedOptID) {\n\n                        if (_.includes(allExclude, selectedOptID)) {\n                            getAttributeFromOption(product, selectedOptID).then(function (actAttrID) {\n                                if (actAttrID > 0 && _.indexOf(deletedAttrs, actAttrID) === -1) {\n                                    delete product.selectedOptions[actAttrID];\n                                    deletedAttrs.push(actAttrID);\n                                }\n                            });\n\n                        }\n\n                    });\n\n                });\n            });\n\n            attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                return !_.includes(product.excludedOptions, opt.ID);\n            });\n\n            def.resolve(true);\n\n            return def.promise;\n        }\n\n        function setExclusionsAsync(product) {\n\n            var def = $q.defer();\n\n            product.excludedOptions = _.clone(product.formatExcluded);\n\n            // filtered options set by clone\n            _.each(product.attributes, function (attribute) {\n                attribute.filteredOptions = _.clone(attribute.options, true);\n            });\n\n            var optID = {};\n            var activeAttrID;\n            _.each(product.attributeMap, function (attrID) {\n\n                activeAttrID = attrID;\n                optID = product.selectedOptions[attrID];\n\n                if (optID) {\n                    var item = {};\n\n                    if (_.isObject(optID)) {\n                        item = optID;\n                    } else {\n                        item = getOption(product, optID);\n                    }\n\n                    var tmpExclusions = {};\n\n                    var exclusionsThickness = $scope.filterByThickness(product);\n                    var exclusionsThicknessPages = $scope.filterByOptionsPages(product);\n\n                    /**\n                     * @param {Object} item\n                     * @param {Array} item.exclusions\n                     */\n                    if (item.exclusions) {\n                        tmpExclusions = _.merge({}, item.exclusions, exclusionsThickness, exclusionsThicknessPages);\n                    }\n\n                    if (tmpExclusions) {\n                        setOptionExclusionsAsync(product, activeAttrID, tmpExclusions).then(function (isEnd) {\n                            if (isEnd) {\n                                checkAttrSelectAsync(product).then(function (isAttrSelectEnd) {\n                                    if (isAttrSelectEnd) {\n                                        if (_.last(product.attributeMap) === activeAttrID) {\n                                            def.resolve(true);\n                                        }\n                                    }\n                                });\n                            } else {\n                                if (_.last(product.attributeMap) === activeAttrID) {\n                                    def.resolve(true);\n                                }\n                            }\n                        });\n\n                    } else {\n                        if (_.last(product.attributeMap) === activeAttrID) {\n                            def.resolve(true);\n                        }\n                    }\n                } else {\n                    if (_.last(product.attributeMap) === activeAttrID) {\n                        def.resolve(true);\n                    }\n                }\n            });\n\n            return def.promise;\n\n        }\n\n        function getCurrentCalcProduct(product) {\n            var currentCalcProduct = null;\n            if ($scope.currentCalc) {\n                currentCalcProduct = _.find($scope.currentCalc.calcProducts, {typeID: product.typeID});\n            }\n            return currentCalcProduct;\n        }\n\n        function descriptionTabResetActive() {\n            $timeout(function () {\n                $('.with-nav-tabs .nav-tabs li').removeClass('active');\n                $('.with-nav-tabs .tab-content div.tab-pane').removeClass('active');\n\n                $('.with-nav-tabs .nav-tabs li').first().addClass('active');\n                $('.with-nav-tabs .tab-content div.tab-pane').first().addClass('active');\n            }, 300);\n        }\n\n        var getTaxes = function () {\n\n            var def = $q.defer();\n            TaxService.getForProduct($scope.currentGroupID, $scope.currentTypeID).then(function (data) {\n                def.resolve(data);\n            });\n            return def.promise;\n        };\n\n        $scope.changeUserProductName = function() {\n            getJson();\n        };\n\n\n\n    });","start":4,"end":2048,"route":null,"symbol":"category.ConfigureProjectCtrl","metadata":{"calls_functions":["angular.module","$rootScope.$on","angular.isDefined","$q.defer","sequences.push","getGroup","getProjects","getCategory","$q.all","init","PhotoFolderService.getProjectsForTypes","_.find","PsGroupService.getOneForView","$filter","getType","console.error","Notification.error","DpCategoryService.getOneForView","FormatService.getPublic","PsTypeService.getOneForView","$state.go","getDescriptions","selectType","ComplexService.getAllPublic","_.each","promises.push","$scope.getComplexGroup","group.products.push","getFormat","getTaxes","console.log","SettingView.getPublicSettings","PsTypeDescriptionService.getAll","_.isEmpty","TextWidgetService.findWord","TextWidgetService.findParagraph","TextWidgetService.getLess","$scope.descriptions.push","oneDesc.items.push","$scope.galleries.push","sliderData.push","$scope.thumbnails.push","$rootScope.$emit","SettingAdditional.getPublicSettings","$scope.$on","$scope.complexProducts.push","_.findIndex","$scope.selectComplexProductSync","$timeout","$scope.selectFormatSync","$scope.getVolumes","def.resolve","def.reject","$scope.checkRelatedFormats","$scope.filterRelatedFormats","$scope.selectDefaultFormats","$scope.checkFormatExclusions","setExclusionsAsync","descriptionTabResetActive","$scope.selectDefaultOptions","$scope.getProduct","PagesService.getPublic","AttributeService.getFullOptions","attributesData.splice","newProduct.attributeMap.push","_.clone","getCurrentCalcProduct","$scope.selectPagesSync","$scope.relatedFormats.push","$scope.complexProducts.slice","filterFormats","_.includes","product.formatExcluded.push","$scope.selectOption","getOption","parseInt","setRangePages","Number","$scope.calcProductThickness","$scope.getMinimumThickness","$scope.getMaximumThickness","_.keys","_.values","_.has","getMinPages","Math.ceil","$scope.selectPages","Math.floor","product.excludedOptions.indexOf","$timeout.cancel","Notification.info","getPreparedProduct","CalculateService.getVolumes","data.volumes.filter","$scope.showVolumes","$scope.getMinVolume","getJson","$scope.calculate","CalculateService.calculate","$scope.showCalculation","$","$scope.checkVolume","_.sortBy","getActiveVolume","products.push","attributes.push","_.map","formats.push","pages.push","pages.join","products.join","attributes.join","formats.join","AuthDataService.getAccessToken","AuthService.getSessionCarts","DeliveryWidgetService.reducePostData","DeliveryWidgetService.checkParcelShopSelected","CalculateService.saveCalculation","DpCartsDataService.add","AuthService.addToCart","window.dataLayer.push","DeliveryWidgetService.checkMatchAddress","DeliveryWidgetService.addToJoinedDelivery","TokenService.joinAddresses","openEditor","$scope.getTotalThickness","tmp.toFixed","$scope.selectAttrPages","CalcSimplifyWidgetService.showSumPrice","CalcSimplifyWidgetService.showSumGrossPrice","parseFloat","$scope.scrollbarVolume.update","setTimeout","$event.stopPropagation","_.size","_.min","_.filter","result.push","result.products.push","result.formats.push","result.pages.push","result.attributes.index.push","JSON.stringify","prepareProductPromise","newProduct.options.push","newItem.products.push","_.first","_.last","allExclude.push","product.excludedOptions.push","getAttributeFromOption","_.indexOf","deletedAttrs.push","_.isObject","$scope.filterByThickness","$scope.filterByOptionsPages","_.merge","setOptionExclusionsAsync","checkAttrSelectAsync","TaxService.getForProduct"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":236,"eventfulness":{"watchers":0,"emits":5,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/ConfigureProjectCtrl.js:1125-1127:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/ConfigureProjectCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["element"],"antiPatterns":[],"text":"                    data.volumes.filter(function (element) {\n                        return element.active === true;\n                    });","start":1125,"end":1127,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["data.volumes.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":236,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/ConfigureProjectCtrl.js:1726-1730:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/ConfigureProjectCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["one"],"antiPatterns":[],"text":"            $scope.filteredProducts = _.filter($rootScope.allTypes, function (one) {\n\n                return !(isEditorProject && one.isEditor !== 1);\n\n            });","start":1726,"end":1730,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":236,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/ConfigureProjectCtrl.js:1933-1935:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/ConfigureProjectCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["opt"],"antiPatterns":[],"text":"            attribute.filteredOptions = _.filter(attribute.options, function (opt) {\n                return !_.includes(product.excludedOptions, opt.ID);\n            });","start":1933,"end":1935,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter","_.includes"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":236,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CustomProductCtrl.js:4-303:controller:category.CustomProductCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/CustomProductCtrl.js","module":null,"name":"category.CustomProductCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","MainWidgetService","AuthDataService","CustomProductService","FileUploader","$q","$filter","Notification","SettingService","PsTypeDescriptionService","PsTypeService","$state","TextWidgetService","$timeout","LoginWidgetService","$config","PsGroupService","DpCategoryService"],"antiPatterns":[],"text":"    .controller('category.CustomProductCtrl', function ($scope, $rootScope, MainWidgetService, AuthDataService,\n                                                        CustomProductService, FileUploader, $q, $filter,\n                                                        Notification, SettingService, PsTypeDescriptionService,\n                                                        PsTypeService, $state, TextWidgetService, $timeout,\n                                                        LoginWidgetService, $config, PsGroupService,\n                                                        DpCategoryService ) {\n\n        $scope.formSent = false;\n        $scope.customProduct = false;\n\n        $scope.descriptions = [];\n        $scope.galleries = [];\n        $scope.descriptions = [];\n        $scope.thumbnails = [];\n        $scope.patterns = [];\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        var header = {};\n        header[accessTokenName] = AuthDataService.getAccessToken();\n\n        $scope.uploader = new FileUploader({\n            'headers': header,\n            'autoUpload ': true\n        });\n\n        $scope.uploader.onProgressAll = function (progress) {\n            $scope.uploadProgress = progress;\n        };\n\n        $scope.uploader.filters.push({\n            name: 'imageFilter',\n            fn: function (item, options) {\n                var itemName = item.name.split('.');\n                var lastItem = itemName.pop().toLowerCase();\n                var possibleExtensions = ['jpg', 'jpeg'];\n\n                if (possibleExtensions.indexOf(lastItem) > -1) {\n                    return true;\n                }\n                Notification.warning($filter('translate')('required_ext') + possibleExtensions.join(','));\n                return false;\n            }\n        });\n\n        $scope.save = function () {\n            var formData = this.form;\n            formData.groupID = $scope.currentGroupID;\n            formData.typeID = $scope.currentTypeID;\n            CustomProductService.add(formData).then(function (savedData) {\n               if( savedData.response === true ) {\n\n                   if( $scope.uploader.queue.length > 0 ) {\n                       changeUrl( savedData.item.ID ).then( function() {\n                           $scope.uploader.uploadAll();\n                           $scope.uploader.onCompleteAll  = function() {\n                               $scope.formSent = true;\n                               $scope.customProduct = savedData.item;\n                               Notification.success($filter('translate')('saved_message'));\n                           }\n                       });\n                   } else {\n                       $scope.formSent = true;\n                       $scope.customProduct = savedData.item;\n                       Notification.success($filter('translate')('saved_message'));\n                   }\n\n               }\n            });\n\n        };\n\n        function init() {\n            getType($state.params.groupurl, $state.params.typeurl).then(function(responseData) {\n\n                getDescriptions();\n                if($state.params.groupurl === undefined) {\n                    getGroup(responseData.group.slugs[$rootScope.currentLang.code]);\n                } else {\n                    getGroup($state.params.groupurl);\n                }\n\n                if( $state.params.categoryurl === undefined ) {\n                    getCategory(responseData.category.langs[$rootScope.currentLang.code].url);\n                } else {\n                    getCategory($state.params.categoryurl);\n                }\n\n            });\n\n        }\n\n        function getType(groupUrl, typeUrl) {\n\n            var def = $q.defer();\n\n            PsTypeService.getOneForView(groupUrl, typeUrl).then(function (data) {\n                if( data && data.active === 0 ) {\n                    Notification.error($filter('translate')('product_currently_not_available'));\n                    $state.go('home');\n                    return;\n                }\n                $scope.currentGroupID = data.groupID;\n                $scope.currentTypeID = data.ID;\n                def.resolve(data);\n\n\n            }, function (data) {\n                console.error(data);\n                Notification.error($filter('translate')('error'));\n                def.reject(data);\n            });\n\n            return def.promise;\n\n\n\n        }\n\n        function getGroup( currentGroupUrl ) {\n            PsGroupService.getOneForView( currentGroupUrl ).then(function(data) {\n                if( $rootScope.currentLang && $rootScope.currentLang.code ) {\n                    $rootScope.customBreadcrumbs.group = data.names[$rootScope.currentLang.code];\n                } else {\n                    $rootScope.customBreadcrumbs.group = $filter('translate')('group');\n                }\n            }, function(data) {\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getCategory(currentCategoryUrl) {\n            DpCategoryService.getOneForView(currentCategoryUrl).then(function (data) {\n                $scope.category = data;\n                if( $rootScope.currentLang && $rootScope.currentLang.code && data.langs ) {\n                    $rootScope.customBreadcrumbs.category = data.langs[$rootScope.currentLang.code].name;\n                } else {\n                    $rootScope.customBreadcrumbs.category = $filter('translate')('category');\n                }\n            }, function (data) {\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getDescriptions() {\n\n            var SettingView = new SettingService('general');\n\n            var groupID = $scope.currentGroupID;\n            var typeID = $scope.currentTypeID;\n\n            SettingView.getPublicSettings().then(function (settingsData) {\n\n                PsTypeDescriptionService.getAll(groupID, typeID).then(function (data) {\n\n                    var sliderData = [];\n\n                    if (!_.isEmpty(data)) {\n\n                        _.each(data, function (oneDesc) {\n\n                            /**\n                             * @param {Object} oneDesc\n                             * @param {number} oneDesc.descType\n                             *\n                             */\n                            switch (oneDesc.descType) {\n                                case 1:\n                                    if( settingsData.numberOfLinesInDescription &&\n                                        settingsData.numberOfLinesInDescription.value > 0 ) {\n                                        var word = TextWidgetService.findWord(\n                                            oneDesc.langs[$rootScope.currentLang.code].description,\n                                            settingsData.numberOfLinesInDescription.value\n                                        );\n                                        var paragraphNumber = TextWidgetService.findParagraph(\n                                            oneDesc.langs[$rootScope.currentLang.code].description,\n                                            word\n                                        );\n                                        if( paragraphNumber !== false ) {\n                                            oneDesc.showLess = TextWidgetService.getLess(\n                                                oneDesc.langs[$rootScope.currentLang.code].description,\n                                                paragraphNumber\n                                            );\n                                            oneDesc.initHide = true;\n                                        } else {\n                                            oneDesc.showLess = false;\n                                        }\n                                    }\n\n                                    $scope.descriptions.push(oneDesc);\n                                    break;\n                                case 5:\n\n                                    oneDesc.items = [];\n\n                                    if (!_.isEmpty(oneDesc.files)) {\n                                        _.each(oneDesc.files, function (oneFile) {\n\n                                            /**\n                                             * @param {Object} oneFile\n                                             * @param {string} oneFile.urlCrop\n                                             * @param {number} oneFile.fileID\n                                             */\n\n                                            oneDesc.items.push({\n                                                thumb: oneFile.urlCrop,\n                                                img: oneFile.url,\n                                                description: 'Image ' + oneFile.fileID\n                                            });\n                                        });\n                                    }\n\n                                    $scope.galleries.push(oneDesc);\n\n                                    break;\n                                case 3:\n\n                                    sliderData.push(oneDesc);\n\n                                    break;\n\n                                case 6:\n\n                                    $scope.thumbnails.push(oneDesc);\n\n                                    break;\n\n                                case 7:\n                                    $scope.patterns = oneDesc.patterns;\n\n                                    break;\n                            }\n\n                        });\n\n                        descriptionTabResetActive();\n                    }\n\n                    $rootScope.$emit('Slider:data', sliderData);\n\n                });\n            });\n\n        }\n\n        function changeUrl(reclamationID) {\n\n            var def = $q.defer();\n\n            _.each($scope.uploader.queue, function(item, index) {\n                item.url = CustomProductService.getUploadUrl(reclamationID);\n                if( index === $scope.uploader.queue.length-1 ) {\n                    def.resolve(true);\n                }\n            });\n\n            return def.promise;\n        }\n\n        function descriptionTabResetActive() {\n            $timeout(function () {\n                $('.with-nav-tabs .nav-tabs li').removeClass('active');\n                $('.with-nav-tabs .tab-content div.tab-pane').removeClass('active');\n\n                $('.with-nav-tabs .nav-tabs li').first().addClass('active');\n                $('.with-nav-tabs .tab-content div.tab-pane').first().addClass('active');\n            }, 300);\n        }\n\n        $scope.formatSizeUnits = function (bytes) {\n            return MainWidgetService.formatSizeUnits(bytes);\n        };\n\n        $scope.removeFile = function(fileItem) {\n            fileItem.remove();\n        };\n\n        $scope.hasFormats = function (desc) {\n            return true;\n        };\n\n        $scope.hasOneFormat = function (pattern) {\n            return true;\n        };\n\n        $scope.login = function (credentials) {\n            var backTo = {\n                state: 'custom-product',\n                params: {\n                    categoryurl: $state.params.categoryurl,\n                    groupurl: $state.params.groupurl,\n                    typeurl: $state.params.typeurl\n                }\n            };\n            LoginWidgetService.login(credentials, backTo);\n        };\n\n        init();\n\n    });","start":4,"end":303,"route":null,"symbol":"category.CustomProductCtrl","metadata":{"calls_functions":["angular.module","AuthDataService.getAccessToken","$scope.uploader.filters.push","item.name.split","itemName.pop","possibleExtensions.indexOf","Notification.warning","$filter","possibleExtensions.join","CustomProductService.add","changeUrl","$scope.uploader.uploadAll","Notification.success","getType","getDescriptions","getGroup","getCategory","$q.defer","PsTypeService.getOneForView","Notification.error","$state.go","def.resolve","console.error","def.reject","PsGroupService.getOneForView","DpCategoryService.getOneForView","SettingView.getPublicSettings","PsTypeDescriptionService.getAll","_.isEmpty","_.each","TextWidgetService.findWord","TextWidgetService.findParagraph","TextWidgetService.getLess","$scope.descriptions.push","oneDesc.items.push","$scope.galleries.push","sliderData.push","$scope.thumbnails.push","descriptionTabResetActive","$rootScope.$emit","CustomProductService.getUploadUrl","$timeout","$","MainWidgetService.formatSizeUnits","fileItem.remove","LoginWidgetService.login","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":24,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/GroupsCtrl.js:4-153:controller:category.GroupsCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/GroupsCtrl.js","module":null,"name":"category.GroupsCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$filter","$q","PsTypeService","PsGroupService","DpCategoryService","PsGroupDescriptionService","$stateParams","Notification","MainWidgetService"],"antiPatterns":[],"text":"\t.controller('category.GroupsCtrl', function($scope, $rootScope, $filter, $q, PsTypeService, PsGroupService,\n                                                DpCategoryService, PsGroupDescriptionService, $stateParams,\n                                                Notification, MainWidgetService) {\n\n\tvar currentGroupID;\n\tvar currentGroupUrl;\n\n    $scope.descriptions = [];\n    $scope.galleries = [];\n\n    function init() {\n        $scope.items = [];\n        $scope.group = {};\n        $scope.category = {};\n        $scope.form = {};\n        currentGroupUrl = $scope.currentGroupUrl = $stateParams.groupurl;\n        getTypes(currentGroupUrl);\n        getGroup(currentGroupUrl);\n        getOne( $stateParams.categoryurl );\n        getDescription( currentGroupUrl );\n    }\n\n    init();\n\n    $scope.itemsClassName = function(product){\n        var attrIconWith = product.attributeIconWidth ? product.attributeIconWidth : $scope.attributeIconWidth;\n        var iconWidth = attrIconWith === 0 ? 1 : attrIconWith;\n        if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 0){\n            return 'col-xs-6 col-sm-4 col-md-'+(iconWidth*3)+' col-lg-'+(iconWidth*3);\n\n        }else if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 1){\n            return 'col-xs-12 col-sm-4 col-md-2 col-lg-2 col-md-'+(iconWidth*2)+'-20pp';\n\n        }else if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 2){\n            return 'col-xs-6 col-sm-3 col-md-'+(iconWidth*2)+' col-lg-'+(iconWidth*2);\n\n        }else if (($scope.attributeDescView == 1 || $scope.attributeDescView == 2) && $scope.attributeMenuLeft == 0){\n            return 'col-xs-12 col-sm-12 col-md-6 col-lg-6';\n\n        }else if ($scope.attributeMenuLeft == 1){\n            return 'col-xs-4 col-sm-4 col-md-4 col-lg-4';\n        }\n    }\n\n    $scope.loadOtherTemplateVariables=function(templateName){\n        MainWidgetService.includeTemplateVariables($scope, templateName, undefined, undefined, undefined, true);\n    };\n\n    $scope.getTemplateVariable=function(collection, itemType,id,variableName,defaultValue){\n        return MainWidgetService.getTemplateVariable($scope, collection, itemType,id,variableName,defaultValue);\n    };\n\n        function getTypes(currentGroupUrl) {\n            $q.all([PsTypeService.forView(currentGroupUrl), MainWidgetService.includeTemplateVariables($scope, 'calc', undefined, undefined, undefined, true)]).then(function (data) {\n                $scope.items = data[0];\n                var tplVars = data[1].response[0].value;\n                _.each(tplVars, function (tplVar) {\n                    if (tplVar.typeID) {\n                        var typeItem = _.find($scope.items, {ID: tplVar.typeID});\n                        if (typeItem) {\n                            typeItem[tplVar.name] = tplVar.value;\n                        }\n                    }\n                });\n            }, function (errors) {\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n    function getGroup( currentGroupUrl ) {\n        PsGroupService.getOneForView( currentGroupUrl ).then(function(data) {\n            $scope.group = data;\n            if( $rootScope.currentLang && $rootScope.currentLang.code ) {\n                $rootScope.customBreadcrumbs.group = data.names[$rootScope.currentLang.code];\n            } else {\n                $rootScope.customBreadcrumbs.group = $filter('translate')('group');\n            }\n            MainWidgetService.includeTemplateVariables($scope, 'group', data.ID);\n        }, function(data) {\n            Notification.error($filter('translate')('error'));\n        });\n    }\n\n    function getOne(currentCategoryUrl) {\n        DpCategoryService.getOneForView(currentCategoryUrl).then(function (data) {\n            $scope.category = data;\n            if( $rootScope.currentLang && $rootScope.currentLang.code && data.langs ) {\n                $rootScope.customBreadcrumbs.category = data.langs[$rootScope.currentLang.code].name;\n            } else {\n                $rootScope.customBreadcrumbs.category = $filter('translate')('category');\n            }\n        }, function (data) {\n            Notification.error($filter('translate')('error'));\n        });\n    }\n\n    function getDescription( groupUrl ) {\n\n        PsGroupDescriptionService.getAll(groupUrl).then(function (data) {\n\n            var sliderData = [];\n\n            if (!_.isEmpty(data)) {\n\n                _.each(data, function (oneDesc) {\n\n                    switch (oneDesc.descType) {\n                        case 1:\n                            $scope.descriptions.push(oneDesc);\n                            break;\n                        case 5:\n\n                            oneDesc.items = [];\n\n                            if (!_.isEmpty(oneDesc.files)) {\n                                _.each(oneDesc.files, function (oneFile) {\n                                    oneDesc.items.push({\n                                        thumb: oneFile.urlCrop,\n                                        img: oneFile.url,\n                                        description: 'Image ' + oneFile.fileID\n                                    });\n                                });\n                            }\n\n                            $scope.galleries.push(oneDesc);\n\n                            break;\n                        case 3:\n\n                            sliderData.push(oneDesc);\n\n                            break;\n\n                        case 6:\n\n                            //$scope.thumbnails.push(oneDesc);\n\n                            break;\n                    }\n\n                });\n            }\n\n            $rootScope.$emit('Slider:data', sliderData);\n\n        });\n\n    }\n\n});","start":4,"end":153,"route":null,"symbol":"category.GroupsCtrl","metadata":{"calls_functions":["angular.module","getTypes","getGroup","getOne","getDescription","init","MainWidgetService.includeTemplateVariables","MainWidgetService.getTemplateVariable","$q.all","PsTypeService.forView","_.each","_.find","Notification.error","$filter","PsGroupService.getOneForView","DpCategoryService.getOneForView","PsGroupDescriptionService.getAll","_.isEmpty","$scope.descriptions.push","oneDesc.items.push","$scope.galleries.push","sliderData.push","$rootScope.$emit"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":32,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/SelectProjectCtrl.js:4-27:controller:category.SelectProjectCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/category/SelectProjectCtrl.js","module":null,"name":"category.SelectProjectCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","PsTypeService","$rootScope","$filter","Notification","$stateParams","PhotoFolderService"],"antiPatterns":[],"text":"    .controller('category.SelectProjectCtrl', function ($scope, PsTypeService, $rootScope, $filter, Notification,\n                                                        $stateParams, PhotoFolderService) {\n\n        var typeUrl = $scope.currentTypeUrl = $stateParams.typeurl;\n        var groupUrl = $scope.currentGroupUrl = $stateParams.groupurl;\n\n        $scope.type = {};\n        $scope.mainThemes = [];\n\n        function init() {\n            PsTypeService.getOneForView(groupUrl, typeUrl).then(function(dataType) {\n                $scope.type = dataType;\n            });\n\n            var formats = [];\n\n            PhotoFolderService.getProjectsForTypes(formats).then( function(data) {\n                $scope.mainThemes = data;\n            });\n        }\n\n        init();\n\n    });","start":4,"end":27,"route":null,"symbol":"category.SelectProjectCtrl","metadata":{"calls_functions":["angular.module","PsTypeService.getOneForView","PhotoFolderService.getProjectsForTypes","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/ChangePasswordCtrl.js:4-29:controller:client-zone.ChangePasswordCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/ChangePasswordCtrl.js","module":null,"name":"client-zone.ChangePasswordCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","Notification","$filter","UserService"],"antiPatterns":[],"text":".controller('client-zone.ChangePasswordCtrl', function ($scope, Notification, $filter, UserService) {\n\n    function init() {\n    }\n\n    init();\n\n    $scope.change = function () {\n\n        if( $scope.form.pass !== $scope.form.confirmPass ) {\n            Notification.error($filter('translate')('passwords_not_same'));\n            return;\n        }\n\n        UserService.changePass($scope.form).then(function( data ) {\n            if(data.response === true) {\n                Notification.success($filter('translate')('successfully_edited'));\n            } else {\n                Notification.error($filter('translate')('error'));\n            }\n        }, function() {\n            Notification.error($filter('translate')('error'));\n        });\n\n    }\n});","start":4,"end":29,"route":null,"symbol":"client-zone.ChangePasswordCtrl","metadata":{"calls_functions":["angular.module","init","Notification.error","$filter","UserService.changePass","Notification.success"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/ClientZoneCtrl.js:4-99:controller:client-zone.ClientZoneCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/ClientZoneCtrl.js","module":null,"name":"client-zone.ClientZoneCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$state","$rootScope","Notification","$filter"],"antiPatterns":[],"text":"  .controller('client-zone.ClientZoneCtrl', function ($scope, $state, $rootScope, Notification, $filter) {\n\n      var menuTop = [];\n      var menuBottom = [];\n\n      $scope.menuTop = [];\n      $scope.menuBottom = [];\n      $scope.currentState = '';\n      $scope.searchType = 'simple';\n\n      $scope.showQuota = false;\n\n      function init() {\n\n          $scope.currentState = $state.current.name;\n\n          var topMenuList = [\n              $state.get('client-zone-orders'),\n              $state.get('client-zone-orders-not-paid'),\n              $state.get('client-zone-orders-finished'),\n              $state.get('client-zone-offers'),\n              $state.get('client-zone-questions'),\n              $state.get('client-zone-reclamations'),\n              $state.get('client-zone-my-folders'),\n              $state.get('client-zone-my-projects')\n          ];\n\n          _.each(topMenuList, function(element) {\n              if( element !== null ) {\n                  menuTop.push(element);\n              }\n          });\n\n          $scope.menuTop = menuTop;\n\n          var bottomMenuList = [\n              $state.get('client-zone-data'),\n              $state.get('client-zone-delivery-data'),\n              $state.get('client-zone-invoice-data'),\n              $state.get('client-zone-change-pass')\n          ];\n\n          _.each(bottomMenuList, function(element) {\n              if( element !== null ) {\n                  menuBottom.push(element);\n              }\n          });\n\n          $scope.menuBottom = menuBottom;\n\n          $scope.usedSpace = 0;\n          if( $rootScope.companyID === 195 || $rootScope.companyID === 35 ) {\n              $scope.usedSpace = (parseInt($rootScope.user.userID) * 1234) % 1000;\n              $scope.showQuota = true;\n          }\n\n      }\n\n      $scope.search = function() {\n\n          if( $rootScope.companyID === 195 || $rootScope.companyID === 35 || $rootScope.companyID === 25 ) {\n\n              if( this.searchType === 'simple' && (this.tag === undefined || this.tag.length < 3) ) {\n                  Notification.warning($filter('translate')('input_min_3_characters'));\n                  return;\n              }\n\n              if( this.tag !== undefined ) {\n                  $state.go('client-zone-search', {q: this.tag, subject: 'tag'});\n              } else if ( this.author !== undefined ) {\n                  $state.go('client-zone-search', {q: this.author, subject: 'author'});\n              } else if ( this.place !== undefined ) {\n                  console.log(this.place);\n                  $state.go('client-zone-search', {q: this.place, subject: 'place'});\n              } else if ( this.person !== undefined ) {\n                  $state.go('client-zone-search', {q: this.person, subject: 'person'});\n              } else if ( this.minRating !== undefined ) {\n                  $state.go('client-zone-search', {q: this.minRating+'-'+this.maxRating, subject: 'rating'});\n              }\n\n              this.tag = undefined;\n              this.author = undefined;\n              this.place = undefined;\n              this.person = undefined;\n\n          }\n\n      };\n\n      $scope.changeSearchType = function( type ) {\n          $scope.searchType = type;\n      };\n\n      init();\n\n});","start":4,"end":99,"route":null,"symbol":"client-zone.ClientZoneCtrl","metadata":{"calls_functions":["angular.module","$state.get","_.each","menuTop.push","menuBottom.push","parseInt","Notification.warning","$filter","$state.go","console.log","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":16,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/ClientZoneDataCtrl.js:7-85:controller:client-zone.ClientZoneDataCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/ClientZoneDataCtrl.js","module":null,"name":"client-zone.ClientZoneDataCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","DpAddressService","CountriesService","Notification","$filter","PhotoFolderService","$cookieStore","RegisterWidget","UserService"],"antiPatterns":[],"text":"    .controller('client-zone.ClientZoneDataCtrl', function ($scope, $rootScope, DpAddressService, CountriesService,\n                                                            Notification, $filter, PhotoFolderService, $cookieStore,\n                                                            RegisterWidget, UserService) {\n\n    $scope.countries = [];\n    $scope.photoForm = {};\n    $scope.form = {};\n    $scope.actualUser = {};\n\n    function init() {\n        getImportantData();\n    }\n\n    function getImportantData() {\n        UserService.getImportantData().then(function(data) {\n            $scope.form = data;\n            $scope.actualUser.login = data.login;\n            $scope.form.smsAgree = !!data.sms;\n            $scope.form.advAgree = !!data.advertising;\n\n            showCountries(data.countryCode);\n\n        });\n    }\n\n    function showCountries(countryCode) {\n        CountriesService.getAll().then(function (dataCountries) {\n            $scope.countries = dataCountries;\n        });\n    }\n\n    init();\n\n    $scope.edit = function () {\n\n        var data = _.clone($scope.form);\n        data.sms = data.smsAgree ? 1 : 0;\n        delete data.smsAgree;\n        data.advertising = data.advAgree ? 1 : 0;\n        delete data.advAgree;\n\n        UserService.editImportantData(data).then( function(data) {\n\n            if(data.response === true) {\n                Notification.success($filter('translate')('successfully_edited'));\n            } else {\n                Notification.error($filter('translate')('error'));\n            }\n\n        }, function() {\n            Notification.error($filter('translate')('error'));\n        });\n\n    };\n\n    $scope.addPhotoFolder = function() {\n        console.log($scope.photoForm);\n        PhotoFolderService.add($scope.photoForm.name).then( function(data) {\n           console.log(data);\n        });\n    };\n\n    $scope.getFolders = function() {\n        PhotoFolderService.get().then( function(data) {\n            $scope.folders = data;\n        });\n    };\n\n    $scope.isCountryCode = function () {\n        var country = _.find($scope.countries, {code: $scope.form.countryCode});\n        return country && String(country.areaCode).length > 0;\n    }\n\n    $scope.updateAreaCode = function () {\n        var country = _.find($scope.countries, {code: $scope.form.countryCode});\n        $scope.form.areaCode = country.areaCode;\n    }\n\n});","start":7,"end":85,"route":null,"symbol":"client-zone.ClientZoneDataCtrl","metadata":{"calls_functions":["angular.module","getImportantData","UserService.getImportantData","showCountries","CountriesService.getAll","init","_.clone","UserService.editImportantData","Notification.success","$filter","Notification.error","console.log","PhotoFolderService.add","PhotoFolderService.get","_.find","String"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":5,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/CreateReclamation.js:7-140:controller:client-zone.CreateReclamationCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/CreateReclamation.js","module":null,"name":"client-zone.CreateReclamationCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$q","$scope","$rootScope","Notification","$filter","ReclamationService","FileUploader","AuthDataService","$stateParams","DpProductService","MainWidgetService","$config"],"antiPatterns":[],"text":"    .controller('client-zone.CreateReclamationCtrl', function ($q, $scope, $rootScope, Notification, $filter,\n                                                               ReclamationService, FileUploader, AuthDataService,\n                                                               $stateParams, DpProductService, MainWidgetService,\n                                                               $config) {\n\n        $scope.faults = [];\n        $scope.uploadProgress = 0;\n        $scope.orderID = $stateParams.orderid;\n        $scope.form = {};\n        $scope.reclamationExist = false;\n        $scope.reclamation = {};\n        $scope.products = [];\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        var header = {};\n        header[accessTokenName] = AuthDataService.getAccessToken();\n\n        $scope.uploader = new FileUploader({\n            'headers': header,\n            'autoUpload ': true\n        });\n\n        $scope.uploader.onProgressAll = function (progress) {\n            $scope.uploadProgress = progress;\n        };\n\n        $scope.uploader.filters.push({\n            name: 'imageFilter',\n            fn: function (item, options) {\n                var itemName = item.name.split('.');\n                var lastItem = itemName.pop();\n                var possibleExtensions = ['jpg', 'jpeg'];\n\n                if (possibleExtensions.indexOf(lastItem) > -1) {\n                    return true;\n                }\n                Notification.warning($filter('translate')('required_ext') + possibleExtensions.join(','));\n                return false;\n            }\n        });\n\n        $scope.save = function () {\n\n            if( this.form.products === undefined || this.form.products.length === 0) {\n                Notification.error($filter('translate')('select_at_least_one_product'));\n                return;\n            }\n\n            var sum = _.reduce(this.form.faults, function (memo, num) {\n                if (num === true) {\n                    return ++memo;\n                }\n                return memo;\n            }, 0);\n\n            if (sum === 0) {\n                Notification.error($filter('translate')('select_fault_description'));\n                return;\n            }\n\n            ReclamationService.add(this.form, $scope.orderID).then(function (data) {\n                if (data.response === true) {\n\n                    if( $scope.uploader.queue.length > 0 ) {\n                        changeUrl( data.item.ID ).then( function() {\n                            $scope.uploader.uploadAll();\n                            $scope.uploader.onCompleteAll  = function() {\n                                findReclamation();\n                                Notification.success($filter('translate')('reclamation_created'));\n                            }\n                        });\n                    } else {\n                        findReclamation();\n                        Notification.success($filter('translate')('reclamation_created'));\n                    }\n\n                }\n            }, function (data) {\n                Notification.error($filter('translate')('error'));\n            });\n\n        };\n\n        function changeUrl(reclamationID) {\n\n            var def = $q.defer();\n\n            _.each($scope.uploader.queue, function(item, index) {\n                item.url = ReclamationService.getUploadUrl(reclamationID);\n                if( index === $scope.uploader.queue.length-1 ) {\n                    def.resolve(true);\n                }\n            });\n\n            return def.promise;\n        }\n\n        $scope.formatSizeUnits = function (bytes) {\n            return MainWidgetService.formatSizeUnits(bytes);\n        };\n\n        $scope.removeFile = function(fileItem) {\n            fileItem.remove();\n        };\n\n        function init() {\n            ReclamationService.getFaults().then(function (data) {\n                $scope.faults = data;\n                $scope.form.faults = {};\n                _.each(data, function (item) {\n                    $scope.form.faults[item.ID] = false;\n                });\n            });\n            findReclamation();\n            DpProductService.getByOrder($scope.orderID).then( function( productData ) {\n                $scope.products = productData;\n            });\n        }\n\n        function findReclamation() {\n            ReclamationService.findByOrder($scope.orderID).then( function( reclamation ) {\n                if( reclamation && reclamation.ID ) {\n                    $scope.reclamationExist = true;\n                    $scope.reclamation = reclamation;\n                }\n            }, function( error ) {\n                $scope.reclamationExist = false;\n            });\n        }\n\n        init();\n\n    });","start":7,"end":140,"route":null,"symbol":"client-zone.CreateReclamationCtrl","metadata":{"calls_functions":["angular.module","AuthDataService.getAccessToken","$scope.uploader.filters.push","item.name.split","itemName.pop","possibleExtensions.indexOf","Notification.warning","$filter","possibleExtensions.join","Notification.error","_.reduce","ReclamationService.add","changeUrl","$scope.uploader.uploadAll","findReclamation","Notification.success","$q.defer","_.each","ReclamationService.getUploadUrl","def.resolve","MainWidgetService.formatSizeUnits","fileItem.remove","ReclamationService.getFaults","DpProductService.getByOrder","ReclamationService.findByOrder","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/DeliveryDataCtrl.js:4-118:controller:client-zone.DeliveryDataCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/DeliveryDataCtrl.js","module":null,"name":"client-zone.DeliveryDataCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","DpAddressService","CountriesService","Notification","$filter","$config","$modal","TemplateRootService","RegisterWidget"],"antiPatterns":[],"text":"    .controller('client-zone.DeliveryDataCtrl', function ($scope, $rootScope, DpAddressService, CountriesService,\n                                                          Notification, $filter, $config, $modal, TemplateRootService,\n                                                          RegisterWidget) {\n\n        $scope.countries = [];\n        $scope.addresses = [];\n        $scope.form = {};\n\n        function init() {\n            getAddresses();\n            CountriesService.getAll().then( function(dataCountries) {\n                $scope.countries = dataCountries;\n            });\n        }\n\n        function getAddresses() {\n            DpAddressService.getAddresses(1).then(function (data) {\n                $scope.addresses = data;\n            });\n        }\n\n        init();\n\n        $scope.addressEdit = function( address ) {\n            TemplateRootService.getTemplateUrl(65).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function($scope, $modalInstance) {\n\n                        $scope.modalForm = address;\n\n                        $scope.save = function(  ) {\n\n                            DpAddressService.editUserAddress( $scope.modalForm, $scope.modalForm.ID ).then(function( data ) {\n\n                                if(data.response === true) {\n\n                                    var idx = _.findIndex($scope.addresses, {ID: data.item.ID});\n                                    if( idx > -1 ) {\n                                        $scope.addresses[idx] = data.item;\n                                    }\n                                    Notification.success($filter('translate')('successfully_edited'));\n                                    $modalInstance.close();\n                                } else {\n                                    Notification.error($filter('translate')('error'));\n                                }\n\n                            }, function() {\n                                Notification.error($filter('translate')('error'));\n                            });\n\n                        };\n\n                        $scope.cancel = function() {\n                            $modalInstance.close();\n                        };\n\n                        $scope.isCountryCode = function (formName) {\n                            var country = _.find($scope.countries, {code: $scope[formName].countryCode});\n                            return country && String(country.areaCode).length > 0;\n                        }\n\n                        $scope.updateAreaCode = function (formName) {\n                            var country = _.find($scope.countries, {code: $scope[formName].countryCode});\n                            $scope[formName].areaCode = country.areaCode;\n                        }\n\n                    }\n                });\n            });\n        };\n\n        $scope.addressRemove = function(address) {\n            DpAddressService.remove(address.ID).then(function(removedData) {\n                if( removedData.response ) {\n                    var idx = _.findIndex($scope.addresses, {ID: address.ID});\n                    if( idx > 0 ) {\n                        $scope.addresses.splice(idx, 1);\n                    }\n                    Notification.success($filter('translate')('deleted_successful'))\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            }, function() {\n                Notification.error($filter('translate')('error'));\n            });\n        };\n\n        $scope.add = function() {\n            DpAddressService.addAddress($scope.form, 1).then( function(data) {\n                if(data.response === true) {\n                    $scope.addresses.push(data.item);\n                    $scope.form = {};\n                    Notification.success($filter('translate')('added'));\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            }, function() {\n                Notification.error($filter('translate')('error'));\n            });\n        };\n\n        $scope.isCountryCode = function (formName) {\n            var country = _.find($scope.countries, {code: $scope[formName].countryCode});\n            return country && String(country.areaCode).length > 0;\n        }\n\n        $scope.updateAreaCode = function (formName) {\n            var country = _.find($scope.countries, {code: $scope[formName].countryCode});\n            $scope[formName].areaCode = country.areaCode;\n        }\n\n    });","start":4,"end":118,"route":null,"symbol":"client-zone.DeliveryDataCtrl","metadata":{"calls_functions":["angular.module","getAddresses","CountriesService.getAll","DpAddressService.getAddresses","init","TemplateRootService.getTemplateUrl","$modal.open","DpAddressService.editUserAddress","_.findIndex","Notification.success","$filter","$modalInstance.close","Notification.error","_.find","String","DpAddressService.remove","$scope.addresses.splice","DpAddressService.addAddress","$scope.addresses.push"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":8,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/InvoiceDataCtrl.js:7-44:controller:client-zone.InvoiceDataCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/InvoiceDataCtrl.js","module":null,"name":"client-zone.InvoiceDataCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","DpAddressService","CountriesService","Notification","$filter"],"antiPatterns":[],"text":"    .controller('client-zone.InvoiceDataCtrl', function ($scope, $rootScope, DpAddressService, CountriesService,\n                                                         Notification, $filter) {\n\n        $scope.countries = [];\n\n        function init() {\n            getDefaultAddress();\n        }\n\n        function getDefaultAddress() {\n            DpAddressService.getDefaultAddress(2).then(function (data) {\n                $scope.form = data.address;\n                CountriesService.getAll().then( function(dataCountries) {\n                    $scope.countries = dataCountries;\n                });\n            });\n        }\n\n        init();\n\n        $scope.edit = function () {\n\n            $scope.form.type = 2;\n            $scope.form.default = 1;\n\n            DpAddressService.editUserAddress($scope.form, $scope.form.ID).then(function( data ) {\n                if(data.response === true) {\n                    Notification.success($filter('translate')('successfully_edited'));\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n\n            }, function() {\n                Notification.error($filter('translate')('error'));\n            });\n\n        }\n    });","start":7,"end":44,"route":null,"symbol":"client-zone.InvoiceDataCtrl","metadata":{"calls_functions":["angular.module","getDefaultAddress","DpAddressService.getDefaultAddress","CountriesService.getAll","init","DpAddressService.editUserAddress","Notification.success","$filter","Notification.error"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/MyFoldersCtrl.js:6-659:controller:client-zone.MyFoldersCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/MyFoldersCtrl.js","module":null,"name":"client-zone.MyFoldersCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$state","$rootScope","ClientZoneWidgetService","TemplateRootService","$modal","PhotoFolderService","$filter","Notification","$config"],"antiPatterns":[],"text":"    .controller('client-zone.MyFoldersCtrl', function ($scope, $state, $rootScope, ClientZoneWidgetService,\n                                                       TemplateRootService, $modal, PhotoFolderService,\n                                                       $filter, Notification, $config) {\n\n        $scope.folders = [];\n        $scope.sort = {'date': -1};\n\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n\n        $scope.pagingSettings = {\n            currentPage: 1,\n            pageSize: 10\n        };\n\n        function init() {\n\n            PhotoFolderService.getAll($scope.sort, $scope.pagingSettings).then(function (data) {\n                if (data.data) {\n                    _.each(data.data, function (folder) {\n                        var date = new Date(folder.date);\n                        folder.date = date.getFullYear() + '-' +\n                            ('0' + (date.getMonth() + 1)).slice(-2) + '-' +\n                            ('0' + date.getDate()).slice(-2);\n                    });\n                    $scope.folders = data.data;\n                }\n                if (data.allCount) {\n                    $scope.pagingSettings.total = data.allCount;\n                }\n            }, function (status) {\n                if (status === 403) {\n                    Notification.info($filter('translate')('only_for_logged_users'));\n                    $state.go('login');\n                }\n            });\n        }\n\n        function reload() {\n            PhotoFolderService.getAll($scope.sort, $scope.pagingSettings).then(function (data) {\n                if (data.data) {\n                    $scope.folders = data.data;\n                }\n                if (data.allCount) {\n                    $scope.pagingSettings.total = data.allCount;\n                }\n            }, function (status) {\n                if (status === 403) {\n                    Notification.info($filter('translate')('only_for_logged_users'));\n                    $state.go('login');\n                }\n            });\n        }\n\n        $scope.getNextPage = function (page) {\n            $scope.pagingSettings.currentPage = page;\n            reload();\n        };\n\n        $scope.sortBy = function( sortItem ) {\n            var activeSort = $scope.sort;\n            $scope.sort = {};\n            if( _.first(_.keys(activeSort)) === sortItem ) {\n                $scope.sort[sortItem] = activeSort[sortItem] === 1 ? -1 : 1;\n            } else {\n                $scope.sort[sortItem] = 1;\n            }\n            reload();\n        };\n\n        $scope.changeLimit = function(displayRows) {\n            $scope.pagingSettings.pageSize = displayRows;\n            reload();\n        };\n\n        init();\n\n        $scope.displayPhotoMap = function () {\n\n            var fullwidth = document.createElement('div');\n            fullwidth.className = 'fullwidth-container';\n\n            var map = document.createElement('div');\n            map.id = 'photo-map-global';\n\n            fullwidth.addEventListener('click', function (e) {\n\n                if (e.target == fullwidth) {\n                    fullwidth.parentNode.removeChild(fullwidth);\n                }\n\n            });\n\n            fullwidth.appendChild(map);\n            document.body.appendChild(fullwidth);\n\n\n            function displayMarkers(map) {\n\n                var markers = [];\n\n                for (var i = 0; i < $scope.folders.length; i++) {\n\n                    if( $scope.folders[i].location ){\n                      var marker = new google.maps.Marker({\n\n                          position: {\n                              lat: parseFloat($scope.folders[i].location.lat),\n                              lng: parseFloat($scope.folders[i].location.lng)\n                          },\n                          map: map\n\n                      });\n\n                      marker.folderData = $scope.folders[i];\n                      marker.addListener('click', function( e ){\n\n                          function click(){\n                              $state.go('client-zone-my-photos', {folderid: [this.folderData._id]});\n                              fullwidth.parentNode.removeChild( fullwidth );\n                          }\n\n                          var elem = document.createElement('div');\n                          elem.className = 'folderDataInfo';\n\n                          var titleElem = document.createElement('h3');\n                          titleElem.innerHTML = this.folderData.folderName;\n\n                          var link = document.createElement('a');\n                          link.className = 'btn btn-success';\n                          link.innerHTML = 'Zobacz folder';\n                          link.addEventListener( 'click', click.bind( this ) );\n                      \n                          elem.appendChild( titleElem );\n                          elem.appendChild( link );\n\n                          var infowindow =  new google.maps.InfoWindow({\n                            content: elem,\n                            map: map\n                          });\n\n                          infowindow.open( map, this );\n\n                      }.bind( marker ));\n\n                      markers.push( marker );\n                    }\n\n                    for (var im = 0; im < $scope.folders[i].imageFiles.length; im++) {\n\n                        if ($scope.folders[i].imageFiles[im].location) {\n\n                            var target = 50;\n                            var scale = $scope.folders[i].imageFiles[im].width / target;\n                            var width = target;\n                            var height = $scope.folders[i].imageFiles[im].height / scale;\n\n                            var marker = new google.maps.Marker({\n\n                                position: {\n                                    lat: parseFloat($scope.folders[i].imageFiles[im].location.lat),\n                                    lng: parseFloat($scope.folders[i].imageFiles[im].location.lng)\n                                },\n                                map: map,\n                                icon: {\n                                    url: $scope.folders[i].imageFiles[im].thumbnail,\n                                    scaledSize: new google.maps.Size(width, height)\n                                }\n\n\n                            });\n\n                            marker.folderData = $scope.folders[i];\n\n                            var overlay = {};\n\n                            marker.addListener('click', function( e ){\n\n                                function click(){\n                                    $state.go('client-zone-my-photos', {folderid: [this.folderData._id]});\n                                    fullwidth.parentNode.removeChild( fullwidth );\n                                }\n\n                                var elem = document.createElement('div');\n                                elem.className = 'folderDataInfo';\n\n                                var titleElem = document.createElement('h3');\n                                titleElem.innerHTML = this.folderData.folderName;\n\n                                var link = document.createElement('a');\n                                link.className = 'btn btn-success';\n                                link.innerHTML = 'Zobacz folder';\n                                link.addEventListener( 'click', click.bind( this ) );\n\n                                elem.appendChild( titleElem );\n                                elem.appendChild( link );\n\n                                var infowindow =  new google.maps.InfoWindow({\n                                \tcontent: elem,\n                                \tmap: map\n                                });\n\n                                infowindow.open( map, this );\n\n                            }.bind( marker ));\n\n\n\n                            markers.push(marker);\n\n                        }\n\n                    }\n\n                }\n\n                var markerCluster = new MarkerClusterer(map, markers, {imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m'});\n\n\n            }\n\n\n            if (location.protocol === 'https:') {\n\n                navigator.geolocation.getCurrentPosition(function (position) {\n\n\n                    var pos = {\n                        lat: position.coords.latitude,\n                        lng: position.coords.longitude\n                    };\n\n                    map = new google.maps.Map(document.getElementById('photo-map-global'), {\n                        center: pos,\n                        zoom: 8\n                    });\n\n                    displayMarkers(map);\n\n                });\n\n            } else {\n\n                var mapOptions = {\n                    center: {lat: 0, lng: 0},\n                    zoom: 1,\n                    minZoom: 1\n                };\n\n                map = new google.maps.Map(document.getElementById('photo-map-global'), mapOptions);\n\n                var allowedBounds = new google.maps.LatLngBounds(\n                    new google.maps.LatLng(85, -180),\t// top left corner of map\n                    new google.maps.LatLng(-85, 180)\t// bottom right corner\n                );\n\n                var k = 5.0;\n                var n = allowedBounds.getNorthEast().lat() - k;\n                var e = allowedBounds.getNorthEast().lng() - k;\n                var s = allowedBounds.getSouthWest().lat() + k;\n                var w = allowedBounds.getSouthWest().lng() + k;\n                var neNew = new google.maps.LatLng(n, e);\n                var swNew = new google.maps.LatLng(s, w);\n                var boundsNew = new google.maps.LatLngBounds(swNew, neNew);\n\n                map.fitBounds(boundsNew);\n\n                google.maps.event.addListenerOnce(map, 'bounds_changed', function () {\n\n                    google.maps.event.trigger(map, \"resize\");\n                    map.fitBounds(boundsNew);\n                    displayMarkers(map);\n\n                });\n\n            }\n\n        };\n\n        $scope.addFolder = function () {\n            TemplateRootService.getTemplateUrl(75).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        $scope.functionType = 'add';\n\n                        $scope.save = function () {\n                            var name = $scope.modalForm.folderName;\n                            var description = $scope.modalForm.description;\n                            PhotoFolderService.add(name, description).then(function (data) {\n                                if (data.id !== undefined) {\n                                    $modalInstance.close();\n                                    reload();\n                                    Notification.success($filter('translate')('success'));\n                                }\n                            });\n                        };\n\n                    }\n                });\n            });\n        };\n\n        $scope.createFotobook = function (folder) {\n\n            PhotoFolderService.createPhotobook(folder).then(\n                //ok\n                function (data) {\n                    window.open($rootScope.editorHost + '/?typeID=44&pages=16&formatID=141&1=34&2=19&3=40&4=74&9=119&26=242&loadProject=' + data._id);\n                }\n            );\n        };\n\n        $scope.shareFolderByEmail = function (folder) {\n\n            TemplateRootService.getTemplateUrl(81).then(function (response) {\n\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        $scope.folder = folder;\n\n                        $scope.save = function () {\n\n                            if (_.indexOf(folder.sharedEmails, this.email) > -1) {\n                                Notification.warning($filter('translate')('email_already_sended'));\n                                return;\n                            }\n\n                            PhotoFolderService.emailShare(this.email, folder).then(\n                                function (data) {\n                                    Notification.success($filter('translate')('success'));\n                                    $modalInstance.close();\n                                    reload();\n                                }\n                            );\n\n                        }\n\n                    }\n                });\n\n            });\n\n        };\n\n\n        $scope.folderLocation = function (folder) {\n\n            TemplateRootService.getTemplateUrl(80).then(function (response) {\n\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n\n                    controller: function ($scope, $modalInstance) {\n\n                        var map;\n\n                        $scope.folder = folder;\n\n                        $scope.save = function () {\n\n                            if ($scope.position) {\n                                PhotoFolderService.saveFolderPosition($scope.position, folder).then(\n                                    function () {\n                                        $modalInstance.close();\n                                        Notification.success($filter('translate')('location_saved'));\n                                    }\n                                );\n                            }\n\n                        };\n\n                        $scope.initFolderMap = function () {\n\n                            $scope.position = null;\n                            map = null;\n\n                            if (folder.location) {\n\n                                map = new google.maps.Map(document.getElementById('map-asset'), {\n                                    center: {\n                                        lat: parseFloat(folder.location.lat),\n                                        lng: parseFloat(folder.location.lng)\n                                    },\n                                    zoom: 8\n                                });\n\n                                google.maps.event.addListenerOnce(map, 'bounds_changed', function () {\n                                    google.maps.event.trigger(map, \"resize\");\n                                    map.setCenter({\n                                        lat: parseFloat(folder.location.lat),\n                                        lng: parseFloat(folder.location.lng)\n                                    });\n                                    var marker = new google.maps.Marker({\n                                        position: {\n                                            lat: parseFloat(folder.location.lat),\n                                            lng: parseFloat(folder.location.lng)\n                                        },\n                                        map: map\n\n                                    });\n\n                                    marker.addListener('click', function () {\n\n                                        $scope.photos = folder.imageFiles;\n                                        $scope.actualPhoto = folder.imageFiles[0];\n\n                                        TemplateRootService.getTemplateUrl(88).then(function (response) {\n\n                                            $modal.open({\n                                                templateUrl: response.url,\n                                                scope: $scope,\n                                                size: 'lg',\n                                                controller: function ($scope, $modalInstance) {\n\n                                                    $scope.closeModal = function () {\n                                                        $modalInstance.close();\n                                                    };\n\n                                                    $scope.selectPhoto = function (photo) {\n                                                        $scope.actualPhoto = photo;\n                                                    };\n\n                                                    $scope.nextPhoto = function (photo) {\n                                                        var idx = _.findIndex($scope.photos, {_id: photo._id});\n                                                        if (idx > -1) {\n                                                            if ($scope.photos[idx + 1] !== undefined) {\n                                                                $scope.actualPhoto = $scope.photos[idx + 1];\n                                                            }\n                                                        }\n                                                    };\n\n                                                    $scope.previousPhoto = function (photo) {\n                                                        var idx = _.findIndex($scope.photos, {_id: photo._id});\n                                                        if (idx > -1) {\n                                                            if ($scope.photos[idx - 1] !== undefined) {\n                                                                $scope.actualPhoto = $scope.photos[idx - 1];\n                                                            }\n                                                        }\n                                                    };\n\n                                                    $scope.nextExist = function (photo) {\n                                                        var idx = _.findIndex($scope.photos, {_id: photo._id});\n                                                        if (idx > -1) {\n                                                            if ($scope.photos[idx + 1] !== undefined) {\n                                                                return true;\n                                                            }\n                                                        }\n                                                        return false;\n                                                    };\n\n                                                    $scope.previousExist = function (photo) {\n                                                        var idx = _.findIndex($scope.photos, {_id: photo._id});\n                                                        if (idx > -1) {\n                                                            if ($scope.photos[idx - 1] !== undefined) {\n                                                                return true;\n                                                            }\n                                                        }\n                                                        return false;\n                                                    };\n                                                }\n\n                                            });\n                                        });\n                                    });\n\n                                    map.addListener('click', function (evt) {\n\n                                        $scope.position = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n                                        marker.setPosition({lat: evt.latLng.lat(), lng: evt.latLng.lng()});\n                                        folder.location = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n\n                                    });\n\n                                });\n\n\n                            } else {\n                                if (location.protocol === 'https:') {\n                                    navigator.geolocation.getCurrentPosition(function (position) {\n\n                                        var pos = {\n                                            lat: position.coords.latitude,\n                                            lng: position.coords.longitude\n                                        };\n\n                                        map = new google.maps.Map(document.getElementById('map-asset'), {\n                                            center: pos,\n                                            zoom: 8\n                                        });\n\n                                        var marker = null;\n\n                                        map.addListener('click', function (evt) {\n\n                                            $scope.position = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n                                            folder.location = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n\n                                            if (marker) {\n\n                                                marker.setPosition({lat: evt.latLng.lat(), lng: evt.latLng.lng()});\n\n                                            } else {\n\n                                                marker = new google.maps.Marker({\n                                                    position: {lat: evt.latLng.lat(), lng: evt.latLng.lng()},\n                                                    map: map\n\n                                                });\n\n                                            }\n\n                                        });\n\n                                    });\n                                } else {\n\n                                    var mapOptions = {\n                                        center: {lat: 0, lng: 0},\n                                        zoom: 1,\n                                        minZoom: 1\n                                    };\n\n                                    map = new google.maps.Map(document.getElementById('map-asset'), mapOptions);\n\n                                    var marker = null;\n\n                                    var allowedBounds = new google.maps.LatLngBounds(\n                                        new google.maps.LatLng(85, -180),\t// top left corner of map\n                                        new google.maps.LatLng(-85, 180)\t// bottom right corner\n                                    );\n\n                                    var k = 5.0;\n                                    var n = allowedBounds.getNorthEast().lat() - k;\n                                    var e = allowedBounds.getNorthEast().lng() - k;\n                                    var s = allowedBounds.getSouthWest().lat() + k;\n                                    var w = allowedBounds.getSouthWest().lng() + k;\n                                    var neNew = new google.maps.LatLng(n, e);\n                                    var swNew = new google.maps.LatLng(s, w);\n                                    var boundsNew = new google.maps.LatLngBounds(swNew, neNew);\n\n                                    map.fitBounds(boundsNew);\n\n                                    google.maps.event.addListenerOnce(map, 'bounds_changed', function () {\n\n                                        google.maps.event.trigger(map, \"resize\");\n                                        map.fitBounds(boundsNew);\n\n                                    });\n\n                                    map.addListener('click', function (evt) {\n\n                                        $scope.position = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n                                        folder.location = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n\n                                        if (marker) {\n\n                                            marker.setPosition({lat: evt.latLng.lat(), lng: evt.latLng.lng()});\n\n                                        } else {\n\n                                            marker = new google.maps.Marker({\n                                                position: {lat: evt.latLng.lat(), lng: evt.latLng.lng()},\n                                                map: map\n\n                                            });\n\n                                        }\n\n                                    });\n\n                                }\n\n                            }\n\n                        }\n\n\n                    }\n                });\n\n\n            });\n\n        };\n\n        $scope.editFolder = function (folder) {\n            TemplateRootService.getTemplateUrl(75).then(function (response) {\n\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        $scope.functionType = 'edit';\n                        $scope.modalForm = _.clone(folder);\n\n                        $scope.save = function () {\n                            PhotoFolderService.edit($scope.modalForm).then(function (data) {\n                                if (data._id !== undefined) {\n                                    $modalInstance.close();\n                                    reload();\n                                    Notification.success($filter('translate')('success'));\n                                }\n                            });\n                        };\n                    }\n                });\n\n\n            });\n        };\n\n        $scope.delete = function (folder) {\n            PhotoFolderService.delete(folder).then(function (data) {\n                if (data._id !== undefined) {\n                    var idx = _.findIndex($scope.folders, {_id: data._id});\n                    if (idx > -1) {\n                        $scope.folders.splice(idx, 1);\n                    }\n                }\n            });\n        };\n\n        $scope.shareFolderByFacebook = function (folder) {\n            TemplateRootService.getTemplateUrl(82).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n                        $scope.folder = folder;\n\n\n                        $scope.sendFacebookShareFlag = function (folder) {\n                            PhotoFolderService.facebookShare(folder).then(function (data) {\n                                console.log(data);\n                            });\n                        };\n                    }\n                });\n            });\n        }\n\n    });","start":6,"end":659,"route":null,"symbol":"client-zone.MyFoldersCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPageSizeSelect","PhotoFolderService.getAll","_.each","date.getFullYear","date.getMonth","date.getDate","Notification.info","$filter","$state.go","reload","_.first","_.keys","init","document.createElement","fullwidth.addEventListener","fullwidth.parentNode.removeChild","fullwidth.appendChild","document.body.appendChild","parseFloat","marker.addListener","link.addEventListener","click.bind","elem.appendChild","infowindow.open","markers.push","navigator.geolocation.getCurrentPosition","document.getElementById","displayMarkers","allowedBounds.getNorthEast","allowedBounds.getSouthWest","map.fitBounds","google.maps.event.addListenerOnce","google.maps.event.trigger","TemplateRootService.getTemplateUrl","$modal.open","PhotoFolderService.add","$modalInstance.close","Notification.success","PhotoFolderService.createPhotobook","window.open","_.indexOf","Notification.warning","PhotoFolderService.emailShare","PhotoFolderService.saveFolderPosition","map.setCenter","_.findIndex","map.addListener","evt.latLng.lat","evt.latLng.lng","marker.setPosition","_.clone","PhotoFolderService.edit","PhotoFolderService.delete","$scope.folders.splice","PhotoFolderService.facebookShare","console.log"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":33,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/MyPhotosCtrl.js:6-1147:controller:client-zone.MyPhotosCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/MyPhotosCtrl.js","module":null,"name":"client-zone.MyPhotosCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$state","$filter","Notification","$rootScope","ClientZoneWidgetService","TemplateRootService","$modal","PhotoFolderService","$stateParams","AuthService","$window","$q","CanvasService","$config"],"antiPatterns":[],"text":"    .controller('client-zone.MyPhotosCtrl', function ($scope, $state, $filter, Notification, $rootScope, ClientZoneWidgetService,\n                                                      TemplateRootService, $modal, PhotoFolderService, $stateParams,\n                                                      AuthService, $window, $q, CanvasService, $config) {\n\n        $scope.photos = [];\n        $scope.folder = {};\n        $scope.actualPhoto = {};\n        $scope.sliderOn = false;\n        $scope.slider = {\n            value: 0,\n            options: {\n                floor: -100,\n                ceil: 100\n            }\n        };\n        $scope.slider.type = null;\n        $scope.textOn = false;\n\n        $scope.folderId = $stateParams.folderid;\n\n        $scope.sort = {'name': 1};\n\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n\n        $scope.pagingSettings = {\n            currentPage: 1,\n            pageSize: 10\n        };\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        var featherEditor = new Aviary.Feather({\n            apiKey: '8c01e579a3104458a3bc25345716a10e',\n            apiVersion: 3,\n            language: 'pl',\n            onSave: function(imageID, newURL) {\n                var img = document.getElementById(imageID);\n                img.src = newURL;\n            }\n        });\n\n        function getMeta(url){\n            var deferred = $q.defer();\n\n            var w; var h;\n            var img= new Image();\n            img.src=url;\n            img.onload=function(){\n                w=this.width;\n                h=this.height;\n                deferred.resolve({width: this.width, height: this.height});\n            };\n\n            return deferred.promise;\n        }\n\n        function initCanvas(width, height, url) {\n            var deferred = $q.defer();\n\n            var c = document.createElement('canvas');\n            c.width = width;\n            c.height = height;\n            var ctx = c.getContext(\"2d\");\n            var img = new Image();\n            img.crossOrigin = \"Anonymous\";\n            img.src = url;\n            img.onload = function() {\n                ctx.drawImage(img, 0, 0);\n                deferred.resolve(c);\n            };\n\n            return deferred.promise;\n        }\n\n        $scope.launchEditor = function(photo) {\n\n            if( photo.imageUrl === undefined ) {\n                Notification.warning($filter('translate')('photo_in_prepared'));\n                return;\n            }\n\n            console.log( photo );\n\n            featherEditor.launch({\n                image: 'photo_' + photo._id,\n                url: photo.imageUrl,\n                onSaveButtonClicked: function(imageID) {\n                    console.log(imageID);\n                },\n                onSave: function(imageID, newURL) {\n\n                    getMeta(newURL).then( function(metaImg) {\n                        var sequences = [];\n\n                        sequences.push(getMeta(photo.thumbnail));\n                        sequences.push(getMeta(photo.minUrl));\n                        sequences.push(initCanvas(metaImg.width, metaImg.height, newURL));\n\n                        $q.all(sequences).then(\n                            function (results) {\n                                var thumbSize = results[0];\n                                var minSize = results[1];\n                                var canvas = results[2];\n\n                                var mainSize = {\n                                    width: metaImg.width,\n                                    height: metaImg.height\n                                };\n\n                                console.log(thumbSize, minSize, mainSize);\n                                console.log( canvas.width, canvas.height );\n\n                                PhotoFolderService.savePhoto(photo._id, canvas.toDataURL(), thumbSize, minSize, mainSize).then(function(data) {\n                                    $scope.savePreload = false;\n                                    if( data.EditedUpload ) {\n                                        photo = data;\n                                        var photoIndex = _.findIndex($scope.photos, {_id: data._id});\n                                        if( photoIndex > -1 ) {\n                                            $scope.photos[photoIndex] = data;\n                                        }\n\n                                        Notification.success($filter('translate')('success'));\n                                    } else {\n                                        Notification.error($filter('translate')('error'));\n                                    }\n                                });\n                            }\n                        );\n                    });\n                }\n            });\n            return false;\n        };\n\n        function init() {\n            PhotoFolderService.getPhotos($scope.folderId, $scope.sort, $scope.pagingSettings).then(function (photosData) {\n                $scope.folder = photosData.data;\n                _.each(photosData.data.imageFiles, function(photo) {\n                    fillStarts(photo);\n                });\n                $scope.photos = photosData.data.imageFiles;\n                $scope.actualPhoto = photosData.data.imageFiles[0];\n                $scope.pagingSettings.total = photosData.allCount;\n            }, function (status) {\n                if (status === 403) {\n                    Notification.info($filter('translate')('only_for_logged_users'));\n                    $state.go('login');\n                }\n            });\n\n            var conf = {\n                uploadButton: $window.document.getElementById('uploadButton'),\n                onLoadedItem: onLoadedItem,\n                onUploadedItem: onUploadedItem,\n                onStartUpload: onStartUpload,\n                uploadServerUrl: $config.AUTH_URL + '/userUpload/projectImage'\n            };\n\n            new $window.UploaderStandalone(conf);\n        }\n\n        function fillStarts( photo ) {\n            photo.stars = [];\n            for (var i = 5; i > 0; i--) {\n                photo.stars.push({\n                    filled: i <= photo.averageRate\n                });\n            }\n        }\n\n        function reload() {\n            PhotoFolderService.getPhotos($scope.folderId, $scope.sort, $scope.pagingSettings).then(function (photosData) {\n                $scope.folder = photosData.data;\n                _.each(photosData.data.imageFiles, function(photo) {\n                    fillStarts(photo);\n                });\n                $scope.photos = photosData.data.imageFiles;\n                $scope.actualPhoto = photosData.data.imageFiles[0];\n                $scope.pagingSettings.total = photosData.allCount;\n            }, function (status) {\n                if (status === 403) {\n                    Notification.info($filter('translate')('only_for_logged_users'));\n                    $state.go('login');\n                }\n            });\n        }\n\n        $scope.getNextPage = function (page) {\n            $scope.pagingSettings.currentPage = page;\n            reload();\n        };\n\n        $scope.sortBy = function( sortItem ) {\n            var activeSort = $scope.sort;\n            $scope.sort = {};\n            if( _.first(_.keys(activeSort)) === sortItem ) {\n                $scope.sort[sortItem] = activeSort[sortItem] === 1 ? -1 : 1;\n            } else {\n                $scope.sort[sortItem] = 1;\n            }\n            reload();\n        };\n\n        $scope.changeLimit = function(displayRows) {\n            $scope.pagingSettings.pageSize = displayRows;\n            reload();\n        };\n\n        $scope.selectPhoto = function (photo) {\n            $scope.actualPhoto = photo;\n        };\n\n        $scope.nextPhoto = function (photo) {\n            if( photo === undefined ) {\n                return;\n            }\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if (idx > -1) {\n                if ($scope.photos[idx + 1] !== undefined) {\n                    $scope.actualPhoto = $scope.photos[idx + 1];\n                }\n            }\n        };\n\n        $scope.previousPhoto = function (photo) {\n            if( photo === undefined ) {\n                return;\n            }\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if (idx > -1) {\n                if ($scope.photos[idx - 1] !== undefined) {\n                    $scope.actualPhoto = $scope.photos[idx - 1];\n                }\n            }\n        };\n\n        $scope.nextExist = function (photo) {\n            if( photo === undefined ) {\n                return;\n            }\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if (idx > -1) {\n                if ($scope.photos[idx + 1] !== undefined) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        $scope.previousExist = function (photo) {\n            if( photo === undefined ) {\n                return;\n            }\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if (idx > -1) {\n                if ($scope.photos[idx - 1] !== undefined) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        $scope.addPhoto = function (thumbnail) {\n\n            var def = $q.defer();\n\n            var pushed = $scope.photos.push({uploaded: false, thumbnail: thumbnail, name: 'new'});\n            if (pushed) {\n                var lastIndex = $scope.photos.length - 1;\n                def.resolve(lastIndex);\n            }\n\n            return def.promise;\n\n        };\n\n        $scope.deletePhoto = function (photo) {\n            if (!photo._id) {\n                Notification.warning($filter('translate')('photo_not_yet_uploaded'));\n                return;\n            }\n            PhotoFolderService.deletePhoto($scope.folderId, photo._id).then(function (data) {\n                if (data._id) {\n                    var photoIndex = _.findIndex($scope.photos, {_id: photo._id});\n                    if (photoIndex > -1) {\n                        $scope.photos.splice(photoIndex, 1);\n                        Notification.success($filter('translate')('deleted_successful'));\n                        reload();\n                    }\n                }\n            });\n        };\n\n        $scope.rotate = function (photo, direct) {\n            $scope.sliderOn = false;\n            $scope.textOn = false;\n\n            if (photo.rotate === undefined) {\n                photo.rotate = 0;\n            }\n\n            if (direct === 0) {\n                photo.rotate -= 90;\n            } else {\n                photo.rotate += 90;\n            }\n\n            var canvas = CanvasService.getCanvas();\n            var stage = CanvasService.getStage();\n            var bitmap = CanvasService.getBitmap();\n            var container = CanvasService.getContainer();\n\n            bitmap.regX = bitmap.image.width * 0.5;\n            bitmap.regY = bitmap.image.height * 0.5;\n\n            if (photo.rotate % 180 === 0) {\n                bitmap.x = (bitmap.image.width / 2)*bitmap.scaleX;\n                bitmap.y = (bitmap.image.height / 2)*bitmap.scaleX;\n            } else {\n                bitmap.y = (bitmap.image.width / 2)*bitmap.scaleX;\n                bitmap.x = (bitmap.image.height / 2)*bitmap.scaleX;\n            }\n\n            var width = stage.canvas.width;\n            var height = stage.canvas.height;\n\n            bitmap.rotation = photo.rotate;\n\n            var canvasObject = $window.document.getElementById('photoCanvas');\n            canvasObject.setAttribute('width', height);\n            canvasObject.setAttribute('height', width);\n        };\n\n        $scope.saturation = function (photo) {\n            $scope.sliderOn = true;\n            $scope.textOn = false;\n\n            $scope.slider.options = {\n                floor: -100,\n                ceil: 100\n            };\n\n            $scope.slider.type = 'saturation';\n            var filterSaturation = CanvasService.getFilter('saturation');\n            if( filterSaturation !== undefined ) {\n                $scope.slider.value = filterSaturation.sliderValue;\n            } else {\n                $scope.slider.value = 0;\n            }\n\n            var bitmap = CanvasService.getBitmap();\n            var stage = CanvasService.getStage();\n\n            $scope.$watch('slider.value', function (value) {\n\n                if( $scope.slider.type !== 'saturation' ) {\n                    return;\n                }\n\n                bitmap.uncache();\n\n                var matrix = new createjs.ColorMatrix();\n                matrix.reset();\n                matrix.adjustSaturation(value);\n                CanvasService.setFilter(\n                    'saturation',\n                    new createjs.ColorMatrixFilter(matrix),\n                    value\n                );\n                CanvasService.updateBitmapFilter();\n\n                bitmap.cache(0, 0, bitmap.image.width, bitmap.image.height);\n                bitmap.updateCache();\n            });\n\n        };\n\n        $scope.brightness = function (photo) {\n            $scope.sliderOn = true;\n            $scope.textOn = false;\n\n            $scope.slider.options = {\n                floor: -100,\n                ceil: 100\n            };\n\n            $scope.slider.type = 'brightness';\n\n            var filterBrightness = CanvasService.getFilter('brightness');\n            if( filterBrightness !== undefined ) {\n                $scope.slider.value = filterBrightness.sliderValue;\n            } else {\n                $scope.slider.value = 0;\n            }\n\n            var bitmap = CanvasService.getBitmap();\n            var stage = CanvasService.getStage();\n\n            $scope.$watch('slider.value', function (value) {\n\n                if( $scope.slider.type !== 'brightness' ) {\n                    return;\n                }\n\n                bitmap.uncache();\n\n                var matrix = new createjs.ColorMatrix();\n                matrix.reset();\n                matrix.adjustBrightness(value);\n\n                CanvasService.setFilter(\n                    'brightness',\n                    new createjs.ColorMatrixFilter(matrix),\n                    value\n                );\n                CanvasService.updateBitmapFilter();\n\n                bitmap.cache(0, 0, bitmap.image.width, bitmap.image.height);\n                bitmap.updateCache();\n            });\n\n        };\n\n        $scope.$on('photoTools', function (e, value) {\n            $scope.sliderOn = value;\n        });\n\n        $scope.$on('sendMask',function(event, newMask) {\n\n            var bitmap = CanvasService.getBitmap();\n            var stage = CanvasService.getStage();\n            var container = CanvasService.getContainer();\n            var canvas = CanvasService.getCanvas();\n            var mask = CanvasService.getMask();\n\n            container.removeChild(mask);\n\n            var image = new Image();\n            image.crossOrigin = \"Anonymous\";\n            image.addEventListener('load', addMask);\n            image.src = newMask;\n\n            function addMask(event) {\n\n                CanvasService.setMask(event.target);\n\n                var maskBitmap = new createjs.Bitmap(event.target);\n\n                var scaleX = canvas.width/maskBitmap.image.width;\n                var scaleY = canvas.height/maskBitmap.image.height;\n\n                maskBitmap.scaleX = scaleX;\n                maskBitmap.scaleY = scaleY;\n\n                var maskContainer = new createjs.Container();\n                maskContainer.addChild( maskBitmap );\n\n                maskContainer.cache(0, 0,canvas.width, canvas.height, 1/bitmap.scaleX);\n\n                CanvasService.setFilter('mask', new createjs.AlphaMapFilter(maskContainer.cacheCanvas));\n                CanvasService.updateBitmapFilter();\n\n                bitmap.cache(0, 0, bitmap.image.width, bitmap.image.height);\n                bitmap.updateCache();\n            }\n\n        });\n\n        $scope.editPhoto = function (photo) {\n\n            AdobeCreativeSDK.init({\n                /* 2) Add your Client ID (API Key) */\n                clientID: 'ce642ff1bee84680bb61503796cabeb5',\n                onError: function(error) {\n                    if (error.type === AdobeCreativeSDK.ErrorTypes.AUTHENTICATION) {\n                        console.log('You must be logged in to use the Creative SDK');\n                    } else if (error.type === AdobeCreativeSDK.ErrorTypes.GLOBAL_CONFIGURATION) {\n                        console.log( error );\n                        console.log('Please check your configuration');\n                    } else if (error.type === AdobeCreativeSDK.ErrorTypes.SERVER_ERROR) {\n                        console.log('Oops, something went wrong');\n                    }\n                }\n            });\n        };\n\n        $scope.putText = function() {\n            $scope.textOn = !$scope.textOn;\n            $scope.sliderOn = false;\n\n            $scope.saveText = function() {\n\n                var text = new createjs.Text(this.text.value, \"13px Arial\", \"#ffffff\");\n                text.x = this.text.x;\n                text.y = this.text.y;\n                text.textBaseline = \"alphabetic\";\n\n                var container = CanvasService.getContainer();\n                container.addChild(text);\n                showAddedTexts();\n            }\n        };\n\n        function showAddedTexts() {\n\n            var container = CanvasService.getContainer();\n            $scope.childrenText = [];\n\n            _.each(container.children, function(oneChild) {\n                if( oneChild.text !== undefined ) {\n                    $scope.childrenText.push(oneChild);\n                }\n            });\n\n        }\n\n        $scope.removeText = function(text) {\n            var container = CanvasService.getContainer();\n            container.removeChild(text);\n            var index = _.findIndex($scope.childrenText, {id: text.id});\n            if( index > -1 ) {\n                $scope.childrenText.splice(index, 1);\n            }\n        };\n\n        $scope.addMask = function ( photo ) {\n            TemplateRootService.getTemplateUrl(89).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance, $config) {\n\n                        $scope.masks = [];\n                        $scope.currentPage = 1;\n                        $scope.pageSize = 10;\n                        $scope.photo = photo;\n\n                        PhotoFolderService.getMasks().then(function(data) {\n\n                            $scope.masksCount = data.length;\n                            $scope.masks = {};\n                            var page = 1;\n                            _.each(data, function(oneMask, index) {\n                                page = Math.ceil((index+1)/$scope.pageSize);\n\n                                if( $scope.masks[page] === undefined ) {\n                                    $scope.masks[page] = [];\n                                }\n\n                                $scope.masks[page].push(oneMask);\n                            })\n                        });\n\n                        $scope.numberOfPages=function(){\n                            return Math.ceil($scope.masksCount/$scope.pageSize);\n                        };\n\n                        $scope.selectMask = function(photo, mask) {\n                            $scope.$emit('sendMask', mask);\n                            $modalInstance.close();\n                        };\n\n                        $scope.getMaskImage = function(photo, mask) {\n                            var thumbEncodeUrl = encodeURIComponent(photo.thumbnail);\n                            var maskEncodeUrl = encodeURIComponent(mask);\n                            return $config.API_URL + ['dp_views', 'createMask'].join('/') + '?' +  ['photoUrl=' + thumbEncodeUrl, 'maskUrl=' + maskEncodeUrl].join('&');\n                        };\n\n                    }\n                });\n            });\n        };\n\n        $scope.editPhotoLocalisation = function (photo) {\n\n            TemplateRootService.getTemplateUrl(79).then(function (response) {\n\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n\n                    controller: function ($scope, $modalInstance) {\n\n                        // @TODO edit\n                        $scope.photo = photo;\n\n                        $scope.save = function () {\n                            if ($scope.position) {\n                                PhotoFolderService.savePosition($scope.position, photo).then(\n                                    //ok\n                                    function (res) {\n                                        $modalInstance.close();\n                                        Notification.success($filter('translate')('location_saved'));\n                                    }\n                                );\n                            }\n\n                        };\n\n                        $scope.initMap = function () {\n\n                            $scope.position = null;\n\n                            if (photo.location) {\n\n                                var image = new Image();\n\n                                image.onload = function () {\n\n                                    var target = 50;\n                                    var scale = this.width / target;\n                                    var width = target;\n                                    var height = this.height / scale;\n\n                                    var map = new google.maps.Map(document.getElementById('map-asset'), {\n                                        center: {\n                                            lat: parseFloat(photo.location.lat),\n                                            lng: parseFloat(photo.location.lng)\n                                        },\n                                        zoom: 8\n                                    });\n\n                                    var marker = new google.maps.Marker({\n                                        position: {\n                                            lat: parseFloat(photo.location.lat),\n                                            lng: parseFloat(photo.location.lng)\n                                        },\n                                        map: map,\n                                        icon: {url: photo.thumbnail, scaledSize: new google.maps.Size(width, height)},\n\n                                    });\n\n                                    map.addListener('click', function (evt) {\n\n                                        $scope.position = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n                                        photo.location = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n\n                                        if (marker) {\n\n                                            marker.setPosition({lat: evt.latLng.lat(), lng: evt.latLng.lng()});\n\n                                        } else {\n\n                                            var image = new Image();\n                                            image.onload = function () {\n\n                                                var target = 50;\n                                                var scale = this.width / target;\n                                                var width = target;\n                                                var height = this.height / scale;\n\n                                                marker.setPosition({lat: evt.latLng.lat(), lng: evt.latLng.lng()});\n\n                                            };\n\n                                            image.src = photo.thumbnail + \"?_=\" + (new Date().getTime() );\n\n                                        }\n\n                                    });\n\n                                };\n                                image.src = photo.thumbnail + \"?_=\" + (new Date().getTime() );\n\n\n                            } else {\n                                if (location.protocol === 'https:') {\n                                    navigator.geolocation.getCurrentPosition(function (position) {\n\n                                        var pos = {\n                                            lat: position.coords.latitude,\n                                            lng: position.coords.longitude\n                                        };\n\n                                        var map = new google.maps.Map(document.getElementById('map-asset'), {\n                                            center: pos,\n                                            zoom: 8\n                                        });\n\n                                        var marker = null;\n\n                                        map.addListener('click', function (evt) {\n\n                                            $scope.position = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n                                            photo.location = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n\n                                            if (marker) {\n\n                                                marker.setPosition({lat: evt.latLng.lat(), lng: evt.latLng.lng()});\n\n                                            } else {\n\n                                                var image = new Image();\n                                                image.onload = function () {\n\n                                                    var target = 50;\n                                                    var scale = this.width / target;\n                                                    var width = target;\n                                                    var height = this.height / scale;\n\n                                                    marker = new google.maps.Marker({\n                                                        position: {lat: evt.latLng.lat(), lng: evt.latLng.lng()},\n                                                        map: map,\n                                                        icon: {\n                                                            url: photo.thumbnail,\n                                                            scaledSize: new google.maps.Size(width, height)\n                                                        }\n                                                    });\n\n                                                };\n                                                image.src = photo.thumbnail + \"?_=\" + (new Date().getTime() );\n\n                                            }\n\n                                        });\n\n                                    });\n\n                                } else {\n\n                                    var mapOptions = {\n                                        center: new google.maps.LatLng(0, 0),\n                                        zoom: 1,\n                                        minZoom: 1\n                                    };\n\n                                    var map = new google.maps.Map(document.getElementById('map-asset'), mapOptions);\n\n                                    var allowedBounds = new google.maps.LatLngBounds(\n                                        new google.maps.LatLng(85, -180),\t// top left corner of map\n                                        new google.maps.LatLng(-85, 180)\t// bottom right corner\n                                    );\n\n                                    var k = 5.0;\n                                    var n = allowedBounds.getNorthEast().lat() - k;\n                                    var e = allowedBounds.getNorthEast().lng() - k;\n                                    var s = allowedBounds.getSouthWest().lat() + k;\n                                    var w = allowedBounds.getSouthWest().lng() + k;\n                                    var neNew = new google.maps.LatLng(n, e);\n                                    var swNew = new google.maps.LatLng(s, w);\n                                    var boundsNew = new google.maps.LatLngBounds(swNew, neNew);\n                                    map.fitBounds(boundsNew);\n\n                                    google.maps.event.addListenerOnce(map, 'bounds_changed', function () {\n\n                                        google.maps.event.trigger(map, \"resize\");\n                                        map.fitBounds(boundsNew);\n\n                                    });\n\n                                    var marker = null;\n\n                                    map.addListener('click', function (evt) {\n\n                                        $scope.position = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n                                        photo.location = {lat: evt.latLng.lat(), lng: evt.latLng.lng()};\n\n                                        if (marker) {\n\n                                            marker.setPosition({lat: evt.latLng.lat(), lng: evt.latLng.lng()});\n\n                                        } else {\n\n                                            var image = new Image();\n                                            image.onload = function () {\n\n                                                var target = 50;\n                                                var scale = this.width / target;\n                                                var width = target;\n                                                var height = this.height / scale;\n\n                                                marker = new google.maps.Marker({\n                                                    position: {lat: evt.latLng.lat(), lng: evt.latLng.lng()},\n                                                    map: map,\n                                                    icon: {\n                                                        url: photo.thumbnail,\n                                                        scaledSize: new google.maps.Size(width, height)\n                                                    }\n                                                });\n\n                                            };\n                                            image.src = photo.thumbnail + \"?_=\" + (new Date().getTime() );\n\n                                        }\n\n                                    });\n\n                                }\n\n                            }\n\n                        }\n\n                    }\n\n                });\n            });\n\n        };\n\n        $scope.movePhoto = function (folder, photo) {\n            TemplateRootService.getTemplateUrl(78).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    resolve: {\n                        folders: function () {\n                            return PhotoFolderService.getAll({'date': -1}, {currentPage: 1,\n                                pageSize: 50}).then(function (data) {\n                                return data;\n                            }, function (status) {\n                                if (status === 403) {\n                                    $state.go('login');\n                                }\n                            });\n                        }\n                    },\n                    controller: function ($scope, $modalInstance, folders) {\n\n                        $scope.functionType = 'move';\n                        $scope.form = {};\n                        // @TODO move\n                        $scope.photo = photo;\n                        $scope.folders = folders.data;\n\n                        var folderIndex = _.findIndex(folders, {_id: folder._id});\n                        if (folderIndex > -1) {\n                            $scope.form.selectedFolder = folders[folderIndex];\n                        }\n\n                        $scope.save = function (data) {\n\n                            PhotoFolderService.movePhoto($scope.form, folder._id, photo).then(function (data) {\n\n                                var photoIndex = _.findIndex($scope.photos, {_id: photo._id});\n                                if (photoIndex > -1) {\n                                    $scope.photos.splice(photoIndex, 1);\n                                    Notification.success($filter('translate')('moved_successful'));\n                                }\n\n                            });\n\n                        };\n\n                    }\n                });\n            });\n        };\n\n        $scope.copyPhoto = function (folder, photo) {\n            TemplateRootService.getTemplateUrl(78).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    resolve: {\n                        folders: function () {\n                            return PhotoFolderService.getAll({'date': -1}, {currentPage: 1,\n                                pageSize: 50}).then(function (data) {\n                                return data;\n                            }, function (status) {\n                                if (status === 403) {\n                                    $state.go('login');\n                                }\n                            });\n                        }\n                    },\n                    controller: function ($scope, $modalInstance, folders) {\n\n                        $scope.functionType = 'copy';\n                        $scope.form = {};\n                        // @TODO move\n                        $scope.photo = photo;\n                        $scope.folders = folders.data;\n\n                        var folderIndex = _.findIndex(folders, {_id: folder._id});\n                        if (folderIndex > -1) {\n                            $scope.form.selectedFolder = folders[folderIndex];\n                        }\n\n                        $scope.save = function () {\n\n                            PhotoFolderService.copyPhoto($scope.form, photo).then(function (data) {\n\n                                Notification.success($filter('translate')('copied_successful'));\n\n                            });\n\n                        }\n\n\n                    }\n                });\n            });\n        };\n\n        function waitForDom(index) {\n            var def = $q.defer();\n\n            setInterval(function () {\n                if ($window.document.getElementsByClassName('repeatContainer')[index] !== undefined) {\n                    def.resolve(true);\n                }\n            }, 1000);\n\n            return def.promise;\n        }\n\n        function onLoadedItem(data, callback) {\n\n            $scope.addPhoto(data.context.thumbImage).then(function (photoIndex) {\n\n                waitForDom(photoIndex).then(function () {\n                    var image = $window.document.getElementsByClassName('repeatContainer')[photoIndex];\n\n                    image.context = data.context;\n\n                    var uploadProgressBar = $window.document.createElement('div');\n                    uploadProgressBar.className = 'uploadProgress';\n\n                    var uploadProgressBarBorder = $window.document.createElement('div');\n                    uploadProgressBarBorder.className = 'border-bar';\n\n                    uploadProgressBar.appendChild(uploadProgressBarBorder);\n\n                    var uploadProgressBarInner = $window.document.createElement('div');\n                    uploadProgressBarInner.className = 'status';\n                    uploadProgressBarInner.style.position = 'absolute';\n                    uploadProgressBarInner.style.top = 0;\n                    uploadProgressBarInner.style.left = 0;\n                    uploadProgressBarInner.style.width = 0;\n\n                    uploadProgressBarBorder.appendChild(uploadProgressBarInner);\n\n                    image.appendChild(uploadProgressBar);\n\n                    data.context.setElement(image);\n\n                    callback();\n                });\n\n            });\n        }\n\n        function onUploadedItem(contextElement, data) {\n\n            var photoIndex = contextElement.elem.getAttribute('tabindex');\n            $scope.pagingSettings.total++;\n            if( $scope.pagingSettings.total > $scope.pagingSettings.pageSize && $scope.pagingSettings.total % $scope.pagingSettings.pageSize === 1 ) {\n                reload();\n            }\n            $scope.photos[photoIndex] = data;\n        }\n\n        function onStartUpload(data, contextElement) {\n\n            data.append('companyID', $rootScope.companyID);\n            data.append(accessTokenName, AuthService.readCookie(accessTokenName));\n            data.append('folderId', $scope.folder._id);\n\n            return data;\n        }\n\n        $scope.goToLink = function (domainHost, langCode, link, photoId) {\n            location.href = 'https://www.facebook.com/sharer/sharer.php?u=http://' + domainHost + '/' + langCode + '/' + link + '/' + photoId + '&amp;src=sdkpreparse';\n        };\n\n        $scope.sharePhotoByEmail = function (photo) {\n            TemplateRootService.getTemplateUrl(86).then(function (response) {\n\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        $scope.photo = photo;\n\n                        $scope.save = function () {\n\n                            if (_.indexOf(photo.sharedEmails, this.email) > -1) {\n                                Notification.warning($filter('translate')('email_already_sended'));\n                                return;\n                            }\n\n                            PhotoFolderService.emailSharePhoto(this.email, photo).then(\n                                function (status) {\n                                    if( status === 201 ) {\n                                        photo.emailShared = true;\n                                        Notification.success($filter('translate')('success'));\n                                        $modalInstance.close();\n                                    }\n                                }\n                            );\n                        };\n\n                    }\n                });\n\n            });\n\n        };\n\n        $scope.sharePhotoByFacebook = function (photo) {\n            TemplateRootService.getTemplateUrl(87).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n                        $scope.photo = photo;\n\n                        $scope.sendFacebookShareFlag = function (photo) {\n                            PhotoFolderService.facebookSharePhoto(photo).then(function (status) {\n                                if( status === 201 ) {\n                                    photo.facebookShare = true;\n                                    Notification.success($filter('translate')('success'));\n                                    $modalInstance.close();\n                                }\n                            });\n                        };\n                    }\n                });\n            });\n        };\n\n        $scope.addTags = function(photo) {\n\n            TemplateRootService.getTemplateUrl(90).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        $scope.photo = photo;\n\n                        if( photo.tags === undefined ) {\n                            photo.tags = [];\n                        }\n\n                        $scope.saveTag = function() {\n\n                            var tagName = this.name;\n\n                            if (_.indexOf(photo.tags, this.name) > -1) {\n                                Notification.warning($filter('translate')('tag_exist'));\n                                return;\n                            }\n\n                            PhotoFolderService.addTag(photo._id, this.name).then(function(tagData) {\n                                photo.tags.push(tagName);\n                                $scope.name = '';\n                            });\n\n                        };\n\n                        $scope.saveAuthor = function() {\n                            var authorName = this.author;\n\n                            PhotoFolderService.setImageAuthor(authorName, photo._id).then(function() {\n                                photo.autor = authorName;\n                                $scope.author = '';\n                            });\n                        };\n\n                        $scope.savePlace = function() {\n                            var placeName = this.place;\n\n                            PhotoFolderService.setImagePlace(placeName, photo._id).then(function() {\n                                photo.place = placeName;\n                                $scope.place = '';\n                            });\n                        };\n\n                        $scope.savePerson = function() {\n\n                            var personName = this.person;\n\n                            if (_.indexOf(photo.peoples, this.person) > -1) {\n                                Notification.warning($filter('translate')('person_already_assigned'));\n                                return;\n                            }\n\n                            PhotoFolderService.setImagePeoples(this.person, photo._id).then(function() {\n                                photo.peoples.push(personName);\n                                $scope.person = '';\n                            });\n\n                        };\n\n                        $scope.remove = function(photo, tag) {\n                            PhotoFolderService.removeTag(photo._id, tag).then(function(tagData) {\n                                var tagIdx =  _.findIndex(photo.tags, tag);\n                                if( tagIdx > -1 ) {\n                                    photo.tags.splice(tagIdx, 1);\n                                }\n                            });\n                        };\n\n                        $scope.removePerson = function(photo, person) {\n                            //PhotoFolderService.removeTag(photo._id, person).then(function(tagData) {\n                                var personIdx =  _.findIndex(photo.peoples, person);\n                                if( personIdx > -1 ) {\n                                    photo.peoples.splice(personIdx, 1);\n                                }\n                            //});\n                        };\n\n                        $scope.removePlace = function(photo) {\n                            //PhotoFolderService.removeTag(photo._id, place).then(function(tagData) {\n                            photo.place = null;\n                            //});\n                        };\n\n                        $scope.removeAuthor = function(photo) {\n                            //PhotoFolderService.removeTag(photo._id, place).then(function(tagData) {\n                            photo.author = null;\n                            //});\n                        };\n                    }\n                });\n            });\n        };\n\n        $scope.getImageExtension = function(photo, extension) {\n\n            var fileName = photo._id + \".\" + extension;\n            var a = document.createElement(\"a\");\n            document.body.appendChild(a);\n            a.style = \"display: none\";\n            a.href = PhotoFolderService.getUrlImageByExtension(photo._id, extension);\n            a.download = fileName;\n            a.click();\n        };\n\n        init();\n\n    });","start":6,"end":1147,"route":null,"symbol":"client-zone.MyPhotosCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPageSizeSelect","document.getElementById","$q.defer","deferred.resolve","document.createElement","c.getContext","ctx.drawImage","Notification.warning","$filter","console.log","featherEditor.launch","getMeta","sequences.push","initCanvas","$q.all","PhotoFolderService.savePhoto","canvas.toDataURL","_.findIndex","Notification.success","Notification.error","PhotoFolderService.getPhotos","_.each","fillStarts","Notification.info","$state.go","$window.document.getElementById","photo.stars.push","reload","_.first","_.keys","$scope.photos.push","def.resolve","PhotoFolderService.deletePhoto","$scope.photos.splice","CanvasService.getCanvas","CanvasService.getStage","CanvasService.getBitmap","CanvasService.getContainer","canvasObject.setAttribute","CanvasService.getFilter","$scope.$watch","bitmap.uncache","matrix.reset","matrix.adjustSaturation","CanvasService.setFilter","CanvasService.updateBitmapFilter","bitmap.cache","bitmap.updateCache","matrix.adjustBrightness","$scope.$on","CanvasService.getMask","container.removeChild","image.addEventListener","CanvasService.setMask","maskContainer.addChild","maskContainer.cache","AdobeCreativeSDK.init","container.addChild","showAddedTexts","$scope.childrenText.push","$scope.childrenText.splice","TemplateRootService.getTemplateUrl","$modal.open","PhotoFolderService.getMasks","Math.ceil","$scope.masks.page.push","$scope.$emit","$modalInstance.close","encodeURIComponent","PhotoFolderService.savePosition","parseFloat","map.addListener","evt.latLng.lat","evt.latLng.lng","marker.setPosition","navigator.geolocation.getCurrentPosition","allowedBounds.getNorthEast","allowedBounds.getSouthWest","map.fitBounds","google.maps.event.addListenerOnce","google.maps.event.trigger","PhotoFolderService.getAll","PhotoFolderService.movePhoto","PhotoFolderService.copyPhoto","setInterval","$window.document.getElementsByClassName","$scope.addPhoto","waitForDom","$window.document.createElement","uploadProgressBar.appendChild","uploadProgressBarBorder.appendChild","image.appendChild","data.context.setElement","callback","contextElement.elem.getAttribute","data.append","AuthService.readCookie","_.indexOf","PhotoFolderService.emailSharePhoto","PhotoFolderService.facebookSharePhoto","PhotoFolderService.addTag","photo.tags.push","PhotoFolderService.setImageAuthor","PhotoFolderService.setImagePlace","PhotoFolderService.setImagePeoples","photo.peoples.push","PhotoFolderService.removeTag","photo.tags.splice","photo.peoples.splice","document.body.appendChild","PhotoFolderService.getUrlImageByExtension","a.click","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":60,"eventfulness":{"watchers":2,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/MyProjectsCtrl.js:6-316:controller:client-zone.MyProjectsCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/MyProjectsCtrl.js","module":null,"name":"client-zone.MyProjectsCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$state","$rootScope","ClientZoneWidgetService","PsTypeService","EditorProjectService","TemplateRootService","$modal","AuthDataService","$config"],"antiPatterns":[],"text":"    .controller('client-zone.MyProjectsCtrl', function ($scope, $state, $rootScope,\n                                                        ClientZoneWidgetService, PsTypeService, EditorProjectService,\n                                                        TemplateRootService, $modal, AuthDataService, $config ) {\n\n        $scope.projects = [];\n\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n\n        $scope.sort = {'created': -1};\n\n        $scope.pagingSettings = {\n            currentPage: 1,\n            pageSize: 10\n        };\n\n        function init() {\n\n            ClientZoneWidgetService.getProjects($scope.sort, $scope.pagingSettings).then(function (data) {\n\n                var projects = data.data;\n                if (data.allCount) {\n                    $scope.pagingSettings.total = data.allCount;\n                }\n\n                var types = [];\n                _.each(projects, function (oneProject) {\n                    _.each(oneProject.projects, function( subProject ) {\n                        types.push(subProject.typeID);\n                    });\n                });\n                $scope.projects = projects;\n\n                PsTypeService.getTypesData(types).then(function (data) {\n\n                    _.each(data, function (oneTypeData, typeID) {\n                        _.each($scope.projects, function (oneProject) {\n\n                            prepareProjectLink(oneProject);\n\n                            _.each(oneProject.projects, function( subProject ) {\n                                EditorProjectService.getProjectPrev(subProject._id).then(function (prevData) {\n                                    if (prevData && prevData.length > 0) {\n                                        subProject.prevPages = prevData;\n                                    }\n                                });\n\n                                if (subProject.typeID === parseInt(typeID)) {\n                                    subProject.typeInfo = oneTypeData;\n                                }\n                            });\n\n                        });\n                    });\n\n                });\n\n            });\n\n        }\n\n        init();\n\n        function reload() {\n            ClientZoneWidgetService.getProjects($scope.sort, $scope.pagingSettings).then(function (data) {\n\n                var projects = data.data;\n                if( data.allCount ) {\n                    $scope.pagingSettings.total = data.allCount;\n                }\n\n                var types = [];\n                _.each(projects, function(oneProject) {\n                    types.push(oneProject.typeID);\n                });\n                $scope.projects = projects;\n\n                PsTypeService.getTypesData(types).then(function(data) {\n\n                    _.each(data, function(oneTypeData, typeID) {\n                        _.each($scope.projects, function(project) {\n\n                            EditorProjectService.getProjectPrev(project._id).then( function(prevData) {\n                                if( prevData && prevData.length > 0) {\n                                    project.prevPages = prevData;\n                                }\n                            });\n\n                            if( project.typeID === typeID ) {\n                                project.typeInfo = oneTypeData;\n                            }\n                        });\n                    });\n\n                });\n\n            });\n        }\n\n        $scope.getNextPage = function (page) {\n            $scope.pagingSettings.currentPage = page;\n            reload();\n        };\n\n        $scope.sortBy = function( sortItem ) {\n            var activeSort = $scope.sort;\n            $scope.sort = {};\n            if( _.first(_.keys(activeSort)) === sortItem ) {\n                $scope.sort[sortItem] = activeSort[sortItem] === 1 ? -1 : 1;\n            } else {\n                $scope.sort[sortItem] = 1;\n            }\n            reload();\n        };\n\n        $scope.changeLimit = function(displayRows) {\n            $scope.pagingSettings.pageSize = displayRows;\n            reload();\n        };\n\n        $scope.displayFlipBook = function (project) {\n\n            if( project.prevPages === undefined ) {\n                return;\n            }\n\n            var flipbookHolder = document.createElement('div');\n            flipbookHolder.className = 'flipbook-holder';\n\n            var remove = document.createElement('div');\n            remove.className = 'remove-flipbook';\n            remove.innerHTML = 'x';\n\n            var nextPage = document.createElement('div');\n            nextPage.className = 'nextPage-flipbook';\n            nextPage.innerHTML = '<i class=\"fa fa-arrow-right\" aria-hidden=\"true\"></i>';\n\n            var prevPage = document.createElement('div');\n            prevPage.className = 'prevPage-flipbook';\n            prevPage.innerHTML = '<i class=\"fa fa-arrow-left\" aria-hidden=\"true\"></i>';\n\n            flipbookHolder.appendChild(remove);\n            flipbookHolder.appendChild(nextPage);\n            flipbookHolder.appendChild(prevPage);\n\n            document.body.appendChild(flipbookHolder);\n\n\n            var html = '<div id=\"flipbook\">' +\n                '<div class=\"hard\"> Turn.js </div>' +\n                '<div class=\"hard\"></div>';\n\n            for (var i = 0; i < project.prevPages.length; i++) {\n\n                html += '<div class=\"\"><img loading=\"lazy\" ng-src=\"' + project.prevPages[i] + '\"></div>';\n\n            }\n\n            html += '<div class=\"hard\"></div>' +\n                '<div class=\"hard\"></div>' +\n                '</div>';\n\n            flipbookHolder.innerHTML += html;\n\n            var image = new Image();\n            image.onload = function () {\n\n                var width = window.innerWidth * 0.8;\n                var aspect = width / (this.width * 2);\n                var height = this.height * aspect;\n\n                if (height > window.innerHeight) {\n\n                    height = window.innerHeight * 0.8;\n                    aspect = height / this.height;\n                    width = (this.width * 2) * aspect;\n                }\n\n                flipbookHolder.style.paddingTop = (height - window.innerHeight) / 2 + \"px\";\n\n                $(\"#flipbook\").turn({\n                    height: height,\n                    width: width,\n                    autoCenter: true\n                });\n\n                $('.remove-flipbook').on('click', function (e) {\n                    e.stopPropagation();\n                    $(this).parent().remove();\n                });\n\n                $('.nextPage-flipbook').on('click', function (e) {\n                    $(\"#flipbook\").turn('next')\n                });\n\n                $('.prevPage-flipbook').on('click', function (e) {\n                    $(\"#flipbook\").turn(\"previous\");\n                });\n\n                $(document).keyup(function(e) {\n                    if (e.keyCode === 27) {\n                        $(\"#flipbook\").turn(\"destroy\").remove();\n                    }\n                    e.stopPropagation();\n                });\n\n            };\n\n            image.src = project.prevPages[0];\n\n        };\n\n        function prepareProjectLink(project) {\n\n            var result = {\n                typeID: project.typeID,\n                products: [],\n                formats: [],\n                pages: [],\n                attributes: [],\n                loadProject: project._id\n            };\n\n            _.each(project.projects, function(subProject, index) {\n\n                result.products.push(subProject.typeID);\n                result.formats.push(subProject.formatID);\n                result.pages.push(subProject.pages);\n\n                result.attributes[index] = [];\n                _.each(subProject.selectedAttributes, function(optID, attrID) {\n                    result.attributes[index].push(attrID + '-' + optID);\n                });\n\n            });\n\n            project.projectLinkData = result;\n\n        }\n\n        $scope.delete = function (project) {\n\n        };\n\n        $scope.preview = function (project) {\n\n        };\n\n        $scope.shareByEmail = function (project) {\n\n            TemplateRootService.getTemplateUrl(94).then(function (response) {\n\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        $scope.project = project;\n\n                        $scope.save = function () {\n\n                            EditorProjectService.shareMyProject(this.email, project._id).then(\n                                function (data) {\n                                    Notification.success($filter('translate')('success'));\n                                    $modalInstance.close();\n                                }\n                            );\n\n                        }\n\n                    }\n                });\n\n            });\n\n        };\n\n        $scope.shareByFacebook = function(project) {\n\n            TemplateRootService.getTemplateUrl(96).then(function (response) {\n\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope) {\n\n                        $scope.project = project;\n\n                    }\n                });\n\n            });\n\n        };\n        $scope.prepareUrl = function (project) {\n            var products = []\n            var attributes = []\n            var formats = project.projectLinkData.formats\n            var pages = project.projectLinkData.pages\n            _.each(project.projectLinkData.products, function (product) {\n                products.push(product.typeID);\n            })\n            _.each(project.projectLinkData.attributes, function (attr) {\n                attributes.push('[' + attr.join(',') + ']')\n            })\n\n            window.location = $config.EDITOR_URL + '?' + 'typeID=' + project.projectLinkData.typeID + '&formatID=' + project.projectLinkData.formats[0] + '&pages=[' + pages.join(',') + ']&products=[' + products.join(',') + ']&attributes=' + attributes.join(',') + '&formats=[' + formats.join(',') + ']&loadProject=' + project.projectLinkData.loadProject+ '&access-token=' + AuthDataService.getAccessToken();\n        };\n\n    });","start":6,"end":316,"route":null,"symbol":"client-zone.MyProjectsCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPageSizeSelect","ClientZoneWidgetService.getProjects","_.each","types.push","PsTypeService.getTypesData","prepareProjectLink","EditorProjectService.getProjectPrev","parseInt","init","reload","_.first","_.keys","document.createElement","flipbookHolder.appendChild","document.body.appendChild","$","e.stopPropagation","result.products.push","result.formats.push","result.pages.push","result.attributes.index.push","TemplateRootService.getTemplateUrl","$modal.open","EditorProjectService.shareMyProject","Notification.success","$filter","$modalInstance.close","products.push","attributes.push","attr.join","pages.join","products.join","attributes.join","formats.join","AuthDataService.getAccessToken"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":15,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OffersCtrl.js:4-637:controller:client-zone.OffersCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OffersCtrl.js","module":null,"name":"client-zone.OffersCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$q","ClientZoneWidgetService","DpOrderService","AddressService","$filter","DeliveryService","DeliveryWidgetService","TemplateRootService","$modal","CommonService","$config","AuthDataService","FileUploader","ProductFileService","Notification","MainWidgetService","$timeout","PaymentService","AuthService","$state","$stateParams"],"antiPatterns":[],"text":"    .controller('client-zone.OffersCtrl', function ($scope, $rootScope, $q, ClientZoneWidgetService, DpOrderService,\n                                                    AddressService, $filter, DeliveryService, DeliveryWidgetService,\n                                                    TemplateRootService, $modal, CommonService, $config,\n                                                    AuthDataService, FileUploader, ProductFileService, Notification,\n                                                    MainWidgetService, $timeout, PaymentService, AuthService, $state,\n                                                    $stateParams ) {\n\n        $scope.offers = [];\n        $scope.offersCount = 0;\n\n        $scope.pagingSettings = ClientZoneWidgetService.getPagingSettings();\n\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n\n        $scope.addresses = [];\n        $scope.senders = [];\n        $scope.deliveries = [];\n\n        $scope.offerFilters = {\n            showRejected: 0,\n            showExpired: 0,\n            dateFrom: null,\n            dateTo: null\n        };\n\n        var timerId;\n\n        $scope.deliveryAddresses = [];\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        if( $stateParams.offerID ) {\n            $scope.pagingSettings.offerID = $stateParams.offerID;\n        }\n\n        function init() {\n\n            getDeliveries().then(function (deliveries) {\n\n                $scope.deliveries = deliveries;\n\n                getAddress().then(function (allAddress) {\n\n                    $scope.addresses = allAddress.addresses;\n                    checkDeliveriesAddresses();\n\n                    _.each(allAddress.senders, function (item) {\n                        item.name = $filter('translate')(item.name);\n                        $scope.senders.push(item);\n                    });\n\n                    getOffersWithAdditionalData(1).then(function(offers) {\n                            $scope.offers = offers;\n                    });\n\n                    countOffers().then(function (count) {\n                        $scope.pagingSettings.total = count;\n                    });\n\n                });\n\n            });\n\n            ClientZoneWidgetService.offerMessageInfo($scope);\n\n        }\n\n        function getOffersWithAdditionalData(page) {\n            var def = $q.defer();\n\n            getOffers(page).then(function (offersData) {\n                var offers = offersData.offers;\n                _.each(offers, function(offer, index) {\n\n                    offer.payments = [];\n\n                    offer.isCollapsed = true;\n\n                    if( parseInt($scope.pagingSettings.offerID) === offer.ID ) {\n                        offer.isCollapsed = false;\n                    }\n\n                    _.each(offer.products, function (product) {\n\n                        product.deliveryLackOfVolume = 0;\n\n                        DeliveryWidgetService.filterDeliveries($scope, product).then( function(filteredDeliveries) {\n\n                            product.filteredDeliveries = filteredDeliveries;\n\n                            product.addresses[0].addressID = $scope.addresses[0].ID;\n                            product.addresses[0].senderID = $scope.senders[0].type;\n                            product.addresses[0].deliveryID = filteredDeliveries[0].ID;\n                            product.addresses[0].allVolume = product.volume;\n                            if( product.amount > 1 ) {\n                                product.addresses[0].allVolume *= product.amount;\n                            }\n\n                            DeliveryWidgetService.getPkgWeight(product, product.addresses[0], filteredDeliveries);\n\n                        });\n\n\n                    });\n\n                    if( offers.length === (index + 1) ) {\n                        $scope.offersCount = offersData.count;\n                        def.resolve(offers);\n                    }\n                });\n\n            });\n            return def.promise;\n        }\n\n        var getAddress = function () {\n            var def = $q.defer();\n\n            AddressService.getForUser().then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        };\n\n        var getDeliveries = function () {\n            var def = $q.defer();\n\n            DeliveryService.getAll().then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        };\n\n        function getOffers(page) {\n            var def = $q.defer();\n\n            var params = {\n                'isOffer': 1\n            };\n\n            params.showExpired = $scope.offerFilters.showExpired;\n            params.showRejected = $scope.offerFilters.showRejected;\n\n            if($scope.offerFilters.dateFrom && $scope.offerFilters.dateTo){\n                params.dateFrom = ($scope.offerFilters.dateFrom.getTime()/1000);\n                params.dateTo = (($scope.offerFilters.dateTo.getTime()/1000)+(60*60*24));\n            }\n\n            if( $scope.pagingSettings.offerID !== undefined ) {\n                params.ID = $scope.pagingSettings.offerID;\n            }\n\n            params.offset = (page - 1) * $scope.pagingSettings.pageSize;\n            params.limit = $scope.pagingSettings.pageSize;\n\n            DpOrderService.getMyZoneOffers(params).then(function (data) {\n                if(data.count === 0){\n                    $scope.offers = [];\n                }\n                def.resolve(data);\n            }, function () {\n                console.error('fetch error');\n            });\n\n            return def.promise;\n        }\n\n        function countOffers() {\n            var def = $q.defer();\n\n            var params = {\n                'isOffer': 1,\n                'offerStatus': 1\n            };\n\n            if( $scope.pagingSettings.offerID !== undefined ) {\n                params.ID = $scope.pagingSettings.offerID;\n            }\n\n            ClientZoneWidgetService.countOrders(params).then(function (data) {\n                def.resolve(data.count);\n            }, function () {\n                console.error('fetch error');\n            });\n\n            return def.promise;\n        }\n\n        $scope.getFlagClass = function (addresses, addressID) {\n            var selectedAddress = _.find(addresses, {ID: addressID});\n            if (selectedAddress) {\n                return 'flag-icon-' + selectedAddress.countryCode.toLowerCase();\n            }\n            return '';\n        };\n\n        $scope.search = function() {\n            var _timeout;\n\n            _timeout = $timeout(function() {\n                $scope.getNextPage(1);\n                _timeout = null;\n            }, 500);\n        };\n\n        $scope.getNextPage = function (page) {\n            getOffersWithAdditionalData(page).then(function(offers) {\n                $scope.offers = offers;\n            });\n\n            countOffers().then(function (count) {\n                $scope.pagingSettings.total = count;\n            });\n        };\n\n        $scope.uploadFiles = function (product) {\n            TemplateRootService.getTemplateUrl(34).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    backdrop: true,\n                    keyboard: false,\n                    size: 'lg',\n                    resolve: {\n                        allowedExtensions: function () {\n                            return CommonService.getAll().then(function (data) {\n                                var extensions = [];\n                                _.each(data, function(item) {\n                                    extensions.push(item['extension']);\n                                });\n\n                                return extensions;\n\n                            });\n                        }\n                    },\n                    controller: function ($scope, $modalInstance, allowedExtensions) {\n\n                        var header = {};\n                        header[accessTokenName] = AuthDataService.getAccessToken();\n\n                        var uploader = $scope.uploader = new FileUploader({\n                            'url': ProductFileService.getUrl(product.productID),\n                            'headers': header\n                        });\n\n                        uploader.filters.push({\n                            name: 'imageFilter',\n                            fn: function (item, options) {\n                                var itemName = item.name.split('.');\n                                var lastItem = itemName.pop();\n\n                                if (allowedExtensions.indexOf(lastItem) > -1) {\n                                    return true;\n                                }\n                                Notification.warning($filter('translate')('required_ext') + allowedExtensions.join(', '));\n                                return false;\n                            }\n                        });\n\n                        uploader.onAfterAddingAll = function(addedItems) {\n                            uploader.uploadAll();\n                        };\n\n                        uploader.onSuccessItem = function (fileItem, response, status, headers) {\n                            response.file.size = (fileItem._file.size / 1024).toFixed(2);\n\n                            product.fileList.push(response.file);\n                            ProductFileService.makeMiniature(response.file.ID).then(function (responseMiniature) {\n                                if (responseMiniature.response === true) {\n                                    var fileIdx = _.findIndex(product.fileList, { ID: response.file.ID });\n                                    if (fileIdx > -1) {\n                                        product.fileList[fileIdx].minUrl = responseMiniature.minUrl;\n                                        product.fileList[fileIdx].hasMiniature = true;\n                                    }\n                                }\n                            });\n                            product.lastFile = response.file;\n                        };\n\n                        uploader.onCompleteAll = function() {\n                            $modalInstance.close();\n                        };\n\n                        $scope.cancel = function () {\n                            if (uploader.isUploading) {\n                                alert($filter('translate')('uploading_in_progress'));\n                            } else {\n                                $modalInstance.close();\n                            }\n                        }\n                    }\n                });\n            });\n        };\n\n        $scope.removeFile = function (product, file) {\n            ProductFileService.removeFile(product.productID, file.ID).then(function (response) {\n                if (response.response) {\n                    Notification.info($filter('translate')('removed') + ' ' + response.removed_item.name);\n                    product = ClientZoneWidgetService.removeFile(product, file);\n                }\n            });\n        };\n\n        $scope.formatSizeUnits = function (file) {\n            return MainWidgetService.formatSizeUnits(file.size);\n        };\n\n        $scope.separateDelivery = function (product) {\n\n            var newVolume = Number(this.separateVolume);\n\n            if (Number(product.deliveryLackOfVolume) < 0) {\n                product.deliveryLackOfVolume = 0;\n            }\n            if (newVolume <= 0 || _.isNaN(newVolume)) {\n                Notification.error($filter('translate')('enter_volume'));\n                return;\n            }\n\n            var availableVolumes = Number(product.addresses[0].allVolume + product.deliveryLackOfVolume);\n            var diffVolume;\n\n            if (newVolume === availableVolumes) {\n                Notification.error($filter('translate')('enter_less_volume'));\n                return;\n            }\n            if (newVolume > availableVolumes) {\n                diffVolume = newVolume - availableVolumes;\n                Notification.error($filter('translate')('volume_exceeded_by') + ' ' + diffVolume);\n                return;\n            }\n\n            if (newVolume <= product.deliveryLackOfVolume) {\n                product.deliveryLackOfVolume = Number(product.deliveryLackOfVolume - newVolume);\n            } else {\n\n                diffVolume = Number(newVolume - product.deliveryLackOfVolume);\n\n                if (diffVolume === product.addresses[0].allVolume) {\n                    Notification.error($filter('translate')('enter_less_volume'));\n                    return;\n                }\n\n                if (diffVolume > product.addresses[0].allVolume) {\n                    var over = Number(diffVolume - product.addresses[0].allVolume);\n                    Notification.error($filter('translate')('volume_exceeded_by') + ' ' + over);\n                    return;\n                }\n\n                product.deliveryLackOfVolume = 0;\n                if (diffVolume > 0 && diffVolume < product.addresses[0].allVolume) {\n                    product.addresses[0].allVolume = Number(product.addresses[0].allVolume - diffVolume);\n                }\n\n            }\n\n            var newIndex = _.findLast(product.addresses).index + 1;\n            var lastIndex = product.addresses.push({\n                'volume': newVolume, 'allVolume': newVolume, 'index': newIndex\n            }) - 1;\n            product.addresses[lastIndex].deliveryID = product.addresses[0].deliveryID;\n            product.addresses[lastIndex].addressID = product.addresses[0].addressID;\n            product.addresses[lastIndex].senderID = product.addresses[0].senderID;\n\n            $scope.changeVolumes(product);\n        };\n\n        $scope.changeVolumes = function(product) {\n\n            var _timeout;\n\n            var _this = this;\n            if(_timeout){\n                $timeout.cancel(_timeout);\n            }\n\n            var allVolumes = 0;\n            _.each(product.addresses, function(oneAddress) {\n                allVolumes += parseInt(oneAddress.allVolume);\n                DeliveryWidgetService.getPkgWeight(product, oneAddress, product.filteredDeliveries);\n            });\n\n            checkDeliveriesAddresses(product);\n\n            _timeout = $timeout(function(){\n\n                var selectedVolume = product.volume;\n                if( product.amount > 1 ) {\n                    selectedVolume *= product.amount;\n                }\n\n                if( allVolumes > selectedVolume ){\n                    var over = allVolumes - selectedVolume;\n\n                    product.addresses[_this.$index].allVolume -= Number(over);\n                    product.deliveryLackOfVolume = 0;\n\n                    Notification.error($filter('translate')('volume_exceeded_by') + ' ' + over);\n\n                } else if( allVolumes <= selectedVolume ) {\n\n                    product.deliveryLackOfVolume = Number(selectedVolume - allVolumes);\n\n                }\n\n                _timeout = null;\n            },500);\n        };\n\n        $scope.acceptOffer = function(offer) {\n\n\n            getPayments(offer.ID).then(function (paymentsData) {\n\n                offer.paymentsOffset = (4 % paymentsData.length) * 3;\n\n                _.each(paymentsData, function (payment) {\n                    if (payment.deferredPayment && payment.creditLimit) {\n                        payment.tooltipInfo = $filter('translate')(payment.infoForUser) + ' ' + payment.creditLimit\n                            + '/' + payment.unpaidValue + ' ' + payment.baseCurrency;\n                    } else {\n                        payment.tooltipInfo = $filter('translate')('no_credit_limit');\n                    }\n                });\n\n                offer.payments = paymentsData;\n\n            });\n\n        };\n\n        $scope.paymentConfirm = function (offer, paymentID) {\n\n            var paymentIdx = _.findIndex(offer.payments, {ID: paymentID});\n\n            if( paymentIdx > -1 ) {\n                var payment = offer.payments[paymentIdx];\n\n                if( payment.deferredPayment && !payment.creditLimit ) {\n                    Notification.error($filter('translate')('no_credit_limit'));\n                    return;\n                }\n\n                if( payment.limitExceeded ) {\n                    Notification.error($filter('translate')('credit_limit_exceeded') + ' - ' +\n                        payment.creditLimit + '/' +  payment.unpaidValue + ' ' + payment.baseCurrency );\n                    return;\n                }\n            }\n\n            offer.preventPayment = true;\n\n            doConfirmation(offer);\n\n        };\n\n        function doConfirmation(offer) {\n\n            prepareProductsForOffer(offer).then( function(preparedData) {\n\n                preparedData.paymentID = offer.paymentID;\n\n                DpOrderService.acceptOffer(preparedData).then( function(data) {\n\n                    if (data.payment.status) {\n                        if (data.payment.status.statusCode === \"SUCCESS\" && data.payment.operator == 'payu') {\n\n                            AuthService.cleanSession().then(function () {\n                                $rootScope.carts = [];\n                                $rootScope.orderID = null;\n                                window.location.href = data.payment.redirectUri;\n                            });\n                        } else if(data.payment.status === 'NEW' && data.payment.operator == 'tinkoff') {\n\n                            AuthService.cleanSession().then(function () {\n                                $rootScope.carts = [];\n                                $rootScope.orderID = null;\n                                window.location.href = data.payment.url;\n                            });\n                        } else {\n                            Notification.error($filter('translate')('payment_rejected'));\n                        }\n                    } else {\n                        AuthService.cleanSession().then(function (data) {\n                            $rootScope.carts = [];\n                            $rootScope.orderID = null;\n                            $state.go('cartVerify', {orderid: offer.ID});\n                        });\n\n                    }\n\n                });\n\n            });\n        }\n\n        $scope.rejectOffer = function (offer) {\n\n            var data = {};\n            data.orderID = offer.ID;\n\n            DpOrderService.rejectOffer(data).then( function(data) {\n\n                var idx = _.findIndex($scope.offers, {ID: offer.ID});\n                if( idx > -1 ) {\n                    $scope.offers.splice(idx, 1);\n                    Notification.info($filter('translate')('offer_rejected'));\n                }\n\n            });\n        };\n\n        function prepareProductsForOffer(offer) {\n            var def = $q.defer();\n\n            var preparedData = {\n                orderID: offer.ID,\n                products: []\n            };\n\n            _.each(offer.products, function(product, index) {\n\n                if( preparedData.products[index] === undefined ) {\n                    preparedData.products[index] = {};\n                }\n\n                preparedData.products[index].productID = product.productID;\n                preparedData.products[index].calcID = product.calcID;\n\n\n                if( preparedData.products[index].addresses === undefined ) {\n                    preparedData.products[index].addresses = [];\n                }\n\n                preparedData.products[index].addresses = product.addresses;\n\n                if( offer.products.length === (index + 1) ) {\n                    def.resolve(preparedData);\n                }\n\n            });\n\n            return def.promise;\n        }\n\n        var getPayments = function (orderID) {\n            var def = $q.defer();\n\n            PaymentService.getAll(orderID).then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        };\n\n        $scope.messages = function (offer) {\n            ClientZoneWidgetService.orderMessages($scope, offer, 'offer');\n        };\n\n        $scope.selectMultiOffer = function(product, singleMultiOffer, offerID) {\n            var sendData = {};\n            sendData.productID = product.productID;\n            sendData.calcID = singleMultiOffer.calcID;\n            DpOrderService.changeMultiOffer(sendData).then(function(data){\n                if(data.response == true){\n                    getOffersWithAdditionalData(1).then(function(offers) {\n                        var fileIdx = _.findIndex(offers, {ID: offerID});\n                        if( fileIdx > -1 ) {\n                            offers[fileIdx].isCollapsed = false;\n                        }\n                        $scope.offers = offers;\n                        Notification.success($filter('translate')('offer_changed'));\n                   });\n                }else{\n                    Notification.error($filter('translate')('error'));\n                }\n            });\n        };\n\n        function checkDeliveriesAddresses(product){\n            $scope.deliveryAddresses = $scope.addresses;\n            if(!product){\n                return;\n            }\n            var deliveryID = product.addresses[0].deliveryID;\n            var findIdx = _.findIndex(product.filteredDeliveries, {ID: deliveryID});\n            if(product.filteredDeliveries[findIdx].collectionPoints){\n                $scope.deliveryAddresses = [];\n                _.forEach( product.filteredDeliveries[findIdx].collectionPoints, function (item) {\n                    var collectionPointAddress = {\n                        ID: item.ID,\n                        addressName: item.value\n                    };\n                    $scope.deliveryAddresses.push(collectionPointAddress);\n                });\n                product.addresses[0].addressID = $scope.deliveryAddresses[0].ID;\n            }\n        }\n\n        $scope.filterOffers = function(){\n           init();\n        }\n\n        $scope.filterOffersDate = function(){\n            if($scope.offerFilters.dateFrom && $scope.offerFilters.dateTo){\n               init();\n            }\n         }\n\n         $scope.clearFilters = function(){\n            $scope.pagingSettings.offerID = null;\n            $scope.offerFilters = {\n                showRejected: 0,\n                showExpired: 0,\n                dateFrom: null,\n                dateTo: null\n            };\n            init();\n         }\n\n        $scope.filterOffersText = function () {\n            clearTimeout(timerId);\n            timerId = setTimeout(function () {\n                init();\n            }, 1000);\n        };\n\n        init();\n\n    });","start":4,"end":637,"route":null,"symbol":"client-zone.OffersCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPagingSettings","ClientZoneWidgetService.getPageSizeSelect","getDeliveries","getAddress","checkDeliveriesAddresses","_.each","$filter","$scope.senders.push","getOffersWithAdditionalData","countOffers","ClientZoneWidgetService.offerMessageInfo","$q.defer","getOffers","parseInt","DeliveryWidgetService.filterDeliveries","DeliveryWidgetService.getPkgWeight","def.resolve","AddressService.getForUser","DeliveryService.getAll","$scope.offerFilters.dateFrom.getTime","$scope.offerFilters.dateTo.getTime","DpOrderService.getMyZoneOffers","console.error","ClientZoneWidgetService.countOrders","_.find","selectedAddress.countryCode.toLowerCase","$timeout","$scope.getNextPage","TemplateRootService.getTemplateUrl","$modal.open","CommonService.getAll","extensions.push","AuthDataService.getAccessToken","ProductFileService.getUrl","uploader.filters.push","item.name.split","itemName.pop","allowedExtensions.indexOf","Notification.warning","allowedExtensions.join","uploader.uploadAll","product.fileList.push","ProductFileService.makeMiniature","_.findIndex","$modalInstance.close","alert","ProductFileService.removeFile","Notification.info","ClientZoneWidgetService.removeFile","MainWidgetService.formatSizeUnits","Number","_.isNaN","Notification.error","_.findLast","product.addresses.push","$scope.changeVolumes","$timeout.cancel","getPayments","doConfirmation","prepareProductsForOffer","DpOrderService.acceptOffer","AuthService.cleanSession","$state.go","DpOrderService.rejectOffer","$scope.offers.splice","PaymentService.getAll","ClientZoneWidgetService.orderMessages","DpOrderService.changeMultiOffer","Notification.success","_.forEach","$scope.deliveryAddresses.push","init","clearTimeout","setTimeout"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":51,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersCtrl.js:4-299:controller:client-zone.OrdersCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersCtrl.js","module":null,"name":"client-zone.OrdersCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","DeliveryWidgetService","$config","$modal","$state","ClientZoneWidgetService","FileUploader","ProductFileService","AuthDataService","$filter","Notification","TemplateRootService","InvoiceService","MainWidgetService","DpProductService","CommonService","CartWidgetService"],"antiPatterns":[],"text":"    .controller('client-zone.OrdersCtrl', function ($scope, $rootScope, DeliveryWidgetService, $config, $modal, $state,\n                                                    ClientZoneWidgetService, FileUploader, ProductFileService,\n                                                    AuthDataService, $filter, Notification, TemplateRootService,\n                                                    InvoiceService, MainWidgetService, DpProductService, CommonService, CartWidgetService) {\n\n        $scope.isCollapsed = false;\n        $scope.statuses = [];\n        $scope.deliveries = [];\n        $scope.addresses = [];\n        $scope.senders = [];\n        $scope.orders = [];\n        $scope.firstStatus = {};\n\n        $scope.orderFilters = {\n            dateFrom: null,\n            dateTo: null,\n            text: null\n        };\n        var timerId;\n\n        $scope.pagingSettings = ClientZoneWidgetService.getPagingSettings();\n\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        function init() {\n            ClientZoneWidgetService.getStatuses().then(function (statuses) {\n                $scope.statuses = statuses;\n                $scope.firstStatus = _.find(statuses, {type: 1});\n                ClientZoneWidgetService.clearParams();\n                ClientZoneWidgetService.addParam('statusTypeList', [0, 1].join(','));\n\n                if($scope.orderFilters.dateFrom && $scope.orderFilters.dateTo){\n                    ClientZoneWidgetService.addParam('dateFrom', ($scope.orderFilters.dateFrom.getTime()/1000));\n                    ClientZoneWidgetService.addParam('dateTo', (($scope.orderFilters.dateTo.getTime()/1000)+(60*60*24)));\n                }\n\n                if($scope.orderFilters.text){\n                    ClientZoneWidgetService.addParam('ID', $scope.orderFilters.text);\n                }\n\n                ClientZoneWidgetService.getCommonData(statuses).then(function (commonData) {\n                    $scope.deliveries = commonData.deliveries;\n                    $scope.addresses = commonData.addresses;\n                    $scope.senders = commonData.senders;\n                    $scope.pagingSettings.total = commonData.count;\n                    commonData.orders = ClientZoneWidgetService.mergeFiles(commonData.orders);\n                    $scope.orders = commonData.orders;\n                });\n            });\n\n            ClientZoneWidgetService.orderMessageInfo($scope);\n        }\n\n        $rootScope.$on('productFileChanged', function () {\n            init();\n        });\n        $scope.getNextPage = function (page) {\n            var params = {'statusTypeList': '0,1'};\n            params.offset = (page - 1) * $scope.pagingSettings.pageSize;\n            params.limit = $scope.pagingSettings.pageSize;\n            ClientZoneWidgetService.getOrders($scope.statuses, params).then(function (ordersData) {\n                ordersData = ClientZoneWidgetService.mergeFiles(ordersData);\n                $scope.orders = ordersData;\n            });\n        };\n\n        $scope.showDelivery = function (order, product) {\n\n            TemplateRootService.getTemplateUrl(104).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $rootScope, $modalInstance) {\n\n                        $scope.addresses = [];\n\n                        _.each(order.addresses, function (oneAddress) {\n                            if (oneAddress.productID === product.productID) {\n                                $scope.addresses.push(oneAddress);\n                            }\n                        });\n\n                        $scope.cancel = function () {\n                            $modalInstance.close();\n                        }\n                    }\n                });\n            });\n        };\n\n        $scope.uploadFiles = function (product) {\n            TemplateRootService.getTemplateUrl(34).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    backdrop: true,\n                    keyboard: false,\n                    size: 'lg',\n                    resolve: {\n                        allowedExtensions: function () {\n                            return CommonService.getAll().then(function (data) {\n                                var extensions = [];\n                                _.each(data, function(item) {\n                                    extensions.push(item['extension']);\n                                });\n\n                                return extensions;\n\n                            });\n                        }\n                    },\n                    controller: function ($scope, $modalInstance, allowedExtensions) {\n\n                        var header = {};\n                        header[accessTokenName] = AuthDataService.getAccessToken();\n\n                        var uploader = $scope.uploader = new FileUploader({\n                            'url': ProductFileService.getUrl(product.productID),\n                            'headers': header\n                        });\n\n                        uploader.filters.push({\n                            name: 'imageFilter',\n                            fn: function (item, options) {\n                                var itemName = item.name.split('.');\n                                var lastItem = itemName.pop().toLowerCase();\n\n                                if (allowedExtensions.indexOf(lastItem) > -1) {\n                                    return true;\n                                }\n                                Notification.warning($filter('translate')('required_ext') + allowedExtensions.join(', '));\n                                return false;\n                            }\n                        });\n\n                        uploader.onAfterAddingAll = function(addedItems) {\n                            uploader.uploadAll();\n                        };\n\n                        uploader.onSuccessItem = function (fileItem, response, status, headers) {\n                            response.file.size = (fileItem._file.size / 1024).toFixed(2);\n                            product.fileList.push(response.file);\n                            ProductFileService.makeMiniature(response.file.ID).then(function(responseMiniature) {\n                                if( responseMiniature.response === true) {\n                                    var fileIdx = _.findIndex(product.fileList, {ID: response.file.ID});\n                                    if( fileIdx > -1 ) {\n                                        product.fileList[fileIdx].minUrl = responseMiniature.minUrl;\n                                        product.fileList[fileIdx].hasMiniature = true;\n                                    }\n                                }\n                            });\n                            product.lastFile = response.file;\n                        };\n\n                        uploader.onCompleteAll = function() {\n                            $modalInstance.close();\n                        };\n\n                        $scope.cancel = function () {\n                            if (uploader.isUploading) {\n                                alert($filter('translate')('uploading_in_progress'));\n                            } else {\n                                $modalInstance.close();\n                            }\n                        }\n                    }\n                });\n            });\n        };\n\n        $scope.removeFile = function (product, file) {\n            ProductFileService.removeFile(product.productID, file.ID).then(function (response) {\n                if (response.response) {\n                    Notification.info($filter('translate')('removed') + ' ' + response.removed_item.name);\n                    product = ClientZoneWidgetService.removeFile(product, file);\n                }\n            });\n        };\n\n        $scope.doPayment = function (order) {\n            ClientZoneWidgetService.doPayment($scope, order);\n        };\n\n        $scope.changeLimit = function (newLimit) {\n            $scope.pagingSettings.pageSize = newLimit;\n            $scope.getNextPage(1);\n        };\n\n        $scope.getOrderInvoice = function (order) {\n            InvoiceService.getForUser(order.ID).then(function (data) {\n                var fileName = \"invoice_\" + order.ID + \".pdf\";\n                var a = document.createElement(\"a\");\n                document.body.appendChild(a);\n                a.style = \"display: none\";\n                var file = new Blob([data], {type: 'application/pdf'});\n                var fileURL = window.URL.createObjectURL(file);\n                a.href = fileURL;\n                a.download = fileName;\n                a.click();\n            });\n            return true;\n        };\n\n        $scope.messages = function (order) {\n            ClientZoneWidgetService.orderMessages($scope, order, 'order');\n        };\n\n        $scope.deleteProduct = function (order, product) {\n\n            DpProductService.delete(product).then(function (data) {\n                if (data.response === true) {\n\n                    var idx = _.findIndex(order.products, {ID: product.ID});\n                    if (idx > -1) {\n                        Notification.success($filter('translate')('deleted_successful'));\n                        order.products.splice(idx, 1);\n                    }\n\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            });\n        };\n\n        $scope.restoreAccept = function (product) {\n\n            var newFiles = product.fileList.filter(function( obj ) {\n                return 0 === parseInt(obj.accept);\n            });\n\n            if( newFiles.length === 0 ) {\n                Notification.warning($filter('translate')('should_upload_corrected_files'));\n                return;\n            }\n\n            DpProductService.restoreAccept(product.productID).then(function (data) {\n                if (data.response === true) {\n\n                    product.fileList = product.fileList.filter(function( obj ) {\n                        return -1 !== parseInt(obj.accept);\n                    });\n                    product.accept = 0;\n                    Notification.success($filter('translate')('saved_message'));\n\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            });\n\n        };\n\n        $scope.acceptReport=function( product, file ){\n            ClientZoneWidgetService.acceptReport(product, file, $scope);\n        };\n\n        $scope.rejectReport=function( product, file ){\n            ClientZoneWidgetService.rejectReport(product, file, $scope);\n        };\n\n        $scope.copyProduct = function(product, order) {\n            order.addressID = order.orderAddressID;\n            product.addresses=_.clone(order.addresses)\n            CartWidgetService.copyProduct($scope, product, false, true);\n        };\n\n         $scope.filterOrdersDate = function(){\n             if($scope.orderFilters.dateFrom && $scope.orderFilters.dateTo){\n                init();\n             }\n          }\n\n          $scope.filterOrders = function(){\n            init();\n         }\n\n         $scope.filterOrdersText = function () {\n            clearTimeout(timerId);\n            timerId = setTimeout(function () {\n                init();\n            }, 1000);\n        };\n\n          $scope.clearFilters = function(){\n             $scope.orderFilters = {\n                 dateFrom: null,\n                 dateTo: null,\n                 text: null\n             };\n             init();\n          }\n\n        init();\n    });","start":4,"end":299,"route":null,"symbol":"client-zone.OrdersCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPagingSettings","ClientZoneWidgetService.getPageSizeSelect","ClientZoneWidgetService.getStatuses","_.find","ClientZoneWidgetService.clearParams","ClientZoneWidgetService.addParam","$scope.orderFilters.dateFrom.getTime","$scope.orderFilters.dateTo.getTime","ClientZoneWidgetService.getCommonData","ClientZoneWidgetService.mergeFiles","ClientZoneWidgetService.orderMessageInfo","$rootScope.$on","init","ClientZoneWidgetService.getOrders","TemplateRootService.getTemplateUrl","$modal.open","_.each","$scope.addresses.push","$modalInstance.close","CommonService.getAll","extensions.push","AuthDataService.getAccessToken","ProductFileService.getUrl","uploader.filters.push","item.name.split","itemName.pop","allowedExtensions.indexOf","Notification.warning","$filter","allowedExtensions.join","uploader.uploadAll","product.fileList.push","ProductFileService.makeMiniature","_.findIndex","alert","ProductFileService.removeFile","Notification.info","ClientZoneWidgetService.removeFile","ClientZoneWidgetService.doPayment","$scope.getNextPage","InvoiceService.getForUser","document.createElement","document.body.appendChild","window.URL.createObjectURL","a.click","ClientZoneWidgetService.orderMessages","DpProductService.delete","Notification.success","order.products.splice","Notification.error","product.fileList.filter","parseInt","DpProductService.restoreAccept","ClientZoneWidgetService.acceptReport","ClientZoneWidgetService.rejectReport","_.clone","CartWidgetService.copyProduct","clearTimeout","setTimeout"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":16,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["order"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersCtrl.js:233-235:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["obj"],"antiPatterns":[],"text":"            var newFiles = product.fileList.filter(function( obj ) {\n                return 0 === parseInt(obj.accept);\n            });","start":233,"end":235,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["product.fileList.filter","parseInt"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":16,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersCtrl.js:245-247:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["obj"],"antiPatterns":[],"text":"                    product.fileList = product.fileList.filter(function( obj ) {\n                        return -1 !== parseInt(obj.accept);\n                    });","start":245,"end":247,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["product.fileList.filter","parseInt"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":16,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersFinishedCtrl.js:6-310:controller:client-zone.OrdersFinishedCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersFinishedCtrl.js","module":null,"name":"client-zone.OrdersFinishedCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","DeliveryWidgetService","$config","$modal","ClientZoneWidgetService","FileUploader","ProductFileService","AuthDataService","$filter","Notification","TemplateRootService","InvoiceService","MainWidgetService","DpProductService","CommonService"],"antiPatterns":[],"text":"    .controller('client-zone.OrdersFinishedCtrl', function ( $scope, $rootScope,\n                                                            DeliveryWidgetService, $config, $modal,\n                                                            ClientZoneWidgetService, FileUploader, ProductFileService,\n                                                             AuthDataService, $filter, Notification, TemplateRootService,\n                                                             InvoiceService, MainWidgetService, DpProductService,\n                                                             CommonService) {\n\n\n        $scope.isCollapsed = true;\n        $scope.statuses = [];\n        $scope.deliveries = [];\n        $scope.addresses = [];\n        $scope.senders = [];\n        $scope.orders = [];\n        $scope.firstStatus = {};\n\n        $scope.pagingSettings = ClientZoneWidgetService.getPagingSettings();\n\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        function init() {\n            ClientZoneWidgetService.getStatuses().then(function (statuses) {\n                $scope.statuses = statuses;\n                $scope.firstStatus = _.find(statuses, {type: 1});\n                ClientZoneWidgetService.clearParams();\n                ClientZoneWidgetService.addParam('statusType', 2);\n                ClientZoneWidgetService.getCommonData(statuses).then( function(commonData) {\n                    $scope.deliveries = commonData.deliveries;\n                    $scope.addresses = commonData.addresses;\n                    $scope.senders = commonData.senders;\n                    $scope.pagingSettings.total = commonData.count;\n                    commonData.orders = ClientZoneWidgetService.mergeFiles(commonData.orders);\n                    $scope.orders = commonData.orders;\n                });\n            });\n\n            ClientZoneWidgetService.orderMessageInfo($scope);\n        }\n\n        $scope.getNextPage = function( page ) {\n            var params = {'statusType': 2};\n            params.offset = (page-1)*$scope.pagingSettings.pageSize;\n            params.limit = $scope.pagingSettings.pageSize;\n            ClientZoneWidgetService.getOrders($scope.statuses, params).then( function(ordersData) {\n                ordersData = ClientZoneWidgetService.mergeFiles(ordersData);\n                $scope.orders = ordersData;\n            });\n        };\n\n        $scope.showDelivery = function (order, product) {\n            TemplateRootService.getTemplateUrl(104).then(function (response) {\n                $modal.open({\n                    templateUrl: $config.API_URL + 'templates/getFile/' + '67' + '?companyID=' + $rootScope.companyID,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $rootScope, $modalInstance) {\n\n                        $scope.addresses = [];\n\n                        _.each(order.addresses, function(oneAddress) {\n                            if(oneAddress.productID === product.productID) {\n                                $scope.addresses.push(oneAddress);\n                            }\n                        });\n\n                        $scope.cancel = function () {\n                            $modalInstance.close();\n                        }\n\n                    }\n                });\n            });\n        };\n\n        $scope.uploadFiles = function (product) {\n            TemplateRootService.getTemplateUrl(34).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    backdrop: true,\n                    keyboard: false,\n                    size: 'lg',\n                    resolve: {\n                        allowedExtensions: function () {\n                            return CommonService.getAll().then(function (data) {\n                                var extensions = [];\n                                _.each(data, function(item) {\n                                    extensions.push(item['extension']);\n                                });\n\n                                return extensions;\n\n                            });\n                        }\n                    },\n                    controller: function ($scope, $modalInstance, allowedExtensions) {\n\n                        var header = {};\n                        header[accessTokenName] = AuthDataService.getAccessToken()\n\n                        var uploader = $scope.uploader = new FileUploader({\n                            'url': ProductFileService.getUrl(product.productID),\n                            'headers': header\n                        });\n\n                        uploader.filters.push({\n                            name: 'imageFilter',\n                            fn: function (item, options) {\n                                var itemName = item.name.split('.');\n                                var lastItem = itemName.pop().toLowerCase();\n\n                                if (allowedExtensions.indexOf(lastItem) > -1) {\n                                    return true;\n                                }\n                                Notification.warning($filter('translate')('required_ext') + allowedExtensions.join(', '));\n                                return false;\n                            }\n                        });\n\n                        uploader.onAfterAddingAll = function(addedItems) {\n                            uploader.uploadAll();\n                        };\n\n                        uploader.onSuccessItem = function (fileItem, response, status, headers) {\n                            response.file.size = (fileItem._file.size / 1024).toFixed(2);\n                            product.fileList.push(response.file);\n                            ProductFileService.makeMiniature(response.file.ID).then(function(responseMiniature) {\n                                if( responseMiniature.response === true) {\n                                    var fileIdx = _.findIndex(product.fileList, {ID: response.file.ID});\n                                    if( fileIdx > -1 ) {\n                                        product.fileList[fileIdx].minUrl = responseMiniature.minUrl;\n                                        product.fileList[fileIdx].hasMiniature = true;\n                                    }\n                                }\n                            });\n                            product.lastFile = response.file;\n                        };\n\n                        uploader.onCompleteAll = function() {\n                            $modalInstance.close();\n                        };\n\n                        $scope.cancel = function () {\n                            if (uploader.isUploading) {\n                                alert($filter('translate')('uploading_in_progress'));\n                            } else {\n                                $modalInstance.close();\n                            }\n                        }\n                    }\n                });\n            });\n        };\n\n        $scope.removeFile = function (product, file) {\n            ProductFileService.removeFile(product.productID, file.ID).then(function (response) {\n                if (response.response) {\n                    Notification.info($filter('translate')('removed') + ' ' + response.removed_item.name);\n                    product = ClientZoneWidgetService.removeFile(product, file);\n                }\n            });\n        };\n\n        $scope.doPayment = function (order) {\n            TemplateRootService.getTemplateUrl(72).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    backdrop: true,\n                    keyboard: false,\n                    size: 'lg',\n                    controller: function ($scope, $modalInstance) {\n\n                        order = ClientZoneWidgetService.getDeliveryPrice(order);\n\n                        _.each( order.products, function(product) {\n                            product.price = ClientZoneWidgetService.preparePrice(product.price);\n                            product.grossPrice = ClientZoneWidgetService.preparePrice(product.grossPrice);\n                        });\n\n                        $scope.order = order;\n                        $scope.payments = [];\n                        $scope.preventPayment = false;\n                        $scope.paymentsOffset = 0;\n\n                        ClientZoneWidgetService.getPayments().then(function (paymentsData) {\n                            $scope.paymentsOffset = (4 % paymentsData.length) * 3;\n                            $scope.payments = paymentsData;\n\n                            $scope.selectedPayment = _.find(paymentsData, {ID: order.paymentID});\n                        });\n\n                        $scope.paymentConfirm = function ( paymentID ) {\n                            $scope.preventPayment = true;\n\n                            ClientZoneWidgetService.payment({paymentID: paymentID}, order.ID).then(function (paymentResponse) {\n\n                                if (_.isEmpty(paymentResponse.payment)) {\n                                    $scope.preventPayment = false;\n                                }\n\n                                if (paymentResponse.response === false && paymentResponse.paid === true) {\n                                    order.paid = 1;\n                                    Notification.info($filter('translate')('order_already_paid'));\n                                    $modalInstance.close();\n                                } else if (paymentResponse.response === true && !_.isEmpty(paymentResponse.payment)) {\n                                    if (paymentResponse.payment.status.statusCode === \"SUCCESS\") {\n                                        window.location.href = paymentResponse.payment.redirectUri;\n                                    }\n                                    if (paymentResponse.payment.status === 'NEW' && paymentResponse.payment.operator === 'tinkoff' ) {\n                                        window.location.href = paymentResponse.payment.url;\n                                    }\n                                } else if (paymentResponse.response === true && paymentResponse.paymentChanged === true) {\n                                    Notification.info($filter('translate')('payment_method_changed'));\n                                    order.paymentID = paymentID;\n                                    $scope.selectedPayment = _.find($scope.payments, {ID: order.paymentID});\n                                } else if (paymentResponse.response === false) {\n                                    Notification.info(paymentResponse.info);\n                                }\n\n                            });\n                        }\n\n                    }\n                });\n            });\n\n        };\n\n        $scope.changeLimit = function( newLimit ) {\n            $scope.pagingSettings.pageSize = newLimit;\n            $scope.getNextPage(1);\n        };\n\n        $scope.getOrderInvoice = function ( order ) {\n            InvoiceService.getForUser(order.ID).then(function (data) {\n                var fileName = \"invoice_\" + order.ID + \".pdf\";\n                var a = document.createElement(\"a\");\n                document.body.appendChild(a);\n                a.style = \"display: none\";\n                var file = new Blob([data], {type: 'application/pdf'});\n                var fileURL = window.URL.createObjectURL(file);\n                a.href = fileURL;\n                a.download = fileName;\n                a.click();\n            });\n            return true;\n        };\n\n        $scope.formatSizeUnits = function(file) {\n            return MainWidgetService.formatSizeUnits(file.size);\n        };\n\n        $scope.messages = function(order) {\n            ClientZoneWidgetService.orderMessages($scope, order, 'order');\n        };\n\n        $scope.deleteProduct = function (order, product) {\n\n            DpProductService.delete(product).then(function (data) {\n                if (data.response === true) {\n\n                    var idx = _.findIndex(order.products, {ID: product.ID});\n                    if( idx > -1 ) {\n                        Notification.success($filter('translate')('deleted_successful'));\n                        order.products.splice(idx, 1);\n                    }\n\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            });\n        };\n\n        $scope.restoreAccept = function (product) {\n\n            var newFiles = product.fileList.filter(function( obj ) {\n                return 0 === parseInt(obj.accept);\n            });\n\n            if( newFiles.length === 0 ) {\n                Notification.warning($filter('translate')('should_upload_corrected_files'));\n                return;\n            }\n\n            DpProductService.restoreAccept(product.productID).then(function (data) {\n                if (data.response === true) {\n\n                    product.fileList = product.fileList.filter(function( obj ) {\n                        return -1 !== parseInt(obj.accept);\n                    });\n                    product.accept = 0;\n                    Notification.success($filter('translate')('saved_message'));\n\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            });\n\n        };\n\n        init();\n    });","start":6,"end":310,"route":null,"symbol":"client-zone.OrdersFinishedCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPagingSettings","ClientZoneWidgetService.getPageSizeSelect","ClientZoneWidgetService.getStatuses","_.find","ClientZoneWidgetService.clearParams","ClientZoneWidgetService.addParam","ClientZoneWidgetService.getCommonData","ClientZoneWidgetService.mergeFiles","ClientZoneWidgetService.orderMessageInfo","ClientZoneWidgetService.getOrders","TemplateRootService.getTemplateUrl","$modal.open","_.each","$scope.addresses.push","$modalInstance.close","CommonService.getAll","extensions.push","AuthDataService.getAccessToken","ProductFileService.getUrl","uploader.filters.push","item.name.split","itemName.pop","allowedExtensions.indexOf","Notification.warning","$filter","allowedExtensions.join","uploader.uploadAll","product.fileList.push","ProductFileService.makeMiniature","_.findIndex","alert","ProductFileService.removeFile","Notification.info","ClientZoneWidgetService.removeFile","ClientZoneWidgetService.getDeliveryPrice","ClientZoneWidgetService.preparePrice","ClientZoneWidgetService.getPayments","ClientZoneWidgetService.payment","_.isEmpty","$scope.getNextPage","InvoiceService.getForUser","document.createElement","document.body.appendChild","window.URL.createObjectURL","a.click","MainWidgetService.formatSizeUnits","ClientZoneWidgetService.orderMessages","DpProductService.delete","Notification.success","order.products.splice","Notification.error","product.fileList.filter","parseInt","DpProductService.restoreAccept","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":22,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["order"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersFinishedCtrl.js:284-286:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersFinishedCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["obj"],"antiPatterns":[],"text":"            var newFiles = product.fileList.filter(function( obj ) {\n                return 0 === parseInt(obj.accept);\n            });","start":284,"end":286,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["product.fileList.filter","parseInt"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":22,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersFinishedCtrl.js:296-298:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersFinishedCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["obj"],"antiPatterns":[],"text":"                    product.fileList = product.fileList.filter(function( obj ) {\n                        return -1 !== parseInt(obj.accept);\n                    });","start":296,"end":298,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["product.fileList.filter","parseInt"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":22,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersNotPaidCtrl.js:6-254:controller:client-zone.OrdersNotPaidCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersNotPaidCtrl.js","module":null,"name":"client-zone.OrdersNotPaidCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","DeliveryWidgetService","$config","$modal","ClientZoneWidgetService","FileUploader","ProductFileService","AuthDataService","$filter","Notification","TemplateRootService","InvoiceService","MainWidgetService","DpProductService","CommonService"],"antiPatterns":[],"text":"    .controller('client-zone.OrdersNotPaidCtrl', function ($scope, $rootScope,\n                                                           DeliveryWidgetService, $config, $modal,\n                                                           ClientZoneWidgetService, FileUploader, ProductFileService,\n                                                           AuthDataService, $filter, Notification, TemplateRootService,\n                                                           InvoiceService, MainWidgetService, DpProductService, CommonService ) {\n\n        $scope.isCollapsed = true;\n        $scope.statuses = [];\n        $scope.deliveries = [];\n        $scope.addresses = [];\n        $scope.senders = [];\n        $scope.orders = [];\n        $scope.firstStatus = {};\n\n        $scope.pagingSettings = ClientZoneWidgetService.getPagingSettings();\n\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        function init() {\n            ClientZoneWidgetService.getStatuses().then(function (statuses) {\n                $scope.statuses = statuses;\n                $scope.firstStatus = _.find(statuses, {type: 1});\n                ClientZoneWidgetService.clearParams();\n                ClientZoneWidgetService.addParam('paid', 0);\n                ClientZoneWidgetService.getCommonData(statuses).then( function(commonData) {\n                    $scope.deliveries = commonData.deliveries;\n                    $scope.addresses = commonData.addresses;\n                    $scope.senders = commonData.senders;\n                    $scope.pagingSettings.total = commonData.count;\n                    commonData.orders = ClientZoneWidgetService.mergeFiles(commonData.orders);\n                    $scope.orders = commonData.orders;\n                });\n            });\n\n            ClientZoneWidgetService.orderMessageInfo($scope);\n        }\n\n        $scope.getNextPage = function (page) {\n            var params = {'paid': 0};\n            params.offset = (page - 1) * $scope.pagingSettings.pageSize;\n            params.limit = $scope.pagingSettings.pageSize;\n            ClientZoneWidgetService.getOrders($scope.statuses, params).then( function(ordersData) {\n                ordersData = ClientZoneWidgetService.mergeFiles(ordersData);\n                $scope.orders = ordersData;\n            });\n        };\n\n        $scope.showDelivery = function (order, product) {\n            TemplateRootService.getTemplateUrl(104).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope, $rootScope, $modalInstance) {\n\n                        $scope.addresses = [];\n\n                        _.each(order.addresses, function(oneAddress) {\n                            if(oneAddress.productID === product.productID) {\n                                $scope.addresses.push(oneAddress);\n                            }\n                        });\n\n                        $scope.cancel = function () {\n                            $modalInstance.close();\n                        }\n\n                    }\n                });\n            });\n        };\n\n        $scope.uploadFiles = function (product) {\n            TemplateRootService.getTemplateUrl(34).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    backdrop: true,\n                    keyboard: false,\n                    size: 'lg',\n                    resolve: {\n                        allowedExtensions: function () {\n                            return CommonService.getAll().then(function (data) {\n                                var extensions = [];\n                                _.each(data, function(item) {\n                                    extensions.push(item['extension']);\n                                });\n\n                                return extensions;\n\n                            });\n                        }\n                    },\n                    controller: function ($scope, $modalInstance, allowedExtensions) {\n\n                        var header = {};\n                        header[accessTokenName] =  AuthDataService.getAccessToken();\n\n                        var uploader = $scope.uploader = new FileUploader({\n                            'url': ProductFileService.getUrl(product.productID),\n                            'headers': header\n                        });\n\n                        uploader.filters.push({\n                            name: 'imageFilter',\n                            fn: function (item, options) {\n                                var itemName = item.name.split('.');\n                                var lastItem = itemName.pop().toLowerCase();\n\n                                if (allowedExtensions.indexOf(lastItem) > -1) {\n                                    return true;\n                                }\n                                Notification.warning($filter('translate')('required_ext') + allowedExtensions.join(', '));\n                                return false;\n                            }\n                        });\n\n                        uploader.onAfterAddingAll = function(addedItems) {\n                            uploader.uploadAll();\n                        };\n\n                        uploader.onSuccessItem = function (fileItem, response, status, headers) {\n                            response.file.size = (fileItem._file.size / 1024).toFixed(2);\n                            product.fileList.push(response.file);\n                            ProductFileService.makeMiniature(response.file.ID).then(function(responseMiniature) {\n                                if( responseMiniature.response === true) {\n                                    var fileIdx = _.findIndex(product.fileList, {ID: response.file.ID});\n                                    if( fileIdx > -1 ) {\n                                        product.fileList[fileIdx].minUrl = responseMiniature.minUrl;\n                                        product.fileList[fileIdx].hasMiniature = true;\n                                    }\n                                }\n                            });\n                            product.lastFile = response.file;\n                        };\n\n                        uploader.onCompleteAll = function() {\n                            $modalInstance.close();\n                        };\n\n                        $scope.cancel = function () {\n                            if (uploader.isUploading) {\n                                alert($filter('translate')('uploading_in_progress'));\n                            } else {\n                                $modalInstance.close();\n                            }\n                        }\n                    }\n                });\n            });\n        };\n\n        $scope.removeFile = function (product, file) {\n            ProductFileService.removeFile(product.productID, file.ID).then(function (response) {\n                if (response.response) {\n                    Notification.info($filter('translate')('removed') + ' ' + response.removed_item.name);\n                    product = ClientZoneWidgetService.removeFile(product, file);\n                }\n            });\n        };\n\n        $scope.doPayment = function (order) {\n            ClientZoneWidgetService.doPayment($scope, order);\n        };\n\n        $scope.changeLimit = function( newLimit ) {\n            $scope.pagingSettings.pageSize = newLimit;\n            $scope.getNextPage(1);\n        };\n\n        $scope.getOrderInvoice = function ( order ) {\n            InvoiceService.getForUser(order.ID).then(function (data) {\n                var fileName = \"invoice_\" + order.ID + \".pdf\";\n                var a = document.createElement(\"a\");\n                document.body.appendChild(a);\n                a.style = \"display: none\";\n                var file = new Blob([data], {type: 'application/pdf'});\n                var fileURL = window.URL.createObjectURL(file);\n                a.href = fileURL;\n                a.download = fileName;\n                a.click();\n            });\n            return true;\n        };\n\n        $scope.formatSizeUnits = function(file) {\n            return MainWidgetService.formatSizeUnits(file.size);\n        };\n\n        $scope.messages = function(order) {\n            ClientZoneWidgetService.orderMessages($scope, order, 'order');\n        };\n\n        $scope.deleteProduct = function (order, product) {\n\n            DpProductService.delete(product).then(function (data) {\n                if (data.response === true) {\n\n                    var idx = _.findIndex(order.products, {ID: product.ID});\n                    if( idx > -1 ) {\n                        Notification.success($filter('translate')('deleted_successful'));\n                        order.products.splice(idx, 1);\n                    }\n\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            });\n        };\n\n        $scope.restoreAccept = function (product) {\n\n            var newFiles = product.fileList.filter(function( obj ) {\n                return 0 === parseInt(obj.accept);\n            });\n\n            if( newFiles.length === 0 ) {\n                Notification.warning($filter('translate')('should_upload_corrected_files'));\n                return;\n            }\n\n            DpProductService.restoreAccept(product.productID).then(function (data) {\n                if (data.response === true) {\n\n                    product.fileList = product.fileList.filter(function( obj ) {\n                        return -1 !== parseInt(obj.accept);\n                    });\n                    product.accept = 0;\n                    Notification.success($filter('translate')('saved_message'));\n\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            });\n\n        };\n\n        $scope.acceptReport=function( product, file ){\n            ClientZoneWidgetService.acceptReport(product, file, $scope);\n        };\n\n        $scope.rejectReport=function( product, file ){\n            ClientZoneWidgetService.rejectReport(product, file, $scope);\n        };\n\n        init();\n    });","start":6,"end":254,"route":null,"symbol":"client-zone.OrdersNotPaidCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPagingSettings","ClientZoneWidgetService.getPageSizeSelect","ClientZoneWidgetService.getStatuses","_.find","ClientZoneWidgetService.clearParams","ClientZoneWidgetService.addParam","ClientZoneWidgetService.getCommonData","ClientZoneWidgetService.mergeFiles","ClientZoneWidgetService.orderMessageInfo","ClientZoneWidgetService.getOrders","TemplateRootService.getTemplateUrl","$modal.open","_.each","$scope.addresses.push","$modalInstance.close","CommonService.getAll","extensions.push","AuthDataService.getAccessToken","ProductFileService.getUrl","uploader.filters.push","item.name.split","itemName.pop","allowedExtensions.indexOf","Notification.warning","$filter","allowedExtensions.join","uploader.uploadAll","product.fileList.push","ProductFileService.makeMiniature","_.findIndex","alert","ProductFileService.removeFile","Notification.info","ClientZoneWidgetService.removeFile","ClientZoneWidgetService.doPayment","$scope.getNextPage","InvoiceService.getForUser","document.createElement","document.body.appendChild","window.URL.createObjectURL","a.click","MainWidgetService.formatSizeUnits","ClientZoneWidgetService.orderMessages","DpProductService.delete","Notification.success","order.products.splice","Notification.error","product.fileList.filter","parseInt","DpProductService.restoreAccept","ClientZoneWidgetService.acceptReport","ClientZoneWidgetService.rejectReport","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["order"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersNotPaidCtrl.js:220-222:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersNotPaidCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["obj"],"antiPatterns":[],"text":"            var newFiles = product.fileList.filter(function( obj ) {\n                return 0 === parseInt(obj.accept);\n            });","start":220,"end":222,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["product.fileList.filter","parseInt"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersNotPaidCtrl.js:232-234:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/OrdersNotPaidCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["obj"],"antiPatterns":[],"text":"                    product.fileList = product.fileList.filter(function( obj ) {\n                        return -1 !== parseInt(obj.accept);\n                    });","start":232,"end":234,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["product.fileList.filter","parseInt"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/QuestionsCtrl.js:4-89:controller:client-zone.QuestionsCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/QuestionsCtrl.js","module":null,"name":"client-zone.QuestionsCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","ClientZoneWidgetService","$timeout","ApiCollection"],"antiPatterns":[],"text":"    .controller('client-zone.QuestionsCtrl', function ($scope, ClientZoneWidgetService, $timeout, ApiCollection ) {\n\n        $scope.pagingSettings = ClientZoneWidgetService.getPagingSettings();\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n\n        $scope.offerFilters = {\n            dateFrom: null,\n            dateTo: null,\n            text: null\n        };\n\n        var timerId;\n\n        function init() {\n            $scope.customProductConfig = {\n                count: 'dp_customProducts/publicCount',\n                params: {\n                    limit: $scope.pagingSettings.pageSize\n                },\n                onSuccess: function (data) {\n                    $scope.customProductsCtrl.items = [];\n                    _.each(data, function(offer, index) {\n                        offer.isCollapsed = true;\n                        offer.contentArray = offer.content.split('\\n');\n                        $scope.customProductsCtrl.items.push(offer);\n                    });\n\n                    $scope.pagingSettings.total = data.count;\n                }\n            };\n\n            $scope.customProductsCtrl = new ApiCollection('dp_customProducts/getPublic', $scope.customProductConfig);\n\n            $scope.customProductsCtrl.get();\n\n            var updateTableTimeout;\n\n            $scope.setParams = function () {\n                $timeout.cancel(updateTableTimeout);\n                updateTableTimeout = $timeout(function () {\n                    $scope.customProductsCtrl.get();\n                }, 600);\n            };\n        }\n\n        $scope.filterOffersDate = function(){\n            if($scope.offerFilters.dateFrom && $scope.offerFilters.dateTo){\n                $scope.customProductsCtrl.params.dateFrom = ($scope.offerFilters.dateFrom.getTime()/1000);\n                $scope.customProductsCtrl.params.dateTo = (($scope.offerFilters.dateTo.getTime()/1000)+(60*60*24));\n                $scope.setParams();\n            }\n         }\n\n         $scope.clearFilters = function(){\n            $scope.customProductsCtrl.params.dateFrom = null;\n            $scope.customProductsCtrl.params.dateTo = null;\n            $scope.offerFilters = {\n                dateFrom: null,\n                dateTo: null\n            };\n            $scope.setParams();\n         }\n\n        $scope.filterOffersText = function () {\n            clearTimeout(timerId);\n            timerId = setTimeout(function () {\n                $scope.customProductsCtrl.params.ID = $scope.offerFilters.text;\n                $scope.setParams();\n            }, 500);\n        };\n\n        $scope.changeLimit = function (newLimit) {\n            $scope.pagingSettings.pageSize = newLimit;\n            $scope.customProductsCtrl.params.limit = $scope.pagingSettings.pageSize;\n            $scope.getNextPage(1);\n        };\n\n        $scope.getNextPage = function (page) {\n            $scope.pagingSettings.currentPage = page;\n            $scope.customProductsCtrl.params.offset = ($scope.pagingSettings.currentPage - 1) * $scope.pagingSettings.pageSize;\n            $scope.setParams();\n        };\n\n        init();\n\n    });","start":4,"end":89,"route":null,"symbol":"client-zone.QuestionsCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPagingSettings","ClientZoneWidgetService.getPageSizeSelect","_.each","offer.content.split","$scope.customProductsCtrl.items.push","$scope.customProductsCtrl.get","$timeout.cancel","$timeout","$scope.offerFilters.dateFrom.getTime","$scope.offerFilters.dateTo.getTime","$scope.setParams","clearTimeout","setTimeout","$scope.getNextPage","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/ReclamationsCtrl.js:6-222:controller:client-zone.ReclamationsCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/ReclamationsCtrl.js","module":null,"name":"client-zone.ReclamationsCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$q","$scope","$state","$filter","Notification","ClientZoneWidgetService","MainWidgetService","ReclamationService","TemplateRootService","$modal","socket","AuthDataService","$rootScope","$timeout","FileUploader","$config"],"antiPatterns":[],"text":"    .controller('client-zone.ReclamationsCtrl', function ($q, $scope, $state, $filter, Notification,\n                                                          ClientZoneWidgetService, MainWidgetService, ReclamationService,\n                                                          TemplateRootService, $modal, socket, AuthDataService,\n                                                          $rootScope, $timeout, FileUploader, $config) {\n\n        $scope.pagingSettings = ClientZoneWidgetService.getPagingSettings();\n        $scope.pageSizeSelect = ClientZoneWidgetService.getPageSizeSelect();\n        $scope.reclamations = [];\n        $scope.isCollapsed = false;\n        $scope.currentPage = 1;\n        $scope.params = {};\n        $scope.uploadProgress = 0;\n        $scope.selectedReclamation = null;\n\n        var updateTableTimeout = null;\n\n        var accessTokenName = $config.ACCESS_TOKEN_NAME;\n\n        $scope.$on('socket:error', function (ev, data) {\n            console.log(ev, data);\n        });\n\n        $scope.setParams = function () {\n            $timeout.cancel(updateTableTimeout);\n            updateTableTimeout = $timeout(function () {\n                $scope.getNextPage(1);\n            }, 1000);\n        };\n\n        function init() {\n\n            var params = {};\n            countReclamations(params).then(function (counted) {\n                if (counted.count > 0) {\n                    $scope.pagingSettings.total = counted.count;\n                }\n                params.limit = $scope.pagingSettings.pageSize;\n                params.offset = 0;\n                ReclamationService.getAll(params).then(function (data) {\n                    $scope.reclamations = data;\n                });\n            });\n\n            socket.on('connect', function () {\n                console.log('Client has connected to the server!');\n            });\n\n            socket.emit('checkToken', {'accessToken': AuthDataService.getAccessToken()});\n\n            socket.on('tokenAccept', function (tokenAccept) {\n                console.log('token accept: ', tokenAccept);\n            });\n\n            socket.emit('onReclamationsPanel', {'userID': $rootScope.user.userID});\n\n            socket.on('newMessage', function (newMessage) {\n                var reclamationIdx = _.findIndex($scope.reclamations, {ID: newMessage.reclamationID});\n                if (reclamationIdx > -1) {\n                    if ($scope.reclamations[reclamationIdx].unreadMessages === undefined) {\n                        $scope.reclamations[reclamationIdx].unreadMessages = 1;\n                    } else {\n                        $scope.reclamations[reclamationIdx].unreadMessages++;\n                    }\n                }\n            });\n        }\n\n        $scope.getNextPage = function (page) {\n            $scope.currentPage = page;\n            var params = {};\n            countReclamations(params).then(function (counted) {\n                if (counted.count > 0) {\n                    $scope.pagingSettings.total = counted.count;\n                }\n                params.offset = (page - 1) * $scope.pagingSettings.pageSize;\n                params.limit = $scope.pagingSettings.pageSize;\n                params = _.extend(params, $scope.params);\n                ReclamationService.getAll(params).then(function (data) {\n                    $scope.reclamations = data;\n                });\n            });\n        };\n\n        function countReclamations(params) {\n            var def = $q.defer();\n\n            ReclamationService.getMyZoneCount(params).then(function (data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        }\n\n        $scope.formatSizeUnits = function (file) {\n            return MainWidgetService.formatSizeUnits(file.size);\n        };\n\n        function getMessages(scope, reclamationID) {\n            ReclamationService.getMessages(reclamationID).then(function (data) {\n                scope.messages = data;\n            });\n        }\n\n        $scope.messages = function (reclamation) {\n            TemplateRootService.getTemplateUrl(101).then(function (response) {\n                $modal.open({\n                    templateUrl: response.url,\n                    scope: $scope,\n                    size: 'lg',\n                    controller: function ($scope) {\n\n                        $scope.reclamation = reclamation;\n                        $scope.messages = [];\n\n                        socket.emit('onReclamation', {'reclamationID': reclamation.ID});\n\n                        reclamation.unreadMessages = 0;\n\n                        getMessages($scope, reclamation.ID);\n\n                        $scope.send = function () {\n\n                            socket.emit('addMessage', {\n                                'reclamationID': reclamation.ID,\n                                'message': this.form.message,\n                                'accessToken': AuthDataService.getAccessToken(),\n                                'companyID': $rootScope.companyID\n                            });\n\n                        };\n\n                        socket.on('messageSaved', function (data) {\n                            if (data.ID !== undefined) {\n                                if ($scope.form && data.isAdmin === 0) {\n                                    $scope.form.message = '';\n                                }\n                                getMessages($scope, reclamation.ID);\n                            }\n                        });\n                    }\n                });\n            });\n        };\n\n        var header = {};\n        header[accessTokenName] = AuthDataService.getAccessToken();\n\n        $scope.uploader = new FileUploader({\n            'headers': header,\n            'autoUpload ': true\n        });\n\n        $scope.uploader.onProgressAll = function (progress) {\n            $scope.uploadProgress = progress;\n        };\n\n        $scope.uploader.filters.push({\n            name: 'imageFilter',\n            fn: function (item, options) {\n                var itemName = item.name.split('.');\n                var lastItem = itemName.pop();\n                var possibleExtensions = ['jpg', 'jpeg'];\n\n                if (possibleExtensions.indexOf(lastItem) > -1) {\n                    return true;\n                }\n                Notification.warning($filter('translate')('required_ext') + possibleExtensions.join(','));\n                return false;\n            }\n        });\n\n        $scope.upload = function () {\n            changeUrl($scope.selectedReclamation.ID).then(function () {\n                $scope.uploader.uploadAll();\n                $scope.uploader.onCompleteAll = function () {\n\n                    ReclamationService.getFiles($scope.selectedReclamation.ID).then(function(filesData) {\n                        var idx = _.findIndex($scope.reclamations, {ID: $scope.selectedReclamation.ID});\n                        if( idx > -1 ) {\n                            $scope.reclamations[idx].files = filesData;\n                        }\n                        $scope.selectedReclamation = null;\n                        $scope.uploader.clearQueue();\n                        $scope.uploadProgress = 0;\n                        Notification.success($filter('translate')('file_uploaded'));\n                    });\n\n                }\n            });\n        };\n\n        $scope.cancelUpload = function() {\n            $scope.uploader.clearQueue();\n            $scope.selectedReclamation = null;\n        };\n\n        function changeUrl(reclamationID) {\n\n            var def = $q.defer();\n\n            _.each($scope.uploader.queue, function (item, index) {\n                item.url = ReclamationService.getUploadUrl(reclamationID);\n                if (index === $scope.uploader.queue.length - 1) {\n                    def.resolve(true);\n                }\n            });\n\n            return def.promise;\n        }\n\n        $scope.selectReclamation = function(reclamation) {\n            $scope.selectedReclamation = reclamation;\n        };\n\n        init();\n\n    });","start":6,"end":222,"route":null,"symbol":"client-zone.ReclamationsCtrl","metadata":{"calls_functions":["angular.module","ClientZoneWidgetService.getPagingSettings","ClientZoneWidgetService.getPageSizeSelect","$scope.$on","console.log","$timeout.cancel","$timeout","$scope.getNextPage","countReclamations","ReclamationService.getAll","socket.on","socket.emit","AuthDataService.getAccessToken","_.findIndex","_.extend","$q.defer","ReclamationService.getMyZoneCount","def.resolve","MainWidgetService.formatSizeUnits","ReclamationService.getMessages","TemplateRootService.getTemplateUrl","$modal.open","getMessages","$scope.uploader.filters.push","item.name.split","itemName.pop","possibleExtensions.indexOf","Notification.warning","$filter","possibleExtensions.join","changeUrl","$scope.uploader.uploadAll","ReclamationService.getFiles","$scope.uploader.clearQueue","Notification.success","_.each","ReclamationService.getUploadUrl","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/SearchCtrl.js:6-129:controller:client-zone.SearchCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/client-zone/SearchCtrl.js","module":null,"name":"client-zone.SearchCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$stateParams","$rootScope","PhotoFolderService","$state"],"antiPatterns":[],"text":"    .controller('client-zone.SearchCtrl', function ($scope, $stateParams, $rootScope, PhotoFolderService, $state) {\n\n        $scope.q = $stateParams.q;\n        $scope.subject = $stateParams.subject;\n\n        $scope.photos = [];\n\n        function init() {\n            if( $stateParams.subject === 'tag' ) {\n                PhotoFolderService.findPhoto($scope.q).then( function(searchData) {\n                    $scope.photos = searchData;\n                    _.each(searchData, function(photo) {\n                        fillPhotoRating(photo);\n                    });\n                });\n            } else if ( $stateParams.subject === 'author' ) {\n                PhotoFolderService.getImageByAuthor($scope.q).then( function(searchData) {\n                    $scope.photos = searchData;\n                    _.each(searchData, function(photo) {\n                        fillPhotoRating(photo);\n                    });\n                });\n            } else if ( $stateParams.subject === 'place' ) {\n                PhotoFolderService.getImageByPlace($scope.q).then( function(searchData) {\n                    $scope.photos = searchData;\n                    _.each(searchData, function(photo) {\n                        fillPhotoRating(photo);\n                    });\n                });\n            } else if ( $stateParams.subject === 'person' ) {\n                PhotoFolderService.getImageByPeoples($scope.q).then( function(searchData) {\n                    $scope.photos = searchData;\n                    _.each(searchData, function(photo) {\n                        fillPhotoRating(photo);\n                    });\n                });\n            } else if ( $stateParams.subject === 'rating' ) {\n                var rating = $scope.q.split('-');\n                PhotoFolderService.getImageByRating(rating[0], rating[1]).then( function(searchData) {\n                    $scope.photos = searchData;\n                    _.each(searchData, function(photo) {\n                        fillPhotoRating(photo);\n                    });\n                });\n            }\n\n        }\n\n        function fillPhotoRating(photo) {\n            photo.stars = [];\n            for (var i = 5; i > 0; i--) {\n                photo.stars.push({\n                    filled: i <= photo.averageRate\n                });\n            }\n        }\n\n        $scope.selectPhoto = function (photo) {\n            $scope.actualPhoto = photo;\n        };\n\n        $scope.nextPhoto = function (photo) {\n            if( photo === undefined ) {\n                return;\n            }\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if (idx > -1) {\n                if ($scope.photos[idx + 1] !== undefined) {\n                    $scope.actualPhoto = $scope.photos[idx + 1];\n                }\n            }\n        };\n\n        $scope.previousPhoto = function (photo) {\n            if( photo === undefined ) {\n                return;\n            }\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if (idx > -1) {\n                if ($scope.photos[idx - 1] !== undefined) {\n                    $scope.actualPhoto = $scope.photos[idx - 1];\n                }\n            }\n        };\n\n        $scope.nextExist = function (photo) {\n            if( photo === undefined ) {\n                return;\n            }\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if (idx > -1) {\n                if ($scope.photos[idx + 1] !== undefined) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        $scope.previousExist = function (photo) {\n            if( photo === undefined ) {\n                return;\n            }\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if (idx > -1) {\n                if ($scope.photos[idx - 1] !== undefined) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        $scope.goToFolder = function(photo) {\n\n            PhotoFolderService.getImageFolder(photo._id).then( function(data) {\n               if( data && data._id !== undefined ) {\n                   $state.go('client-zone-my-photos', {folderid: data._id});\n               }\n            });\n\n        };\n\n        init();\n\n    });","start":6,"end":129,"route":null,"symbol":"client-zone.SearchCtrl","metadata":{"calls_functions":["angular.module","PhotoFolderService.findPhoto","_.each","fillPhotoRating","PhotoFolderService.getImageByAuthor","PhotoFolderService.getImageByPlace","PhotoFolderService.getImageByPeoples","$scope.q.split","PhotoFolderService.getImageByRating","photo.stars.push","_.findIndex","PhotoFolderService.getImageFolder","$state.go","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":21,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeDetailsCtrl.js:4-156:controller:index.AttributeDetails","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeDetailsCtrl.js","module":null,"name":"index.AttributeDetails","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$window","$stateParams","$filter","AttributeFiltersService","Notification"],"antiPatterns":[],"text":"    .controller('index.AttributeDetails', function ($scope, $window, $stateParams, $filter, AttributeFiltersService, Notification) {\n\n        console.log($stateParams);\n        $scope.option = {};\n        $scope.products = [];\n\n        function createFilterPart(items, name, type, filterConfig, label, hidden, precision) {\n            items = _.clone(items);\n            var item = { name: name, type: type, title: !!label ? label : name, hidden: hidden };\n            switch (type) {\n                case 'multi-select':\n                case 'multi-select-color':\n                    item.values = filterConfig[name].values;\n                    item.selectedValues = {};\n                    break;\n                case 'range':\n                    item.minValue = filterConfig[name].minValue;\n                    item.maxValue = filterConfig[name].maxValue;\n                    var diff = filterConfig[name].maxValue - filterConfig[name].minValue\n                    var step = 1\n                    if (diff < 1) {\n                        step = 0.01;\n                    } else if (diff < 10) {\n                        step = 0.1;\n                    } else if (diff < 100) {\n                        step = 1\n                    } else {\n                        step = Math.round(diff / 50);\n                    }\n                    item.options = {\n                        floor: filterConfig[name].minValue,\n                        ceil: filterConfig[name].maxValue,\n                        step: step,\n                        precision: precision,\n                        onChange: function () {\n                            $scope.onInputChange.apply(this)\n                        }\n                    }\n                    break;\n            }\n            items.push(item);\n            return items;\n        };\n\n        var sendData = {};\n        sendData.attrID = $stateParams.attrid;\n        sendData.optID = $stateParams.optid;\n        AttributeFiltersService.getOption(sendData).then(function (data) {\n            if (data.length !== 0) {\n                console.log(data);\n\n                $scope.option.name = data[0].name;\n                $scope.option.sizePage = data[0].sizePage;\n                $scope.option.descriptions = data[0].descriptions;\n\n                $scope.option.certificates = [];\n                var certs = data[0].descriptions.certificates.split(', ');\n                if (certs.length > 0) {\n                    $scope.option.certificates = certs;\n                }\n\n                $scope.option.printingTechniques = [];\n                var printingTechniques = data[0].descriptions.printingTechniques.split(', ');\n                if (printingTechniques.length > 0) {\n                    $scope.option.printingTechniques = printingTechniques;\n                }\n\n                $scope.option.finishingAndProcessing = [];\n                var finishingAndProcessing = data[0].descriptions.finishingAndProcessing.split(', ');\n                if (finishingAndProcessing.length > 0) {\n                    $scope.option.finishingAndProcessing = finishingAndProcessing;\n                }\n\n                AttributeFiltersService.getProductsUsingOptions(sendData.attrID).then(function (allProducts) {\n                    if (allProducts.length > 0) {\n                        $scope.products = _.filter(allProducts, function (product) {\n                            for (var i = 0; i < product.options.length; i++) {\n                                if (product.options[i] == data[0].ID) {\n                                    return true;\n                                }\n                            }\n                            return false;\n                        });\n                    }\n                }, function (error) {\n\n                });\n\n                // get alt papers\n                var dataSend = {};\n                dataSend.attrID = 2;\n                dataSend.optID = data[0].ID;\n                $scope.alternativePapers = [];\n                AttributeFiltersService.getRelativePapers(dataSend).then(function (altPapersFilter) {\n                    if (altPapersFilter.length > 0) {\n                        AttributeFiltersService.getAttributeFilters(dataSend.attrID)\n                            .then(function (filterConfigData) {\n                                var filterConfig = filterConfigData.filterConfig;\n                                var filterPartsAltPapers = [];\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'name', 'text', filterConfig, 'name_of_atrritute');\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'category', 'select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'group', 'select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'paper_type', 'select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'weight', 'range', filterConfig, null, false, 0);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'whiteness', 'range', filterConfig, null, false, 0);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'thickness', 'range', filterConfig, null, false, 3);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'opacity', 'range', filterConfig, null, false, 0);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'roughness', 'range', filterConfig, null, false, 0);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'certificates', 'multi-select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'printingTechniques', 'multi-select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'application', 'multi-select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'color_hex', 'multi-select-color', filterConfig, 'paper_color');\n                                _.each(altPapersFilter, function (fd) {\n                                    var part = _.find(filterPartsAltPapers, { name: fd.name });\n                                    if (fd.valueType == 'min') {\n                                        part.minValue = fd.value;\n                                    } else if (fd.valueType == 'max') {\n                                        part.maxValue = fd.value;\n                                    } else if (part.type == 'multi-select' || part.type == 'multi-select-color') {\n                                        if (!part.selectedValues) {\n                                            part.selectedValues = [];\n                                        }\n                                        part.selectedValues[fd.value] = true;\n                                    } else if (fd.valueType == 'exact') {\n                                        part.value = String(fd.value);\n                                    }\n                                });\n                                AttributeFiltersService.search(2, filterPartsAltPapers).then(function (altPapers) {\n                                    $scope.alternativePapers = altPapers;\n                                });\n                            });\n                    }\n                });\n\n            }\n        });\n\n        $scope.downloadPDF = function(){\n            console.log('started rendering');\n            var downloadData = {};\n            downloadData.optID  = $stateParams.optid;\n            downloadData.altPapers = $scope.alternativePapers;\n            AttributeFiltersService.downloadPDF(downloadData).then(function (downloadResponse) {\n                console.log(downloadResponse);\n                if(downloadResponse.success){\n                    $window.open(downloadResponse.link, '_blank');\n                }else{\n                    Notification.error($filter('translate')('unexpected_error'));\n                }\n            });\n        };\n\n    });","start":4,"end":156,"route":null,"symbol":"index.AttributeDetails","metadata":{"calls_functions":["angular.module","console.log","_.clone","Math.round","$scope.onInputChange.apply","items.push","AttributeFiltersService.getOption","AttributeFiltersService.getProductsUsingOptions","_.filter","AttributeFiltersService.getRelativePapers","AttributeFiltersService.getAttributeFilters","createFilterPart","_.each","_.find","String","AttributeFiltersService.search","AttributeFiltersService.downloadPDF","$window.open","Notification.error","$filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":23,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeDetailsCtrl.js:79-86:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeDetailsCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["product"],"antiPatterns":[],"text":"                        $scope.products = _.filter(allProducts, function (product) {\n                            for (var i = 0; i < product.options.length; i++) {\n                                if (product.options[i] == data[0].ID) {\n                                    return true;\n                                }\n                            }\n                            return false;\n                        });","start":79,"end":86,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":23,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeFiltersCtrl.js:4-576:controller:index.AttributeFilters","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeFiltersCtrl.js","module":null,"name":"index.AttributeFilters","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$filter","$location","AttributeFiltersService","SettingService"],"antiPatterns":[],"text":"    .controller('index.AttributeFilters', function ($scope, $rootScope, $filter, $location, AttributeFiltersService, SettingService) {\n        var filterParts = [];\n        var allOptions;\n        var allProductsUsingOptions;\n        var attrID = null;\n        var Setting = new SettingService('additionalSettings');\n        Setting.getPublicSettings().then(function (settingsData) {\n            attrID = settingsData.filteredAttribute.value;\n            loadAttributeFilters();\n        });\n        var papersPerPage = 20;\n\n        var filterConfig = {};\n\n        $scope.alternativePapers = [];\n\n        $scope.numberOfPagesInPagination = 6;\n        $scope.currentDisplayedCategories = [];\n        $scope.currentDisplayedMaterialName = '';\n        $scope.currentDisplayPapersType = 'default';\n        $scope.choosenTypeID = null;\n        $scope.currentDisplayPapersPage = 1;\n        $scope.currentDisplayPapersPages = 1;\n        $scope.currentDisplayPapersPageData = [];\n        $scope.filtersUsed = false;\n        $scope.visibleSection = {};\n\n        function loadAttributeFilters() {\n            AttributeFiltersService.getOptions(attrID).then(function (data) {\n                _.each(data, function (item) {\n                    item.descriptions.weight = item.weight\n                    _.each(['certificates', 'printingTechniques', 'color_hex', 'application'],\n                        function (name) {\n                            item.descriptions[name] = '';\n                            if(item.descriptions[name].includes(',')){\n                                item.descriptions[name] = _.map(item.descriptions[name].split(','),\n                                function (value) {\n                                    return value.trim()\n                                })\n                            }\n                        })\n                })\n                allOptions = data;\n            }, function (error) {\n\n            }).then(function () {\n                AttributeFiltersService.getProductsUsingOptions(attrID).then(function (data) {\n                    allProductsUsingOptions = data;\n                }, function (error) {\n\n                });\n\n                AttributeFiltersService.getAttributeFilters(attrID)\n                    .then(function (data) {\n                        filterConfig = data.filterConfig;\n                        filterParts = createFilterPart(filterParts, 'name', 'text', data.filterConfig, 'name_of_atrritute_' + attrID);\n                        filterParts = createFilterPart(filterParts, 'weight', 'range', data.filterConfig, null, false, 0);\n                        filterParts = createFilterPart(filterParts, 'whiteness', 'range', data.filterConfig, null, false, 0);\n                        filterParts = createFilterPart(filterParts, 'thickness', 'range', data.filterConfig, null, false, 3);\n                        filterParts = createFilterPart(filterParts, 'opacity', 'range', data.filterConfig, null, false, 0);\n                        filterParts = createFilterPart(filterParts, 'roughness', 'range', data.filterConfig, null, false, 0);\n                        filterParts = createFilterPart(filterParts, 'certificates', 'multi-select', data.filterConfig);\n                        filterParts = createFilterPart(filterParts, 'printingTechniques', 'multi-select', data.filterConfig);\n                        filterParts = createFilterPart(filterParts, 'application', 'multi-select', data.filterConfig);\n                        filterParts = createFilterPart(filterParts, 'color_hex', 'multi-select-color', data.filterConfig, 'paper_color');\n                        filterParts = createFilterPart(filterParts, 'ids', '', {}, '', true);\n                        $scope.filterParts = _.cloneDeep(filterParts);\n                        $scope.categoriesTree = data.filterConfig.categoriesTree;\n\n                        $scope.showAllPapers();\n\n                        var searchObject = $location.search();\n\n                        if (searchObject.showGroup) {\n                            var choosenTypeID = null;\n                            if (searchObject.markPaper) {\n                                choosenTypeID = searchObject.markPaper;\n                            }\n                            $scope.showGroup(searchObject.showGroup, choosenTypeID);\n                        }\n\n                    }, function (error) {\n                    });\n            });\n        }\n\n        function createFilterPart(items, name, type, filterConfig, label, hidden, precision) {\n            items = _.clone(items);\n            var item = { name: name, type: type, title: !!label ? label : name, hidden: hidden };\n            switch (type) {\n                case 'multi-select':\n                case 'multi-select-color':\n                    item.values = filterConfig[name].values;\n                    item.selectedValues = {};\n                    break;\n                case 'range':\n                    item.minValue = filterConfig[name].minValue;\n                    item.maxValue = filterConfig[name].maxValue;\n                    var diff = filterConfig[name].maxValue - filterConfig[name].minValue\n                    var step = 1\n                    if (diff < 1) {\n                        step = 0.01;\n                    } else if (diff < 10) {\n                        step = 0.1;\n                    } else if (diff < 100) {\n                        step = 1\n                    } else {\n                        step = Math.round(diff / 50);\n                    }\n                    item.options = {\n                        floor: filterConfig[name].minValue,\n                        ceil: filterConfig[name].maxValue,\n                        step: step,\n                        precision: precision,\n                        onChange: function () {\n                            $scope.onInputChange.apply(this)\n                        }\n                    }\n                    break;\n            }\n            items.push(item);\n            return items;\n        };\n\n        $scope.onPaperDefaultClick = function (row) {\n            console.log(row);\n            var category = row.descriptions.category[0].trim();\n            var group = row.descriptions.group[0].trim();\n            var type = row.descriptions.paper_type[0].trim();\n            if(type.endsWith(' ')){\n                type = type.slice(0, -1);\n            }\n            var data = $scope.categoriesTree[category][group][type];\n            $scope.choosenTypeID = row.ID;\n           $scope.onTypeClick(category, group, type, data);\n           $scope.currentDisplayedMaterialName = type;\n           $scope.currentDisplayedCategories = [];\n           setTimeout(function(){\n                  $scope.currentDisplayPapersType = 'papers';\n           }, 1500);\n        };\n\n        $scope.loadAllPapers = function () {\n            var agregateIDS = [];\n            for (var category in $scope.categoriesTree) {\n                for (var group in $scope.categoriesTree[category]) {\n                    for (var type in $scope.categoriesTree[category][group]) {\n                        _.each($scope.categoriesTree[category][group][type].IDS,function(singleID){\n                            agregateIDS.push(singleID);\n                        });\n                    }\n                }\n            }\n            agregateIDSFilter = [];\n            $scope.onInputChange();\n        };\n\n        $scope.showAllPapers = function () {\n            $scope.currentDisplayPapersType = 'default';\n            $scope.currentDisplayedCategories = [];\n            for (var categoryName in $scope.categoriesTree) {\n                var tmpObject = {};\n                tmpObject.name = categoryName;\n                tmpObject.category = categoryName;\n                tmpObject.group = '';\n                tmpObject.type = '';\n                tmpObject.typeData = {};\n                tmpObject.displayType = 'category';\n                $scope.currentDisplayedCategories.push(tmpObject);\n            }\n            $scope.currentDisplayedMaterialName = $filter('translate')('materials');\n            $scope.loadAllPapers();\n        };\n\n        $scope.showCategory = function (showCategoryName) {\n            $scope.currentDisplayPapersType = 'default';\n            $scope.currentDisplayedCategories = [];\n            var showCategoryObject = {};\n            for (var categoryName in $scope.categoriesTree) {\n                $scope.currentDisplayedCategories.push(tmpObject);\n            }\n            $scope.currentDisplayedMaterialName = $filter('translate')('materials');\n            $scope.loadAllPapers();\n            $scope.onCurrentCategoryClick(showCategoryObject);\n        };\n\n        $scope.showGroup = function (showGroupName, choosenTypeID ) {\n            $scope.currentDisplayPapersType = 'default';\n            $scope.currentDisplayedCategories = [];\n            var showGroupObject = {};\n            for (var categoryName in $scope.categoriesTree) {\n                var tmpObject = {};\n                tmpObject.name = categoryName;\n                tmpObject.category = categoryName;\n                tmpObject.group = '';\n                tmpObject.type = '';\n                tmpObject.typeData = {};\n                tmpObject.displayType = 'category';\n                $scope.currentDisplayedCategories.push(tmpObject);\n                if(categoryName.replace(/\\s+/g, '') == showGroupName.replace(/\\s+/g, '')){\n                    showGroupObject = tmpObject;\n                }\n                for (var groupName in $scope.categoriesTree[categoryName]) {\n                    var tmpObject2 = {};\n                    tmpObject2.name = groupName;\n                    tmpObject2.category = categoryName;\n                    tmpObject2.group = groupName;\n                    tmpObject2.type = '';\n                    tmpObject2.typeData = {};\n                    tmpObject2.displayType = 'group';\n                    if(groupName.replace(/\\s+/g, '') == showGroupName.replace(/\\s+/g, '')){\n                        showGroupObject = tmpObject2;\n                    }\n                    for (var typeName in $scope.categoriesTree[categoryName][groupName]) {\n                        var tmpObject3 = {};\n                        tmpObject3.name = typeName;\n                        tmpObject3.category = categoryName;\n                        tmpObject3.group = groupName;\n                        tmpObject3.type = typeName;\n                        tmpObject3.typeData = $scope.categoriesTree[categoryName][groupName][typeName];\n                        tmpObject3.displayType = 'type';\n                        if(typeName.replace(/\\s+/g, '') == showGroupName.replace(/\\s+/g, '')){\n                            showGroupObject = tmpObject3;\n                        }\n                    }\n                }\n            }\n            $scope.currentDisplayedMaterialName = $filter('translate')('materials');\n            $scope.loadAllPapers();\n            $scope.onCurrentCategoryClick(showGroupObject);\n            if(choosenTypeID){\n                $scope.choosenTypeID = choosenTypeID;\n            }\n        };\n\n        var agregateIDSFilter = [];\n        $scope.onCurrentCategoryClick = function (clickedCategory) {\n            if (clickedCategory.displayType === 'category') {\n                $scope.currentDisplayedCategories = [];\n                for (var categoryName in $scope.categoriesTree[clickedCategory.category]) {\n                    var tmpObject = {};\n                    tmpObject.name = categoryName;\n                    tmpObject.category = clickedCategory.category;\n                    tmpObject.group = categoryName;\n                    tmpObject.type = '';\n                    tmpObject.typeData = {};\n                    tmpObject.displayType = 'group';\n                    $scope.currentDisplayedCategories.push(tmpObject);\n\n                    var agregateIDS = [];\n                    for (var group in $scope.categoriesTree[clickedCategory.category]) {\n                        for (var type in $scope.categoriesTree[clickedCategory.category][group]) {\n                            _.each($scope.categoriesTree[clickedCategory.category][group][type].IDS, function(singleID){\n                                agregateIDS.push(singleID);\n                            });\n                        }\n                    }\n                    agregateIDSFilter = agregateIDS;\n                    $scope.onInputChange();\n                }\n                $scope.currentDisplayedMaterialName = clickedCategory.category;\n                $scope.currentDisplayPapersType = 'default';\n            }\n            if (clickedCategory.displayType === 'group') {\n                $scope.currentDisplayedCategories = [];\n                for (var categoryName in $scope.categoriesTree[clickedCategory.category][clickedCategory.group]) {\n                    var tmpObject = {};\n                    tmpObject.name = categoryName;\n                    tmpObject.category = clickedCategory.category;\n                    tmpObject.group = clickedCategory.group;\n                    tmpObject.type = categoryName;\n                    tmpObject.typeData = $scope.categoriesTree[clickedCategory.category][clickedCategory.group][categoryName];\n                    tmpObject.displayType = 'type';\n                    $scope.currentDisplayedCategories.push(tmpObject);\n\n                    var agregateIDS = [];\n                    for (var type in $scope.categoriesTree[clickedCategory.category][clickedCategory.group]) {\n                        _.each($scope.categoriesTree[clickedCategory.category][clickedCategory.group][type].IDS,function(singleID){\n                            agregateIDS.push(singleID);\n                        });\n                    }\n                    agregateIDSFilter = agregateIDS;\n                    $scope.onInputChange();\n                }\n                $scope.currentDisplayedMaterialName = clickedCategory.group;\n                $scope.currentDisplayPapersType = 'default';\n            }\n            if (clickedCategory.displayType === 'type') {\n                $scope.choosenTypeID = null;\n                $scope.onTypeClick(clickedCategory.category, clickedCategory.group, clickedCategory.type, clickedCategory.typeData);\n                $scope.currentDisplayedCategories = [];\n                var tmpObject = {};\n                tmpObject.name = clickedCategory.name;\n                tmpObject.category = clickedCategory.category;\n                tmpObject.group = clickedCategory.group;\n                tmpObject.type = clickedCategory.type;\n                tmpObject.typeData = clickedCategory.typeData;\n                tmpObject.displayType = 'typeCurrent';\n                $scope.currentDisplayedCategories.push(tmpObject);\n                $scope.currentDisplayedMaterialName = clickedCategory.type;\n\n                var agregateIDS = [];\n                _.each($scope.categoriesTree[clickedCategory.category][clickedCategory.group][clickedCategory.type].IDS,function(singleID){\n                    agregateIDS.push(singleID);\n                });\n                agregateIDSFilter = agregateIDS;\n                $scope.onInputChange();\n                $scope.currentDisplayPapersType = 'papers';\n            }\n        };\n\n        var timerId;\n\n        $scope.onInputChange = function (force) {\n            clearTimeout(timerId);\n            if (!(force === true)) {\n                timerId = setTimeout(function () {\n                    $scope.onInputChange(true);\n                }, 1000);\n                return\n            }\n            $scope.filtersUsed = true;\n            AttributeFiltersService.search(2, $scope.filterParts).then(function (data) {\n                if ($scope.choosenTypeID != null) {\n                    var dataSend = {};\n                    dataSend.attrID = 2;\n                    dataSend.optID = $scope.choosenTypeID;\n                    $scope.alternativePapers = [];\n                    AttributeFiltersService.getRelativePapers(dataSend).then(function(altPapersFilter){\n                        if(altPapersFilter.length > 0){\n                            var filterPartsAltPapers = [];\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'name', 'text', filterConfig, 'name_of_atrritute');\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'category', 'select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'group', 'select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'paper_type', 'select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'weight', 'range', filterConfig, null, false, 0);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'whiteness', 'range', filterConfig, null, false, 0);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'thickness', 'range', filterConfig, null, false, 3);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'opacity', 'range', filterConfig, null, false, 0);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'roughness', 'range', filterConfig, null, false, 0);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'certificates', 'multi-select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'printingTechniques', 'multi-select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'application', 'multi-select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'color_hex', 'multi-select-color', filterConfig, 'paper_color');\n                            _.each(altPapersFilter, function (fd) {\n                                var part = _.find(filterPartsAltPapers, {name: fd.name});\n                                if (fd.valueType == 'min') {\n                                    part.minValue = fd.value;\n                                } else if (fd.valueType == 'max') {\n                                    part.maxValue = fd.value;\n                                } else if (part.type == 'multi-select' || part.type == 'multi-select-color') {\n                                    if (!part.selectedValues) {\n                                        part.selectedValues = [];\n                                    }\n                                    part.selectedValues[fd.value] = true;\n                                }  else if (fd.valueType == 'exact') {\n                                    part.value = String(fd.value);\n                                }\n                            });\n                            AttributeFiltersService.search(2, filterPartsAltPapers).then(function (altPapers) {\n                                $scope.alternativePapers = altPapers;\n                            });\n                        }\n                    });\n                }\n                // agregateIDSFilter\n                if(agregateIDSFilter.length === 0){\n                    $scope.filteredOptions = data;\n                }else{\n                    $scope.filteredOptions = _.filter(data, function (singleData) {\n                        if(agregateIDSFilter.includes(singleData.ID)){\n                            return true;\n                        }else{\n                            return false;\n                        }\n                    });\n                }\n\n                if ($scope.currentDisplayPapersType === 'default') {\n                    $scope.currentDisplayPapersPage = 1;\n                    var arrayStart = 0;\n                    var arrayEnd = papersPerPage * $scope.currentDisplayPapersPage;\n                    $scope.currentDisplayPapersPageData = $scope.filteredOptions.slice(arrayStart, arrayEnd);\n                    preparePagination();\n                }\n\n                var filteredOptionsIds = _.map($scope.filteredOptions, function (item) {\n                    return item.ID;\n                });\n\n                $scope.products = _.filter(allProductsUsingOptions, function (product) {\n                    for (var i = 0; i < product.options.length; i++) {\n                        if ($scope.choosenTypeID != null) {\n                            if (product.options[i] == $scope.choosenTypeID) {\n                                return true;\n                            }\n                        } else {\n                            for (var j = 0; j < filteredOptionsIds.length; j++) {\n                                if (product.options[i] == filteredOptionsIds[j]) {\n                                    return true;\n                                }\n                            }\n                        }\n                    }\n                    return false;\n                });\n            }, function (error) {\n            });\n        }\n\n        // $scope.onInputChange = function () {\n        //     $scope.filtersUsed = true;\n        //     var matchIds = ['ids'];\n        //     var matchPart = ['name'];\n        //     var matchRangeSlider = ['weight', 'whiteness', 'thickness', 'opacity', 'roughness'];\n        //     var matchArrays = ['certificates', 'printingTechniques', 'color_hex', 'application'];\n        //     $scope.filteredOptions = _.filter(allOptions, function (item) {\n        //         var pass = true;\n        //         for (var part in $scope.filterParts) {\n        //             var filterValue = $scope.filterParts[part].value\n        //             if (matchIds.indexOf($scope.filterParts[part].name) > -1 && filterValue) {\n        //                 pass = filterValue.indexOf(item.ID) > -1;\n        //             } else if (matchPart.indexOf($scope.filterParts[part].name) > -1 && filterValue) {\n        //                 pass = item.names[$rootScope.currentLang.code] && item.names[$rootScope.currentLang.code].toLowerCase().indexOf(filterValue.toLowerCase()) > -1;\n        //             } else if (matchRangeSlider.indexOf($scope.filterParts[part].name) > -1 && item.descriptions[$scope.filterParts[part].name]) {\n        //                 var description = item.descriptions[$scope.filterParts[part].name];\n        //                 pass = description >= $scope.filterParts[part].minValue && description <= $scope.filterParts[part].maxValue;\n        //             } else if (matchArrays.indexOf($scope.filterParts[part].name) > -1) {\n        //                 var filterValues = [];\n        //                 for (var key in $scope.filterParts[part].selectedValues) {\n        //                     if ($scope.filterParts[part].selectedValues[key]) {\n        //                         filterValues.push(key);\n        //                     }\n        //                 }\n        //                 if (filterValues.length > 0) {\n        //                     var xor = _.xor(filterValues, item.descriptions[$scope.filterParts[part].name])\n        //                     pass = xor && xor.length != (filterValues.length + item.descriptions[$scope.filterParts[part].name].length)\n        //                 }\n        //             }\n        //             if (!pass) {\n        //                 break;\n        //             }\n        //         }\n        //         return pass;\n        //     });\n\n        //     if ($scope.currentDisplayPapersType === 'default') {\n        //         $scope.currentDisplayPapersPage = 1;\n        //         var arrayStart = 0;\n        //         var arrayEnd = papersPerPage * $scope.currentDisplayPapersPage;\n        //         $scope.currentDisplayPapersPageData = $scope.filteredOptions.slice(arrayStart, arrayEnd);\n        //         preparePagination();\n        //     }\n\n        //     var filteredOptionsIds = _.map($scope.filteredOptions, function (item) {\n        //         return item.ID;\n        //     });\n\n        //     console.log('$scope.choosenTypeID');\n        //     console.log($scope.choosenTypeID);\n        //     $scope.products = _.filter(allProductsUsingOptions, function (product) {\n        //         for (var i = 0; i < product.options.length; i++) {\n        //             if($scope.choosenTypeID != null){\n        //                 if (product.options[i] == $scope.choosenTypeID) {\n        //                     return true;\n        //                 }\n        //             }else{\n        //                 for (var j = 0; j < filteredOptionsIds.length; j++) {\n        //                     if (product.options[i] == filteredOptionsIds[j]) {\n        //                         return true;\n        //                     }\n        //                 }\n        //             }\n        //         }\n        //         return false;\n        //     });\n        // }\n\n        $scope.onPageChange = function (page) {\n            var numberOfPages = Math.ceil($scope.filteredOptions.length / papersPerPage);\n            if (page < 1) {\n                page = 1;\n            } else if (page > numberOfPages) {\n                page = numberOfPages;\n            }\n            var currentPage = page - 1;\n            $scope.currentDisplayPapersPage = page;\n            var arrayStart = currentPage * papersPerPage;\n            var arrayEnd = papersPerPage * (currentPage + 1);\n            $scope.currentDisplayPapersPageData = $scope.filteredOptions.slice(arrayStart, arrayEnd);\n            preparePagination();\n        };\n\n        function preparePagination() {\n            var numberOfPages = Math.ceil($scope.filteredOptions.length / papersPerPage);\n            $scope.currentDisplayPapersPages = [];\n            if(numberOfPages > $scope.numberOfPagesInPagination){\n                var paginationPageStart = $scope.currentDisplayPapersPage - 3;\n                while (paginationPageStart <= 0) {\n                    paginationPageStart++;\n                }\n                while (paginationPageStart + $scope.numberOfPagesInPagination > numberOfPages) {\n                    paginationPageStart--;\n                }\n                for (var i = paginationPageStart; i <= paginationPageStart + $scope.numberOfPagesInPagination; i++) {\n                    $scope.currentDisplayPapersPages.push(i);\n                }\n            }else{\n                for (var i = 1; i <= numberOfPages; i++) {\n                    $scope.currentDisplayPapersPages.push(i);\n                }\n            }\n        }\n\n        $scope.onColorClick = function (unit, value) {\n            if (value) {\n                unit.selectedValues[value] = !unit.selectedValues[value];\n            } else {\n                unit.selectedValues = {};\n            }\n\n            $scope.onInputChange();\n        }\n\n        $scope.onCategoryClick = function (category) {\n            $scope.filteredOptions = []\n            $scope.visibleSection[category] = !$scope.visibleSection[category];\n        }\n\n        $scope.onGroupClick = function (group) {\n            $scope.visibleSection[group] = !$scope.visibleSection[group];\n        }\n\n        $scope.onTypeClick = function (category, group, type, data) {\n            var options = $scope.categoriesTree[category][group][type];\n            $scope.typeName = type;\n            $scope.typeDescription = options.description;\n            $scope.typeIcon = options.image;\n            var tmpIDS = data.IDS;\n            agregateIDSFilter = tmpIDS;\n            $scope.onInputChange();\n        }\n\n        $scope.withUnit = function (value, unit) {\n            if (!value) {\n                return '-';\n            }\n            return value + ' ' + unit\n        }\n\n        $scope.resetCatTree = function () {\n            $scope.visibleSection = {};\n            $scope.typeIcon = $scope.typeDescription = null;\n            agregateIDSFilter = [];\n            $scope.onInputChange();\n        }\n\n        $scope.resetFilters = function () {\n            $scope.currentDisplayPapersType = 'default';\n            $scope.typeName = $scope.typeDescription = $scope.typeIcon = '';\n            $scope.resetCatTree();\n            _.each($scope.filterParts, function (unit) {\n                unit.selectedValues = {};\n                unit.value = null;\n                if (unit.type == 'range') {\n                    var part = _.find(filterParts, { name: unit.name });\n                    unit.minValue = part.minValue;\n                    unit.maxValue = part.maxValue;\n                }\n            })\n            $scope.onInputChange();\n        }\n    });","start":4,"end":576,"route":null,"symbol":"index.AttributeFilters","metadata":{"calls_functions":["angular.module","Setting.getPublicSettings","loadAttributeFilters","AttributeFiltersService.getOptions","_.each","item.descriptions.name.includes","_.map","item.descriptions.name.split","value.trim","AttributeFiltersService.getProductsUsingOptions","AttributeFiltersService.getAttributeFilters","createFilterPart","_.cloneDeep","$scope.showAllPapers","$location.search","$scope.showGroup","_.clone","Math.round","$scope.onInputChange.apply","items.push","console.log","type.endsWith","type.slice","$scope.onTypeClick","setTimeout","agregateIDS.push","$scope.onInputChange","$scope.currentDisplayedCategories.push","$filter","$scope.loadAllPapers","$scope.onCurrentCategoryClick","categoryName.replace","showGroupName.replace","groupName.replace","typeName.replace","clearTimeout","AttributeFiltersService.search","AttributeFiltersService.getRelativePapers","_.find","String","_.filter","agregateIDSFilter.includes","$scope.filteredOptions.slice","preparePagination","Math.ceil","$scope.currentDisplayPapersPages.push","$scope.resetCatTree"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":59,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeFiltersCtrl.js:373-379:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeFiltersCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["singleData"],"antiPatterns":[],"text":"                    $scope.filteredOptions = _.filter(data, function (singleData) {\n                        if(agregateIDSFilter.includes(singleData.ID)){\n                            return true;\n                        }else{\n                            return false;\n                        }\n                    });","start":373,"end":379,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter","agregateIDSFilter.includes"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":59,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeFiltersCtrl.js:394-409:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/AttributeFiltersCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["product"],"antiPatterns":[],"text":"                $scope.products = _.filter(allProductsUsingOptions, function (product) {\n                    for (var i = 0; i < product.options.length; i++) {\n                        if ($scope.choosenTypeID != null) {\n                            if (product.options[i] == $scope.choosenTypeID) {\n                                return true;\n                            }\n                        } else {\n                            for (var j = 0; j < filteredOptionsIds.length; j++) {\n                                if (product.options[i] == filteredOptionsIds[j]) {\n                                    return true;\n                                }\n                            }\n                        }\n                    }\n                    return false;\n                });","start":394,"end":409,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":59,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/ConfrimNewsletterCtrl.js:4-24:controller:index.ConfirmNewsletter","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/ConfrimNewsletterCtrl.js","module":null,"name":"index.ConfirmNewsletter","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","Notification","SettingService"],"antiPatterns":[],"text":"    .controller('index.ConfirmNewsletter', function ($rootScope, $scope, $state, $filter, Notification,\n                                                     SettingService) {\n\n        var Setting = new SettingService('general');\n\n        $scope.confirmation = {};\n\n        function init() {\n            console.log( $state.params );\n            Setting.confirmNewsletter($state.params.token).then(function(data) {\n                if( data.response === true ) {\n                    $scope.confirmation.success = data.info;\n                } else {\n                    $scope.confirmation.error = data.info;\n                }\n            });\n        }\n\n        init();\n\n    });","start":4,"end":24,"route":null,"symbol":"index.ConfirmNewsletter","metadata":{"calls_functions":["angular.module","console.log","Setting.confirmNewsletter","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/FooterCtrl.js:5-71:controller:index.FooterCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/FooterCtrl.js","module":null,"name":"index.FooterCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$state","$filter","Notification","SettingService","NewsService","TextWidgetService"],"antiPatterns":[],"text":"    .controller('index.FooterCtrl', function ($scope, $rootScope, $state, $filter, Notification,\n                                              SettingService, NewsService, TextWidgetService) {\n\n        $scope.sent = false;\n        $scope.articles = [];\n        $scope.showArticles = false;\n        var additionalSettings = {};\n\n        var Setting = new SettingService('general');\n\n        $scope.sendEmail = function() {\n\n            Setting.setModule('general');\n            if( $scope.newsletterAgreement === undefined || $scope.newsletterAgreement === false) {\n                Notification.warning($filter('translate')('subscription_to_newsletter_agreement_info'));\n                return false;\n            }\n\n            Setting.signToNewsletter(this.email).then(function(data) {\n                if( data.response === true ) {\n                    $scope.sent = true;\n                    Notification.success($filter('translate')(data.info));\n                } else {\n                    Notification.error($filter('translate')(data.info));\n                }\n            });\n\n        };\n\n        function init() {\n            $rootScope.$on('$stateChangeStart',\n                function (event, toState, toParams, fromState, fromParams) {\n                    if( toState.name === 'home' || toState.name === 'news' ) {\n                        if( $scope.articles.length === 0 ) {\n                            getNews();\n                        }\n                        $scope.showArticles = true;\n                    } else {\n                        $scope.showArticles = false;\n                    }\n                });\n\n            if( $state.is('home') || $state.is('news') ) {\n                getNews();\n                $scope.showArticles = true;\n            } else {\n                $scope.showArticles = false;\n            }\n\n            Setting.setModule('additionalSettings');\n            Setting.getPublicSettings().then(function (data) {\n                additionalSettings = data;\n            });\n        }\n\n        function getNews() {\n            NewsService.getRss().then( function(data) {\n                if( data.items ) {\n                    $scope.articles = data.items;\n                }\n            });\n        }\n\n        init();\n\n\n    });","start":5,"end":71,"route":null,"symbol":"index.FooterCtrl","metadata":{"calls_functions":["angular.module","Setting.setModule","Notification.warning","$filter","Setting.signToNewsletter","Notification.success","Notification.error","$rootScope.$on","getNews","$state.is","Setting.getPublicSettings","NewsService.getRss","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":10,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/HomeCtrl.js:4-185:controller:index.HomeCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/HomeCtrl.js","module":null,"name":"index.HomeCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","$q","UserService","AuthService","DomainService","Notification","DpCategoryService","CategoryDescriptionService","HomepageBannerService","MainWidgetService"],"antiPatterns":[],"text":"    .controller('index.HomeCtrl', function ($rootScope, $scope, $state, $filter, $q, UserService, AuthService,\n                                            DomainService, Notification, DpCategoryService,\n                                            CategoryDescriptionService, HomepageBannerService, MainWidgetService) {\n\n        $scope.activeCategoryID = null;\n        $scope.articles = [];\n        $scope.startCategories = [];\n        $scope.mainButtonActive = false;\n        $scope._ = _;\n\n        function init() {\n            $scope.items = [];\n            $scope.products = [];\n            forView();\n            MainWidgetService.includeTemplateVariables($scope, 'content');\n        }\n\n        $scope.itemsClassName = function(product){\n            var attrIconWith = product.attributeIconWidth ? product.attributeIconWidth : $scope.attributeIconWidth;\n            var iconWidth = attrIconWith === 0 ? 1 : attrIconWith;\n            if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 0){\n                return 'col-xs-6 col-sm-4 col-md-'+(iconWidth*3)+' col-lg-'+(iconWidth*3);\n            \n            }else if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 1){\n                return 'col-xs-12 col-sm-4 col-md-2 col-lg-2 col-md-'+(iconWidth*2)+'-20pp';\n\n            }else if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 2){\n                return 'col-xs-6 col-sm-3 col-md-'+(iconWidth*2)+' col-lg-'+(iconWidth*2);\n            \n            }else if (($scope.attributeDescView == 1 || $scope.attributeDescView == 2) && $scope.attributeMenuLeft == 0){\n                return 'col-xs-12 col-sm-12 col-md-6 col-lg-6';\n\n            }else if ($scope.attributeMenuLeft == 1){\n                return 'col-xs-4 col-sm-4 col-md-4 col-lg-4';\n            }\n        }\n\n        $scope.loadOtherTemplateVariables=function(templateName){\n            MainWidgetService.includeTemplateVariables($scope, templateName, undefined, undefined, undefined, true);\n        };\n\n        $scope.getTemplateVariable=function(collection, itemType,id,variableName,defaultValue){\n            return MainWidgetService.getTemplateVariable($scope, collection, itemType,id,variableName,defaultValue);\n        };\n\n        function forView() {\n            DpCategoryService.forView().then(function (data) {\n                $scope.items = data;\n                var tmpItems = [];\n                _.each($scope.items, function (item) {\n                    tmpItems.push(item.ID);\n                    if( item.onMainPage === 1 ) {\n                        $scope.startCategories.push(item.ID);\n                        $scope.mainButtonActive = true;\n                    }\n                });\n                getProducts(tmpItems);\n                getDescription(tmpItems);\n                getSlider();\n            }, function (data) {\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getProducts(list) {\n            $q.all([DpCategoryService.manyForView(list),\n                MainWidgetService.includeTemplateVariables($scope, 'calc', undefined, undefined, undefined, true),\n                MainWidgetService.includeTemplateVariables($scope, 'group', undefined, undefined, undefined, true),\n                MainWidgetService.includeTemplateVariables($scope, 'category', undefined, undefined, undefined, true),\n            ]).then(function (data) {\n                $scope.products = data[0];\n                var tplCalcVars = data[1].response[0].value;\n                var tplGroupVars = data[2].response[0].value;\n                var tplCategoryVars = data[3].response[0].value;//TODO\n\n                function assignVariables(product, tplItems) {\n                    _.each(tplItems, function (item) {\n                        product[item.name] = item.value;\n                    })\n\n                }\n\n                _.each($scope.products, function (productList) {\n                    _.each(productList, function (product) {\n                        if (product.relType === 1) {\n                            var tplItems = _.filter(tplGroupVars, function (item) {\n                                return item.groupID == product.ID\n                            });\n                            assignVariables(product, tplItems);\n                        } else if (product.relType === 2) {\n                            var tplItems = _.filter(tplCalcVars, function (item) {\n                                return item.typeID == product.ID\n                            });\n                            assignVariables(product, tplItems);\n                        }\n                    });\n                });\n\n\n            }, function (errors) {\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getDescription(list) {\n\n            CategoryDescriptionService.getAll(list).then(function (data) {\n\n                if (_.isEmpty(data)) {\n                    return;\n                }\n\n                var idx;\n\n                _.each(data, function (catDescriptions, cIndex) {\n                    _.each(catDescriptions, function (catDesc) {\n\n                        idx = _.findIndex($scope.items, {ID: parseInt(cIndex)});\n\n                        switch (catDesc.descType) {\n\n                            case 1:\n                                if ($scope.items[idx] !== undefined) {\n                                    if ($scope.items[idx].descriptions === undefined) {\n                                        $scope.items[idx].descriptions = [];\n                                    }\n                                    $scope.items[idx].descriptions.push(catDesc);\n                                }\n                                break;\n                            case 5:\n                                if ($scope.items[idx] !== undefined) {\n                                    if ($scope.items[idx].galleries === undefined) {\n                                        $scope.items[idx].galleries = [];\n                                    }\n\n                                    catDesc.items = [];\n\n                                    if (!_.isEmpty(catDesc.files)) {\n                                        _.each(catDesc.files, function (oneFile) {\n                                            catDesc.items.push({\n                                                thumb: oneFile.urlCrop,\n                                                img: oneFile.url,\n                                                description: 'Image ' + oneFile.fileID\n                                            });\n                                        });\n                                    }\n                                    $scope.items[idx].galleries.push(catDesc);\n                                }\n                                break;\n                        }\n\n                    });\n\n                });\n\n            });\n\n        }\n\n        function getSlider() {\n\n            HomepageBannerService.getAll().then(function (data) {\n                var sliderData = [];\n                sliderData.push({'ID': 1, 'files': data});\n                $rootScope.$emit('Slider:data', sliderData);\n            });\n\n        }\n\n        $scope.setActiveCategory = function (item) {\n            $scope.activeCategoryID = item.ID;\n            $scope.mainButtonActive = false;\n        };\n\n        $scope.setActiveMainButton = function() {\n            $scope.mainButtonActive = true;\n            $scope.activeCategoryID = null;\n        };\n\n        init();\n\n    });","start":4,"end":185,"route":null,"symbol":"index.HomeCtrl","metadata":{"calls_functions":["angular.module","forView","MainWidgetService.includeTemplateVariables","MainWidgetService.getTemplateVariable","DpCategoryService.forView","_.each","tmpItems.push","$scope.startCategories.push","getProducts","getDescription","getSlider","Notification.error","$filter","$q.all","DpCategoryService.manyForView","_.filter","assignVariables","CategoryDescriptionService.getAll","_.isEmpty","_.findIndex","parseInt","$scope.items.idx.descriptions.push","catDesc.items.push","$scope.items.idx.galleries.push","HomepageBannerService.getAll","sliderData.push","$rootScope.$emit","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":30,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/HomeCtrl.js:89-91:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/HomeCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"                            var tplItems = _.filter(tplGroupVars, function (item) {\n                                return item.groupID == product.ID\n                            });","start":89,"end":91,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.each","_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":30,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/HomeCtrl.js:94-96:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/HomeCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"                            var tplItems = _.filter(tplCalcVars, function (item) {\n                                return item.typeID == product.ID\n                            });","start":94,"end":96,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.each","_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":30,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/LoginCtrl.js:3-67:controller:index.LoginCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/LoginCtrl.js","module":null,"name":"index.LoginCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","$window","$http","UserService","AuthService","DomainService","DpAddressService","Notification","LoginWidgetService","SocialWidgetService","MainWidgetService"],"antiPatterns":[],"text":"    .controller('index.LoginCtrl', function ($rootScope, $scope, $state, $filter, $window, $http, UserService,\n                                             AuthService, DomainService, DpAddressService, Notification,\n                                             LoginWidgetService, SocialWidgetService, MainWidgetService) {\n\n        MainWidgetService.includeTemplateVariables($scope, 'login');\n        if (!_.isUndefined($state.current.data)) {\n            $rootScope.bodyClass = $state.current.data.bodyClass;\n        }\n\n        $rootScope.rememberLogin = false;\n\n        $scope.login = function (credentials) {\n            var backTo = {};\n            const fState=$rootScope.getLastFunctionalState();\n            if(fState){\n                Object.assign(backTo, fState);\n            }\n            else if( $rootScope.startPoint ) {\n                backTo.state = $rootScope.startPoint.state;\n                backTo.params = $rootScope.startPoint.params;\n            }\n            LoginWidgetService.login(credentials, backTo);\n        };\n\n        $scope.check = function () {\n            AuthService.check().then(function (data) {\n                $rootScope.logged = true;\n            }, function (data) {\n                $rootScope.logged = false;\n            });\n        };\n\n        $scope.getUser = function () {\n            return AuthService.getCurrentUser();\n        };\n\n        $scope.passForget = function () {\n            UserService.passForget($scope.email).then(function () {\n                console.log('udało się zmienić email');\n            }, function (data) {\n                console.log('nie udało się zmienić maila');\n            });\n        };\n\n        $scope.changeMail = function () {\n            UserService.changeMail($scope.form).then(function (data) {\n                console.log('udało się zmienić email');\n            }, function (data) {\n                console.log('nie udało się zmienić maila');\n            });\n        };\n\n        $scope.loginFacebook = function () {\n\n            SocialWidgetService.loginFacebook();\n\n        };\n\n        $scope.loginGoogle = function () {\n\n            SocialWidgetService.loginGoogle();\n\n        };\n\n    });","start":3,"end":67,"route":null,"symbol":"index.LoginCtrl","metadata":{"calls_functions":["angular.module","MainWidgetService.includeTemplateVariables","_.isUndefined","$rootScope.getLastFunctionalState","Object.assign","LoginWidgetService.login","AuthService.check","AuthService.getCurrentUser","UserService.passForget","console.log","UserService.changeMail","SocialWidgetService.loginFacebook","SocialWidgetService.loginGoogle"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":4,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/LogoutCtrl.js:4-34:controller:index.LogoutCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/LogoutCtrl.js","module":null,"name":"index.LogoutCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","AuthService","Notification","localStorageService","TokenService","LogoutService"],"antiPatterns":[],"text":"    .controller('index.LogoutCtrl', function($rootScope, $scope, $state, $filter, AuthService,\n                                             Notification, localStorageService, TokenService, LogoutService) {\n\n\tfunction init(){\n\n\t\t AuthService.logout().then( function( res ) {\n\n            if( res.logout ) {\n                TokenService.getNonUserToken().then(function(data) { \n                    \n                    $rootScope.logged = false;\n                    $rootScope.oneTimeUser = false;\n                    $rootScope.orderID = null;\n                    if( !$rootScope.logged ) {\n                        Notification.info( $filter('translate')('you_are_loggedout') );\n                        AuthService.setAccessToken(data.token);\n                        $state.go('login');\n                    }\n                });\n                \n            } else {\n                Notification.error( $filter('translate')('unexpected_error') );\n            }\n            \n        }, function() {\n        \tNotification.error( $filter('translate')('unexpected_error') );\n        });\n\t}\n\n\tinit();\n});","start":4,"end":34,"route":null,"symbol":"index.LogoutCtrl","metadata":{"calls_functions":["angular.module","AuthService.logout","TokenService.getNonUserToken","Notification.info","$filter","AuthService.setAccessToken","$state.go","Notification.error","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/MainCtrl.js:4-100:controller:index.MainCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/MainCtrl.js","module":null,"name":"index.MainCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$q","$scope","$rootScope","MainWidgetService","MenuTypesService","$state","DpCartsDataService"],"antiPatterns":[],"text":"    .controller('index.MainCtrl', function ($q, $scope, $rootScope, MainWidgetService, MenuTypesService, $state, DpCartsDataService) {\n        MainWidgetService.includeTemplateVariables($scope, 'header');\n        MainWidgetService.getMegaMenu().then(function (megaMenu) {\n\n            if( megaMenu.items.length > 0 ) {\n                megaMenu.items[0].isVisible = true;\n            }\n\n            $rootScope.menuItems = megaMenu.items;\n            if( megaMenu.visible === 1 ) {\n                $rootScope.showMenu = true;\n            } else {\n                $rootScope.showMenu = false;\n            }\n\n            $rootScope.menuType = megaMenu.menuType;\n\n            if( $rootScope.menuType === undefined ) {\n                $rootScope.menuType = 1;\n            }\n\n            $rootScope.allTypes = MenuTypesService.getAllTypes(megaMenu.items);\n        });\n\n        $scope.showSubMenu = function(item) {\n            _.each($scope.menuItems, function(iterateItem) {\n                if(item === iterateItem) {\n                    iterateItem.isVisible = true;\n                } else {\n                    iterateItem.isVisible = false;\n                }\n            });\n        };\n        $scope.menu_show = false;\n        $scope.menu_toggle= function () {\n            $scope.menu_show = !$scope.menu_show ;\n        };\n\n\n        $scope.checkState = function(stateName) {\n            return $state.current.state === stateName;\n        };\n\n        $rootScope.$on('CreditLimit:reload', function (event, data) {\n            MainWidgetService.getCreditLimitInfo();\n        });\n\n        MainWidgetService.getForms().then( function( forms ) {\n            $rootScope.forms = forms;\n        });\n\n        $(window).resize(function () {\n            if ($(window).width() < 768) {\n                $('.navbar-collapse li a.navbarLink').attr('data-toggle', 'collapse').attr('data-target', '#navbar');\n            } else {\n                $('.navbar-collapse li a.navbarLink').attr('data-toggle', false).attr('data-target', false);\n            }\n        });\n\n        $scope.scrollToTop = function () {\n            var duration = 500;\n            $('html, body').animate({scrollTop: 0}, duration);\n        };\n\n        $scope.zoomStaticImage = function (urls) {\n            if (!_.isArray(urls)) {\n                urls = [urls]\n            }\n            $scope.actualFile = urls;\n        };\n\n        $(function() {\n\n            MainWidgetService.handleGoTop();\n\n            var intervalHandler = setInterval(function() {\n                if( $('.navbar-collapse li a.navbarLink').size() > 0 ) {\n                    if ($(window).width() < 768) {\n                        $('.navbar-collapse li a.navbarLink').attr('data-toggle', 'collapse').attr('data-target', '#navbar');\n                    } else {\n                        $('.navbar-collapse li a.navbarLink').attr('data-toggle', false).attr('data-target', false);\n                    }\n                    clearInterval(intervalHandler);\n                }\n            }, 500);\n\n        });\n\n        if($rootScope.logged == true){\n            DpCartsDataService.get($rootScope.user.userID).then(function (result){\n                if(result[0])\n                    $rootScope.orderID = result[0].orderID;\n                $rootScope.$emit('cartRequired');\n            });\n        }\n\n    });","start":4,"end":100,"route":null,"symbol":"index.MainCtrl","metadata":{"calls_functions":["angular.module","MainWidgetService.includeTemplateVariables","MainWidgetService.getMegaMenu","MenuTypesService.getAllTypes","_.each","$rootScope.$on","MainWidgetService.getCreditLimitInfo","MainWidgetService.getForms","$","_.isArray","MainWidgetService.handleGoTop","setInterval","clearInterval","DpCartsDataService.get","$rootScope.$emit"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/NewsCtrl.js:7-28:controller:index.NewsCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/NewsCtrl.js","module":null,"name":"index.NewsCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","NewsService","$state"],"antiPatterns":[],"text":"    .controller('index.NewsCtrl', function( $scope, NewsService, $state) {\n\n        $scope.articles = [];\n\n        function init(){\n\n          getNews();\n\n        }\n\n\n        function getNews() {\n            NewsService.getRss().then( function(data) {\n                if( data.items ) {\n                    $scope.articles = data.items;\n                }\n            });\n        }\n\n        init();\n\n    });","start":7,"end":28,"route":null,"symbol":"index.NewsCtrl","metadata":{"calls_functions":["angular.module","getNews","NewsService.getRss","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/PassForgetCtrl.js:7-30:controller:index.PassForgetCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/PassForgetCtrl.js","module":null,"name":"index.PassForgetCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","AuthService","Notification","UserService"],"antiPatterns":[],"text":".controller('index.PassForgetCtrl', function($rootScope, $scope, $state, $filter, AuthService, Notification, UserService) {\n\n    function init(){\n\n\n    }\n\n    init();\n\n    $scope.passForget = function() {\n\n        UserService.passForget($scope.email).then( function(data) {\n            if( data.response ) {\n                Notification.success($filter('translate')(\"new_password_sent\"));\n                $state.go('login');\n            } else {\n                Notification.error($filter('translate')(\"error\"));\n            }\n        }, function(data) {\n            Notification.error($filter('translate')(\"error\"));\n        });\n\n    }\n});","start":7,"end":30,"route":null,"symbol":"index.PassForgetCtrl","metadata":{"calls_functions":["angular.module","init","UserService.passForget","Notification.success","$filter","$state.go","Notification.error"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/RegisterCtrl.js:2-167:controller:index.RegisterCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/RegisterCtrl.js","module":null,"name":"index.RegisterCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$state","$filter","UserService","AuthService","Notification","CountriesService","RegisterWidget","LoginWidgetService","SocialWidgetService","SettingService","$cookieStore","vcRecaptchaService","MainWidgetService"],"antiPatterns":[],"text":"    .controller('index.RegisterCtrl', function ($scope, $rootScope, $state, $filter, UserService,\n                                                AuthService, Notification, CountriesService, RegisterWidget,\n                                                LoginWidgetService, SocialWidgetService, SettingService,\n                                                $cookieStore, vcRecaptchaService, MainWidgetService) {\n\n        MainWidgetService.includeTemplateVariables($scope, 'register');\n\n        $scope.form = {};\n        $scope.countries = [];\n        $scope.onlyForCompanies = false;\n        $scope._ = _;\n\n        $scope.response = null;\n        $scope.widgetId = null;\n\n        $scope.setResponse = function (response) {\n            console.info('Captcha response available');\n            $scope.response = response;\n        };\n        $scope.setWidgetId = function (widgetId) {\n            console.info('Created captcha widget ID: %s', widgetId);\n            $scope.widgetId = widgetId;\n        };\n        $scope.cbExpiration = function () {\n            console.info('Captcha expired. Resetting response object');\n            vcRecaptchaService.reload($scope.widgetId);\n            $scope.response = null;\n        };\n\n        var Setting = new SettingService('additionalSettings');\n\n        function init() {\n\n            var currentLangCode;\n            if( $rootScope.currentLang ) {\n                currentLangCode = $rootScope.currentLang.code;\n            } else {\n                currentLangCode = $rootScope.defaultLangCode;\n            }\n\n            CountriesService.getAll().then(function (dataCountries) {\n                _.each(dataCountries, function(one) {\n\n                    if( currentLangCode ) {\n                        if( one['name_' + currentLangCode] !== undefined ) {\n                            if( currentLangCode.toUpperCase() === one.code ) {\n                                $scope.form.ad_countryCode = one.code;\n                                $scope.form.del_countryCode = one.code;\n                                $scope.form.fv_countryCode = one.code;\n\n                                $scope.form.ad_areaCode = one.areaCode;\n                                $scope.form.del_areaCode = one.areaCode;\n                            }\n                            $scope.countries.push(one);\n                        }\n                    } else {\n                        $scope.countries.push(one);\n                    }\n\n                });\n            });\n\n            Setting.getPublicSettings().then(function(settingData) {\n                if( settingData.onlyForCompanies ) {\n                    $scope.onlyForCompanies = settingData.onlyForCompanies.value;\n                }\n                if (settingData.captchaPublicKey) {\n                    $scope.model = {\n                        key: settingData.captchaPublicKey.value\n                    };\n                }\n            });\n        }\n\n        init();\n\n        $scope.$watch('countries', function (countries) {\n\n            if( _.isEmpty(countries) ) {\n                return;\n            }\n\n            RegisterWidget.initCodeRegister($scope, countries);\n\n        });\n\n        $scope.selectCountry = function( prefix ) {\n            RegisterWidget.selectCountryRegister($scope, prefix);\n        };\n\n        $scope.addUser = function () {\n\n            $scope.form.captchaResponse = $scope.response;\n\n            if ($scope.form.terms !== true || $scope.form.data_protection !== true) {\n                Notification.error($filter('translate')('accept_terms'));\n            } else {\n                UserService.userRegister($scope.form).then(function (data) {\n                    Notification.success($filter('translate')('user_has_been_added'));\n                    var credentials = {};\n                    credentials.password = $scope.form.pass;\n                    credentials.email = $scope.form.user;\n\n                    LoginWidgetService.login(credentials);\n\n                }, function (data) {\n                    if( data.info ) {\n                        Notification.error($filter('translate')(data.info));\n                    } else {\n                        Notification.error($filter('translate')('unexpected_error'));\n                    }\n                });\n            }\n\n        };\n\n        $scope.loginFacebook = function () {\n\n            SocialWidgetService.loginFacebook();\n\n        };\n\n        $scope.loginGoogle = function () {\n\n            SocialWidgetService.loginGoogle();\n\n        };\n\n        $scope.login = function (credentials) {\n            var backTo = {};\n            if( $rootScope.startPoint ) {\n                backTo.state = $rootScope.startPoint.state;\n                backTo.params = $rootScope.startPoint.params;\n            }\n            LoginWidgetService.login(credentials, backTo);\n        };\n\n        $scope.copyFromUserForm = function() {\n            $scope.form.fv_street = $scope.form.ad_street;\n            $scope.form.fv_house = $scope.form.ad_house;\n            $scope.form.fv_apartment = $scope.form.ad_apartment;\n            $scope.form.fv_zipcode = $scope.form.ad_zipcode;\n            $scope.form.fv_city = $scope.form.ad_city;\n            $scope.form.fv_countryCode = $scope.form.ad_countryCode;\n            $scope.form.fv_areaCode = $scope.form.ad_areaCode;\n            $scope.form.fv_telephone = $scope.form.ad_telephone;\n        };\n\n        $scope.copyFromDeliveryForm = function() {\n            $scope.form.fv_companyName = $scope.form.del_companyName;\n            $scope.form.fv_street = $scope.form.del_street;\n            $scope.form.fv_house = $scope.form.del_house;\n            $scope.form.fv_apartment = $scope.form.del_apartment;\n            $scope.form.fv_zipcode = $scope.form.del_zipcode;\n            $scope.form.fv_city = $scope.form.del_city;\n            $scope.form.fv_countryCode = $scope.form.del_countryCode;\n            $scope.form.fv_areaCode = $scope.form.del_areaCode;\n            $scope.form.fv_telephone = $scope.form.del_telephone;\n        };\n\n        $scope.isCountryCode = function () {\n            var country = _.find($scope.countries, {code: $scope.form.ad_countryCode});\n            return country && String(country.areaCode).length > 0\n        }\n\n    });","start":2,"end":167,"route":null,"symbol":"index.RegisterCtrl","metadata":{"calls_functions":["angular.module","MainWidgetService.includeTemplateVariables","console.info","vcRecaptchaService.reload","CountriesService.getAll","_.each","currentLangCode.toUpperCase","$scope.countries.push","Setting.getPublicSettings","init","$scope.$watch","_.isEmpty","RegisterWidget.initCodeRegister","RegisterWidget.selectCountryRegister","Notification.error","$filter","UserService.userRegister","Notification.success","LoginWidgetService.login","SocialWidgetService.loginFacebook","SocialWidgetService.loginGoogle","_.find","String"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":13,"eventfulness":{"watchers":1,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/SearchCtrl.js:7-24:controller:index.SearchCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/SearchCtrl.js","module":null,"name":"index.SearchCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","Notification","PsTypeService","$stateParams"],"antiPatterns":[],"text":"    .controller('index.SearchCtrl', function($rootScope, $scope, $state, $filter,\n                                             Notification, PsTypeService, $stateParams) {\n\n        var searchText = $stateParams.text;\n        $scope.results = [];\n        $scope.searchText = searchText;\n\n        function init(){\n\n            PsTypeService.search(searchText).then( function(data) {\n                $scope.results = data;\n            });\n\n        }\n\n        init();\n\n    });","start":7,"end":24,"route":null,"symbol":"index.SearchCtrl","metadata":{"calls_functions":["angular.module","PsTypeService.search","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/SitemapCtrl.js:7-91:controller:index.SitemapCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/SitemapCtrl.js","module":null,"name":"index.SitemapCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","routes","DpCategoryService","$q"],"antiPatterns":[],"text":"    .controller('index.SitemapCtrl', function( $scope, $rootScope, routes, DpCategoryService, $q ) {\n\n        $scope.sites = [];\n        $scope.menuItems = [];\n\n        var parentAvailable = ['sitemap', 'cart','attribute-filters'];\n\n        $rootScope.$watch('menuItems', function( data ) {\n            if( data !== undefined ) {\n                $scope.menuItems = data;\n            }\n        });\n\n        function init() {\n\n            routes.getAll().then( function(routeData) {\n                if( routeData.data ) {\n                    _.each(routeData.data, function(one, index) {\n                        if( one.route.parent === 'home' &&\n                            one.route.abstract === 0 &&\n                            parentAvailable.indexOf(one.route.state) > -1 ) {\n                            $scope.sites.push(one.route);\n                        } else if( one.route.parent === 'staticPages' ) {\n                            $scope.sites.push(one.route);\n                        }\n                    });\n\n                    getGroups().then( function(groupsData) {\n\n                        //$scope.sites.groups = groupsData;\n\n                        getItems().then(function (itemsData) {\n\n                            _.each(itemsData, function (parentCategory) {\n\n                                $scope.sites.push({\n                                    state: 'category',\n                                    langs: parentCategory.langs,\n                                    children: parentCategory.childs,\n                                    //groups: groupsData[parentCategory.ID],\n                                    types: parentCategory.types\n                                });\n\n\n                                _.each(parentCategory.childs, function(child) {\n\n                                    //child.groups =  groupsData[child.ID];\n\n                                });\n\n                            });\n                        });\n                    });\n\n                }\n            });\n\n        }\n\n        function getItems() {\n            var def = $q.defer();\n\n            var timeHandler = setTimeout(function(){\n                if( $scope.menuItems !== undefined ) {\n                    def.resolve($scope.menuItems);\n                    clearTimeout(timeHandler);\n                }\n            }, 1000);\n\n            return def.promise;\n        }\n\n        function getGroups() {\n            var def = $q.defer();\n\n            DpCategoryService.getGroups().then(function(data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        }\n\n        init();\n\n    });","start":7,"end":91,"route":null,"symbol":"index.SitemapCtrl","metadata":{"calls_functions":["angular.module","$rootScope.$watch","routes.getAll","_.each","parentAvailable.indexOf","$scope.sites.push","getGroups","getItems","$q.defer","setTimeout","def.resolve","clearTimeout","DpCategoryService.getGroups","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":8,"eventfulness":{"watchers":1,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/WCGA.js:2-46:directive:wcga","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/index/WCGA.js","module":null,"name":"wcga","kind":"directive","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .directive('wcga', function () {\n        return {\n            restrict: 'E',\n            scope: {},\n            replace: true,\n            templateUrl: 'src/index/templates/wcga.html',\n            controller: function ($scope, localStorageService, SettingService) {\n\n                var Setting = new SettingService('additionalSettings');\n                Setting.getPublicSettings().then(function (settingsData) {\n                    $scope.wcgaUsed = settingsData.wcgaUsed.value;\n                    if($scope.wcgaUsed){\n                        const lsKeys = localStorageService.keys()\n\n                        if (lsKeys.indexOf('wcgaKontrast') > -1) {\n                            $('body').addClass('wcga-contrast')\n                        }\n\n                        if (lsKeys.indexOf('wcgaFonts') > -1) {\n                            $('body').addClass('wcga-fonts')\n                        }\n                    }\n                });\n\n                $scope.changeContrast = () => {\n                    $('body').toggleClass('wcga-contrast');\n                    if ($('body').hasClass('wcga-contrast')) {\n                        localStorageService.set('wcgaKontrast', 1)\n                    } else {\n                        localStorageService.remove('wcgaKontrast')\n                    }\n                }\n\n                $scope.toggleFontSize = () => {\n                    $('body').toggleClass('wcga-fonts')\n                    if ($('body').hasClass('wcga-fonts')) {\n                        localStorageService.set('wcgaFonts', 1)\n                    } else {\n                        localStorageService.remove('wcgaFonts')\n                    }\n                }\n\n            }\n        }\n    })","start":2,"end":46,"route":null,"symbol":"wcga","metadata":{"calls_functions":["angular.module","Setting.getPublicSettings","localStorageService.keys","lsKeys.indexOf","$","localStorageService.set","localStorageService.remove"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":6,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/ContactFormCtrl.js:5-67:controller:ContactFormCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/ContactFormCtrl.js","module":null,"name":"ContactFormCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$state","$filter","Notification","SettingService","vcRecaptchaService"],"antiPatterns":[],"text":"    .controller('ContactFormCtrl', function ($scope, $state, $filter, Notification, SettingService,\n                                             vcRecaptchaService) {\n\n        var Setting = new SettingService('additionalSettings');\n\n        function init() {\n            Setting.getPublicSettings().then(function (settingsData) {\n                if (settingsData.captchaPublicKey) {\n                    $scope.model = {\n                        key: settingsData.captchaPublicKey.value\n                    };\n                }\n            });\n        }\n\n        $scope.response = null;\n        $scope.widgetId = null;\n\n        $scope.setResponse = function (response) {\n            console.info('Response available');\n            $scope.response = response;\n        };\n        $scope.setWidgetId = function (widgetId) {\n            console.info('Created widget ID: %s', widgetId);\n            $scope.widgetId = widgetId;\n        };\n        $scope.cbExpiration = function () {\n            console.info('Captcha expired. Resetting response object');\n            vcRecaptchaService.reload($scope.widgetId);\n            $scope.response = null;\n        };\n\n        $scope.sendMessage = function (key) {\n\n            console.log('sending the captcha response to the server', $scope.response);\n\n            var Setting = new SettingService('forms');\n\n            var contactData = $scope.contactForm;\n            contactData.captchaResponse = $scope.response;\n\n            $scope.mailSent = false;\n\n            Setting.sendMessage(key, contactData).then(function (sentData) {\n                if (sentData.response === true) {\n                    Notification.success($filter('translate')('email_sended'));\n                    $scope.mailSent = true;\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n            }, function (errorData) {\n                if( errorData.info ) {\n                    Notification.error($filter('translate')(errorData.info));\n                } else {\n                    Notification.error($filter('translate')('error'));\n                }\n\n            });\n\n        };\n\n        init();\n    });","start":5,"end":67,"route":null,"symbol":"ContactFormCtrl","metadata":{"calls_functions":["angular.module","Setting.getPublicSettings","console.info","vcRecaptchaService.reload","console.log","Setting.sendMessage","Notification.success","$filter","Notification.error","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":4,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/CurrencyCtrl.js:5-31:controller:CurrencyCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/CurrencyCtrl.js","module":null,"name":"CurrencyCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$cookieStore","UserService"],"antiPatterns":[],"text":"    .controller('CurrencyCtrl', function ($scope, $rootScope, $cookieStore, UserService) {\n\n        /**\n         * @param {Object} currency\n         * @param {number} currency.ID\n         * @param {string} currency.code\n         */\n        $scope.switchCurrency = function (currency) {\n\n            if( $rootScope.currentCurrency === currency ) {\n                return;\n            }\n\n            $rootScope.currentCurrency = currency;\n            $cookieStore.put('currency', currency.code);\n\n            if( $rootScope.logged ) {\n                UserService.editUserOptions($rootScope.user.userID, {currency: currency.code}).then( function( savedData ) {\n                    console.log(savedData);\n                });\n            }\n\n            $rootScope.$emit('Currency.changed', currency);\n\n        };\n\n    });","start":5,"end":31,"route":null,"symbol":"CurrencyCtrl","metadata":{"calls_functions":["angular.module","$cookieStore.put","UserService.editUserOptions","console.log","$rootScope.$emit"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/LangCtrl.js:37-57:config:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/LangCtrl.js","module":null,"name":"anonymous","kind":"route","nodeType":"Function","dependenciesDI":["$translateProvider","$langStorageProvider"],"antiPatterns":[],"text":"  }).config(function($translateProvider, $langStorageProvider){\n    var langArr=new Array($langStorageProvider.getLangCode());\n    $translateProvider\n        .fallbackLanguage(langArr)\n        .registerAvailableLanguageKeys(langArr, {\n            'pl_PL': 'pl',\n            'en_US': 'en',\n            'en_UK': 'en',\n            'de_DE': 'de',\n            'de_AT': 'de',\n            'de_CH': 'de',\n            'de_LI': 'de',\n            'de_LU': 'de',\n            'ru_RU': 'ru',\n            'es_ES': 'es',\n            'it_IT': 'it'\n        })\n        .useLoader('LangLoader')\n        .preferredLanguage(langArr[0]);\n\n  });","start":37,"end":57,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["$langStorageProvider.getLangCode","$translateProvider.fallbackLanguage"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/LangCtrl.js:2-37:controller:LangCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/LangCtrl.js","module":null,"name":"LangCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$translate","$cookieStore","$window","LangSettingsService","LangSettingsRootService","Notification","$langStorage"],"antiPatterns":[],"text":"  .controller('LangCtrl', function($scope, $rootScope, $translate, $cookieStore, $window, LangSettingsService,\n                                   LangSettingsRootService, Notification, $langStorage){\n\n\n      $rootScope.$on('LangSettings.getAll', function (e, data) {\n          var languages={}\n          _.each(data, function (item) {\n              if(item.active === 1) {\n                  languages[item.code] = item;\n              }\n          });\n          $rootScope.languages = languages;\n      });\n\n      LangSettingsService.getAll();\n\n      $scope.countLanguages = function() {\n          return _.values($rootScope.languages).length;\n      };\n\n\n\n      $scope.switchLanguage = function (key) {\n          $rootScope.$emit('changeLang', key);\n      };\n\n      $scope.switchCurrency = function (currency) {\n\n          var idx = _.findIndex($rootScope.currencies, {code: currency.code});\n\n          $rootScope.currentCurrency = $scope.currentCurrency = $rootScope.currencies[idx];\n          $cookieStore.put('currency', $rootScope.currentCurrency[index].code);\n\n      };\n\n  }).config(function($translateProvider, $langStorageProvider){","start":2,"end":37,"route":null,"symbol":"LangCtrl","metadata":{"calls_functions":["angular.module","$rootScope.$on","_.each","LangSettingsService.getAll","_.values","$rootScope.$emit","_.findIndex","$cookieStore.put"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/SearchFormCtrl.js:8-22:controller:SearchFormCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/layout/SearchFormCtrl.js","module":null,"name":"SearchFormCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$state","$filter","Notification"],"antiPatterns":[],"text":"    .controller('SearchFormCtrl', function ($scope, $state, $filter, Notification) {\n\n        $scope.search = function() {\n            /**\n             * @param this object\n             * @param this.searchText string\n             */\n            if( this.searchText.length < 3 ) {\n                Notification.warning($filter('translate')('enter_minimum_chars').replace(\"%d\", 3));\n                return;\n            }\n            $state.go('search', {text: this.searchText});\n        }\n\n    });","start":8,"end":22,"route":null,"symbol":"SearchFormCtrl","metadata":{"calls_functions":["angular.module","Notification.warning","$filter","$state.go"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/photo-folders/SharedFolderCtrl.js:5-92:controller:photo-folders.SharedFolderCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/photo-folders/SharedFolderCtrl.js","module":null,"name":"photo-folders.SharedFolderCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$stateParams","PhotoFolderService","$filter","Notification","$state"],"antiPatterns":[],"text":"    .controller('photo-folders.SharedFolderCtrl', function ($scope, $stateParams, PhotoFolderService, $filter,\n                                                            Notification, $state) {\n\n        $scope.actualPhoto = {};\n        $scope.folderId = $stateParams.folderid;\n        $scope.source = $stateParams.source;\n        $scope.folder = {};\n        $scope.photos = [];\n\n        $scope.rating = {\n            current: 0,\n            max: 5\n        };\n\n        $scope.getSelectedRating = function (rating) {\n            console.log(rating);\n        };\n\n        function init() {\n\n            if( $scope.source === 'mail' ) {\n                PhotoFolderService.getSharedByEmail($scope.folderId).then( function(data) {\n                    console.log(data);\n                });\n            } else if( $scope.source === 'facebook' ) {\n                PhotoFolderService.getSharedByFacebook($scope.folderId).then( function(data) {\n                    $scope.folder = data;\n                    $scope.photos = data.imageFiles;\n                });\n            }\n        }\n\n        init();\n\n        $scope.send = function(  ) {\n\n            var password = $scope.form.password;\n\n            PhotoFolderService.getSharedByEmail($scope.folderId, password).then( function(data) {\n                $scope.folder = data;\n                $scope.photos = data.imageFiles;\n            });\n\n        };\n\n        $scope.selectPhoto = function(photo) {\n            $scope.actualPhoto = photo;\n        };\n\n        $scope.nextPhoto = function(photo) {\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if( idx > -1 ) {\n                if( $scope.photos[idx+1] !== undefined ) {\n                    $scope.actualPhoto = $scope.photos[idx+1];\n                }\n            }\n        };\n\n        $scope.previousPhoto = function(photo) {\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if( idx > -1 ) {\n                if( $scope.photos[idx-1] !== undefined ) {\n                    $scope.actualPhoto = $scope.photos[idx-1];\n                }\n            }\n        };\n\n        $scope.nextExist = function(photo) {\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if( idx > -1 ) {\n                if( $scope.photos[idx+1] !== undefined) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        $scope.previousExist = function(photo) {\n            var idx = _.findIndex($scope.photos, {_id: photo._id});\n            if( idx > -1 ) {\n                if( $scope.photos[idx-1] !== undefined) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n    });","start":5,"end":92,"route":null,"symbol":"photo-folders.SharedFolderCtrl","metadata":{"calls_functions":["angular.module","console.log","PhotoFolderService.getSharedByEmail","PhotoFolderService.getSharedByFacebook","init","_.findIndex"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/photo-folders/SharedPhotoCtrl.js:8-44:controller:photo-folders.SharedPhotoCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/photo-folders/SharedPhotoCtrl.js","module":null,"name":"photo-folders.SharedPhotoCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$stateParams","PhotoFolderService","$filter","Notification","$state"],"antiPatterns":[],"text":"    .controller('photo-folders.SharedPhotoCtrl', function ($scope, $stateParams, PhotoFolderService, $filter,\n                                                           Notification, $state) {\n\n        $scope.photoId = $stateParams.photoid;\n        $scope.source = $stateParams.source;\n        $scope.photo = {};\n\n        function init() {\n\n            console.log( $scope.photoId );\n            console.log( $scope.source );\n\n            if( $scope.source === 'mail' ) {\n            } else if( $scope.source === 'facebook' ) {\n                PhotoFolderService.getPhotoSharedByFacebook($scope.photoId).then( function(data) {\n                    $scope.photo = data;\n                });\n            }\n        }\n\n        init();\n\n        $scope.send = function(  ) {\n\n            var password = $scope.form.password;\n\n            PhotoFolderService.getPhotoSharedByEmail($scope.photoId, password).then( function(data) {\n                $scope.photo = data;\n            });\n\n        };\n\n        $scope.selectPhoto = function(photo) {\n            $scope.actualPhoto = photo;\n        };\n\n    });","start":8,"end":44,"route":null,"symbol":"photo-folders.SharedPhotoCtrl","metadata":{"calls_functions":["angular.module","console.log","PhotoFolderService.getPhotoSharedByFacebook","init","PhotoFolderService.getPhotoSharedByEmail"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/photo-folders/SharedProjectCtrl.js:5-37:controller:photo-folders.SharedProjectCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/src/photo-folders/SharedProjectCtrl.js","module":null,"name":"photo-folders.SharedProjectCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$stateParams","EditorProjectService","Notification","$filter"],"antiPatterns":[],"text":"    .controller('photo-folders.SharedProjectCtrl', function ( $scope, $stateParams, EditorProjectService, Notification,\n                                                              $filter) {\n\n\n        $scope.projectId = $stateParams.projectid;\n        $scope.source = $stateParams.source;\n\n        $scope.send = function () {\n\n            EditorProjectService.shareMyProject(this.form.email, $scope.projectId).then(\n                function (data) {\n                    Notification.success($filter('translate')('success'));\n                }\n            );\n\n        };\n\n        $scope.sendFb = function() {\n\n            EditorProjectService.shareMyProjectByFb($scope.projectId).then(\n                function (data) {\n                    if( data.link ) {\n                        Notification.success($filter('translate')('success'));\n                        window.location.href = 'http://' + data.link;\n                    } else {\n                        Notification.error($filter('translate')('error'));\n                    }\n\n                }\n            );\n        };\n\n    });","start":5,"end":37,"route":null,"symbol":"photo-folders.SharedProjectCtrl","metadata":{"calls_functions":["angular.module","EditorProjectService.shareMyProject","Notification.success","$filter","EditorProjectService.shareMyProjectByFb","Notification.error"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeDetailsCtrl.js:4-156:controller:index.AttributeDetails","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeDetailsCtrl.js","module":null,"name":"index.AttributeDetails","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$window","$stateParams","$filter","AttributeFiltersService","Notification"],"antiPatterns":[],"text":"    .controller('index.AttributeDetails', function ($scope, $window, $stateParams, $filter, AttributeFiltersService, Notification) {\n\n        console.log($stateParams);\n        $scope.option = {};\n        $scope.products = [];\n\n        function createFilterPart(items, name, type, filterConfig, label, hidden, precision) {\n            items = _.clone(items);\n            var item = { name: name, type: type, title: !!label ? label : name, hidden: hidden };\n            switch (type) {\n                case 'multi-select':\n                case 'multi-select-color':\n                    item.values = filterConfig[name].values;\n                    item.selectedValues = {};\n                    break;\n                case 'range':\n                    item.minValue = filterConfig[name].minValue;\n                    item.maxValue = filterConfig[name].maxValue;\n                    var diff = filterConfig[name].maxValue - filterConfig[name].minValue\n                    var step = 1\n                    if (diff < 1) {\n                        step = 0.01;\n                    } else if (diff < 10) {\n                        step = 0.1;\n                    } else if (diff < 100) {\n                        step = 1\n                    } else {\n                        step = Math.round(diff / 50);\n                    }\n                    item.options = {\n                        floor: filterConfig[name].minValue,\n                        ceil: filterConfig[name].maxValue,\n                        step: step,\n                        precision: precision,\n                        onChange: function () {\n                            $scope.onInputChange.apply(this)\n                        }\n                    }\n                    break;\n            }\n            items.push(item);\n            return items;\n        };\n\n        var sendData = {};\n        sendData.attrID = $stateParams.attrid;\n        sendData.optID = $stateParams.optid;\n        AttributeFiltersService.getOption(sendData).then(function (data) {\n            if (data.length !== 0) {\n                console.log(data);\n\n                $scope.option.name = data[0].name;\n                $scope.option.sizePage = data[0].sizePage;\n                $scope.option.descriptions = data[0].descriptions;\n\n                $scope.option.certificates = [];\n                var certs = data[0].descriptions.certificates.split(', ');\n                if (certs.length > 0) {\n                    $scope.option.certificates = certs;\n                }\n\n                $scope.option.printingTechniques = [];\n                var printingTechniques = data[0].descriptions.printingTechniques.split(', ');\n                if (printingTechniques.length > 0) {\n                    $scope.option.printingTechniques = printingTechniques;\n                }\n\n                $scope.option.finishingAndProcessing = [];\n                var finishingAndProcessing = data[0].descriptions.finishingAndProcessing.split(', ');\n                if (finishingAndProcessing.length > 0) {\n                    $scope.option.finishingAndProcessing = finishingAndProcessing;\n                }\n\n                AttributeFiltersService.getProductsUsingOptions(sendData.attrID).then(function (allProducts) {\n                    if (allProducts.length > 0) {\n                        $scope.products = _.filter(allProducts, function (product) {\n                            for (var i = 0; i < product.options.length; i++) {\n                                if (product.options[i] == data[0].ID) {\n                                    return true;\n                                }\n                            }\n                            return false;\n                        });\n                    }\n                }, function (error) {\n\n                });\n\n                // get alt papers\n                var dataSend = {};\n                dataSend.attrID = 2;\n                dataSend.optID = data[0].ID;\n                $scope.alternativePapers = [];\n                AttributeFiltersService.getRelativePapers(dataSend).then(function (altPapersFilter) {\n                    if (altPapersFilter.length > 0) {\n                        AttributeFiltersService.getAttributeFilters(dataSend.attrID)\n                            .then(function (filterConfigData) {\n                                var filterConfig = filterConfigData.filterConfig;\n                                var filterPartsAltPapers = [];\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'name', 'text', filterConfig, 'name_of_atrritute');\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'category', 'select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'group', 'select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'paper_type', 'select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'weight', 'range', filterConfig, null, false, 0);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'whiteness', 'range', filterConfig, null, false, 0);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'thickness', 'range', filterConfig, null, false, 3);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'opacity', 'range', filterConfig, null, false, 0);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'roughness', 'range', filterConfig, null, false, 0);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'certificates', 'multi-select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'printingTechniques', 'multi-select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'application', 'multi-select', filterConfig);\n                                filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'color_hex', 'multi-select-color', filterConfig, 'paper_color');\n                                _.each(altPapersFilter, function (fd) {\n                                    var part = _.find(filterPartsAltPapers, { name: fd.name });\n                                    if (fd.valueType == 'min') {\n                                        part.minValue = fd.value;\n                                    } else if (fd.valueType == 'max') {\n                                        part.maxValue = fd.value;\n                                    } else if (part.type == 'multi-select' || part.type == 'multi-select-color') {\n                                        if (!part.selectedValues) {\n                                            part.selectedValues = [];\n                                        }\n                                        part.selectedValues[fd.value] = true;\n                                    } else if (fd.valueType == 'exact') {\n                                        part.value = String(fd.value);\n                                    }\n                                });\n                                AttributeFiltersService.search(2, filterPartsAltPapers).then(function (altPapers) {\n                                    $scope.alternativePapers = altPapers;\n                                });\n                            });\n                    }\n                });\n\n            }\n        });\n\n        $scope.downloadPDF = function(){\n            console.log('started rendering');\n            var downloadData = {};\n            downloadData.optID  = $stateParams.optid;\n            downloadData.altPapers = $scope.alternativePapers;\n            AttributeFiltersService.downloadPDF(downloadData).then(function (downloadResponse) {\n                console.log(downloadResponse);\n                if(downloadResponse.success){\n                    $window.open(downloadResponse.link, '_blank');\n                }else{\n                    Notification.error($filter('translate')('unexpected_error'));\n                }\n            });\n        };\n\n    });","start":4,"end":156,"route":null,"symbol":"index.AttributeDetails","metadata":{"calls_functions":["angular.module","console.log","_.clone","Math.round","$scope.onInputChange.apply","items.push","AttributeFiltersService.getOption","AttributeFiltersService.getProductsUsingOptions","_.filter","AttributeFiltersService.getRelativePapers","AttributeFiltersService.getAttributeFilters","createFilterPart","_.each","_.find","String","AttributeFiltersService.search","AttributeFiltersService.downloadPDF","$window.open","Notification.error","$filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":23,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeDetailsCtrl.js:79-86:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeDetailsCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["product"],"antiPatterns":[],"text":"                        $scope.products = _.filter(allProducts, function (product) {\n                            for (var i = 0; i < product.options.length; i++) {\n                                if (product.options[i] == data[0].ID) {\n                                    return true;\n                                }\n                            }\n                            return false;\n                        });","start":79,"end":86,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":23,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeFiltersCtrl.js:4-576:controller:index.AttributeFilters","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeFiltersCtrl.js","module":null,"name":"index.AttributeFilters","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$filter","$location","AttributeFiltersService","SettingService"],"antiPatterns":[],"text":"    .controller('index.AttributeFilters', function ($scope, $rootScope, $filter, $location, AttributeFiltersService, SettingService) {\n        var filterParts = [];\n        var allOptions;\n        var allProductsUsingOptions;\n        var attrID = null;\n        var Setting = new SettingService('additionalSettings');\n        Setting.getPublicSettings().then(function (settingsData) {\n            attrID = settingsData.filteredAttribute.value;\n            loadAttributeFilters();\n        });\n        var papersPerPage = 20;\n\n        var filterConfig = {};\n\n        $scope.alternativePapers = [];\n\n        $scope.numberOfPagesInPagination = 6;\n        $scope.currentDisplayedCategories = [];\n        $scope.currentDisplayedMaterialName = '';\n        $scope.currentDisplayPapersType = 'default';\n        $scope.choosenTypeID = null;\n        $scope.currentDisplayPapersPage = 1;\n        $scope.currentDisplayPapersPages = 1;\n        $scope.currentDisplayPapersPageData = [];\n        $scope.filtersUsed = false;\n        $scope.visibleSection = {};\n\n        function loadAttributeFilters() {\n            AttributeFiltersService.getOptions(attrID).then(function (data) {\n                _.each(data, function (item) {\n                    item.descriptions.weight = item.weight\n                    _.each(['certificates', 'printingTechniques', 'color_hex', 'application'],\n                        function (name) {\n                            item.descriptions[name] = '';\n                            if(item.descriptions[name].includes(',')){\n                                item.descriptions[name] = _.map(item.descriptions[name].split(','),\n                                function (value) {\n                                    return value.trim()\n                                })\n                            }\n                        })\n                })\n                allOptions = data;\n            }, function (error) {\n\n            }).then(function () {\n                AttributeFiltersService.getProductsUsingOptions(attrID).then(function (data) {\n                    allProductsUsingOptions = data;\n                }, function (error) {\n\n                });\n\n                AttributeFiltersService.getAttributeFilters(attrID)\n                    .then(function (data) {\n                        filterConfig = data.filterConfig;\n                        filterParts = createFilterPart(filterParts, 'name', 'text', data.filterConfig, 'name_of_atrritute_' + attrID);\n                        filterParts = createFilterPart(filterParts, 'weight', 'range', data.filterConfig, null, false, 0);\n                        filterParts = createFilterPart(filterParts, 'whiteness', 'range', data.filterConfig, null, false, 0);\n                        filterParts = createFilterPart(filterParts, 'thickness', 'range', data.filterConfig, null, false, 3);\n                        filterParts = createFilterPart(filterParts, 'opacity', 'range', data.filterConfig, null, false, 0);\n                        filterParts = createFilterPart(filterParts, 'roughness', 'range', data.filterConfig, null, false, 0);\n                        filterParts = createFilterPart(filterParts, 'certificates', 'multi-select', data.filterConfig);\n                        filterParts = createFilterPart(filterParts, 'printingTechniques', 'multi-select', data.filterConfig);\n                        filterParts = createFilterPart(filterParts, 'application', 'multi-select', data.filterConfig);\n                        filterParts = createFilterPart(filterParts, 'color_hex', 'multi-select-color', data.filterConfig, 'paper_color');\n                        filterParts = createFilterPart(filterParts, 'ids', '', {}, '', true);\n                        $scope.filterParts = _.cloneDeep(filterParts);\n                        $scope.categoriesTree = data.filterConfig.categoriesTree;\n\n                        $scope.showAllPapers();\n\n                        var searchObject = $location.search();\n\n                        if (searchObject.showGroup) {\n                            var choosenTypeID = null;\n                            if (searchObject.markPaper) {\n                                choosenTypeID = searchObject.markPaper;\n                            }\n                            $scope.showGroup(searchObject.showGroup, choosenTypeID);\n                        }\n\n                    }, function (error) {\n                    });\n            });\n        }\n\n        function createFilterPart(items, name, type, filterConfig, label, hidden, precision) {\n            items = _.clone(items);\n            var item = { name: name, type: type, title: !!label ? label : name, hidden: hidden };\n            switch (type) {\n                case 'multi-select':\n                case 'multi-select-color':\n                    item.values = filterConfig[name].values;\n                    item.selectedValues = {};\n                    break;\n                case 'range':\n                    item.minValue = filterConfig[name].minValue;\n                    item.maxValue = filterConfig[name].maxValue;\n                    var diff = filterConfig[name].maxValue - filterConfig[name].minValue\n                    var step = 1\n                    if (diff < 1) {\n                        step = 0.01;\n                    } else if (diff < 10) {\n                        step = 0.1;\n                    } else if (diff < 100) {\n                        step = 1\n                    } else {\n                        step = Math.round(diff / 50);\n                    }\n                    item.options = {\n                        floor: filterConfig[name].minValue,\n                        ceil: filterConfig[name].maxValue,\n                        step: step,\n                        precision: precision,\n                        onChange: function () {\n                            $scope.onInputChange.apply(this)\n                        }\n                    }\n                    break;\n            }\n            items.push(item);\n            return items;\n        };\n\n        $scope.onPaperDefaultClick = function (row) {\n            console.log(row);\n            var category = row.descriptions.category[0].trim();\n            var group = row.descriptions.group[0].trim();\n            var type = row.descriptions.paper_type[0].trim();\n            if(type.endsWith(' ')){\n                type = type.slice(0, -1);\n            }\n            var data = $scope.categoriesTree[category][group][type];\n            $scope.choosenTypeID = row.ID;\n           $scope.onTypeClick(category, group, type, data);\n           $scope.currentDisplayedMaterialName = type;\n           $scope.currentDisplayedCategories = [];\n           setTimeout(function(){\n                  $scope.currentDisplayPapersType = 'papers';\n           }, 1500);\n        };\n\n        $scope.loadAllPapers = function () {\n            var agregateIDS = [];\n            for (var category in $scope.categoriesTree) {\n                for (var group in $scope.categoriesTree[category]) {\n                    for (var type in $scope.categoriesTree[category][group]) {\n                        _.each($scope.categoriesTree[category][group][type].IDS,function(singleID){\n                            agregateIDS.push(singleID);\n                        });\n                    }\n                }\n            }\n            agregateIDSFilter = [];\n            $scope.onInputChange();\n        };\n\n        $scope.showAllPapers = function () {\n            $scope.currentDisplayPapersType = 'default';\n            $scope.currentDisplayedCategories = [];\n            for (var categoryName in $scope.categoriesTree) {\n                var tmpObject = {};\n                tmpObject.name = categoryName;\n                tmpObject.category = categoryName;\n                tmpObject.group = '';\n                tmpObject.type = '';\n                tmpObject.typeData = {};\n                tmpObject.displayType = 'category';\n                $scope.currentDisplayedCategories.push(tmpObject);\n            }\n            $scope.currentDisplayedMaterialName = $filter('translate')('materials');\n            $scope.loadAllPapers();\n        };\n\n        $scope.showCategory = function (showCategoryName) {\n            $scope.currentDisplayPapersType = 'default';\n            $scope.currentDisplayedCategories = [];\n            var showCategoryObject = {};\n            for (var categoryName in $scope.categoriesTree) {\n                $scope.currentDisplayedCategories.push(tmpObject);\n            }\n            $scope.currentDisplayedMaterialName = $filter('translate')('materials');\n            $scope.loadAllPapers();\n            $scope.onCurrentCategoryClick(showCategoryObject);\n        };\n\n        $scope.showGroup = function (showGroupName, choosenTypeID ) {\n            $scope.currentDisplayPapersType = 'default';\n            $scope.currentDisplayedCategories = [];\n            var showGroupObject = {};\n            for (var categoryName in $scope.categoriesTree) {\n                var tmpObject = {};\n                tmpObject.name = categoryName;\n                tmpObject.category = categoryName;\n                tmpObject.group = '';\n                tmpObject.type = '';\n                tmpObject.typeData = {};\n                tmpObject.displayType = 'category';\n                $scope.currentDisplayedCategories.push(tmpObject);\n                if(categoryName.replace(/\\s+/g, '') == showGroupName.replace(/\\s+/g, '')){\n                    showGroupObject = tmpObject;\n                }\n                for (var groupName in $scope.categoriesTree[categoryName]) {\n                    var tmpObject2 = {};\n                    tmpObject2.name = groupName;\n                    tmpObject2.category = categoryName;\n                    tmpObject2.group = groupName;\n                    tmpObject2.type = '';\n                    tmpObject2.typeData = {};\n                    tmpObject2.displayType = 'group';\n                    if(groupName.replace(/\\s+/g, '') == showGroupName.replace(/\\s+/g, '')){\n                        showGroupObject = tmpObject2;\n                    }\n                    for (var typeName in $scope.categoriesTree[categoryName][groupName]) {\n                        var tmpObject3 = {};\n                        tmpObject3.name = typeName;\n                        tmpObject3.category = categoryName;\n                        tmpObject3.group = groupName;\n                        tmpObject3.type = typeName;\n                        tmpObject3.typeData = $scope.categoriesTree[categoryName][groupName][typeName];\n                        tmpObject3.displayType = 'type';\n                        if(typeName.replace(/\\s+/g, '') == showGroupName.replace(/\\s+/g, '')){\n                            showGroupObject = tmpObject3;\n                        }\n                    }\n                }\n            }\n            $scope.currentDisplayedMaterialName = $filter('translate')('materials');\n            $scope.loadAllPapers();\n            $scope.onCurrentCategoryClick(showGroupObject);\n            if(choosenTypeID){\n                $scope.choosenTypeID = choosenTypeID;\n            }\n        };\n\n        var agregateIDSFilter = [];\n        $scope.onCurrentCategoryClick = function (clickedCategory) {\n            if (clickedCategory.displayType === 'category') {\n                $scope.currentDisplayedCategories = [];\n                for (var categoryName in $scope.categoriesTree[clickedCategory.category]) {\n                    var tmpObject = {};\n                    tmpObject.name = categoryName;\n                    tmpObject.category = clickedCategory.category;\n                    tmpObject.group = categoryName;\n                    tmpObject.type = '';\n                    tmpObject.typeData = {};\n                    tmpObject.displayType = 'group';\n                    $scope.currentDisplayedCategories.push(tmpObject);\n\n                    var agregateIDS = [];\n                    for (var group in $scope.categoriesTree[clickedCategory.category]) {\n                        for (var type in $scope.categoriesTree[clickedCategory.category][group]) {\n                            _.each($scope.categoriesTree[clickedCategory.category][group][type].IDS, function(singleID){\n                                agregateIDS.push(singleID);\n                            });\n                        }\n                    }\n                    agregateIDSFilter = agregateIDS;\n                    $scope.onInputChange();\n                }\n                $scope.currentDisplayedMaterialName = clickedCategory.category;\n                $scope.currentDisplayPapersType = 'default';\n            }\n            if (clickedCategory.displayType === 'group') {\n                $scope.currentDisplayedCategories = [];\n                for (var categoryName in $scope.categoriesTree[clickedCategory.category][clickedCategory.group]) {\n                    var tmpObject = {};\n                    tmpObject.name = categoryName;\n                    tmpObject.category = clickedCategory.category;\n                    tmpObject.group = clickedCategory.group;\n                    tmpObject.type = categoryName;\n                    tmpObject.typeData = $scope.categoriesTree[clickedCategory.category][clickedCategory.group][categoryName];\n                    tmpObject.displayType = 'type';\n                    $scope.currentDisplayedCategories.push(tmpObject);\n\n                    var agregateIDS = [];\n                    for (var type in $scope.categoriesTree[clickedCategory.category][clickedCategory.group]) {\n                        _.each($scope.categoriesTree[clickedCategory.category][clickedCategory.group][type].IDS,function(singleID){\n                            agregateIDS.push(singleID);\n                        });\n                    }\n                    agregateIDSFilter = agregateIDS;\n                    $scope.onInputChange();\n                }\n                $scope.currentDisplayedMaterialName = clickedCategory.group;\n                $scope.currentDisplayPapersType = 'default';\n            }\n            if (clickedCategory.displayType === 'type') {\n                $scope.choosenTypeID = null;\n                $scope.onTypeClick(clickedCategory.category, clickedCategory.group, clickedCategory.type, clickedCategory.typeData);\n                $scope.currentDisplayedCategories = [];\n                var tmpObject = {};\n                tmpObject.name = clickedCategory.name;\n                tmpObject.category = clickedCategory.category;\n                tmpObject.group = clickedCategory.group;\n                tmpObject.type = clickedCategory.type;\n                tmpObject.typeData = clickedCategory.typeData;\n                tmpObject.displayType = 'typeCurrent';\n                $scope.currentDisplayedCategories.push(tmpObject);\n                $scope.currentDisplayedMaterialName = clickedCategory.type;\n\n                var agregateIDS = [];\n                _.each($scope.categoriesTree[clickedCategory.category][clickedCategory.group][clickedCategory.type].IDS,function(singleID){\n                    agregateIDS.push(singleID);\n                });\n                agregateIDSFilter = agregateIDS;\n                $scope.onInputChange();\n                $scope.currentDisplayPapersType = 'papers';\n            }\n        };\n\n        var timerId;\n\n        $scope.onInputChange = function (force) {\n            clearTimeout(timerId);\n            if (!(force === true)) {\n                timerId = setTimeout(function () {\n                    $scope.onInputChange(true);\n                }, 1000);\n                return\n            }\n            $scope.filtersUsed = true;\n            AttributeFiltersService.search(2, $scope.filterParts).then(function (data) {\n                if ($scope.choosenTypeID != null) {\n                    var dataSend = {};\n                    dataSend.attrID = 2;\n                    dataSend.optID = $scope.choosenTypeID;\n                    $scope.alternativePapers = [];\n                    AttributeFiltersService.getRelativePapers(dataSend).then(function(altPapersFilter){\n                        if(altPapersFilter.length > 0){\n                            var filterPartsAltPapers = [];\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'name', 'text', filterConfig, 'name_of_atrritute');\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'category', 'select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'group', 'select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'paper_type', 'select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'weight', 'range', filterConfig, null, false, 0);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'whiteness', 'range', filterConfig, null, false, 0);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'thickness', 'range', filterConfig, null, false, 3);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'opacity', 'range', filterConfig, null, false, 0);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'roughness', 'range', filterConfig, null, false, 0);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'certificates', 'multi-select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'printingTechniques', 'multi-select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'application', 'multi-select', filterConfig);\n                            filterPartsAltPapers = createFilterPart(filterPartsAltPapers, 'color_hex', 'multi-select-color', filterConfig, 'paper_color');\n                            _.each(altPapersFilter, function (fd) {\n                                var part = _.find(filterPartsAltPapers, {name: fd.name});\n                                if (fd.valueType == 'min') {\n                                    part.minValue = fd.value;\n                                } else if (fd.valueType == 'max') {\n                                    part.maxValue = fd.value;\n                                } else if (part.type == 'multi-select' || part.type == 'multi-select-color') {\n                                    if (!part.selectedValues) {\n                                        part.selectedValues = [];\n                                    }\n                                    part.selectedValues[fd.value] = true;\n                                }  else if (fd.valueType == 'exact') {\n                                    part.value = String(fd.value);\n                                }\n                            });\n                            AttributeFiltersService.search(2, filterPartsAltPapers).then(function (altPapers) {\n                                $scope.alternativePapers = altPapers;\n                            });\n                        }\n                    });\n                }\n                // agregateIDSFilter\n                if(agregateIDSFilter.length === 0){\n                    $scope.filteredOptions = data;\n                }else{\n                    $scope.filteredOptions = _.filter(data, function (singleData) {\n                        if(agregateIDSFilter.includes(singleData.ID)){\n                            return true;\n                        }else{\n                            return false;\n                        }\n                    });\n                }\n\n                if ($scope.currentDisplayPapersType === 'default') {\n                    $scope.currentDisplayPapersPage = 1;\n                    var arrayStart = 0;\n                    var arrayEnd = papersPerPage * $scope.currentDisplayPapersPage;\n                    $scope.currentDisplayPapersPageData = $scope.filteredOptions.slice(arrayStart, arrayEnd);\n                    preparePagination();\n                }\n\n                var filteredOptionsIds = _.map($scope.filteredOptions, function (item) {\n                    return item.ID;\n                });\n\n                $scope.products = _.filter(allProductsUsingOptions, function (product) {\n                    for (var i = 0; i < product.options.length; i++) {\n                        if ($scope.choosenTypeID != null) {\n                            if (product.options[i] == $scope.choosenTypeID) {\n                                return true;\n                            }\n                        } else {\n                            for (var j = 0; j < filteredOptionsIds.length; j++) {\n                                if (product.options[i] == filteredOptionsIds[j]) {\n                                    return true;\n                                }\n                            }\n                        }\n                    }\n                    return false;\n                });\n            }, function (error) {\n            });\n        }\n\n        // $scope.onInputChange = function () {\n        //     $scope.filtersUsed = true;\n        //     var matchIds = ['ids'];\n        //     var matchPart = ['name'];\n        //     var matchRangeSlider = ['weight', 'whiteness', 'thickness', 'opacity', 'roughness'];\n        //     var matchArrays = ['certificates', 'printingTechniques', 'color_hex', 'application'];\n        //     $scope.filteredOptions = _.filter(allOptions, function (item) {\n        //         var pass = true;\n        //         for (var part in $scope.filterParts) {\n        //             var filterValue = $scope.filterParts[part].value\n        //             if (matchIds.indexOf($scope.filterParts[part].name) > -1 && filterValue) {\n        //                 pass = filterValue.indexOf(item.ID) > -1;\n        //             } else if (matchPart.indexOf($scope.filterParts[part].name) > -1 && filterValue) {\n        //                 pass = item.names[$rootScope.currentLang.code] && item.names[$rootScope.currentLang.code].toLowerCase().indexOf(filterValue.toLowerCase()) > -1;\n        //             } else if (matchRangeSlider.indexOf($scope.filterParts[part].name) > -1 && item.descriptions[$scope.filterParts[part].name]) {\n        //                 var description = item.descriptions[$scope.filterParts[part].name];\n        //                 pass = description >= $scope.filterParts[part].minValue && description <= $scope.filterParts[part].maxValue;\n        //             } else if (matchArrays.indexOf($scope.filterParts[part].name) > -1) {\n        //                 var filterValues = [];\n        //                 for (var key in $scope.filterParts[part].selectedValues) {\n        //                     if ($scope.filterParts[part].selectedValues[key]) {\n        //                         filterValues.push(key);\n        //                     }\n        //                 }\n        //                 if (filterValues.length > 0) {\n        //                     var xor = _.xor(filterValues, item.descriptions[$scope.filterParts[part].name])\n        //                     pass = xor && xor.length != (filterValues.length + item.descriptions[$scope.filterParts[part].name].length)\n        //                 }\n        //             }\n        //             if (!pass) {\n        //                 break;\n        //             }\n        //         }\n        //         return pass;\n        //     });\n\n        //     if ($scope.currentDisplayPapersType === 'default') {\n        //         $scope.currentDisplayPapersPage = 1;\n        //         var arrayStart = 0;\n        //         var arrayEnd = papersPerPage * $scope.currentDisplayPapersPage;\n        //         $scope.currentDisplayPapersPageData = $scope.filteredOptions.slice(arrayStart, arrayEnd);\n        //         preparePagination();\n        //     }\n\n        //     var filteredOptionsIds = _.map($scope.filteredOptions, function (item) {\n        //         return item.ID;\n        //     });\n\n        //     console.log('$scope.choosenTypeID');\n        //     console.log($scope.choosenTypeID);\n        //     $scope.products = _.filter(allProductsUsingOptions, function (product) {\n        //         for (var i = 0; i < product.options.length; i++) {\n        //             if($scope.choosenTypeID != null){\n        //                 if (product.options[i] == $scope.choosenTypeID) {\n        //                     return true;\n        //                 }\n        //             }else{\n        //                 for (var j = 0; j < filteredOptionsIds.length; j++) {\n        //                     if (product.options[i] == filteredOptionsIds[j]) {\n        //                         return true;\n        //                     }\n        //                 }\n        //             }\n        //         }\n        //         return false;\n        //     });\n        // }\n\n        $scope.onPageChange = function (page) {\n            var numberOfPages = Math.ceil($scope.filteredOptions.length / papersPerPage);\n            if (page < 1) {\n                page = 1;\n            } else if (page > numberOfPages) {\n                page = numberOfPages;\n            }\n            var currentPage = page - 1;\n            $scope.currentDisplayPapersPage = page;\n            var arrayStart = currentPage * papersPerPage;\n            var arrayEnd = papersPerPage * (currentPage + 1);\n            $scope.currentDisplayPapersPageData = $scope.filteredOptions.slice(arrayStart, arrayEnd);\n            preparePagination();\n        };\n\n        function preparePagination() {\n            var numberOfPages = Math.ceil($scope.filteredOptions.length / papersPerPage);\n            $scope.currentDisplayPapersPages = [];\n            if(numberOfPages > $scope.numberOfPagesInPagination){\n                var paginationPageStart = $scope.currentDisplayPapersPage - 3;\n                while (paginationPageStart <= 0) {\n                    paginationPageStart++;\n                }\n                while (paginationPageStart + $scope.numberOfPagesInPagination > numberOfPages) {\n                    paginationPageStart--;\n                }\n                for (var i = paginationPageStart; i <= paginationPageStart + $scope.numberOfPagesInPagination; i++) {\n                    $scope.currentDisplayPapersPages.push(i);\n                }\n            }else{\n                for (var i = 1; i <= numberOfPages; i++) {\n                    $scope.currentDisplayPapersPages.push(i);\n                }\n            }\n        }\n\n        $scope.onColorClick = function (unit, value) {\n            if (value) {\n                unit.selectedValues[value] = !unit.selectedValues[value];\n            } else {\n                unit.selectedValues = {};\n            }\n\n            $scope.onInputChange();\n        }\n\n        $scope.onCategoryClick = function (category) {\n            $scope.filteredOptions = []\n            $scope.visibleSection[category] = !$scope.visibleSection[category];\n        }\n\n        $scope.onGroupClick = function (group) {\n            $scope.visibleSection[group] = !$scope.visibleSection[group];\n        }\n\n        $scope.onTypeClick = function (category, group, type, data) {\n            var options = $scope.categoriesTree[category][group][type];\n            $scope.typeName = type;\n            $scope.typeDescription = options.description;\n            $scope.typeIcon = options.image;\n            var tmpIDS = data.IDS;\n            agregateIDSFilter = tmpIDS;\n            $scope.onInputChange();\n        }\n\n        $scope.withUnit = function (value, unit) {\n            if (!value) {\n                return '-';\n            }\n            return value + ' ' + unit\n        }\n\n        $scope.resetCatTree = function () {\n            $scope.visibleSection = {};\n            $scope.typeIcon = $scope.typeDescription = null;\n            agregateIDSFilter = [];\n            $scope.onInputChange();\n        }\n\n        $scope.resetFilters = function () {\n            $scope.currentDisplayPapersType = 'default';\n            $scope.typeName = $scope.typeDescription = $scope.typeIcon = '';\n            $scope.resetCatTree();\n            _.each($scope.filterParts, function (unit) {\n                unit.selectedValues = {};\n                unit.value = null;\n                if (unit.type == 'range') {\n                    var part = _.find(filterParts, { name: unit.name });\n                    unit.minValue = part.minValue;\n                    unit.maxValue = part.maxValue;\n                }\n            })\n            $scope.onInputChange();\n        }\n    });","start":4,"end":576,"route":null,"symbol":"index.AttributeFilters","metadata":{"calls_functions":["angular.module","Setting.getPublicSettings","loadAttributeFilters","AttributeFiltersService.getOptions","_.each","item.descriptions.name.includes","_.map","item.descriptions.name.split","value.trim","AttributeFiltersService.getProductsUsingOptions","AttributeFiltersService.getAttributeFilters","createFilterPart","_.cloneDeep","$scope.showAllPapers","$location.search","$scope.showGroup","_.clone","Math.round","$scope.onInputChange.apply","items.push","console.log","type.endsWith","type.slice","$scope.onTypeClick","setTimeout","agregateIDS.push","$scope.onInputChange","$scope.currentDisplayedCategories.push","$filter","$scope.loadAllPapers","$scope.onCurrentCategoryClick","categoryName.replace","showGroupName.replace","groupName.replace","typeName.replace","clearTimeout","AttributeFiltersService.search","AttributeFiltersService.getRelativePapers","_.find","String","_.filter","agregateIDSFilter.includes","$scope.filteredOptions.slice","preparePagination","Math.ceil","$scope.currentDisplayPapersPages.push","$scope.resetCatTree"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":59,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeFiltersCtrl.js:373-379:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeFiltersCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["singleData"],"antiPatterns":[],"text":"                    $scope.filteredOptions = _.filter(data, function (singleData) {\n                        if(agregateIDSFilter.includes(singleData.ID)){\n                            return true;\n                        }else{\n                            return false;\n                        }\n                    });","start":373,"end":379,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter","agregateIDSFilter.includes"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":59,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeFiltersCtrl.js:394-409:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/AttributeFiltersCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["product"],"antiPatterns":[],"text":"                $scope.products = _.filter(allProductsUsingOptions, function (product) {\n                    for (var i = 0; i < product.options.length; i++) {\n                        if ($scope.choosenTypeID != null) {\n                            if (product.options[i] == $scope.choosenTypeID) {\n                                return true;\n                            }\n                        } else {\n                            for (var j = 0; j < filteredOptionsIds.length; j++) {\n                                if (product.options[i] == filteredOptionsIds[j]) {\n                                    return true;\n                                }\n                            }\n                        }\n                    }\n                    return false;\n                });","start":394,"end":409,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":59,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/ConfrimNewsletterCtrl.js:4-24:controller:index.ConfirmNewsletter","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/ConfrimNewsletterCtrl.js","module":null,"name":"index.ConfirmNewsletter","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","Notification","SettingService"],"antiPatterns":[],"text":"    .controller('index.ConfirmNewsletter', function ($rootScope, $scope, $state, $filter, Notification,\n                                                     SettingService) {\n\n        var Setting = new SettingService('general');\n\n        $scope.confirmation = {};\n\n        function init() {\n            console.log( $state.params );\n            Setting.confirmNewsletter($state.params.token).then(function(data) {\n                if( data.response === true ) {\n                    $scope.confirmation.success = data.info;\n                } else {\n                    $scope.confirmation.error = data.info;\n                }\n            });\n        }\n\n        init();\n\n    });","start":4,"end":24,"route":null,"symbol":"index.ConfirmNewsletter","metadata":{"calls_functions":["angular.module","console.log","Setting.confirmNewsletter","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/FooterCtrl.js:5-71:controller:index.FooterCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/FooterCtrl.js","module":null,"name":"index.FooterCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$state","$filter","Notification","SettingService","NewsService","TextWidgetService"],"antiPatterns":[],"text":"    .controller('index.FooterCtrl', function ($scope, $rootScope, $state, $filter, Notification,\n                                              SettingService, NewsService, TextWidgetService) {\n\n        $scope.sent = false;\n        $scope.articles = [];\n        $scope.showArticles = false;\n        var additionalSettings = {};\n\n        var Setting = new SettingService('general');\n\n        $scope.sendEmail = function() {\n\n            Setting.setModule('general');\n            if( $scope.newsletterAgreement === undefined || $scope.newsletterAgreement === false) {\n                Notification.warning($filter('translate')('subscription_to_newsletter_agreement_info'));\n                return false;\n            }\n\n            Setting.signToNewsletter(this.email).then(function(data) {\n                if( data.response === true ) {\n                    $scope.sent = true;\n                    Notification.success($filter('translate')(data.info));\n                } else {\n                    Notification.error($filter('translate')(data.info));\n                }\n            });\n\n        };\n\n        function init() {\n            $rootScope.$on('$stateChangeStart',\n                function (event, toState, toParams, fromState, fromParams) {\n                    if( toState.name === 'home' || toState.name === 'news' ) {\n                        if( $scope.articles.length === 0 ) {\n                            getNews();\n                        }\n                        $scope.showArticles = true;\n                    } else {\n                        $scope.showArticles = false;\n                    }\n                });\n\n            if( $state.is('home') || $state.is('news') ) {\n                getNews();\n                $scope.showArticles = true;\n            } else {\n                $scope.showArticles = false;\n            }\n\n            Setting.setModule('additionalSettings');\n            Setting.getPublicSettings().then(function (data) {\n                additionalSettings = data;\n            });\n        }\n\n        function getNews() {\n            NewsService.getRss().then( function(data) {\n                if( data.items ) {\n                    $scope.articles = data.items;\n                }\n            });\n        }\n\n        init();\n\n\n    });","start":5,"end":71,"route":null,"symbol":"index.FooterCtrl","metadata":{"calls_functions":["angular.module","Setting.setModule","Notification.warning","$filter","Setting.signToNewsletter","Notification.success","Notification.error","$rootScope.$on","getNews","$state.is","Setting.getPublicSettings","NewsService.getRss","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":10,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/HomeCtrl.js:4-185:controller:index.HomeCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/HomeCtrl.js","module":null,"name":"index.HomeCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","$q","UserService","AuthService","DomainService","Notification","DpCategoryService","CategoryDescriptionService","HomepageBannerService","MainWidgetService"],"antiPatterns":[],"text":"    .controller('index.HomeCtrl', function ($rootScope, $scope, $state, $filter, $q, UserService, AuthService,\n                                            DomainService, Notification, DpCategoryService,\n                                            CategoryDescriptionService, HomepageBannerService, MainWidgetService) {\n\n        $scope.activeCategoryID = null;\n        $scope.articles = [];\n        $scope.startCategories = [];\n        $scope.mainButtonActive = false;\n        $scope._ = _;\n\n        function init() {\n            $scope.items = [];\n            $scope.products = [];\n            forView();\n            MainWidgetService.includeTemplateVariables($scope, 'content');\n        }\n\n        $scope.itemsClassName = function(product){\n            var attrIconWith = product.attributeIconWidth ? product.attributeIconWidth : $scope.attributeIconWidth;\n            var iconWidth = attrIconWith === 0 ? 1 : attrIconWith;\n            if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 0){\n                return 'col-xs-6 col-sm-4 col-md-'+(iconWidth*3)+' col-lg-'+(iconWidth*3);\n\n            }else if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 1){\n                return 'col-xs-12 col-sm-4 col-md-2 col-lg-2 col-md-'+(iconWidth*2)+'-20pp';\n\n            }else if (($scope.attributeDescView == 0 || $scope.attributeDescView == 3) && $scope.attributeMenuLeft == 0 && $scope.attributeIconsCount == 2){\n                return 'col-xs-6 col-sm-3 col-md-'+(iconWidth*2)+' col-lg-'+(iconWidth*2);\n\n            }else if (($scope.attributeDescView == 1 || $scope.attributeDescView == 2) && $scope.attributeMenuLeft == 0){\n                return 'col-xs-12 col-sm-12 col-md-6 col-lg-6';\n\n            }else if ($scope.attributeMenuLeft == 1){\n                return 'col-xs-4 col-sm-4 col-md-4 col-lg-4';\n            }\n        }\n\n        $scope.loadOtherTemplateVariables=function(templateName){\n            MainWidgetService.includeTemplateVariables($scope, templateName, undefined, undefined, undefined, true);\n        };\n\n        $scope.getTemplateVariable=function(collection, itemType,id,variableName,defaultValue){\n            return MainWidgetService.getTemplateVariable($scope, collection, itemType,id,variableName,defaultValue);\n        };\n\n        function forView() {\n            DpCategoryService.forView().then(function (data) {\n                $scope.items = data;\n                var tmpItems = [];\n                _.each($scope.items, function (item) {\n                    tmpItems.push(item.ID);\n                    if( item.onMainPage === 1 ) {\n                        $scope.startCategories.push(item.ID);\n                        $scope.mainButtonActive = true;\n                    }\n                });\n                getProducts(tmpItems);\n                getDescription(tmpItems);\n                getSlider();\n            }, function (data) {\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getProducts(list) {\n            $q.all([DpCategoryService.manyForView(list),\n                MainWidgetService.includeTemplateVariables($scope, 'calc', undefined, undefined, undefined, true),\n                MainWidgetService.includeTemplateVariables($scope, 'group', undefined, undefined, undefined, true),\n                MainWidgetService.includeTemplateVariables($scope, 'category', undefined, undefined, undefined, true),\n            ]).then(function (data) {\n                $scope.products = data[0];\n                var tplCalcVars = data[1].response[0].value;\n                var tplGroupVars = data[2].response[0].value;\n                var tplCategoryVars = data[3].response[0].value;//TODO\n\n                function assignVariables(product, tplItems) {\n                    _.each(tplItems, function (item) {\n                        product[item.name] = item.value;\n                    })\n\n                }\n\n                _.each($scope.products, function (productList) {\n                    _.each(productList, function (product) {\n                        if (product.relType === 1) {\n                            var tplItems = _.filter(tplGroupVars, function (item) {\n                                return item.groupID == product.ID\n                            });\n                            assignVariables(product, tplItems);\n                        } else if (product.relType === 2) {\n                            var tplItems = _.filter(tplCalcVars, function (item) {\n                                return item.typeID == product.ID\n                            });\n                            assignVariables(product, tplItems);\n                        }\n                    });\n                });\n\n\n            }, function (errors) {\n                Notification.error($filter('translate')('error'));\n            });\n        }\n\n        function getDescription(list) {\n\n            CategoryDescriptionService.getAll(list).then(function (data) {\n\n                if (_.isEmpty(data)) {\n                    return;\n                }\n\n                var idx;\n\n                _.each(data, function (catDescriptions, cIndex) {\n                    _.each(catDescriptions, function (catDesc) {\n\n                        idx = _.findIndex($scope.items, {ID: parseInt(cIndex)});\n\n                        switch (catDesc.descType) {\n\n                            case 1:\n                                if ($scope.items[idx] !== undefined) {\n                                    if ($scope.items[idx].descriptions === undefined) {\n                                        $scope.items[idx].descriptions = [];\n                                    }\n                                    $scope.items[idx].descriptions.push(catDesc);\n                                }\n                                break;\n                            case 5:\n                                if ($scope.items[idx] !== undefined) {\n                                    if ($scope.items[idx].galleries === undefined) {\n                                        $scope.items[idx].galleries = [];\n                                    }\n\n                                    catDesc.items = [];\n\n                                    if (!_.isEmpty(catDesc.files)) {\n                                        _.each(catDesc.files, function (oneFile) {\n                                            catDesc.items.push({\n                                                thumb: oneFile.urlCrop,\n                                                img: oneFile.url,\n                                                description: 'Image ' + oneFile.fileID\n                                            });\n                                        });\n                                    }\n                                    $scope.items[idx].galleries.push(catDesc);\n                                }\n                                break;\n                        }\n\n                    });\n\n                });\n\n            });\n\n        }\n\n        function getSlider() {\n\n            HomepageBannerService.getAll().then(function (data) {\n                var sliderData = [];\n                sliderData.push({'ID': 1, 'files': data});\n                $rootScope.$emit('Slider:data', sliderData);\n            });\n\n        }\n\n        $scope.setActiveCategory = function (item) {\n            $scope.activeCategoryID = item.ID;\n            $scope.mainButtonActive = false;\n        };\n\n        $scope.setActiveMainButton = function() {\n            $scope.mainButtonActive = true;\n            $scope.activeCategoryID = null;\n        };\n\n        init();\n\n    });","start":4,"end":185,"route":null,"symbol":"index.HomeCtrl","metadata":{"calls_functions":["angular.module","forView","MainWidgetService.includeTemplateVariables","MainWidgetService.getTemplateVariable","DpCategoryService.forView","_.each","tmpItems.push","$scope.startCategories.push","getProducts","getDescription","getSlider","Notification.error","$filter","$q.all","DpCategoryService.manyForView","_.filter","assignVariables","CategoryDescriptionService.getAll","_.isEmpty","_.findIndex","parseInt","$scope.items.idx.descriptions.push","catDesc.items.push","$scope.items.idx.galleries.push","HomepageBannerService.getAll","sliderData.push","$rootScope.$emit","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":30,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/HomeCtrl.js:89-91:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/HomeCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"                            var tplItems = _.filter(tplGroupVars, function (item) {\n                                return item.groupID == product.ID\n                            });","start":89,"end":91,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.each","_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":30,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/HomeCtrl.js:94-96:filter:anonymous","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/HomeCtrl.js","module":"dpClient.app","name":"anonymous","kind":"filter","nodeType":"Function","dependenciesDI":["item"],"antiPatterns":[],"text":"                            var tplItems = _.filter(tplCalcVars, function (item) {\n                                return item.typeID == product.ID\n                            });","start":94,"end":96,"route":null,"symbol":"anonymous","metadata":{"calls_functions":["_.each","_.filter"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":30,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/LoginCtrl.js:3-67:controller:index.LoginCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/LoginCtrl.js","module":null,"name":"index.LoginCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","$window","$http","UserService","AuthService","DomainService","DpAddressService","Notification","LoginWidgetService","SocialWidgetService","MainWidgetService"],"antiPatterns":[],"text":"    .controller('index.LoginCtrl', function ($rootScope, $scope, $state, $filter, $window, $http, UserService,\n                                             AuthService, DomainService, DpAddressService, Notification,\n                                             LoginWidgetService, SocialWidgetService, MainWidgetService) {\n\n        MainWidgetService.includeTemplateVariables($scope, 'login');\n        if (!_.isUndefined($state.current.data)) {\n            $rootScope.bodyClass = $state.current.data.bodyClass;\n        }\n\n        $rootScope.rememberLogin = false;\n\n        $scope.login = function (credentials) {\n            var backTo = {};\n            const fState=$rootScope.getLastFunctionalState();\n            if(fState){\n                Object.assign(backTo, fState);\n            }\n            else if( $rootScope.startPoint ) {\n                backTo.state = $rootScope.startPoint.state;\n                backTo.params = $rootScope.startPoint.params;\n            }\n            LoginWidgetService.login(credentials, backTo);\n        };\n\n        $scope.check = function () {\n            AuthService.check().then(function (data) {\n                $rootScope.logged = true;\n            }, function (data) {\n                $rootScope.logged = false;\n            });\n        };\n\n        $scope.getUser = function () {\n            return AuthService.getCurrentUser();\n        };\n\n        $scope.passForget = function () {\n            UserService.passForget($scope.email).then(function () {\n                console.log('udało się zmienić email');\n            }, function (data) {\n                console.log('nie udało się zmienić maila');\n            });\n        };\n\n        $scope.changeMail = function () {\n            UserService.changeMail($scope.form).then(function (data) {\n                console.log('udało się zmienić email');\n            }, function (data) {\n                console.log('nie udało się zmienić maila');\n            });\n        };\n\n        $scope.loginFacebook = function () {\n\n            SocialWidgetService.loginFacebook();\n\n        };\n\n        $scope.loginGoogle = function () {\n\n            SocialWidgetService.loginGoogle();\n\n        };\n\n    });","start":3,"end":67,"route":null,"symbol":"index.LoginCtrl","metadata":{"calls_functions":["angular.module","MainWidgetService.includeTemplateVariables","_.isUndefined","$rootScope.getLastFunctionalState","Object.assign","LoginWidgetService.login","AuthService.check","AuthService.getCurrentUser","UserService.passForget","console.log","UserService.changeMail","SocialWidgetService.loginFacebook","SocialWidgetService.loginGoogle"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":4,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/LogoutCtrl.js:4-34:controller:index.LogoutCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/LogoutCtrl.js","module":null,"name":"index.LogoutCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","AuthService","Notification","localStorageService","TokenService","LogoutService"],"antiPatterns":[],"text":"    .controller('index.LogoutCtrl', function($rootScope, $scope, $state, $filter, AuthService,\n                                             Notification, localStorageService, TokenService, LogoutService) {\n\n\tfunction init(){\n\n\t\t AuthService.logout().then( function( res ) {\n\n            if( res.logout ) {\n                TokenService.getNonUserToken().then(function(data) {\n\n                    $rootScope.logged = false;\n                    $rootScope.oneTimeUser = false;\n                    $rootScope.orderID = null;\n                    if( !$rootScope.logged ) {\n                        Notification.info( $filter('translate')('you_are_loggedout') );\n                        AuthService.setAccessToken(data.token);\n                        $state.go('login');\n                    }\n                });\n\n            } else {\n                Notification.error( $filter('translate')('unexpected_error') );\n            }\n\n        }, function() {\n\t\tNotification.error( $filter('translate')('unexpected_error') );\n        });\n\t}\n\n\tinit();\n});","start":4,"end":34,"route":null,"symbol":"index.LogoutCtrl","metadata":{"calls_functions":["angular.module","AuthService.logout","TokenService.getNonUserToken","Notification.info","$filter","AuthService.setAccessToken","$state.go","Notification.error","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":3,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":["authentication"]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/MainCtrl.js:4-100:controller:index.MainCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/MainCtrl.js","module":null,"name":"index.MainCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$q","$scope","$rootScope","MainWidgetService","MenuTypesService","$state","DpCartsDataService"],"antiPatterns":[],"text":"    .controller('index.MainCtrl', function ($q, $scope, $rootScope, MainWidgetService, MenuTypesService, $state, DpCartsDataService) {\n        MainWidgetService.includeTemplateVariables($scope, 'header');\n        MainWidgetService.getMegaMenu().then(function (megaMenu) {\n\n            if( megaMenu.items.length > 0 ) {\n                megaMenu.items[0].isVisible = true;\n            }\n\n            $rootScope.menuItems = megaMenu.items;\n            if( megaMenu.visible === 1 ) {\n                $rootScope.showMenu = true;\n            } else {\n                $rootScope.showMenu = false;\n            }\n\n            $rootScope.menuType = megaMenu.menuType;\n\n            if( $rootScope.menuType === undefined ) {\n                $rootScope.menuType = 1;\n            }\n\n            $rootScope.allTypes = MenuTypesService.getAllTypes(megaMenu.items);\n        });\n\n        $scope.showSubMenu = function(item) {\n            _.each($scope.menuItems, function(iterateItem) {\n                if(item === iterateItem) {\n                    iterateItem.isVisible = true;\n                } else {\n                    iterateItem.isVisible = false;\n                }\n            });\n        };\n        $scope.menu_show = false;\n        $scope.menu_toggle= function () {\n            $scope.menu_show = !$scope.menu_show ;\n        };\n\n\n        $scope.checkState = function(stateName) {\n            return $state.current.state === stateName;\n        };\n\n        $rootScope.$on('CreditLimit:reload', function (event, data) {\n            MainWidgetService.getCreditLimitInfo();\n        });\n\n        MainWidgetService.getForms().then( function( forms ) {\n            $rootScope.forms = forms;\n        });\n\n        $(window).resize(function () {\n            if ($(window).width() < 768) {\n                $('.navbar-collapse li a.navbarLink').attr('data-toggle', 'collapse').attr('data-target', '#navbar');\n            } else {\n                $('.navbar-collapse li a.navbarLink').attr('data-toggle', false).attr('data-target', false);\n            }\n        });\n\n        $scope.scrollToTop = function () {\n            var duration = 500;\n            $('html, body').animate({scrollTop: 0}, duration);\n        };\n\n        $scope.zoomStaticImage = function (urls) {\n            if (!_.isArray(urls)) {\n                urls = [urls]\n            }\n            $scope.actualFile = urls;\n        };\n\n        $(function() {\n\n            MainWidgetService.handleGoTop();\n\n            var intervalHandler = setInterval(function() {\n                if( $('.navbar-collapse li a.navbarLink').size() > 0 ) {\n                    if ($(window).width() < 768) {\n                        $('.navbar-collapse li a.navbarLink').attr('data-toggle', 'collapse').attr('data-target', '#navbar');\n                    } else {\n                        $('.navbar-collapse li a.navbarLink').attr('data-toggle', false).attr('data-target', false);\n                    }\n                    clearInterval(intervalHandler);\n                }\n            }, 500);\n\n        });\n\n        if($rootScope.logged == true){\n            DpCartsDataService.get($rootScope.user.userID).then(function (result){\n                if(result[0])\n                    $rootScope.orderID = result[0].orderID;\n                $rootScope.$emit('cartRequired');\n            });\n        }\n\n    });","start":4,"end":100,"route":null,"symbol":"index.MainCtrl","metadata":{"calls_functions":["angular.module","MainWidgetService.includeTemplateVariables","MainWidgetService.getMegaMenu","MenuTypesService.getAllTypes","_.each","$rootScope.$on","MainWidgetService.getCreditLimitInfo","MainWidgetService.getForms","$","_.isArray","MainWidgetService.handleGoTop","setInterval","clearInterval","DpCartsDataService.get","$rootScope.$emit"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":11,"eventfulness":{"watchers":0,"emits":1,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/NewsCtrl.js:7-28:controller:index.NewsCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/NewsCtrl.js","module":null,"name":"index.NewsCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","NewsService","$state"],"antiPatterns":[],"text":"    .controller('index.NewsCtrl', function( $scope, NewsService, $state) {\n\n        $scope.articles = [];\n\n        function init(){\n\n          getNews();\n\n        }\n\n\n        function getNews() {\n            NewsService.getRss().then( function(data) {\n                if( data.items ) {\n                    $scope.articles = data.items;\n                }\n            });\n        }\n\n        init();\n\n    });","start":7,"end":28,"route":null,"symbol":"index.NewsCtrl","metadata":{"calls_functions":["angular.module","getNews","NewsService.getRss","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/PassForgetCtrl.js:7-30:controller:index.PassForgetCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/PassForgetCtrl.js","module":null,"name":"index.PassForgetCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","AuthService","Notification","UserService"],"antiPatterns":[],"text":".controller('index.PassForgetCtrl', function($rootScope, $scope, $state, $filter, AuthService, Notification, UserService) {\n\n    function init(){\n\n\n    }\n\n    init();\n\n    $scope.passForget = function() {\n\n        UserService.passForget($scope.email).then( function(data) {\n            if( data.response ) {\n                Notification.success($filter('translate')(\"new_password_sent\"));\n                $state.go('login');\n            } else {\n                Notification.error($filter('translate')(\"error\"));\n            }\n        }, function(data) {\n            Notification.error($filter('translate')(\"error\"));\n        });\n\n    }\n});","start":7,"end":30,"route":null,"symbol":"index.PassForgetCtrl","metadata":{"calls_functions":["angular.module","init","UserService.passForget","Notification.success","$filter","$state.go","Notification.error"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":2,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/RegisterCtrl.js:2-167:controller:index.RegisterCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/RegisterCtrl.js","module":null,"name":"index.RegisterCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","$state","$filter","UserService","AuthService","Notification","CountriesService","RegisterWidget","LoginWidgetService","SocialWidgetService","SettingService","$cookieStore","vcRecaptchaService","MainWidgetService"],"antiPatterns":[],"text":"    .controller('index.RegisterCtrl', function ($scope, $rootScope, $state, $filter, UserService,\n                                                AuthService, Notification, CountriesService, RegisterWidget,\n                                                LoginWidgetService, SocialWidgetService, SettingService,\n                                                $cookieStore, vcRecaptchaService, MainWidgetService) {\n\n        MainWidgetService.includeTemplateVariables($scope, 'register');\n\n        $scope.form = {};\n        $scope.countries = [];\n        $scope.onlyForCompanies = false;\n        $scope._ = _;\n\n        $scope.response = null;\n        $scope.widgetId = null;\n\n        $scope.setResponse = function (response) {\n            console.info('Captcha response available');\n            $scope.response = response;\n        };\n        $scope.setWidgetId = function (widgetId) {\n            console.info('Created captcha widget ID: %s', widgetId);\n            $scope.widgetId = widgetId;\n        };\n        $scope.cbExpiration = function () {\n            console.info('Captcha expired. Resetting response object');\n            vcRecaptchaService.reload($scope.widgetId);\n            $scope.response = null;\n        };\n\n        var Setting = new SettingService('additionalSettings');\n\n        function init() {\n\n            var currentLangCode;\n            if( $rootScope.currentLang ) {\n                currentLangCode = $rootScope.currentLang.code;\n            } else {\n                currentLangCode = $rootScope.defaultLangCode;\n            }\n\n            CountriesService.getAll().then(function (dataCountries) {\n                _.each(dataCountries, function(one) {\n\n                    if( currentLangCode ) {\n                        if( one['name_' + currentLangCode] !== undefined ) {\n                            if( currentLangCode.toUpperCase() === one.code ) {\n                                $scope.form.ad_countryCode = one.code;\n                                $scope.form.del_countryCode = one.code;\n                                $scope.form.fv_countryCode = one.code;\n\n                                $scope.form.ad_areaCode = one.areaCode;\n                                $scope.form.del_areaCode = one.areaCode;\n                            }\n                            $scope.countries.push(one);\n                        }\n                    } else {\n                        $scope.countries.push(one);\n                    }\n\n                });\n            });\n\n            Setting.getPublicSettings().then(function(settingData) {\n                if( settingData.onlyForCompanies ) {\n                    $scope.onlyForCompanies = settingData.onlyForCompanies.value;\n                }\n                if (settingData.captchaPublicKey) {\n                    $scope.model = {\n                        key: settingData.captchaPublicKey.value\n                    };\n                }\n            });\n        }\n\n        init();\n\n        $scope.$watch('countries', function (countries) {\n\n            if( _.isEmpty(countries) ) {\n                return;\n            }\n\n            RegisterWidget.initCodeRegister($scope, countries);\n\n        });\n\n        $scope.selectCountry = function( prefix ) {\n            RegisterWidget.selectCountryRegister($scope, prefix);\n        };\n\n        $scope.addUser = function () {\n\n            $scope.form.captchaResponse = $scope.response;\n\n            if ($scope.form.terms !== true || $scope.form.data_protection !== true) {\n                Notification.error($filter('translate')('accept_terms'));\n            } else {\n                UserService.userRegister($scope.form).then(function (data) {\n                    Notification.success($filter('translate')('user_has_been_added'));\n                    var credentials = {};\n                    credentials.password = $scope.form.pass;\n                    credentials.email = $scope.form.user;\n\n                    LoginWidgetService.login(credentials);\n\n                }, function (data) {\n                    if( data.info ) {\n                        Notification.error($filter('translate')(data.info));\n                    } else {\n                        Notification.error($filter('translate')('unexpected_error'));\n                    }\n                });\n            }\n\n        };\n\n        $scope.loginFacebook = function () {\n\n            SocialWidgetService.loginFacebook();\n\n        };\n\n        $scope.loginGoogle = function () {\n\n            SocialWidgetService.loginGoogle();\n\n        };\n\n        $scope.login = function (credentials) {\n            var backTo = {};\n            if( $rootScope.startPoint ) {\n                backTo.state = $rootScope.startPoint.state;\n                backTo.params = $rootScope.startPoint.params;\n            }\n            LoginWidgetService.login(credentials, backTo);\n        };\n\n        $scope.copyFromUserForm = function() {\n            $scope.form.fv_street = $scope.form.ad_street;\n            $scope.form.fv_house = $scope.form.ad_house;\n            $scope.form.fv_apartment = $scope.form.ad_apartment;\n            $scope.form.fv_zipcode = $scope.form.ad_zipcode;\n            $scope.form.fv_city = $scope.form.ad_city;\n            $scope.form.fv_countryCode = $scope.form.ad_countryCode;\n            $scope.form.fv_areaCode = $scope.form.ad_areaCode;\n            $scope.form.fv_telephone = $scope.form.ad_telephone;\n        };\n\n        $scope.copyFromDeliveryForm = function() {\n            $scope.form.fv_companyName = $scope.form.del_companyName;\n            $scope.form.fv_street = $scope.form.del_street;\n            $scope.form.fv_house = $scope.form.del_house;\n            $scope.form.fv_apartment = $scope.form.del_apartment;\n            $scope.form.fv_zipcode = $scope.form.del_zipcode;\n            $scope.form.fv_city = $scope.form.del_city;\n            $scope.form.fv_countryCode = $scope.form.del_countryCode;\n            $scope.form.fv_areaCode = $scope.form.del_areaCode;\n            $scope.form.fv_telephone = $scope.form.del_telephone;\n        };\n\n        $scope.isCountryCode = function () {\n            var country = _.find($scope.countries, {code: $scope.form.ad_countryCode});\n            return country && String(country.areaCode).length > 0\n        }\n\n    });","start":2,"end":167,"route":null,"symbol":"index.RegisterCtrl","metadata":{"calls_functions":["angular.module","MainWidgetService.includeTemplateVariables","console.info","vcRecaptchaService.reload","CountriesService.getAll","_.each","currentLangCode.toUpperCase","$scope.countries.push","Setting.getPublicSettings","init","$scope.$watch","_.isEmpty","RegisterWidget.initCodeRegister","RegisterWidget.selectCountryRegister","Notification.error","$filter","UserService.userRegister","Notification.success","LoginWidgetService.login","SocialWidgetService.loginFacebook","SocialWidgetService.loginGoogle","_.find","String"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":13,"eventfulness":{"watchers":1,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/SearchCtrl.js:7-24:controller:index.SearchCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/SearchCtrl.js","module":null,"name":"index.SearchCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$rootScope","$scope","$state","$filter","Notification","PsTypeService","$stateParams"],"antiPatterns":[],"text":"    .controller('index.SearchCtrl', function($rootScope, $scope, $state, $filter,\n                                             Notification, PsTypeService, $stateParams) {\n\n        var searchText = $stateParams.text;\n        $scope.results = [];\n        $scope.searchText = searchText;\n\n        function init(){\n\n            PsTypeService.search(searchText).then( function(data) {\n                $scope.results = data;\n            });\n\n        }\n\n        init();\n\n    });","start":7,"end":24,"route":null,"symbol":"index.SearchCtrl","metadata":{"calls_functions":["angular.module","PsTypeService.search","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":1,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/SitemapCtrl.js:7-91:controller:index.SitemapCtrl","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/SitemapCtrl.js","module":null,"name":"index.SitemapCtrl","kind":"component","nodeType":"Function","dependenciesDI":["$scope","$rootScope","routes","DpCategoryService","$q"],"antiPatterns":[],"text":"    .controller('index.SitemapCtrl', function( $scope, $rootScope, routes, DpCategoryService, $q ) {\n\n        $scope.sites = [];\n        $scope.menuItems = [];\n\n        var parentAvailable = ['sitemap', 'cart','attribute-filters'];\n\n        $rootScope.$watch('menuItems', function( data ) {\n            if( data !== undefined ) {\n                $scope.menuItems = data;\n            }\n        });\n\n        function init() {\n\n            routes.getAll().then( function(routeData) {\n                if( routeData.data ) {\n                    _.each(routeData.data, function(one, index) {\n                        if( one.route.parent === 'home' &&\n                            one.route.abstract === 0 &&\n                            parentAvailable.indexOf(one.route.state) > -1 ) {\n                            $scope.sites.push(one.route);\n                        } else if( one.route.parent === 'staticPages' ) {\n                            $scope.sites.push(one.route);\n                        }\n                    });\n\n                    getGroups().then( function(groupsData) {\n\n                        //$scope.sites.groups = groupsData;\n\n                        getItems().then(function (itemsData) {\n\n                            _.each(itemsData, function (parentCategory) {\n\n                                $scope.sites.push({\n                                    state: 'category',\n                                    langs: parentCategory.langs,\n                                    children: parentCategory.childs,\n                                    //groups: groupsData[parentCategory.ID],\n                                    types: parentCategory.types\n                                });\n\n\n                                _.each(parentCategory.childs, function(child) {\n\n                                    //child.groups =  groupsData[child.ID];\n\n                                });\n\n                            });\n                        });\n                    });\n\n                }\n            });\n\n        }\n\n        function getItems() {\n            var def = $q.defer();\n\n            var timeHandler = setTimeout(function(){\n                if( $scope.menuItems !== undefined ) {\n                    def.resolve($scope.menuItems);\n                    clearTimeout(timeHandler);\n                }\n            }, 1000);\n\n            return def.promise;\n        }\n\n        function getGroups() {\n            var def = $q.defer();\n\n            DpCategoryService.getGroups().then(function(data) {\n                def.resolve(data);\n            });\n\n            return def.promise;\n        }\n\n        init();\n\n    });","start":7,"end":91,"route":null,"symbol":"index.SitemapCtrl","metadata":{"calls_functions":["angular.module","$rootScope.$watch","routes.getAll","_.each","parentAvailable.indexOf","$scope.sites.push","getGroups","getItems","$q.defer","setTimeout","def.resolve","clearTimeout","DpCategoryService.getGroups","init"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":8,"eventfulness":{"watchers":1,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
{"id":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/WCGA.js:2-46:directive:wcga","filePath":"/home/grzegorz/cloud/Dockerized/feniks/frontend-master/app/src/index/WCGA.js","module":null,"name":"wcga","kind":"directive","nodeType":"Function","dependenciesDI":[],"antiPatterns":[],"text":"    .directive('wcga', function () {\n        return {\n            restrict: 'E',\n            scope: {},\n            replace: true,\n            templateUrl: 'src/index/templates/wcga.html',\n            controller: function ($scope, localStorageService, SettingService) {\n\n                var Setting = new SettingService('additionalSettings');\n                Setting.getPublicSettings().then(function (settingsData) {\n                    $scope.wcgaUsed = settingsData.wcgaUsed.value;\n                    if($scope.wcgaUsed){\n                        const lsKeys = localStorageService.keys()\n\n                        if (lsKeys.indexOf('wcgaKontrast') > -1) {\n                            $('body').addClass('wcga-contrast')\n                        }\n\n                        if (lsKeys.indexOf('wcgaFonts') > -1) {\n                            $('body').addClass('wcga-fonts')\n                        }\n                    }\n                });\n\n                $scope.changeContrast = () => {\n                    $('body').toggleClass('wcga-contrast');\n                    if ($('body').hasClass('wcga-contrast')) {\n                        localStorageService.set('wcgaKontrast', 1)\n                    } else {\n                        localStorageService.remove('wcgaKontrast')\n                    }\n                }\n\n                $scope.toggleFontSize = () => {\n                    $('body').toggleClass('wcga-fonts')\n                    if ($('body').hasClass('wcga-fonts')) {\n                        localStorageService.set('wcgaFonts', 1)\n                    } else {\n                        localStorageService.remove('wcgaFonts')\n                    }\n                }\n\n            }\n        }\n    })","start":2,"end":46,"route":null,"symbol":"wcga","metadata":{"calls_functions":["angular.module","Setting.getPublicSettings","localStorageService.keys","lsKeys.indexOf","$","localStorageService.set","localStorageService.remove"],"api_endpoints":[],"ui_routes":[],"cyclomatic_complexity":6,"eventfulness":{"watchers":0,"emits":0,"broadcasts":0},"summary_en":null,"business_tags":[]}}
