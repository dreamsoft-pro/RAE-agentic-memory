#!/bin/bash

echo ""
echo "üîç Sprawdzanie GitHub Actions przed commitem..."
echo ""

# Sprawd≈∫ Actions
if [ -f .claude/scripts/check-actions.sh ]; then
    bash .claude/scripts/check-actions.sh
    ACTIONS_STATUS=$?
    
    if [ $ACTIONS_STATUS -eq 1 ]; then
        echo ""
        echo "‚ö†Ô∏è  UWAGA: Ostatni GitHub Actions FAILED!"
        echo "Czy na pewno chcesz commitowaƒá? (y/n)"
        read -r response
        if [[ ! "$response" =~ ^[Yy]$ ]]; then
            echo "‚ùå Commit anulowany"
            exit 1
        fi
    fi
fi

# Lint check
echo ""
echo "üîç Uruchamiam linter..."
npm run lint:fix 2>/dev/null || echo "‚ö†Ô∏è  Brak lintera w projekcie"

# Test check
echo ""
echo "üß™ Uruchamiam testy..."
npm test 2>/dev/null || echo "‚ö†Ô∏è  Brak test√≥w lub testy nieudane"

echo ""
echo "‚úÖ Pre-commit checks zako≈Ñczone!"
echo ""